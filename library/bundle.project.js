require=(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({"Alert":[function(require,module,exports){
"use strict";
cc._RFpush(module, '0e956ZSwkNHppzQ8CKxUef7', 'Alert');
// js\common\Alert.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        text: cc.RichText
    },

    /**
     * msg: 显示的内容
     * sureEvent: 确定按钮回调函数，没有传undefined或者null
     * cancelEvent: 返回按钮回调函数，没有传undefined或者null
     * suerParameter: 确定按钮回调函数参数
     * cancelParameter: 返回按钮回调函数参数
     */
    initAlert: function initAlert(msg, sureEvent, cancelEvent, suerParameter, cancelParameter) {
        this.text.string = msg;
        this.sureEvent = sureEvent;
        this.cancelEvent = cancelEvent;
        this.suerParameter = suerParameter;
        this.cancelParameter = cancelParameter;
    },

    sureClickEvent: function sureClickEvent() {
        if (this.sureEvent) {
            this.sureEvent(this.suerParameter);
        }
        this.node.destroy();
    },

    cancelClickEvnet: function cancelClickEvnet() {
        cc.log('cancelClickEvnet');
        if (this.cancelEvent) {
            this.cancelEvent(this.cancelParameter);
        }
        this.node.destroy();
    }
});

cc._RFpop();
},{}],"BankOrders":[function(require,module,exports){
"use strict";
cc._RFpush(module, '582d8LDSRxNo4wg0KNZXGe+', 'BankOrders');
// js\bank\BankOrders.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    //加载钱庄场景
    back: function back() {
        cc.director.loadScene('bank');
    },

    // use this for initialization
    onLoad: function onLoad() {}

});

cc._RFpop();
},{}],"Bank":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'b1a946mxvhBFbk/e+hnN4bE', 'Bank');
// js\bank\Bank.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        money_label: cc.Label
    },

    // 返回上一场景
    back: function back() {
        returnLast();
    },

    // 加载 银两取款 场景
    loadGetSilverScene: function loadGetSilverScene() {
        loadingScene('getSilver', 'bank');
    },

    // 加载 银两存款 场景
    loadSaveSilverScene: function loadSaveSilverScene() {
        loadingScene('saveSilver', 'bank');
    },

    // 加载 金砖取款 场景
    loadGetGoldScene: function loadGetGoldScene() {
        loadingScene('getGold', 'bank');
    },

    // 加载 金砖存款 场景
    loadSaveGoldScene: function loadSaveGoldScene() {
        loadingScene('saveGold', 'bank');
    },

    // 加载 求购金砖 场景
    loadBuyGoldScene: function loadBuyGoldScene() {
        loadingScene('buyGold', 'bank');
    },

    // 加载 出售金砖 场景
    loadSellGoldScene: function loadSellGoldScene() {
        loadingScene('sellGold', 'bank');
    },

    // 加载 订单记录 场景
    loadOrdersScene: function loadOrdersScene() {
        loadingScene('bankOrders', 'bank');
    },

    // 加载 金砖充值 场景
    loadRechargeGoldScene: function loadRechargeGoldScene() {
        loadingScene('rechargeGold', 'bank');
    },

    // 加载 查看金券 场景
    loadLookOverGoldCertificateScene: function loadLookOverGoldCertificateScene() {
        loadingScene('lookOverGoldCertificate', 'bank');
    },

    // 加载 金券充值 场景
    loadRechargeGoldCertificateScene: function loadRechargeGoldCertificateScene() {
        loadingScene('rechargeGoldCertificate', 'bank');
    },

    // use this for initialization
    onLoad: function onLoad() {
        var self = this;
        ajaxData(HxsgUrl.bankUrl, null, function (msg) {
            var money = msg.result; //拿到金银数据
            //存入全局变量
            Bank.bankGold = money.money.jin;
            Bank.bankSilver = money.money.yin;
            Bank.playerGold = money.role.jin;
            Bank.playerSilver = money.role.yin;

            self.money_label.string = "您目前有" + Bank.playerSilver + "两" + Bank.playerGold + "金砖";
        });
    }

});

cc._RFpop();
},{}],"BaoshiDetial":[function(require,module,exports){
"use strict";
cc._RFpush(module, '5e6ffxDCHtGZ6E9EQ/cX+cZ', 'BaoshiDetial');
// js\wupin\baoshi\BaoshiDetial.js

'use strict';

var self;
cc.Class({
    extends: cc.Component,

    properties: {
        titleLabel: cc.Label,
        nameLabel: cc.Label,
        levelLabel: cc.Label,
        xiaoguoLabel: cc.Label,
        jieshaoLabel: cc.Label,
        photo: cc.Sprite
    },

    // use self for initialization
    onLoad: function onLoad() {
        loadCommomScence();
        self = this;
        self.initDetail();
        //curItemData
        ajaxData(HxsgUrl.baoshiItemUrl, { 'id': '315' }, self.initDetail);
    },

    initDetail: function initDetail(data) {
        if (data === undefined || data === null) {
            self.titleLabel.string = '';
            self.nameLabel.string = '';
            self.levelLabel.string = '';
            self.xiaoguoLabel.string = '';
            self.jieshaoLabel.string = '';
            self.photo.spriteFrame = null;
        } else {
            var msg = data.msg;
            self.titleLabel.string = msg.zwName;
            self.nameLabel.string = msg.zwName;
            self.levelLabel.string = msg.zwLevel;
            self.xiaoguoLabel.string = msg.zwXiaoGuo;
            self.jieshaoLabel.string = msg.zwMiaoShu;
            if (msg.zwUrl) {
                cc.loader.loadRes(msg.zwUrl, cc.SpriteFrame, function (err, tex) {
                    if (!err) {
                        self.photo.spriteFrame = tex;
                    }
                });
            }
            //Label因为内容修改height发生改变时，layout组件不会自动更新，可使用对组件所在节点height进行设置激活layout组件自动更新
            self.nameLabel.node.parent.height += 1;
        }
    },

    backEvent: function backEvent() {
        curItemData = null;
        returnLastScene(HxsgScenes.baoshi);
    }

    // called every frame, uncomment self function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"BuyGold":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'a0d30G6o9dK+bQzYA9c1pQG', 'BuyGold');
// js\bank\BuyGold.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    //加载钱庄场景
    back: function back() {
        cc.director.loadScene('bank');
    },

    // use this for initialization
    onLoad: function onLoad() {}

});

cc._RFpop();
},{}],"ChatButtonEvent":[function(require,module,exports){
"use strict";
cc._RFpush(module, '9d2f3RycMZJlq/bisnvOFyT', 'ChatButtonEvent');
// js\index\IndexChat\ChatButtonEvent.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        chatMng: cc.Node,
        speakPrefab: cc.Prefab
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.chatMng = this.chatMng.getComponent('ChatManager');
        this.canvas = cc.find('Canvas');
    },

    /**
     * 返回上一场景
     */
    backEvent: function backEvent() {
        var self = this;
        //返回
        cc.log('返回');
        returnLastScene(HxsgScenes.indexchat);
    },

    refreshEvent: function refreshEvent() {
        //刷新
        cc.log('刷新');
        this.chatMng.updataMessageData();
    },

    speakEvent: function speakEvent() {
        if (curChannel === 3) {
            cc.log('世界频道禁止发言');
            return; //世界频道禁止发言
        } else if (curChannel === 1) {
            //TODO:门派验证
            cc.log('门派系统还未开放');
        }
        //发言
        cc.log('发言');
        var speak = cc.instantiate(this.speakPrefab);
        speak.x = 0;
        speak.y = 0;
        this.canvas.addChild(speak);
    },

    /**
     * 进入聊天场景
     */
    viewClickEvent: function viewClickEvent() {
        cc.log('加载聊天页面');
        loadScene(HxsgScenes.indexchat, HxsgScenes.index);
    },

    hotkeyEvent: function hotkeyEvent() {
        cc.log('快捷键');
        //TODO:显示快捷键面板
    }

});

cc._RFpop();
},{}],"ChatLabelEvent":[function(require,module,exports){
"use strict";
cc._RFpush(module, '8599aZE08pMmqKifLuvtCR7', 'ChatLabelEvent');
// js\index\IndexChat\ChatLabelEvent.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        data: {
            default: null,
            visible: false
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        // this.richText = this.node.getComponent(cc.RichText);
    },

    /**
     * 聊天窗点击姓名的点击事件
     */
    clickNameEvent: function clickNameEvent() {
        cc.log('click id = ' + this.data);
        roleMsg.id = this.data.roleid;
        loadingScene(HxsgScenes.friendInfo, HxsgScenes.index);

        //TODO:点击事件
    },

    setMsg: function setMsg(data) {
        this.data = data;
        var time = this.dateToTime(data.data);
        this.node.getComponent(cc.RichText).string = this.buildRichText(time, data.rolename, data.message);
    },

    /**
     * 构造image的富文本字符串
     */
    richTextImage: function richTextImage(img) {
        return '<img src=\"' + img + '\"/>';
    },

    /**
     * 构造富文本内容
     */
    buildRichText: function buildRichText(time, name, msg) {
        var richText = time + ' <color=#FFFF00 click="clickNameEvent">' + name + '</c>:' + msg;
        // cc.log(name + 'richText = ' + richText);
        return richText;
    },

    /**
     * 日期格式转换-->小时：分钟
     */
    dateToTime: function dateToTime(date) {
        //p[i].data
        var d = new Date(date);
        var hh = d.getHours();
        var mm = d.getMinutes();
        if (mm < 10) {
            mm = "0" + mm;
        }
        if (hh < 10) {
            hh = "0" + hh;
        }
        var times = hh + ":" + mm;
        return times;
    }
});

cc._RFpop();
},{}],"ChatManager":[function(require,module,exports){
"use strict";
cc._RFpush(module, '7dee0GAIp9ABJ95V3fLoTA8', 'ChatManager');
// js\index\IndexChat\ChatManager.js

"use strict";

//当前频道下标：0、区；1、派；2、商；3、世，
//注意：与num值不同，频道channel是以下标0开始
window.curChannel = 2;
var self;
cc.Class({
    extends: cc.Component,

    properties: {
        chatPreab: cc.Prefab,
        content: cc.Node,
        tipColor: cc.Color, //新消息标识颜色/当前显示聊天页面的标题背景颜色
        btnbg: cc.Node,
        btnList: {
            default: [],
            type: cc.Button
        },
        labelList: {
            default: [],
            type: cc.Label
        },
        thisChannel: -1, //保存本实例的频道，用于与全局频道值比较
        dataList: [], //保存获取的聊天数据
        itemList: [] },

    // use this for initialization
    onLoad: function onLoad() {
        self = this;
        self.updataMessageData();
        SocketEvents.updataChat = self.updateChannel;

        this.enemyPool = new cc.NodePool();
        var initCount = 20;
        for (var i = 0; i < initCount; ++i) {
            var enemy = cc.instantiate(this.chatPreab); // 创建节点
            this.enemyPool.put(enemy); // 通过 putInPool 接口放入对象池
        }
        // var socket = new SocketHxsg('ddd');
        // socket.initWS();
    },

    onDestroy: function onDestroy() {
        SocketEvents.updataChat = null;
    },

    test: function test() {
        var data = {
            "id": 1198,
            "roleid": 1001, //游戏角色IDD
            "rolename": "awdawd", //角色名
            "message": "你是个好人！ <img src=\"f000\"/>", //信息
            "data": "Oct 10, 2016 2:00:12 PM" //时间
        };
        for (var i = 0; i < 3; i++) {
            this.createItem(data);
        }
    },

    /**
     * 获取/更新聊天数据
     */
    updataMessageData: function updataMessageData() {

        ajaxData(HxsgUrl.chatUrl, null, function (msg) {
            var totalMsg = msg.msg;
            for (var i = 0; i < totalMsg.length; i++) {
                var num = totalMsg[i][0];
                var keyMsg = totalMsg[i][1];
                self.dataList[num - 1] = keyMsg;
            }
            for (var i = 0; i < 20; i++) {
                var item = cc.instantiate(self.chatPreab);
                item.name = 'chat_' + i;
                self.content.addChild(item);
            }
            self.initChannel();
        });

        // $.ajax({
        //     type: 'GET',
        //     // url: "http://119.29.234.184:8080/hxsg/cocos2dIndex/chatMsg",//测试链接
        //     url: HxsgUrl.chatUrl,
        //     dataType: 'jsonp',
        //     jsonp: "jsonpCallback",
        //     success: function (msg) {
        //         //TODO:解析数据
        //         var totalMsg = msg.msg;
        //         for (var i = 0; i < totalMsg.length; i++) {
        //             var num = totalMsg[i][0];
        //             var keyMsg = totalMsg[i][1];
        //             self.dataList[num - 1] = keyMsg;
        //         }

        //         self.initChannel();
        //     },
        //     error: function () {
        //         cc.log('获取聊天信息数据失败');
        //     }
        // });
    },

    //--------------------聊天界面窗口管理
    /**
     * 初始化
     */
    initChannel: function initChannel() {
        //1、区；2、派；3、商；4、世
        //默认显示商
        // this.clearChat();
        for (var i = 0; i < 4; i++) {
            //动态绑定点击事件
            this.channelEvent(i);
        }
        this.changeChannel();
    },

    /**
     * 切换频道
     */
    changeChannel: function changeChannel() {
        //设置新的频道，背景移动到新频道下
        if (this.thisChannel !== curChannel) {
            this.updateBtnBgColor(curChannel);
            this.thisChannel = curChannel;
        }
        self.createItem();
        // this.clearChat();


        // self.content.addChild(item);
    },

    /**
     * 更新频道背景颜色
     * 频道
     * 是否当前频道
     */
    updateBtnBgColor: function updateBtnBgColor() {
        //移动背景
        var seq = cc.sequence(cc.moveTo(0.2, cc.p(this.btnList[curChannel].node.x, 0)).easing(cc.easeCubicActionOut(1)));
        this.btnbg.runAction(seq);
    },

    /**
     * 更新拼到文字颜色
     * 频道
     * 是否当前频道
     */
    updateBtnTextColor: function updateBtnTextColor(channel, isCurrent) {
        this.labelList[channel].node.color = isCurrent ? cc.Color.WHITE : this.tipColor;
    },

    /**
     * 注册按钮点击事件
     */
    channelEvent: function channelEvent(i) {
        var self = this;
        this.btnList[i].node.on(cc.Node.EventType.TOUCH_END, function (event) {
            if (curChannel === i) return;
            curChannel = i;
            self.labelList[i].node.color = cc.Color.WHITE;
            self.changeChannel();
            cc.log('click ' + curChannel);
        });
    },

    updateChannel: function updateChannel(channel, keyMsg) {
        cc.log(keyMsg);
        if (curChannel === channel) {
            self.dataList[channel] = keyMsg;
            self.changeChannel(channel);
        } else {
            self.dataList[channel] = keyMsg;
            self.updateBtnTextColor(channel, false);
        }
    },

    //--------------------

    /**
     * 创建聊天item
     */
    createItem: function createItem() {
        var items = self.content.children;
        cc.log(self.content.childrenCount);
        self.clearChat();
        for (var i = 0; i < 20; i++) {
            var data = this.dataList[curChannel][i];
            //data=eval("("+data+")");
            if (data != "" && data != null && typeof data != 'undefined') {
                var item = items[i];
                //自适应分辨率设置宽度，留出两边的空白,左右各20
                var richText = item.getComponent(cc.RichText);
                richText.maxWidth = self.content.width - 40;
                var itemComp = item.getComponent('ChatLabelEvent');
                itemComp.setMsg(data);
            } else {
                break;
            }
        }

        // var self = this;

        // // var item = cc.instantiate(self.chatPreab);
        // var item = this.enemyPool.get();
        // item.name = 'chat_' + data.id;
        // //自适应分辨率设置宽度，留出两边的空白,左右各20
        // var richText = item.getComponent(cc.RichText);
        // richText.maxWidth = self.content.width - 40;

        // var itemComp = item.getComponent('ChatLabelEvent');
        // itemComp.setMsg(data);

        // self.content.addChild(item);
        // self.itemList.push(item);
    },

    /**
     *  清空聊天列表
     */
    clearChat: function clearChat() {
        // this.content.removeAllChildren();
        for (var i = 0; i < this.itemList.length; i++) {
            this.enemyPool.put(this.itemList[i]);
            // this.itemList[i].destroy();
        }
        this.itemList = [];
    }
});

cc._RFpop();
},{}],"Emoji":[function(require,module,exports){
"use strict";
cc._RFpush(module, '4919fB9L1REtovXCh2WmZ89', 'Emoji');
// js\index\emoji\Emoji.js

"use strict";

var emojis = ["f001", "f002", "f003", "f004", "f005", "f006", "f007", "f008", "f009", "f010", "f011", "f012", "f013", "f014", "f015", "f016", "f017", "f018", "f019", "f020", "f021", "f022", "f023"];

cc._RFpop();
},{}],"FujiangConfig":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'b59bcdQ+jBKSrnaBT5Nn/H9', 'FujiangConfig');
// js\index\Fujiang\FujiangConfig.js

'use strict';

var self;
cc.Class({
    extends: cc.Component,

    properties: {
        content: cc.Node,
        fujiangPrefab: cc.Prefab,
        getBtnPrefab: cc.Prefab
    },

    // use this for initialization
    onLoad: function onLoad() {
        self = this;
        self.clearScrollview();
        ajaxData(HxsgUrl.fujiangConfigUrl, null, self.initFujiangConfig);
    },

    initFujiangConfig: function initFujiangConfig(data) {
        var msg = data.msg;
        // var msg = self.testInfo();
        for (var i = 0; i < msg.length; i++) {
            var item = cc.instantiate(self.fujiangPrefab);
            item.name = 'fujiangPrefab_' + i;
            item.getChildByName('fujiangLabel').getComponent('FujiangItem').init(i, msg[i]);
            self.content.addChild(item);
        }
        var getBtn = cc.instantiate(self.getBtnPrefab);
        getBtn.name = 'getBtnPrefab';
        getBtn.on(cc.Node.EventType.TOUCH_END, self.getBtnEvent, self);
        self.content.addChild(getBtn);
        self.content.height = 20 + self.content.height;
    },

    getBtnEvent: function getBtnEvent() {
        cc.log('获取能学技能的历史副将');
    },

    backEvent: function backEvent() {
        // cc.director.loadScene(HxsgScenes.index);
        returnLastScene(HxsgScenes.fujiang);
    },

    clearScrollview: function clearScrollview() {
        this.content.removeAllChildren();
    }

    // testInfo: function(){
    //     var msg = {
    //         "msg": [
    //             {
    //                 "fuId": 10512,
    //                 "name": "(1级)张邈",
    //                 "roleId": 1000,
    //                 "status": "休息"
    //             },
    //             {
    //                 "fuId": 10513,
    //                 "name": "(1级)吕布",
    //                 "roleId": 1000,
    //                 "status": "休息"
    //             },
    //             {
    //                 "fuId": 10610,
    //                 "name": "(1级)于 禁",
    //                 "roleId": 1000,
    //                 "status": "战斗"
    //             },
    //             {
    //                 "fuId": 10397,
    //                 "name": "(41级)吕布",
    //                 "roleId": 1000,
    //                 "status": "战斗"
    //             },
    //             {
    //                 "fuId": 10402,
    //                 "name": "(44级)于 禁",
    //                 "roleId": 1000,
    //                 "status": "战斗"
    //             },
    //             {
    //                 "fuId": 10411,
    //                 "name": "(1级)刘氏",
    //                 "roleId": 1000,
    //                 "status": "战斗"
    //             },
    //             {
    //                 "fuId": 10412,
    //                 "name": "(48级)张邈",
    //                 "roleId": 1000,
    //                 "status": "战斗"
    //             },
    //             {
    //                 "fuId": 10670,
    //                 "name": "(12级)潘璋",
    //                 "roleId": 1000,
    //                 "status": "战斗"
    //             },
    //             {
    //                 "fuId": 10671,
    //                 "name": "(1级)司马昭",
    //                 "roleId": 1000,
    //                 "status": "战斗"
    //             },
    //             {
    //                 "fuId": 10672,
    //                 "name": "(1级)潘璋",
    //                 "roleId": 1000,
    //                 "status": "战斗"
    //             },
    //             {
    //                 "fuId": 10673,
    //                 "name": "(1级)刘氏",
    //                 "roleId": 1000,
    //                 "status": "战斗"
    //             }
    //         ]
    //     }
    //     return msg;
    // }
});

cc._RFpop();
},{}],"FujiangItem":[function(require,module,exports){
"use strict";
cc._RFpush(module, '5cf68SIMfpJ+LXifohwMZs7', 'FujiangItem');
// js\index\Fujiang\FujiangItem.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        bgSprite: cc.Sprite,
        fujiangLabel: cc.RichText,
        zhanBtn: cc.Node,
        xiuBtn: cc.Node
    },

    // use this for initialization
    onLoad: function onLoad() {},

    init: function init(index, data) {
        this.spriteToggle(index);

        this.data = data;

        var richString = '<color=#FFFFFF click="richTextEvent">' + data.name + '</color>';
        this.fujiangLabel.string = richString;
        this.zhanBtn.on("click", function (event) {
            ajaxUtils(HxsgUrl.setFjState, { 'id': this.data.fuId }, function (msg) {
                showAlert(msg, function () {
                    loadingScene(HxsgScenes.fujiang, HxsgScenes.index);
                }, function () {
                    loadingScene(HxsgScenes.fujiang, HxsgScenes.index);
                });
            });
        }, this);
        this.xiuBtn.on("click", function (event) {
            ajaxUtils(HxsgUrl.setFjState, { 'id': this.data.fuId }, function (msg) {
                showAlert(msg, function () {
                    loadingScene(HxsgScenes.fujiang, HxsgScenes.index);
                }, function () {
                    loadingScene(HxsgScenes.fujiang, HxsgScenes.index);
                });
            });
        }, this);

        if (data.status === '休息') {
            this.zhanBtn.active = false;
        } else if (data.status = '战斗') {

            this.xiuBtn.active = false;
        }
    },

    /**
     * index奇偶数判断，奇数关闭sprite组件，显示背景明暗相间效果
     */
    spriteToggle: function spriteToggle(index) {
        var isOdd = index % 2 === 0 ? true : false;
        this.bgSprite.enabled = isOdd;
    },

    richTextEvent: function richTextEvent() {
        cc.log(this.node.parent.name + ' 详情');
        propCheckId = this.data.fuId;
        loadScene(HxsgScenes.fjxiangqing, HxsgScenes.fujiang);
    },

    zhanBtnEvent: function zhanBtnEvent() {

        cc.log(this.node.name + ' 出战');
    },

    xiuBtnEvent: function xiuBtnEvent() {
        cc.log(this.node.parent.name + ' 休息');
    }
});

cc._RFpop();
},{}],"FujiangXiangqing":[function(require,module,exports){
"use strict";
cc._RFpush(module, '97dd9t9R8VF+IBt0jbyPS4d', 'FujiangXiangqing');
// js\index\Fujiang\FujiangXiangqing.js

'use strict';

var self;
cc.Class({
    extends: cc.Component,

    properties: {
        titleLabel: cc.Label,
        headSprite: cc.Sprite,
        nameLabel: cc.Label,
        idLabel: cc.Label,
        // zhanBtn: cc.Node,
        // xiuBtn: cc.Node,
        // zhanSet: {
        //     set: function (value) {
        //         if (value === '战斗') {
        //             this.zhanBtn.active = false;
        //         }
        //         else if (value === '休息') {
        //             this.xiuBtn = false;
        //         }
        //     }
        // },
        touxianLabel: cc.Label,
        zhiyeLabel: cc.Label,
        shengjiLabel: cc.Label,
        moqiLabel: cc.Label,
        zhongchengLabel: cc.Label,
        shuxingdianLabel: cc.Label,
        chakanBtn: cc.Node,
        fenpeiBtn: cc.Node,
        qixueLabel: cc.Label,
        jingliLabel: cc.Label,
        gongjiLabel: cc.Label,
        suduLabel: cc.Label,
        fangyuLabel: cc.Label,
        jinengLabel: cc.RichText,
        tianfuLabel: cc.Label,
        //headSprite: cc.Sprite,
        baowuMng: cc.Node
    },

    // use this for initialization
    onLoad: function onLoad() {
        loadCommomScence();
        self = this;
        var data = { 'fuId': propCheckId };
        userWuPin.wupinId = propCheckId;
        ajaxData(HxsgUrl.fujiangXiangqingUrl, data, self.init);
    },

    init: function init(data) {
        var msg = data.msg;
        self.msg = msg;
        fujiang.fjmsg = msg;
        self.titleLabel.string = msg.name;
        cc.log(msg.imgUrl);
        //网络加载图片
        cc.loader.load(txUrl + msg.imgUrl, function (error, texture) {

            self.headSprite.spriteFrame = new cc.SpriteFrame(texture);
        });
        self.nameLabel.string = msg.name;
        self.idLabel.string = msg.id;
        // self.zhanSet = msg.states;
        self.touxianLabel.string = msg.touXian;
        self.zhiyeLabel.string = msg.zhiYe;
        self.shengjiLabel.string = msg.shengJiJingYan;
        self.moqiLabel.string = msg.moQiDu;
        self.zhongchengLabel.string = msg.zhongChengDu;
        var shuxingdian = msg.keyongds;
        if (shuxingdian <= 0) {
            self.fenpeiBtn.active = false;
            shuxingdian = 0;
        } else {
            self.chakanBtn.active = false;
        }
        self.shuxingdianLabel.string = shuxingdian;
        self.qixueLabel.string = msg.qiXue1 + '/' + msg.qiXue2;
        self.jingliLabel.string = msg.jingLi1 + '/' + msg.jingLi2;
        self.gongjiLabel.string = msg.gongJi;
        self.suduLabel.string = msg.suDu;
        //self.fangyuLabel.string = msg.fangYu;
        // self.jinengLabel.string = msg.jiNeng1 ? msg.jiNeng1 : '';
        self.jinengLabel.string = "";
        if (typeof msg.jiNeng != 'undefined') {
            var jnmsg = "";
            for (var i = 0; i < msg.jiNeng.length; i++) {
                //(1级)气冲斗牛熟练度【12000】  
                jnmsg += "(" + msg.jiNeng[i].level + "级" + ")" + msg.jiNeng[i].skillname + " 熟练度:【" + msg.jiNeng[i].shuliandu + "】<br/><br/>";
            }
            self.jinengLabel.string = jnmsg;
        }
    },

    // zhanEvent: function () {
    //
    // },
    //
    // xiuEvent: function () {
    //
    // },

    yanqingEvent: function yanqingEvent() {},

    jiangshangEvent: function jiangshangEvent() {},

    chakanEvent: function chakanEvent() {
        loadingScene(HxsgScenes.propertyCheck, HxsgScenes.fjxiangqing);
    },

    fenpeiEvent: function fenpeiEvent() {
        loadingScene(HxsgScenes.propertyDeal, HxsgScenes.fjxiangqing);
    },

    nengliEvent: function nengliEvent() {},

    peiyangEvent: function peiyangEvent() {
        loadingScene(HxsgScenes.chuZhiPy, HxsgScenes.fjxiangqing);
    },

    shengpingEvent: function shengpingEvent() {},

    jieguEvent: function jieguEvent() {},

    otherEvent: function otherEvent() {},

    backEvent: function backEvent() {
        // cc.director.loadScene(HxsgScenes.fujiang);
        returnLastScene(HxsgScenes.fjxiangqing);
    }
});

cc._RFpop();
},{}],"GGDetails":[function(require,module,exports){
"use strict";
cc._RFpush(module, '66437ahwn9AXrMy0LkN8EkH', 'GGDetails');
// js\gg\GGDetails.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        title: cc.Label,
        text: cc.Label
    },

    //加载公告列表场景
    back: function back() {
        returnLast();
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.title.string = GG.title;
        this.text.string = GG.text;
    }

});

cc._RFpop();
},{}],"GGItem":[function(require,module,exports){
"use strict";
cc._RFpush(module, '83f69+nZRVMcpiup2EGXjzs', 'GGItem');
// js\gg\GGItem.js

'use strict';

var item;

cc.Class({
    extends: cc.Component,
    properties: {
        newText: cc.Label,
        title: cc.Label
    },

    //初始化设置
    init: function init(gg) {
        this.item = gg;
        this.title.string = this.item.custom1;
    },

    //加载公告详情场景
    loadGGDetails: function loadGGDetails() {
        GG.title = this.item.custom1;
        GG.text = this.item.msg;
        loadingScene('ggDetails', 'ggList');
    },

    // use this for initialization
    onLoad: function onLoad() {}
});

cc._RFpop();
},{}],"GGList":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'be706fPWbRAs7Tod659Sztt', 'GGList');
// js\gg\GGList.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        ggItem: {
            default: null,
            type: cc.Prefab,
            tooltip: "公告预制项"
        }
    },

    //返回上一场景
    back: function back() {
        returnLast();
    },

    onLoad: function onLoad() {
        var self = this;
        ajaxData(HxsgUrl.ggUrl, null, function (msg) {
            var array = msg.msg; //拿到公告数组
            var i = 0;
            for (i in array) {
                //遍历数组
                var item = cc.instantiate(self.ggItem); //实例化公告项预制
                item.getComponent('GGItem').init(array[i]); //初始化设置
                item.y -= i * 80; //设置位置
                if (i % 2 == 0) {
                    //若为双数，则显示sprite
                    item.getComponent('cc.Sprite').enabled = true;
                } else {
                    //若为单数，则禁用sprite
                    item.getComponent('cc.Sprite').enabled = false;
                }
                if (i > 5) {
                    //前6项显示“新”
                    item.getComponent('GGItem').newText.enabled = false;
                }
                self.node.addChild(item);
                self.node.height += 80;
            }
        });
    }

});

cc._RFpop();
},{}],"GetGold":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'e4358QaZm1Cv6fGYV7VI0Ad', 'GetGold');
// js\bank\GetGold.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        playerGold_label: cc.Label,
        bankGold_label: cc.Label,
        getGold_editbox: cc.EditBox
    },

    //返回钱庄场景
    back: function back() {
        returnLast();
    },

    //取款记录
    getRecord: function getRecord() {},

    //确认取款
    getConfirm: function getConfirm() {
        var self = this;
        var getDate = {
            "status": "del", //该参数有add(存款),del(取款)
            "jin": this.getGold_editbox.string };
        ajaxData(HxsgUrl.bankSGUrl, getDate, function (msg) {
            self.back();
            showAlert(msg.result);
        });
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.playerGold_label.string = "您目前有" + Bank.playerGold + "金砖";
        this.bankGold_label.string = "钱庄存款" + Bank.bankGold + "金砖";
    }

});

cc._RFpop();
},{}],"GetSilver":[function(require,module,exports){
"use strict";
cc._RFpush(module, '66c60w2DQ5MloDzk8Cuc2ex', 'GetSilver');
// js\bank\GetSilver.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        playerSilver_label: cc.Label,
        bankSilver_label: cc.Label,
        getSilver_editbox: cc.EditBox
    },

    //返回钱庄场景
    back: function back() {
        returnLast();
    },

    //取款记录
    getRecord: function getRecord() {},

    //确认取款
    getConfirm: function getConfirm() {
        var self = this;
        var getDate = {
            "status": "del", //该参数有add(存款),del(取款)
            "yin": this.getSilver_editbox.string };
        ajaxData(HxsgUrl.bankSGUrl, getDate, function (msg) {

            showAlert(msg.result, self.back());
        });
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.playerSilver_label.string = "您目前有" + Bank.playerSilver + "两";
        this.bankSilver_label.string = "钱庄存款" + Bank.bankSilver + "两";
    }

});

cc._RFpop();
},{}],"GongnengPanel":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'ffd65j2VSdCjIF5yU4rUyqJ', 'GongnengPanel');
// js\index\IndexPanel\GongnengPanel.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {},

    // use this for initialization
    onLoad: function onLoad() {},

    zhuangtaiEvent: function zhuangtaiEvent() {
        cc.log('gongneng panel 状态');
        loadScene(HxsgScenes.role, HxsgScenes.index);
    },

    wupinEvent: function wupinEvent() {
        cc.log('gongneng panel 物品');
        var scene = cc.director.getScene().name;
        loadScene(HxsgScenes.wupin, HxsgScenes.index);
    },

    fujiangEvent: function fujiangEvent() {
        cc.log('gongneng panel 副将');
        loadScene(HxsgScenes.fujiang, HxsgScenes.index);
    },

    zuduiEvent: function zuduiEvent() {
        cc.log('gongneng panel 组队');
    },

    paihangEvent: function paihangEvent() {
        cc.log('gongneng panel 排行');
    },

    haoyouEvent: function haoyouEvent() {
        cc.log('gongneng panel 好友');
        loadScene(HxsgScenes.friends, HxsgScenes.index);
    },

    youjianEvent: function youjianEvent() {
        cc.log('gongneng panel 邮件');
    },

    renwuEvent: function renwuEvent() {
        cc.log('gongneng panel 任务');
    },

    leitaiEvent: function leitaiEvent() {
        cc.log('gongneng panel 擂台');
    },

    jiaopaiEvent: function jiaopaiEvent() {
        cc.log('gongneng panel 教派');
    },

    xunlianEvent: function xunlianEvent() {
        loadingScene(HxsgScenes.xunLian, HxsgScenes.index);
        cc.log('gongneng panel 训练');
    },

    baokuEvent: function baokuEvent() {
        cc.log('gongneng panel 宝库');
    },

    gonggaoEvent: function gonggaoEvent() {
        cc.log('gongneng panel 公告');
        loadScene(HxsgScenes.ggList, HxsgScenes.index);
    },

    gonglueEvent: function gonglueEvent() {
        cc.log('gongneng panel 攻略');
    },

    dengchuEvent: function dengchuEvent() {
        cc.log('gongneng panel 登出');
    }
});

cc._RFpop();
},{}],"HistoryItem":[function(require,module,exports){
"use strict";
cc._RFpush(module, '81e1aZRNM9Aj74aJK4vD3Na', 'HistoryItem');
// js\gc\HistoryItem.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        msg: cc.Label
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.msg.string = '';
    },

    setMsg: function setMsg(msgStr) {
        this.msg.string = msgStr;
    }

});

cc._RFpop();
},{}],"HistoryManager":[function(require,module,exports){
"use strict";
cc._RFpush(module, '0d1b6qqQydIpYFON6JxEy9y', 'HistoryManager');
// js\gc\HistoryManager.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        itemPrefab: cc.Prefab,
        content: cc.Node,
        leftContent: cc.Node

    },

    // use this for initialization
    onLoad: function onLoad() {
        var self = this;
        ajaxData(HxsgUrl.historyUrl, null, function (msg) {

            var p = msg.msg;
            //alert(p);
            for (var i = 0; i < p.length; i++) {
                //s += " <p class=\"yaoping\" style='color:#FFF3AE'>第" + p[i].id + "期，开出" + p[i].num1 + "," + p[i].num2 + "," + p[i].num3 + "&nbsp;&nbsp;" + p[i].result + "</p>";
                var item = cc.instantiate(self.itemPrefab);
                self.leftContent.addChild(item);
                item.x = 0;
                item.y = -1 * i * item.height;
                item.name = 'history' + i;
                self.content.height = (i + 1) * item.height;

                item = item.getComponent('HistoryItem');
                var labelStr = "第" + p[i].id + "期，开出" + p[i].num1 + "," + p[i].num2 + "," + p[i].num3 + "\t\t" + p[i].result;
                item.setMsg(labelStr);
            }
        });
    },
    /**
    * 点击事件-->返回
    */
    backEvent: function backEvent() {
        //调用通用的返回上一场景方法
        returnLast();
    }

});

cc._RFpop();
},{}],"HotkeyBoard":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'fb22eZvDR9GJZsUgs+0Y6kI', 'HotkeyBoard');
// js\index\HotkeyBoard.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        speakPrefab: cc.Prefab
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.canvas = cc.find('Canvas');
    },

    haoyouEvent: function haoyouEvent() {
        cc.log('index hotkey 好友');
    },

    wupinEvent: function wupinEvent() {
        cc.log('index hotkey 物品');
    },

    xiaoxiEvent: function xiaoxiEvent() {
        cc.log('index hotkey 消息');
    },

    paihangEvent: function paihangEvent() {
        cc.log('index hotkey 排行');
    },

    renwuEvent: function renwuEvent() {
        cc.log('index hotkey 任务');
    },

    fujiangEvent: function fujiangEvent() {
        cc.log('index hotkey 副将');
    },

    youjianEvent: function youjianEvent() {
        cc.log('index hotkey 邮件');
    },

    baokuEvent: function baokuEvent() {
        cc.log('index hotkey 宝库');
    },

    wanjiaEvent: function wanjiaEvent() {
        cc.log('index hotkey 玩家');
    },

    gengduoEvent: function gengduoEvent() {
        cc.log('index hotkey 更多');
    },

    pindaoEvent: function pindaoEvent() {
        cc.log('index hotkey 频道');
    },

    fayanEvent: function fayanEvent() {
        cc.log('index hotkey 发言');

        if (curChannel === 3) {
            cc.log('世界频道禁止发言');
            return; //世界频道禁止发言
        } else if (curChannel === 1) {
            //TODO:门派验证
            cc.log('门派系统还未开放');
        }
        //发言
        cc.log('发言');
        var speak = cc.instantiate(this.speakPrefab);
        speak.x = 0;
        speak.y = 0;
        this.canvas.addChild(speak);
    },

    backEvent: function backEvent() {
        cc.log('index hotkey 返回');
        this.node.active = false;
    }
});

cc._RFpop();
},{}],"IndexFujiangButton":[function(require,module,exports){
"use strict";
cc._RFpush(module, '672b1ifHXRJI778aHF8Zdau', 'IndexFujiangButton');
// js\index\IndexPlayer\IndexFujiangButton.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {},

    // use this for initialization
    onLoad: function onLoad() {
        this.head = this.node.getComponent(cc.Sprite);
        this.head.spriteFrame = null;
        this.id = -1;
    },

    clickEvent: function clickEvent() {
        if (this.id < 0) return;
        //TODO:点击事件
    },

    setHead: function setHead(data) {
        this.id = data.id;
        var headUrl = data.touxiang;
        headUrl = headName.substring(headName.lastIndexOf('/') + 1, headName.lastIndexOf('.'));
        this.headUrl = 'touxiang/' + headName;
        cc.loader.loadRes(this.headUrl, cc.SpriteFrame, function (err, spriteFrame) {
            if (!err) {
                this.head.spriteFrame = spriteFrame;
            }
        });
    }
});

cc._RFpop();
},{}],"IndexManager":[function(require,module,exports){
"use strict";
cc._RFpush(module, '771d9R6U5lG8LZXLXCaqd8C', 'IndexManager');
// js\index\IndexManager.js

'use strict';

var self;
cc.Class({
    extends: cc.Component,

    properties: {
        playerStatus: cc.Node,
        nearbyPlayer: cc.Node,
        chatMng: cc.Node,
        hotkeyBoard: cc.Node
        //menuPanel: cc.Node,
    },

    // use this for initialization
    onLoad: function onLoad() {
        self = this;
        self.playerStatus = self.playerStatus.getComponent('PlayerStatus');
        //缓存在本地
        if (indexhgRoleMsg.id == 0) {
            if (indexHg.indexroleMsgUrl != null && indexHg.indexroleMsgUrl != "" && typeof indexHg.indexroleMsgUrl != 'undefined') {
                self.initIndexroleMsgUrl();
            } else {
                ajaxData(HxsgUrl.indexroleMsgUrl, null, function (msg) {
                    indexHg.indexroleMsgUrl = msg;
                    self.initIndexroleMsgUrl();
                    SocketEvents.updateRoleMsgEvent();
                });
            }
        } else {
            self.playerStatus.initPlayer(indexhgRoleMsg.roleMsg);
            self.startWebsocket(role.id);
        }
    },
    initIndexroleMsgUrl: function initIndexroleMsgUrl() {
        cc.log('role-----' + indexHg.indexroleMsgUrl);
        var msg = indexHg.indexroleMsgUrl;
        var role = msg.roleMsg;
        self.playerStatus.initPlayer(role);
        self.startWebsocket(role.id);
        pk.roleID = role.id;
    },
    startWebsocket: function startWebsocket(id) {
        // url = "ws://119.29.234.184:8080/hxsg/chat",
        this.id = id + '';
        //  var  data= JSON.stringify({ 'id': this.id });
        SocketEvents.data = { 'id': this.id };
        var login = JSON.stringify({ 'key': uuidKey, 'type': "login", 'role': SocketEvents.data });
        console.log('initWS login = ' + login);
        ws.send(login);
        cc.log(HxsgUrl.socketUrl);
    },

    hotkeyEvent: function hotkeyEvent() {
        cc.log('index 快捷键');
        this.hotkeyBoard.active = true;
    },

    fujiangEvent: function fujiangEvent() {
        loadScene(HxsgScenes.fujiang, HxsgScenes.index);
    },

    roleEvent: function roleEvent() {
        loadScene(HxsgScenes.role, HxsgScenes.index);
    }

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"IndexMenu":[function(require,module,exports){
"use strict";
cc._RFpush(module, '7e345guY41FkYAh5Y/JD/aj', 'IndexMenu');
// js\index\IndexPanel\IndexMenu.js

'use strict';

var self;
cc.Class({
    extends: cc.Component,

    properties: {
        page: {
            default: [],
            type: cc.Node
        },
        selectedFrame: {
            default: [],
            type: cc.SpriteFrame
        },
        unselectedFrame: {
            default: [],
            type: cc.SpriteFrame
        },
        menu: {
            default: [],
            type: cc.Sprite
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        try {
            self = this;
            //0、人物，1、设施，2、移动，3、功能
            SocketEvents.updateRoleMsgEvent = this.yidongEvent;
            this.yidongEvent();
        } catch (e) {
            cc.log(e);
        }
    },

    renwuEvent: function renwuEvent() {
        try {
            cc.log('人物');
            if (this.curMenu === 0) return;
            this.switchMenu(0);
        } catch (e) {
            cc.log(e);
        }
    },

    sheshiEvent: function sheshiEvent() {
        try {
            cc.log('设施');

            if (this.curMenu === 1) return;
            this.switchMenu(1);
        } catch (e) {
            cc.log(e);
        }
    },

    yidongEvent: function yidongEvent() {
        try {
            cc.log('移动');

            if (this.curMenu === 2) return;
            var p = cc.find("Canvas/menuPanel/yidong");
            if (p.childrenCount <= 0) {
                cc.log('ajaxReturnData.objets' + ajaxReturnData.objets);
                self.initMap(indexHg.indexroleMsgUrl);
                //ajaxData(HxsgUrl.indexroleMsgUrl, null, self.initMap);
            }
            //点击按钮变换
            this.switchMenu(2);
        } catch (e) {
            cc.log(e);
        }
    },
    initMap: function initMap(msg) {
        try {

            ajaxReturnData.topCity = msg.roleMsg.zuobiao;
            cc.log(ajaxReturnData.topCity);
            if (pk.moveMsg != null && pk.moveMsg != "" && typeof pk.moveMsg != 'undefined') {
                self.initMove();
            } else {
                ajaxData(HxsgUrl.moveCity, { "centerCity": msg.roleMsg.zuobiao }, function (data) {
                    pk.moveMsg = data;
                    self.initMove();
                });
            }
            // ajaxData(HxsgUrl.moveCity, { "centerCity": msg.roleMsg.zuobiao }, self.initMove);
        } catch (e) {
            cc.log(e);
        }
    },

    gongneng: function gongneng() {
        try {
            cc.log('功能');
            if (this.curMenu === 3) return;
            this.switchMenu(3);
        } catch (e) {
            cc.log(e);
        }
    },

    switchMenu: function switchMenu(curMenu) {
        var bz = false;
        for (var key in self.page) {

            if (key == curMenu) {
                self.menu[key].spriteFrame = self.selectedFrame[key];
                self.page[key].active = true;
                if (ajaxReturnData.topCity.indexOf('宝石矿洞') >= 0 && key == 1) {
                    bz = false;
                    cc.find('Canvas/menuPanel/sheshi2').active = true;
                    cc.find('Canvas/menuPanel/sheshi').active = false;
                }
            } else {
                self.menu[key].spriteFrame = self.unselectedFrame[key];
                self.page[key].active = false;
            }
        }
        if (ajaxReturnData.topCity.indexOf('宝石矿洞') >= 0 && curMenu != 1) {

            cc.find('Canvas/menuPanel/sheshi2').active = false;
        }
    },
    clickCity: function clickCity(event) {
        try {
            var node = event.target;
            ajaxData(HxsgUrl.moveCity, { "centerCity": node.id }, function (data) {
                pk.moveMsg = data;
                self.initMove();
            });
        } catch (e) {
            cc.log(e);
        }
    },
    initMove: function initMove() {
        try {
            var msg = pk.moveMsg;
            var p = cc.find("Canvas/menuPanel/yidong");
            p.removeAllChildren();
            var rw = cc.find("Canvas/menuPanel/renwu");
            rw.removeAllChildren();
            var hd = cc.find("Canvas/nearbyPlayer/head");
            hd.removeAllChildren();
            var m = msg.map;
            var g = msg.guai;
            var n = msg.near;
            cc.find("Canvas/nearbyPlayer/label").getComponent("cc.Label").string = '更多(' + n.length + ')';
            ajaxReturnData.nearRole = n;
            //  self.addMovePrefab({'num':'0','name':m.nCity}); 
            cc.loader.loadRes('prefabs/move', cc.Prefab, function (err, prefab) {
                if (!err) {
                    //当前所在地
                    if (m.centerCity != '' && typeof m.centerCity != 'undefined') {
                        var result = false;
                        for (var city in mapArrays) {
                            if (m.centerCity == mapArrays[city]) {

                                result = true;
                                break;
                            };
                        }
                        cc.find('Canvas/menu/sheshi').getComponent("cc.Button").interactable = result;
                    }

                    //上
                    if (m.nCity != '' && typeof m.nCity != 'undefined') {
                        var movePrefab = cc.instantiate(prefab);
                        var moveJs = movePrefab.getComponent('move');
                        movePrefab.on(cc.Node.EventType.TOUCH_START, self.clickCity, self);
                        movePrefab.id = m.nCity;
                        p.addChild(movePrefab);
                        moveJs.init({ 'num': '0', 'name': m.nCity });
                    }
                    //下
                    if (m.sCity != '' && typeof m.sCity != 'undefined') {
                        var movePrefab2 = cc.instantiate(prefab);
                        movePrefab2.on(cc.Node.EventType.TOUCH_START, self.clickCity, self);
                        movePrefab2.id = m.sCity;
                        var moveJs2 = movePrefab2.getComponent('move');
                        moveJs2.init({ 'num': '1', 'name': m.sCity });
                        p.addChild(movePrefab2);
                    }
                    //左
                    if (m.wCity != '' && typeof m.wCity != 'undefined') {
                        var movePrefab3 = cc.instantiate(prefab);
                        var moveJs3 = movePrefab3.getComponent('move');

                        movePrefab3.on(cc.Node.EventType.TOUCH_START, self.clickCity, self);
                        movePrefab3.id = m.wCity;
                        moveJs3.init({ 'num': '2', 'name': m.wCity });
                        p.addChild(movePrefab3);
                    }

                    //右
                    if (m.eCity != '' && typeof m.eCity != 'undefined') {
                        var movePrefab4 = cc.instantiate(prefab);
                        var moveJs4 = movePrefab4.getComponent('move');
                        movePrefab4.on(cc.Node.EventType.TOUCH_START, self.clickCity, self);
                        movePrefab4.id = m.eCity;
                        moveJs4.init({ 'num': '3', 'name': m.eCity });
                        p.addChild(movePrefab4);
                    }
                    //中心
                    if (m.quyu != '' && typeof m.quyu != 'undefined') {
                        var movePrefab5 = cc.instantiate(prefab);
                        var moveJs5 = movePrefab5.getComponent('move');
                        movePrefab5.on(cc.Node.EventType.TOUCH_START, self.clickCity, self);
                        var centerCityName;
                        switch (m.quyu) {
                            case '徐州':
                                centerCityName = '下邳';
                                break;
                            case '淮南':
                                centerCityName = '寿春';
                                break;
                            case '豫州':
                                centerCityName = '许昌';
                                break;
                            case '南蛮':
                                centerCityName = '三江城';
                                break;
                            case '益州':
                                centerCityName = '成都';
                                break;
                            case '扬州':
                                centerCityName = '吴城';
                                break;
                            case '司隶':
                                centerCityName = '洛阳';
                                break;
                            case '兖州':
                                centerCityName = '陈留';
                                break;
                            case '荆州':
                                centerCityName = '江陵';
                                break;
                            case '荆北':
                                centerCityName = '新野';
                                break;

                            default:
                                centerCityName = '新手村';
                        }
                        movePrefab5.id = centerCityName;
                        moveJs5.init({ 'num': '4', 'name': '返回' + centerCityName });
                        p.addChild(movePrefab5);
                    }
                }
            });
            if (typeof g != 'undefined') {
                //人物预制
                cc.loader.loadRes('prefabs/rolePrefabs', cc.Prefab, function (err, prefab) {
                    if (!err) {
                        cc.find('Canvas/menu/renwu').getComponent("cc.Button").enableAutoGrayEffect = true;
                        //怪1
                        if (g.guaiid1 != '' && typeof g.guaiid1 != 'undefined') {
                            cc.find('Canvas/menu/renwu').getComponent("cc.Button").interactable = true;
                            var gd1 = cc.instantiate(prefab);
                            var rolePrefabsJs1 = gd1.getComponent('rolePrefabs');
                            //gd1.on(cc.Node.EventType.TOUCH_START, self.clickCity, self);
                            rolePrefabsJs1.id = g.guaiid1;
                            rw.addChild(gd1);
                            rolePrefabsJs1.init({ 'num': g.status, 'roleName': g.guaiid1, 'level': g.level });
                        } else {
                            //表示没有人物，所以替换人物按钮的图标，并禁止点击人物interactable=false;

                            cc.find('Canvas/menu/renwu').getComponent("cc.Button").interactable = false;
                        }
                        //怪2
                        if (g.guaiid2 != '' && typeof g.guaiid2 != 'undefined') {
                            var gd2 = cc.instantiate(prefab);
                            var rolePrefabsJs2 = gd2.getComponent('rolePrefabs');
                            //gd2.on(cc.Node.EventType.TOUCH_START, self.clickCity, self);
                            rolePrefabsJs2.id = g.guaiid2;
                            rw.addChild(gd2);
                            rolePrefabsJs2.init({ 'num': g.status, 'roleName': g.guaiid2, 'level': g.level });
                        }
                        //怪3
                        if (g.guaiid3 != '' && typeof g.guaiid3 != 'undefined') {
                            var gd3 = cc.instantiate(prefab);
                            var rolePrefabsJs3 = gd3.getComponent('rolePrefabs');
                            // gd3.on(cc.Node.EventType.TOUCH_START, self.clickCity, self);
                            rolePrefabsJs3.id = g.guaiid3;
                            rw.addChild(gd3);
                            rolePrefabsJs3.init({ 'num': g.status, 'roleName': g.guaiid3, 'level': g.level });
                        }
                        //怪4
                        if (g.guaiid4 != '' && typeof g.guaiid4 != 'undefined') {
                            var gd4 = cc.instantiate(prefab);
                            var rolePrefabsJs4 = gd4.getComponent('rolePrefabs');
                            //gd4.on(cc.Node.EventType.TOUCH_START, self.clickCity, self);
                            rolePrefabsJs4.id = g.guaiid4;
                            rw.addChild(gd4);
                            rolePrefabsJs4.init({ 'num': g.status, 'roleName': g.guaiid4, 'level': g.level });
                        }
                    }
                });
            }

            //头部动画调用
            var top = cc.find("Canvas/top");
            //top.getComponent("cc.Label").string=m.centerCity;
            var TopManagerJs = top.getComponent('TopManager');
            TopManagerJs.setLabel(m.centerCity);
            ajaxReturnData.topCity = m.centerCity;
            TopManagerJs.play;
            self.switchMenu(0);
            //附近的玩家
            cc.loader.loadRes('prefabs/headItem', cc.Prefab, function (err, prefab) {
                cc.log('附近的玩家' + err);
                if (!err) {
                    var le;
                    if (n.length < 6 && n.length > 0) {
                        le = n.length;
                    } else if (n.length > 6) {
                        le = 6;
                    }
                    for (var i = 0; i < le; i++) {
                        var headItems = cc.instantiate(prefab);
                        var headItemJs = headItems.getComponent("headItem");
                        headItems.id = n[i];
                        headItems.on(cc.Node.EventType.TOUCH_START, self.clickHead, self);
                        hd.addChild(headItems);
                        var num = 0;
                        cc.log(n[i].zhiye);
                        cc.log(n[i].level);
                        switch (n[i].zhiye) {
                            case '武士':
                                if (n[i].level > 0 && n[i].level <= 50) {
                                    if (n[i].sex == '女') {
                                        num = 3;
                                    } else {
                                        num = 0;
                                    }
                                }
                                if (n[i].level > 50) {
                                    if (n[i].sex == '女') {
                                        num = 4;
                                    } else {
                                        num = 1;
                                    }
                                }
                                break;
                            case '异人':
                                if (n[i].level > 0 && n[i].level <= 50) {
                                    if (n[i].sex == '女') {
                                        num = 9;
                                    } else {
                                        num = 6;
                                    }
                                }
                                if (n[i].level > 50) {
                                    if (n[i].sex == '女') {
                                        num = 10;
                                    } else {
                                        num = 7;
                                    }
                                }
                                break;
                            case '文人':
                                if (n[i].level > 0 && n[i].level <= 50) {
                                    if (n[i].sex == '女') {
                                        num = 15;
                                    } else {
                                        num = 12;
                                    }
                                }
                                if (n[i].level > 50) {
                                    if (n[i].sex == '女') {
                                        num = 16;
                                    } else {
                                        num = 13;
                                    }
                                }
                                break;
                        }
                        cc.log('   headItemJs.init(num)---' + num);
                        headItemJs.init(num);
                    }
                }
            });
            if (g.guaiid1 == '' || typeof g.guaiid1 == 'undefined') {
                self.switchMenu(2);
            }
        } catch (e) {
            cc.log(e);
        }
    },
    roleDetail: function roleDetail(msg) {

        loadingScene(HxsgScenes.friendInfo, HxsgScenes.index);
    },
    clickHead: function clickHead(event) {
        var node = event.target;
        var m = node.id;
        var message = "玩家：" + m.level + m.zhiye + "     " + "【" + m.rolename + "】";
        myFriends.friendid = m.id;
        showAlert(message, self.roleDetail);
    }

});

cc._RFpop();
},{}],"PkScoket":[function(require,module,exports){
"use strict";
cc._RFpush(module, '24c8bM4YrtPwIcReUu80lah', 'PkScoket');
// js\websocket\PkScoket.js

"use strict";

cc._RFpop();
},{}],"PlayerStatus":[function(require,module,exports){
"use strict";
cc._RFpush(module, '855b6u8AUdIf4GM65AX72MP', 'PlayerStatus');
// js\index\IndexPlayer\PlayerStatus.js

'use strict';

var self;
cc.Class({
    extends: cc.Component,

    properties: {
        juesename: cc.Label,
        HP: cc.ProgressBar,
        MP: cc.ProgressBar,
        head: cc.Sprite,
        fujiang1: cc.Node,
        fujiang2: cc.Node,
        fujiang3: cc.Node,
        zhiye: cc.Label,
        yin: cc.Label,
        jin: cc.Label,
        jingyan: cc.Label
    },

    // use this for initialization
    onLoad: function onLoad() {
        self = this;
        this.fujiang1 = this.fujiang1.getComponent('IndexFujiangButton');
        this.fujiang2 = this.fujiang2.getComponent('IndexFujiangButton');
        this.fujiang3 = this.fujiang3.getComponent('IndexFujiangButton');
    },

    initPlayer: function initPlayer(role) {
        //角色名
        this.juesename.string = role.rolename ? role.rolename : '';
        //头像
        var headName = role.img;
        headName = headName.substring(headName.lastIndexOf('/') + 1, headName.lastIndexOf('.'));
        this.headUrl = 'touxiang/' + headName;
        cc.loader.loadRes(this.headUrl, cc.SpriteFrame, function (err, spriteFrame) {
            if (!err) {
                self.head.spriteFrame = spriteFrame;
            }
        });

        //气血
        var qixue1 = role.totalxue1 ? role.totalxue1 : 0;
        var qixue2 = role.totalxue2 ? role.totalxue2 : 0;
        this.HP.progress = qixue2 === 0 ? 0 : qixue1 / qixue2;
        //精力
        var jingli1 = role.totaljing1 ? role.totaljing1 : 0;
        var jingli2 = role.totaljing2 ? role.totaljing2 : 0;
        this.MP.progress = jingli2 === 0 ? 0 : jingli1 / jingli2;
        //等级
        this.dengji = (role.level ? role.level : '') + '级';
        roleMsg.roleId = role.level;

        //职业
        this.zhiye.string = this.dengji + (role.zhiye ? role.zhiye : '');
        // //称号
        // this.zhiye.string = role.chenghao ? role.chenghao : '';
        //钱
        this.jin.string = role.jin ? role.jin : 0;
        this.yin.string = role.yin ? role.yin : 0;

        //升级所需经验
        this.jingyan.string = role.jingyan ? role.jingyan : 0;

        //副将
        //TODO:
        // if(role.fujiang){
        //     fujiang1.setHead(role.fujiang);
        // }
    }

});

cc._RFpop();
},{}],"PorpertyManager":[function(require,module,exports){
"use strict";
cc._RFpush(module, '8e123cgcsJOzJrTctlZp0x3', 'PorpertyManager');
// js\index\Fujiang\PorpertyManager.js

'use strict';

/**
 *  气血=成长*等级*（体质点+气血初值*0.8）
 *  精力=成长*等级（智力点+精力初值*0.8）
 *  攻击=(等级*成长*攻击初值)/7+攻击初值*成长*0.5+等级*成长*力量点*0.2
 *  速度=成长*（速度初值+敏捷点）
 *
 *  点数分为。。体质，敏捷，智力，力量
 *  加点的话，只改变速度，气血，精力，攻击
 *
 */

var self;
var PropertyType = cc.Enum({
    TiZhi: 1, //体质
    ZhiLi: 2, //智力
    LiLiang: 3, //力量
    MinJie: 4 //敏捷
    // 体质: 1,
    // 智力: 2,
    // 力量: 3,
    // 敏捷: 4,
});

cc.Class({
    extends: cc.Component,

    properties: {
        totalPointsLabel: cc.Label,
        fangyuValueLabel: cc.Label,

        tizhiMng: cc.Node,
        zhiliMng: cc.Node,
        liliangMng: cc.Node,
        minjieMng: cc.Node
    },

    // use this for initialization
    onLoad: function onLoad() {
        loadCommomScence();
        self = this;
        self.tizhiMng = self.tizhiMng.getComponent('PropertyPoints');
        self.zhiliMng = self.zhiliMng.getComponent('PropertyPoints');
        self.liliangMng = self.liliangMng.getComponent('PropertyPoints');
        self.minjieMng = self.minjieMng.getComponent('PropertyPoints');
        this.init();
        //var data = { 'id': propCheckId };
        // ajaxData(HxsgUrl.propertyUrl, data, self.ajaxCallback);
    },

    /**
     * 根据数据初始化场景页面
     * @param msg
     */
    init: function init() {
        //数据赋值
        var msg = fujiang.fjmsg;
        self.msg = msg;
        self.totalPoints = msg.keyongds;
        self.remainPoints = self.totalPoints;
        self.chengzhang = msg.chengzhang;
        self.Lv = msg.level; //等级
        self.fangyu = msg.chufang; //防御值
        self.qixueInitValue = msg.chuxue;
        self.jingliInitValue = msg.chujing;
        self.gongjiInitValue = msg.chugong;
        self.suduInitValue = msg.chusu;

        //Label赋值
        self.totalPointsLabel.string = self.totalPoints;
        self.fangyuValueLabel.string = 0;
        self.tizhiMng.initData(msg.qiXue2, msg.qixueds);
        self.zhiliMng.initData(msg.jingLi2, msg.jinglids);
        self.liliangMng.initData(msg.gongJi, msg.gongJids);
        self.minjieMng.initData(msg.suDu, msg.sududs);
    },

    /**
     * 重置场景页面
     */
    reset: function reset() {
        self.init(self.msg);

        //重置各个属性
        self.tizhiMng.resetProp();
        self.zhiliMng.resetProp();
        self.liliangMng.resetProp();
        self.minjieMng.resetProp();
    },

    /**
     * 提交更改
     */
    updatePoints: function updatePoints() {
        showAlert('确认提交当前属性点分配吗？', function () {
            var data = {
                id: self.msg.id,
                keyongds: self.remainPoints,
                qiXue2: self.tizhiMng.propValue,
                qixueds: self.tizhiMng.propTotal,
                jingLi2: self.zhiliMng.propValue,
                jinglids: self.zhiliMng.propTotal,
                gongJi: self.liliangMng.propValue,
                gongJids: self.liliangMng.propTotal,
                suDu: self.minjieMng.propValue,
                sududs: self.minjieMng.propTotal
            };
            cc.log(data);
            ajaxUtils(HxsgUrl.propertyUpdateUrl, data);
        }, null);
    },

    /**
     * 按钮点击后做属性点检查
     */
    onButtonEvent: function onButtonEvent() {

        self.tizhiMng.buttonInteraction();
        self.zhiliMng.buttonInteraction();
        self.liliangMng.buttonInteraction();
        self.minjieMng.buttonInteraction();
    },

    /**
     * 计算操作后的剩余属性点的值
     * @param count
     */
    changeRemainPoints: function changeRemainPoints(count) {
        this.remainPoints -= count;
        if (this.remainPoints < 0) this.remainPoints = 0;
        this.totalPointsLabel.string = this.remainPoints;
    },

    /**
     * 计算各个属性的属性值
     * @returns {Number}
     */
    getQixue: function getQixue(tizhiPoints) {
        return parseInt(self.chengzhang * self.Lv * (tizhiPoints + self.qixueInitValue * 0.8));
    },
    getJingli: function getJingli(zhiliPoints) {
        return parseInt(self.chengzhang * self.Lv * (zhiliPoints + self.jingliInitValue * 0.8));
    },
    getGongji: function getGongji(liliangPoints) {
        return parseInt(self.Lv * self.chengzhang * self.gongjiInitValue / 7 + self.gongjiInitValue * self.chengzhang * 0.5 + self.Lv * self.chengzhang * liliangPoints * 0.2);
    },
    getSudu: function getSudu(minjiePoints) {
        return parseInt(self.chengzhang * (self.suduInitValue + minjiePoints));
    },

    /**
     * 根据属性点计算属性的属性值
     * @param propType
     * @param propPoints
     * @returns {boolean}
     */
    getPropValue: function getPropValue(propType, propPoints) {
        var propValue = 0;
        switch (propType) {
            case PropertyType.TiZhi:
                propValue = this.getQixue(propPoints);
                break;
            case PropertyType.ZhiLi:
                propValue = this.getJingli(propPoints);
                break;
            case PropertyType.LiLiang:
                propValue = this.getGongji(propPoints);
                break;
            case PropertyType.MinJie:
                propValue = this.getSudu(propPoints);
                break;
            default:
                break;
        }
        return propValue;
    },

    backEvent: function backEvent() {
        returnLastScene(HxsgScenes.propertyDeal);
    }

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"PropertyChecker":[function(require,module,exports){
"use strict";
cc._RFpush(module, '822f6K5eipOnZEWVMqOK/82', 'PropertyChecker');
// js\index\Fujiang\PropertyChecker.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        totalPointsLabel: cc.Label,
        fangyuValueLabel: cc.Label,
        qixueLabel: cc.Label,
        tizhiLabel: cc.Label,
        jingliLabel: cc.Label,
        zhiliLabel: cc.Label,
        gongjiLabel: cc.Label,
        liliangLabel: cc.Label,
        suduLabel: cc.Label,
        minjieLabel: cc.Label
    },

    // use this for initialization
    onLoad: function onLoad() {
        loadCommomScence();
        self = this;
        this.init();
    },

    /**
     * 服务器请求回掉函数
     * @param msg
     */
    ajaxCallback: function ajaxCallback(msg) {
        self.init();
    },

    /**
     * 根据数据初始化场景页面
     * @param msg
     */
    init: function init() {
        var msg = fujiang.fjmsg;
        //Label赋值
        self.totalPointsLabel.string = msg.keyongds;
        self.fangyuValueLabel.string = 0;
        self.qixueLabel.string = msg.qiXue2;
        self.tizhiLabel.string = msg.qixueds;
        self.jingliLabel.string = msg.jingLi2;
        self.zhiliLabel.string = msg.jinglids;
        self.gongjiLabel.string = msg.gongJi;
        self.liliangLabel.string = msg.gongJids;
        self.suduLabel.string = msg.suDu;
        self.minjieLabel.string = msg.sududs;
    },

    backEvent: function backEvent() {
        returnLastScene(HxsgScenes.propertyCheck);
    }

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"PropertyPoints":[function(require,module,exports){
"use strict";
cc._RFpush(module, '255ffQEeWpK0qpj7EY15/LS', 'PropertyPoints');
// js\index\Fujiang\PropertyPoints.js

'use strict';

var PropertyType = cc.Enum({
    TiZhi: 1, //体质
    ZhiLi: 2, //智力
    LiLiang: 3, //力量
    MinJie: 4 //敏捷
    // 体质: 1,       //体质
    // 智力: 2,       //智力
    // 力量: 3,     //力量
    // 敏捷: 4       //敏捷
});
cc.Class({
    extends: cc.Component,

    properties: {
        propMng: cc.Node,
        propType: {
            default: PropertyType.None,
            type: PropertyType
        },
        propValueLabel: cc.Label,
        propPointLabel: cc.Label,
        dealAllBtn: cc.Button,
        add1Btn: cc.Button,
        add3Btn: cc.Button,
        cut1Btn: cc.Button,
        cut3Btn: cc.Button
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.propMng = this.propMng.getComponent('PorpertyManager');
    },

    /**
     * 初始化
     * @param propValueInit     属性值
     * @param propPoint     属性点
     */
    initData: function initData(propValueInit, propPoint) {
        this.propInit = propPoint; //初始属性点
        this.propAdded = 0; //新分配的属性点
        this.propTotal = this.propInit + this.propAdded; //该属性总属性点 = propInit + propAdded
        this.propValueInit = propValueInit; //初始属性值

        this.propValue = propValueInit;
        this.propValueLabel.string = propValueInit;
        this.propPointLabel.string = propPoint;

        this.buttonInteraction();
    },

    /**
     * 重置自身，响应父级重新分配按钮
     */
    resetProp: function resetProp() {
        this.initData(this.propValueInit, this.propInit);
        this.buttonInteraction();
    },

    /**
     * 监听操作结果，预判断设置按钮交互状态
     */
    buttonInteraction: function buttonInteraction() {
        //加
        if (this.propMng.remainPoints < 0) this.propMng.remainPoints = 0;
        switch (this.propMng.remainPoints) {
            case 0:
                this.dealAllBtn.interactable = false;
                this.add1Btn.interactable = false;
                this.add3Btn.interactable = false;
                break;
            case 1:
            case 2:
                this.dealAllBtn.interactable = true;
                this.add1Btn.interactable = true;
                this.add3Btn.interactable = false;
                break;
            default:
                this.dealAllBtn.interactable = true;
                this.add1Btn.interactable = true;
                this.add3Btn.interactable = true;
                break;
        }
        //减
        if (this.propAdded < 0) this.propAdded = 0;
        switch (this.propAdded) {
            case 0:
                this.cut1Btn.interactable = false;
                this.cut3Btn.interactable = false;
                break;
            case 1:
            case 2:
                this.cut1Btn.interactable = true;
                this.cut3Btn.interactable = false;
                break;
            default:
                this.cut1Btn.interactable = true;
                this.cut3Btn.interactable = true;
                break;
        }
    },

    /**
     * 是否可以进行操作
     * @param count
     * @returns {boolean}
     */
    canDo: function canDo(count) {
        if (count > 0) return this.propMng.remainPoints >= count;else if (count < 0) {
            count = Math.abs(count);
            return this.propAdded >= count;
        }
    },

    dealAll: function dealAll() {
        this.propValueCalculate(this.propMng.remainPoints);
    },

    add1Point: function add1Point() {
        this.propValueCalculate(1);
    },

    add3Point: function add3Point() {
        this.propValueCalculate(3);
    },

    cut1Point: function cut1Point() {
        this.propValueCalculate(-1);
    },

    cut3Point: function cut3Point() {
        this.propValueCalculate(-3);
    },

    propValueCalculate: function propValueCalculate(count) {
        if (this.canDo(count)) {
            //计算属性点
            this.propAdded += count;
            this.propTotal = this.propInit + this.propAdded;
            this.propMng.changeRemainPoints(count);
            //计算属性点改变后的属性值
            this.propValue = this.propMng.getPropValue(this.propType, this.propTotal);
            //Label刷新
            this.propValueLabel.string = this.propValue;
            this.propPointLabel.string = this.propTotal;

            this.propMng.onButtonEvent();
        }
    }
});

cc._RFpop();
},{}],"RechargeGold":[function(require,module,exports){
"use strict";
cc._RFpush(module, '5a935NejGVPxp1FFTtIYqc5', 'RechargeGold');
// js\bank\RechargeGold.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    //加载钱庄场景
    back: function back() {
        cc.director.loadScene('bank');
    },

    // use this for initialization
    onLoad: function onLoad() {}

});

cc._RFpop();
},{}],"RechargeReward":[function(require,module,exports){
"use strict";
cc._RFpush(module, '5bea9FXfidOwbA7+Q3sBtC5', 'RechargeReward');
// js\bank\RechargeReward.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    //加载钱庄场景
    back: function back() {
        cc.director.loadScene('bank');
    },

    // use this for initialization
    onLoad: function onLoad() {}

});

cc._RFpop();
},{}],"RoleDetailsManager":[function(require,module,exports){
"use strict";
cc._RFpush(module, '29c32rZ/I9IapAFkDhrnjBm', 'RoleDetailsManager');
// js\index\RoleDetailsManager.js

'use strict';

var self;
cc.Class({
    extends: cc.Component,

    properties: {
        content: cc.Node,
        leftContent: cc.Node,
        touxiang: cc.Sprite,
        juesename: cc.Label,
        nameBtn: cc.Button,
        zhiye: cc.Label,
        chenghao: cc.Label,
        jingyan: cc.Label,
        touxiangBtn: cc.Button,
        sjxiaolv: cc.Label,
        vip: cc.Label,
        tilizhi: cc.Label,
        qian: cc.Label,
        bindqian: cc.Label,
        huolizhi: cc.Label,
        successBtn: cc.Button,
        tanwei: cc.Label,
        juzhudi: cc.Label,
        house: cc.Label,
        jiaopai: cc.Label,
        peiou: cc.Label,
        skillBtn: cc.Button,
        shuxing: cc.Label,
        fenpeiBtn: cc.Button,
        chakanBtn: cc.Button,
        qixue: cc.Label,
        jingli: cc.Label,
        gongji: cc.Label,
        sudu: cc.Label,
        fangyu: cc.Label,
        fuzhong: cc.Label,
        info: cc.Label,
        infoBtn: cc.Button,
        fightingBtn: cc.Button,
        allLifeBtn: cc.Button,
        xinggeBtn: cc.Button,
        zuoqi: cc.Label,
        zuoqiBtn: cc.Button,
        fujiang: cc.Label,
        tianfu: cc.Label,
        videoBtn: cc.Button,
        videoToggleBtn: cc.Button,
        labelCount: 22,
        btnCount: 9
    },

    // use this for initialization
    onLoad: function onLoad() {
        self = this;

        ajaxData(HxsgUrl.roleMsgUrl, null, function (msg) {
            self.initRoleDetails(msg);
        });
    },

    addChildTest: function addChildTest() {
        this.juesename.node.parent.removeFromParent();
        this.nameBtn.node.removeFromParent();

        this.leftContent.addChild(this.juesename.node.parent);
        this.leftContent.addChild(this.nameBtn.node);

        this.juesename.node.parent.setSiblingIndex(this.touxiangBtn.node.getSiblingIndex() + 1);
        this.nameBtn.node.setSiblingIndex(this.touxiangBtn.node.getSiblingIndex() + 2);

        this.content.height = this.labelCount * 50 + this.btnCount * 65;
    },

    initRoleDetails: function initRoleDetails(msg) {
        if (msg.roleMsg == undefined || msg.roleMsg == null) return;

        this.content.active = true;
        this.roleMsg = msg.roleMsg;
        var role = msg.roleMsg;

        //加载头像
        // cc.loader.loadRes()
        //头像
        var headName = role.img;
        headName = headName.substring(headName.lastIndexOf('/') + 1, headName.lastIndexOf('.'));
        var headUrl = 'touxiang/' + headName;
        cc.loader.loadRes(headUrl, cc.SpriteFrame, function (err, spriteFrame) {
            if (!err) {
                self.touxiang.spriteFrame = spriteFrame;
            }
        });

        //角色名
        this.juesename.string = role.rolename;
        //职业
        this.zhiye.string = role.zhiye;
        //等级
        this.dengji = role.level;

        //称号
        this.chenghao.string = role.chenghao;
        //升级所需经验
        this.jingyan.string = '需' + role.jingyan + '经验';
        //升级效率
        this.sjxiaolv.string = role.shengjixiaolv;
        //VIP
        this.vip.string = '';
        //体力值
        this.tilizhi.string = role.tilizhi;
        //钱
        var jin = role.jin;
        var yin = role.yin;
        this.qian.string = jin + '金' + yin + '银';
        //绑定银
        this.bindqian.string = '';
        //活力值
        this.huolizhi.string = 100;
        //摊位
        this.tanwei.string = "无";
        //居住地
        this.juzhudi.string = "无";
        //房产
        this.house.string = "无";
        //教派
        this.jiaopai.string = "无";
        //配偶
        this.peiou.string = "无";
        //属性
        var shuxingValue = role.keyongds > 0 ? true : false;
        cc.log(shuxingValue);
        this.fenpeiBtn.active = shuxingValue;
        this.chakanBtn.active = !shuxingValue;
        this.shuxing.string = role.keyongds;
        //气血
        var qixue1 = role.totalxue1;
        var qixue2 = role.totalxue2;
        this.qixue.string = qixue1 + '/' + qixue2;
        //精力
        var jingli1 = role.totaljing1;
        var jingli2 = role.totaljing2;
        this.jingli.string = jingli1 + '/' + jingli2;
        //攻击
        this.gongji.string = role.totalgong;
        //速度
        this.sudu.string = role.totalsudu;
        //防御
        this.fangyu.string = "无";
        // //负重
        // this.fuzhong.string = role.fuzhong1 + '/'+ role.fuzhong2;
        //个人信息
        this.info.string = '';
        this.infoBtn.interactable = false;
        //坐骑
        this.zuoqi.string = role.zuoji ? role.zuoji : '';
        this.zuoqiBtn.interactable = role.zuoji ? true : false;
        //副将
        var fj = role.fuLi;
        var fjName = "";
        for (var i = 0; i < fj.length; i++) {
            fjName += "(" + fj[i].fujiangname + ")";
        }
        this.fujiang.string = fjName;
        //天赋
        this.tianfu.string = '';
    },

    nickEvent: function nickEvent() {},

    headEvent: function headEvent() {},

    achievementEvent: function achievementEvent() {},

    skileEvent: function skileEvent() {},

    propertyCheckEvent: function propertyCheckEvent() {
        propCheckId = this.roleMsg.id;
        loadScene(HxsgScenes.propertyCheck, HxsgScenes.role);
    },

    propertyDealEvent: function propertyDealEvent() {
        propCheckId = this.roleMsg.id;
        loadScene(HxsgScenes.propertyDeal, HxsgScenes.role);
    },

    personInfoEvent: function personInfoEvent() {},

    fightingEvent: function fightingEvent() {},

    lifeEvent: function lifeEvent() {},

    characterEvent: function characterEvent() {},

    mountEvent: function mountEvent() {},

    videoEvent: function videoEvent() {},

    videoToggleEvent: function videoToggleEvent() {},

    backEvent: function backEvent() {
        returnLastScene(HxsgScenes.role);
    }
});

cc._RFpop();
},{}],"SaveGold":[function(require,module,exports){
"use strict";
cc._RFpush(module, '4e65cq69GNE563HWPMeIa72', 'SaveGold');
// js\bank\SaveGold.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        playerGold_label: cc.Label,
        bankGold_label: cc.Label,
        saveGold_editbox: cc.EditBox
    },

    //返回钱庄场景
    back: function back() {
        returnLast();
    },

    //存款记录
    saveRecord: function saveRecord() {},

    //确认存款
    saveConfirm: function saveConfirm() {
        var self = this;
        var saveDate = {
            "status": "add", //该参数有add(存款),del(取款)
            "jin": this.saveGold_editbox.string };
        ajaxData(HxsgUrl.bankSGUrl, saveDate, function (msg) {
            self.back();
            showAlert(msg.result);
        });
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.playerGold_label.string = "您目前有" + Bank.playerGold + "金砖";
        this.bankGold_label.string = "钱庄存款" + Bank.bankGold + "金砖";
    }

});

cc._RFpop();
},{}],"SaveSilver":[function(require,module,exports){
"use strict";
cc._RFpush(module, '2ca9a3JjTVA97Ec/OSL1/a+', 'SaveSilver');
// js\bank\SaveSilver.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        playerSilver_label: cc.Label,
        bankSilver_label: cc.Label,
        saveSilver_editbox: cc.EditBox
    },

    //返回钱庄场景
    back: function back() {
        returnLast();
    },

    //存款记录
    saveRecord: function saveRecord() {},

    //确认存款
    saveConfirm: function saveConfirm() {
        var self = this;
        var saveDate = {
            "status": "add", //该参数有add(存款),del(取款)
            "yin": this.saveSilver_editbox.string };
        ajaxData(HxsgUrl.bankSGUrl, saveDate, function (msg) {
            self.back();
            showAlert(msg.result);
        });
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.playerSilver_label.string = "您目前有" + Bank.playerSilver + "两";
        this.bankSilver_label.string = "钱庄存款" + Bank.bankSilver + "两";
    }

});

cc._RFpop();
},{}],"SellGold":[function(require,module,exports){
"use strict";
cc._RFpush(module, '0d624nUDIJDXL/AehDkgXq2', 'SellGold');
// js\bank\SellGold.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    //加载钱庄场景
    back: function back() {
        cc.director.loadScene('bank');
    },

    // use this for initialization
    onLoad: function onLoad() {}

});

cc._RFpop();
},{}],"SheshiPanel":[function(require,module,exports){
"use strict";
cc._RFpush(module, '721db3H1sdHkZayZNduGOgC', 'SheshiPanel');
// js\index\IndexPanel\SheshiPanel.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {},

    // use this for initialization
    onLoad: function onLoad() {},

    yiguanEvent: function yiguanEvent() {
        cc.log('sheshi panel 医馆');
        loadingScene(HxsgScenes.yiguan, HxsgScenes.index);
    },

    qianzhuangEvent: function qianzhuangEvent() {
        cc.log('sheshi panel 钱庄');
        loadScene(HxsgScenes.bank, HxsgScenes.index);
    },

    guanyiEvent: function guanyiEvent() {
        showAlert("暂未开放");
        cc.log('sheshi panel 馆驿');
    },

    shichangEvent: function shichangEvent() {
        cc.log('sheshi panel 市场');
        cc.director.loadScene('shiChangIndex');
    },

    guangchangEvent: function guangchangEvent() {
        cc.log('sheshi panel 广场');
        cc.director.loadScene('guangChang');
    },

    guanfuEvent: function guanfuEvent() {
        showAlert("暂未开放");
        cc.log('sheshi panel 官府');
    },

    zhanchangEvent: function zhanchangEvent() {
        showAlert("暂未开放");
        cc.log('sheshi panel 战场');
    },

    guanjiaEvent: function guanjiaEvent() {
        showAlert("暂未开放");
        cc.log('sheshi panel 管家');
    },
    wabaoEvent: function wabaoEvent() {
        loadingScene(HxsgScenes.wabao, HxsgScenes.index);
    }

});

cc._RFpop();
},{}],"Speak":[function(require,module,exports){
"use strict";
cc._RFpush(module, '05840MDlqVCZ5LiPDp8YDhb', 'Speak');
// js\common\Speak.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        edit: cc.EditBox
    },

    sendEvent: function sendEvent() {
        if (SocketEvents.connected) {
            var datas = JSON.stringify({ 'key': uuidKey, 'type': 'chat', 'typeChat': (curChannel + 1).toString(), 'role': SocketEvents.data, 'chatMsg': this.edit.string });
            ws.send(datas);
            cc.log('ws.send: ' + datas);
            this.node.destroy();
        } else {
            cc.log('ws 未连接');
        }
    },

    cancelEvent: function cancelEvent() {
        this.node.destroy();
    }
});

cc._RFpop();
},{}],"Strake":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'e8ae4bW0Z5A2JmRMuOr2UYt', 'Strake');
// js\common\Strake.js

'use strict';

var self;
cc.Class({
    extends: cc.Component,

    properties: {
        left: cc.Node,
        right: cc.Node
    },

    // use this for initialization
    onLoad: function onLoad() {
        self = this;
        this.canvas = cc.find('Canvas');
        var px = this.canvas.width / 2;
        this.addImageAction(px);
    },

    addImageAction: function addImageAction(px) {
        //获取边框到中心的距离，即得到两边框的坐标。注意：因为时序问题，必须要canvas的宽度来计算
        var seqLeft = cc.sequence(cc.moveTo(1, cc.p(-px, 0)).easing(cc.easeCubicActionOut(1)));
        var seqRight = cc.sequence(cc.moveTo(1, cc.p(px, 0)).easing(cc.easeCubicActionOut(1)));
        self.left.runAction(seqLeft);
        self.right.runAction(seqRight);
    }
});

cc._RFpop();
},{}],"TimelineLite":[function(require,module,exports){
(function (global){
"use strict";
cc._RFpush(module, '25f8d20AK1FMatPUAsaMewx', 'TimelineLite');
// js\util\TimelineLite.js

"use strict";

/*!
 * VERSION: 1.19.1
 * DATE: 2017-01-17
 * UPDATES AND DOCS AT: http://greensock.com
 *
 * @license Copyright (c) 2008-2017, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 */
var _gsScope = typeof module !== "undefined" && module.exports && typeof global !== "undefined" ? global : undefined || window; //helps ensure compatibility with AMD/RequireJS and CommonJS/Node
(_gsScope._gsQueue || (_gsScope._gsQueue = [])).push(function () {

	"use strict";

	_gsScope._gsDefine("TimelineLite", ["core.Animation", "core.SimpleTimeline", "TweenLite"], function (Animation, SimpleTimeline, TweenLite) {

		var TimelineLite = function TimelineLite(vars) {
			SimpleTimeline.call(this, vars);
			this._labels = {};
			this.autoRemoveChildren = this.vars.autoRemoveChildren === true;
			this.smoothChildTiming = this.vars.smoothChildTiming === true;
			this._sortChildren = true;
			this._onUpdate = this.vars.onUpdate;
			var v = this.vars,
			    val,
			    p;
			for (p in v) {
				val = v[p];
				if (_isArray(val)) if (val.join("").indexOf("{self}") !== -1) {
					v[p] = this._swapSelfInParams(val);
				}
			}
			if (_isArray(v.tweens)) {
				this.add(v.tweens, 0, v.align, v.stagger);
			}
		},
		    _tinyNum = 0.0000000001,
		    TweenLiteInternals = TweenLite._internals,
		    _internals = TimelineLite._internals = {},
		    _isSelector = TweenLiteInternals.isSelector,
		    _isArray = TweenLiteInternals.isArray,
		    _lazyTweens = TweenLiteInternals.lazyTweens,
		    _lazyRender = TweenLiteInternals.lazyRender,
		    _globals = _gsScope._gsDefine.globals,
		    _copy = function _copy(vars) {
			var copy = {},
			    p;
			for (p in vars) {
				copy[p] = vars[p];
			}
			return copy;
		},
		    _applyCycle = function _applyCycle(vars, targets, i) {
			var alt = vars.cycle,
			    p,
			    val;
			for (p in alt) {
				val = alt[p];
				vars[p] = typeof val === "function" ? val(i, targets[i]) : val[i % val.length];
			}
			delete vars.cycle;
		},
		    _pauseCallback = _internals.pauseCallback = function () {},
		    _slice = function _slice(a) {
			//don't use [].slice because that doesn't work in IE8 with a NodeList that's returned by querySelectorAll()
			var b = [],
			    l = a.length,
			    i;
			for (i = 0; i !== l; b.push(a[i++])) {}
			return b;
		},
		    p = TimelineLite.prototype = new SimpleTimeline();

		TimelineLite.version = "1.19.1";
		p.constructor = TimelineLite;
		p.kill()._gc = p._forcingPlayhead = p._hasPause = false;

		/* might use later...
  //translates a local time inside an animation to the corresponding time on the root/global timeline, factoring in all nesting and timeScales.
  function localToGlobal(time, animation) {
  	while (animation) {
  		time = (time / animation._timeScale) + animation._startTime;
  		animation = animation.timeline;
  	}
  	return time;
  }
  	//translates the supplied time on the root/global timeline into the corresponding local time inside a particular animation, factoring in all nesting and timeScales
  function globalToLocal(time, animation) {
  	var scale = 1;
  	time -= localToGlobal(0, animation);
  	while (animation) {
  		scale *= animation._timeScale;
  		animation = animation.timeline;
  	}
  	return time * scale;
  }
  */

		p.to = function (target, duration, vars, position) {
			var Engine = vars.repeat && _globals.TweenMax || TweenLite;
			return duration ? this.add(new Engine(target, duration, vars), position) : this.set(target, vars, position);
		};

		p.from = function (target, duration, vars, position) {
			return this.add((vars.repeat && _globals.TweenMax || TweenLite).from(target, duration, vars), position);
		};

		p.fromTo = function (target, duration, fromVars, toVars, position) {
			var Engine = toVars.repeat && _globals.TweenMax || TweenLite;
			return duration ? this.add(Engine.fromTo(target, duration, fromVars, toVars), position) : this.set(target, toVars, position);
		};

		p.staggerTo = function (targets, duration, vars, stagger, position, onCompleteAll, onCompleteAllParams, onCompleteAllScope) {
			var tl = new TimelineLite({ onComplete: onCompleteAll, onCompleteParams: onCompleteAllParams, callbackScope: onCompleteAllScope, smoothChildTiming: this.smoothChildTiming }),
			    cycle = vars.cycle,
			    copy,
			    i;
			if (typeof targets === "string") {
				targets = TweenLite.selector(targets) || targets;
			}
			targets = targets || [];
			if (_isSelector(targets)) {
				//senses if the targets object is a selector. If it is, we should translate it into an array.
				targets = _slice(targets);
			}
			stagger = stagger || 0;
			if (stagger < 0) {
				targets = _slice(targets);
				targets.reverse();
				stagger *= -1;
			}
			for (i = 0; i < targets.length; i++) {
				copy = _copy(vars);
				if (copy.startAt) {
					copy.startAt = _copy(copy.startAt);
					if (copy.startAt.cycle) {
						_applyCycle(copy.startAt, targets, i);
					}
				}
				if (cycle) {
					_applyCycle(copy, targets, i);
					if (copy.duration != null) {
						duration = copy.duration;
						delete copy.duration;
					}
				}
				tl.to(targets[i], duration, copy, i * stagger);
			}
			return this.add(tl, position);
		};

		p.staggerFrom = function (targets, duration, vars, stagger, position, onCompleteAll, onCompleteAllParams, onCompleteAllScope) {
			vars.immediateRender = vars.immediateRender != false;
			vars.runBackwards = true;
			return this.staggerTo(targets, duration, vars, stagger, position, onCompleteAll, onCompleteAllParams, onCompleteAllScope);
		};

		p.staggerFromTo = function (targets, duration, fromVars, toVars, stagger, position, onCompleteAll, onCompleteAllParams, onCompleteAllScope) {
			toVars.startAt = fromVars;
			toVars.immediateRender = toVars.immediateRender != false && fromVars.immediateRender != false;
			return this.staggerTo(targets, duration, toVars, stagger, position, onCompleteAll, onCompleteAllParams, onCompleteAllScope);
		};

		p.call = function (callback, params, scope, position) {
			return this.add(TweenLite.delayedCall(0, callback, params, scope), position);
		};

		p.set = function (target, vars, position) {
			position = this._parseTimeOrLabel(position, 0, true);
			if (vars.immediateRender == null) {
				vars.immediateRender = position === this._time && !this._paused;
			}
			return this.add(new TweenLite(target, 0, vars), position);
		};

		TimelineLite.exportRoot = function (vars, ignoreDelayedCalls) {
			vars = vars || {};
			if (vars.smoothChildTiming == null) {
				vars.smoothChildTiming = true;
			}
			var tl = new TimelineLite(vars),
			    root = tl._timeline,
			    tween,
			    next;
			if (ignoreDelayedCalls == null) {
				ignoreDelayedCalls = true;
			}
			root._remove(tl, true);
			tl._startTime = 0;
			tl._rawPrevTime = tl._time = tl._totalTime = root._time;
			tween = root._first;
			while (tween) {
				next = tween._next;
				if (!ignoreDelayedCalls || !(tween instanceof TweenLite && tween.target === tween.vars.onComplete)) {
					tl.add(tween, tween._startTime - tween._delay);
				}
				tween = next;
			}
			root.add(tl, 0);
			return tl;
		};

		p.add = function (value, position, align, stagger) {
			var curTime, l, i, child, tl, beforeRawTime;
			if (typeof position !== "number") {
				position = this._parseTimeOrLabel(position, 0, true, value);
			}
			if (!(value instanceof Animation)) {
				if (value instanceof Array || value && value.push && _isArray(value)) {
					align = align || "normal";
					stagger = stagger || 0;
					curTime = position;
					l = value.length;
					for (i = 0; i < l; i++) {
						if (_isArray(child = value[i])) {
							child = new TimelineLite({ tweens: child });
						}
						this.add(child, curTime);
						if (typeof child !== "string" && typeof child !== "function") {
							if (align === "sequence") {
								curTime = child._startTime + child.totalDuration() / child._timeScale;
							} else if (align === "start") {
								child._startTime -= child.delay();
							}
						}
						curTime += stagger;
					}
					return this._uncache(true);
				} else if (typeof value === "string") {
					return this.addLabel(value, position);
				} else if (typeof value === "function") {
					value = TweenLite.delayedCall(0, value);
				} else {
					throw "Cannot add " + value + " into the timeline; it is not a tween, timeline, function, or string.";
				}
			}

			SimpleTimeline.prototype.add.call(this, value, position);

			//if the timeline has already ended but the inserted tween/timeline extends the duration, we should enable this timeline again so that it renders properly. We should also align the playhead with the parent timeline's when appropriate.
			if (this._gc || this._time === this._duration) if (!this._paused) if (this._duration < this.duration()) {
				//in case any of the ancestors had completed but should now be enabled...
				tl = this;
				beforeRawTime = tl.rawTime() > value._startTime; //if the tween is placed on the timeline so that it starts BEFORE the current rawTime, we should align the playhead (move the timeline). This is because sometimes users will create a timeline, let it finish, and much later append a tween and expect it to run instead of jumping to its end state. While technically one could argue that it should jump to its end state, that's not what users intuitively expect.
				while (tl._timeline) {
					if (beforeRawTime && tl._timeline.smoothChildTiming) {
						tl.totalTime(tl._totalTime, true); //moves the timeline (shifts its startTime) if necessary, and also enables it.
					} else if (tl._gc) {
						tl._enabled(true, false);
					}
					tl = tl._timeline;
				}
			}

			return this;
		};

		p.remove = function (value) {
			if (value instanceof Animation) {
				this._remove(value, false);
				var tl = value._timeline = value.vars.useFrames ? Animation._rootFramesTimeline : Animation._rootTimeline; //now that it's removed, default it to the root timeline so that if it gets played again, it doesn't jump back into this timeline.
				value._startTime = (value._paused ? value._pauseTime : tl._time) - (!value._reversed ? value._totalTime : value.totalDuration() - value._totalTime) / value._timeScale; //ensure that if it gets played again, the timing is correct.
				return this;
			} else if (value instanceof Array || value && value.push && _isArray(value)) {
				var i = value.length;
				while (--i > -1) {
					this.remove(value[i]);
				}
				return this;
			} else if (typeof value === "string") {
				return this.removeLabel(value);
			}
			return this.kill(null, value);
		};

		p._remove = function (tween, skipDisable) {
			SimpleTimeline.prototype._remove.call(this, tween, skipDisable);
			var last = this._last;
			if (!last) {
				this._time = this._totalTime = this._duration = this._totalDuration = 0;
			} else if (this._time > this.duration()) {
				this._time = this._duration;
				this._totalTime = this._totalDuration;
			}
			return this;
		};

		p.append = function (value, offsetOrLabel) {
			return this.add(value, this._parseTimeOrLabel(null, offsetOrLabel, true, value));
		};

		p.insert = p.insertMultiple = function (value, position, align, stagger) {
			return this.add(value, position || 0, align, stagger);
		};

		p.appendMultiple = function (tweens, offsetOrLabel, align, stagger) {
			return this.add(tweens, this._parseTimeOrLabel(null, offsetOrLabel, true, tweens), align, stagger);
		};

		p.addLabel = function (label, position) {
			this._labels[label] = this._parseTimeOrLabel(position);
			return this;
		};

		p.addPause = function (position, callback, params, scope) {
			var t = TweenLite.delayedCall(0, _pauseCallback, params, scope || this);
			t.vars.onComplete = t.vars.onReverseComplete = callback;
			t.data = "isPause";
			this._hasPause = true;
			return this.add(t, position);
		};

		p.removeLabel = function (label) {
			delete this._labels[label];
			return this;
		};

		p.getLabelTime = function (label) {
			return this._labels[label] != null ? this._labels[label] : -1;
		};

		p._parseTimeOrLabel = function (timeOrLabel, offsetOrLabel, appendIfAbsent, ignore) {
			var i;
			//if we're about to add a tween/timeline (or an array of them) that's already a child of this timeline, we should remove it first so that it doesn't contaminate the duration().
			if (ignore instanceof Animation && ignore.timeline === this) {
				this.remove(ignore);
			} else if (ignore && (ignore instanceof Array || ignore.push && _isArray(ignore))) {
				i = ignore.length;
				while (--i > -1) {
					if (ignore[i] instanceof Animation && ignore[i].timeline === this) {
						this.remove(ignore[i]);
					}
				}
			}
			if (typeof offsetOrLabel === "string") {
				return this._parseTimeOrLabel(offsetOrLabel, appendIfAbsent && typeof timeOrLabel === "number" && this._labels[offsetOrLabel] == null ? timeOrLabel - this.duration() : 0, appendIfAbsent);
			}
			offsetOrLabel = offsetOrLabel || 0;
			if (typeof timeOrLabel === "string" && (isNaN(timeOrLabel) || this._labels[timeOrLabel] != null)) {
				//if the string is a number like "1", check to see if there's a label with that name, otherwise interpret it as a number (absolute value).
				i = timeOrLabel.indexOf("=");
				if (i === -1) {
					if (this._labels[timeOrLabel] == null) {
						return appendIfAbsent ? this._labels[timeOrLabel] = this.duration() + offsetOrLabel : offsetOrLabel;
					}
					return this._labels[timeOrLabel] + offsetOrLabel;
				}
				offsetOrLabel = parseInt(timeOrLabel.charAt(i - 1) + "1", 10) * Number(timeOrLabel.substr(i + 1));
				timeOrLabel = i > 1 ? this._parseTimeOrLabel(timeOrLabel.substr(0, i - 1), 0, appendIfAbsent) : this.duration();
			} else if (timeOrLabel == null) {
				timeOrLabel = this.duration();
			}
			return Number(timeOrLabel) + offsetOrLabel;
		};

		p.seek = function (position, suppressEvents) {
			return this.totalTime(typeof position === "number" ? position : this._parseTimeOrLabel(position), suppressEvents !== false);
		};

		p.stop = function () {
			return this.paused(true);
		};

		p.gotoAndPlay = function (position, suppressEvents) {
			return this.play(position, suppressEvents);
		};

		p.gotoAndStop = function (position, suppressEvents) {
			return this.pause(position, suppressEvents);
		};

		p.render = function (time, suppressEvents, force) {
			if (this._gc) {
				this._enabled(true, false);
			}
			var totalDur = !this._dirty ? this._totalDuration : this.totalDuration(),
			    prevTime = this._time,
			    prevStart = this._startTime,
			    prevTimeScale = this._timeScale,
			    prevPaused = this._paused,
			    tween,
			    isComplete,
			    next,
			    callback,
			    internalForce,
			    pauseTween,
			    curTime;
			if (time >= totalDur - 0.0000001 && time >= 0) {
				//to work around occasional floating point math artifacts.
				this._totalTime = this._time = totalDur;
				if (!this._reversed) if (!this._hasPausedChild()) {
					isComplete = true;
					callback = "onComplete";
					internalForce = !!this._timeline.autoRemoveChildren; //otherwise, if the animation is unpaused/activated after it's already finished, it doesn't get removed from the parent timeline.
					if (this._duration === 0) if (time <= 0 && time >= -0.0000001 || this._rawPrevTime < 0 || this._rawPrevTime === _tinyNum) if (this._rawPrevTime !== time && this._first) {
						internalForce = true;
						if (this._rawPrevTime > _tinyNum) {
							callback = "onReverseComplete";
						}
					}
				}
				this._rawPrevTime = this._duration || !suppressEvents || time || this._rawPrevTime === time ? time : _tinyNum; //when the playhead arrives at EXACTLY time 0 (right on top) of a zero-duration timeline or tween, we need to discern if events are suppressed so that when the playhead moves again (next time), it'll trigger the callback. If events are NOT suppressed, obviously the callback would be triggered in this render. Basically, the callback should fire either when the playhead ARRIVES or LEAVES this exact spot, not both. Imagine doing a timeline.seek(0) and there's a callback that sits at 0. Since events are suppressed on that seek() by default, nothing will fire, but when the playhead moves off of that position, the callback should fire. This behavior is what people intuitively expect. We set the _rawPrevTime to be a precise tiny number to indicate this scenario rather than using another property/variable which would increase memory usage. This technique is less readable, but more efficient.
				time = totalDur + 0.0001; //to avoid occasional floating point rounding errors - sometimes child tweens/timelines were not being fully completed (their progress might be 0.999999999999998 instead of 1 because when _time - tween._startTime is performed, floating point errors would return a value that was SLIGHTLY off). Try (999999999999.7 - 999999999999) * 1 = 0.699951171875 instead of 0.7.
			} else if (time < 0.0000001) {
				//to work around occasional floating point math artifacts, round super small values to 0.
				this._totalTime = this._time = 0;
				if (prevTime !== 0 || this._duration === 0 && this._rawPrevTime !== _tinyNum && (this._rawPrevTime > 0 || time < 0 && this._rawPrevTime >= 0)) {
					callback = "onReverseComplete";
					isComplete = this._reversed;
				}
				if (time < 0) {
					this._active = false;
					if (this._timeline.autoRemoveChildren && this._reversed) {
						//ensures proper GC if a timeline is resumed after it's finished reversing.
						internalForce = isComplete = true;
						callback = "onReverseComplete";
					} else if (this._rawPrevTime >= 0 && this._first) {
						//when going back beyond the start, force a render so that zero-duration tweens that sit at the very beginning render their start values properly. Otherwise, if the parent timeline's playhead lands exactly at this timeline's startTime, and then moves backwards, the zero-duration tweens at the beginning would still be at their end state.
						internalForce = true;
					}
					this._rawPrevTime = time;
				} else {
					this._rawPrevTime = this._duration || !suppressEvents || time || this._rawPrevTime === time ? time : _tinyNum; //when the playhead arrives at EXACTLY time 0 (right on top) of a zero-duration timeline or tween, we need to discern if events are suppressed so that when the playhead moves again (next time), it'll trigger the callback. If events are NOT suppressed, obviously the callback would be triggered in this render. Basically, the callback should fire either when the playhead ARRIVES or LEAVES this exact spot, not both. Imagine doing a timeline.seek(0) and there's a callback that sits at 0. Since events are suppressed on that seek() by default, nothing will fire, but when the playhead moves off of that position, the callback should fire. This behavior is what people intuitively expect. We set the _rawPrevTime to be a precise tiny number to indicate this scenario rather than using another property/variable which would increase memory usage. This technique is less readable, but more efficient.
					if (time === 0 && isComplete) {
						//if there's a zero-duration tween at the very beginning of a timeline and the playhead lands EXACTLY at time 0, that tween will correctly render its end values, but we need to keep the timeline alive for one more render so that the beginning values render properly as the parent's playhead keeps moving beyond the begining. Imagine obj.x starts at 0 and then we do tl.set(obj, {x:100}).to(obj, 1, {x:200}) and then later we tl.reverse()...the goal is to have obj.x revert to 0. If the playhead happens to land on exactly 0, without this chunk of code, it'd complete the timeline and remove it from the rendering queue (not good).
						tween = this._first;
						while (tween && tween._startTime === 0) {
							if (!tween._duration) {
								isComplete = false;
							}
							tween = tween._next;
						}
					}
					time = 0; //to avoid occasional floating point rounding errors (could cause problems especially with zero-duration tweens at the very beginning of the timeline)
					if (!this._initted) {
						internalForce = true;
					}
				}
			} else {

				if (this._hasPause && !this._forcingPlayhead && !suppressEvents) {
					if (time >= prevTime) {
						tween = this._first;
						while (tween && tween._startTime <= time && !pauseTween) {
							if (!tween._duration) if (tween.data === "isPause" && !tween.ratio && !(tween._startTime === 0 && this._rawPrevTime === 0)) {
								pauseTween = tween;
							}
							tween = tween._next;
						}
					} else {
						tween = this._last;
						while (tween && tween._startTime >= time && !pauseTween) {
							if (!tween._duration) if (tween.data === "isPause" && tween._rawPrevTime > 0) {
								pauseTween = tween;
							}
							tween = tween._prev;
						}
					}
					if (pauseTween) {
						this._time = time = pauseTween._startTime;
						this._totalTime = time + this._cycle * (this._totalDuration + this._repeatDelay);
					}
				}

				this._totalTime = this._time = this._rawPrevTime = time;
			}
			if ((this._time === prevTime || !this._first) && !force && !internalForce && !pauseTween) {
				return;
			} else if (!this._initted) {
				this._initted = true;
			}

			if (!this._active) if (!this._paused && this._time !== prevTime && time > 0) {
				this._active = true; //so that if the user renders the timeline (as opposed to the parent timeline rendering it), it is forced to re-render and align it with the proper time/frame on the next rendering cycle. Maybe the timeline already finished but the user manually re-renders it as halfway done, for example.
			}

			if (prevTime === 0) if (this.vars.onStart) if (this._time !== 0 || !this._duration) if (!suppressEvents) {
				this._callback("onStart");
			}

			curTime = this._time;
			if (curTime >= prevTime) {
				tween = this._first;
				while (tween) {
					next = tween._next; //record it here because the value could change after rendering...
					if (curTime !== this._time || this._paused && !prevPaused) {
						//in case a tween pauses or seeks the timeline when rendering, like inside of an onUpdate/onComplete
						break;
					} else if (tween._active || tween._startTime <= curTime && !tween._paused && !tween._gc) {
						if (pauseTween === tween) {
							this.pause();
						}
						if (!tween._reversed) {
							tween.render((time - tween._startTime) * tween._timeScale, suppressEvents, force);
						} else {
							tween.render((!tween._dirty ? tween._totalDuration : tween.totalDuration()) - (time - tween._startTime) * tween._timeScale, suppressEvents, force);
						}
					}
					tween = next;
				}
			} else {
				tween = this._last;
				while (tween) {
					next = tween._prev; //record it here because the value could change after rendering...
					if (curTime !== this._time || this._paused && !prevPaused) {
						//in case a tween pauses or seeks the timeline when rendering, like inside of an onUpdate/onComplete
						break;
					} else if (tween._active || tween._startTime <= prevTime && !tween._paused && !tween._gc) {
						if (pauseTween === tween) {
							pauseTween = tween._prev; //the linked list is organized by _startTime, thus it's possible that a tween could start BEFORE the pause and end after it, in which case it would be positioned before the pause tween in the linked list, but we should render it before we pause() the timeline and cease rendering. This is only a concern when going in reverse.
							while (pauseTween && pauseTween.endTime() > this._time) {
								pauseTween.render(pauseTween._reversed ? pauseTween.totalDuration() - (time - pauseTween._startTime) * pauseTween._timeScale : (time - pauseTween._startTime) * pauseTween._timeScale, suppressEvents, force);
								pauseTween = pauseTween._prev;
							}
							pauseTween = null;
							this.pause();
						}
						if (!tween._reversed) {
							tween.render((time - tween._startTime) * tween._timeScale, suppressEvents, force);
						} else {
							tween.render((!tween._dirty ? tween._totalDuration : tween.totalDuration()) - (time - tween._startTime) * tween._timeScale, suppressEvents, force);
						}
					}
					tween = next;
				}
			}

			if (this._onUpdate) if (!suppressEvents) {
				if (_lazyTweens.length) {
					//in case rendering caused any tweens to lazy-init, we should render them because typically when a timeline finishes, users expect things to have rendered fully. Imagine an onUpdate on a timeline that reports/checks tweened values.
					_lazyRender();
				}
				this._callback("onUpdate");
			}

			if (callback) if (!this._gc) if (prevStart === this._startTime || prevTimeScale !== this._timeScale) if (this._time === 0 || totalDur >= this.totalDuration()) {
				//if one of the tweens that was rendered altered this timeline's startTime (like if an onComplete reversed the timeline), it probably isn't complete. If it is, don't worry, because whatever call altered the startTime would complete if it was necessary at the new time. The only exception is the timeScale property. Also check _gc because there's a chance that kill() could be called in an onUpdate
				if (isComplete) {
					if (_lazyTweens.length) {
						//in case rendering caused any tweens to lazy-init, we should render them because typically when a timeline finishes, users expect things to have rendered fully. Imagine an onComplete on a timeline that reports/checks tweened values.
						_lazyRender();
					}
					if (this._timeline.autoRemoveChildren) {
						this._enabled(false, false);
					}
					this._active = false;
				}
				if (!suppressEvents && this.vars[callback]) {
					this._callback(callback);
				}
			}
		};

		p._hasPausedChild = function () {
			var tween = this._first;
			while (tween) {
				if (tween._paused || tween instanceof TimelineLite && tween._hasPausedChild()) {
					return true;
				}
				tween = tween._next;
			}
			return false;
		};

		p.getChildren = function (nested, tweens, timelines, ignoreBeforeTime) {
			ignoreBeforeTime = ignoreBeforeTime || -9999999999;
			var a = [],
			    tween = this._first,
			    cnt = 0;
			while (tween) {
				if (tween._startTime < ignoreBeforeTime) {
					//do nothing
				} else if (tween instanceof TweenLite) {
					if (tweens !== false) {
						a[cnt++] = tween;
					}
				} else {
					if (timelines !== false) {
						a[cnt++] = tween;
					}
					if (nested !== false) {
						a = a.concat(tween.getChildren(true, tweens, timelines));
						cnt = a.length;
					}
				}
				tween = tween._next;
			}
			return a;
		};

		p.getTweensOf = function (target, nested) {
			var disabled = this._gc,
			    a = [],
			    cnt = 0,
			    tweens,
			    i;
			if (disabled) {
				this._enabled(true, true); //getTweensOf() filters out disabled tweens, and we have to mark them as _gc = true when the timeline completes in order to allow clean garbage collection, so temporarily re-enable the timeline here.
			}
			tweens = TweenLite.getTweensOf(target);
			i = tweens.length;
			while (--i > -1) {
				if (tweens[i].timeline === this || nested && this._contains(tweens[i])) {
					a[cnt++] = tweens[i];
				}
			}
			if (disabled) {
				this._enabled(false, true);
			}
			return a;
		};

		p.recent = function () {
			return this._recent;
		};

		p._contains = function (tween) {
			var tl = tween.timeline;
			while (tl) {
				if (tl === this) {
					return true;
				}
				tl = tl.timeline;
			}
			return false;
		};

		p.shiftChildren = function (amount, adjustLabels, ignoreBeforeTime) {
			ignoreBeforeTime = ignoreBeforeTime || 0;
			var tween = this._first,
			    labels = this._labels,
			    p;
			while (tween) {
				if (tween._startTime >= ignoreBeforeTime) {
					tween._startTime += amount;
				}
				tween = tween._next;
			}
			if (adjustLabels) {
				for (p in labels) {
					if (labels[p] >= ignoreBeforeTime) {
						labels[p] += amount;
					}
				}
			}
			return this._uncache(true);
		};

		p._kill = function (vars, target) {
			if (!vars && !target) {
				return this._enabled(false, false);
			}
			var tweens = !target ? this.getChildren(true, true, false) : this.getTweensOf(target),
			    i = tweens.length,
			    changed = false;
			while (--i > -1) {
				if (tweens[i]._kill(vars, target)) {
					changed = true;
				}
			}
			return changed;
		};

		p.clear = function (labels) {
			var tweens = this.getChildren(false, true, true),
			    i = tweens.length;
			this._time = this._totalTime = 0;
			while (--i > -1) {
				tweens[i]._enabled(false, false);
			}
			if (labels !== false) {
				this._labels = {};
			}
			return this._uncache(true);
		};

		p.invalidate = function () {
			var tween = this._first;
			while (tween) {
				tween.invalidate();
				tween = tween._next;
			}
			return Animation.prototype.invalidate.call(this);;
		};

		p._enabled = function (enabled, ignoreTimeline) {
			if (enabled === this._gc) {
				var tween = this._first;
				while (tween) {
					tween._enabled(enabled, true);
					tween = tween._next;
				}
			}
			return SimpleTimeline.prototype._enabled.call(this, enabled, ignoreTimeline);
		};

		p.totalTime = function (time, suppressEvents, uncapped) {
			this._forcingPlayhead = true;
			var val = Animation.prototype.totalTime.apply(this, arguments);
			this._forcingPlayhead = false;
			return val;
		};

		p.duration = function (value) {
			if (!arguments.length) {
				if (this._dirty) {
					this.totalDuration(); //just triggers recalculation
				}
				return this._duration;
			}
			if (this.duration() !== 0 && value !== 0) {
				this.timeScale(this._duration / value);
			}
			return this;
		};

		p.totalDuration = function (value) {
			if (!arguments.length) {
				if (this._dirty) {
					var max = 0,
					    tween = this._last,
					    prevStart = 999999999999,
					    prev,
					    end;
					while (tween) {
						prev = tween._prev; //record it here in case the tween changes position in the sequence...
						if (tween._dirty) {
							tween.totalDuration(); //could change the tween._startTime, so make sure the tween's cache is clean before analyzing it.
						}
						if (tween._startTime > prevStart && this._sortChildren && !tween._paused) {
							//in case one of the tweens shifted out of order, it needs to be re-inserted into the correct position in the sequence
							this.add(tween, tween._startTime - tween._delay);
						} else {
							prevStart = tween._startTime;
						}
						if (tween._startTime < 0 && !tween._paused) {
							//children aren't allowed to have negative startTimes unless smoothChildTiming is true, so adjust here if one is found.
							max -= tween._startTime;
							if (this._timeline.smoothChildTiming) {
								this._startTime += tween._startTime / this._timeScale;
							}
							this.shiftChildren(-tween._startTime, false, -9999999999);
							prevStart = 0;
						}
						end = tween._startTime + tween._totalDuration / tween._timeScale;
						if (end > max) {
							max = end;
						}
						tween = prev;
					}
					this._duration = this._totalDuration = max;
					this._dirty = false;
				}
				return this._totalDuration;
			}
			return value && this.totalDuration() ? this.timeScale(this._totalDuration / value) : this;
		};

		p.paused = function (value) {
			if (!value) {
				//if there's a pause directly at the spot from where we're unpausing, skip it.
				var tween = this._first,
				    time = this._time;
				while (tween) {
					if (tween._startTime === time && tween.data === "isPause") {
						tween._rawPrevTime = 0; //remember, _rawPrevTime is how zero-duration tweens/callbacks sense directionality and determine whether or not to fire. If _rawPrevTime is the same as _startTime on the next render, it won't fire.
					}
					tween = tween._next;
				}
			}
			return Animation.prototype.paused.apply(this, arguments);
		};

		p.usesFrames = function () {
			var tl = this._timeline;
			while (tl._timeline) {
				tl = tl._timeline;
			}
			return tl === Animation._rootFramesTimeline;
		};

		p.rawTime = function (wrapRepeats) {
			return wrapRepeats && (this._paused || this._repeat && this.time() > 0 && this.totalProgress() < 1) ? this._totalTime % (this._duration + this._repeatDelay) : this._paused ? this._totalTime : (this._timeline.rawTime(wrapRepeats) - this._startTime) * this._timeScale;
		};

		return TimelineLite;
	}, true);
});if (_gsScope._gsDefine) {
	_gsScope._gsQueue.pop()();
}

//export to AMD/RequireJS and CommonJS/Node (precursor to full modular build system coming at a later date)
(function (name) {
	"use strict";

	var getGlobal = function getGlobal() {
		return (_gsScope.GreenSockGlobals || _gsScope)[name];
	};
	if (typeof define === "function" && define.amd) {
		//AMD
		define(["TweenLite"], getGlobal);
	} else if (typeof module !== "undefined" && module.exports) {
		//node
		require("./TweenLite.js"); //dependency
		module.exports = getGlobal();
	}
})("TimelineLite");

cc._RFpop();
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./TweenLite.js":"TweenLite"}],"TopManager":[function(require,module,exports){
"use strict";
cc._RFpush(module, '783c45NyPZDHoUsFXUxF4N6', 'TopManager');
// js\common\TopManager.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        image: cc.Sprite,
        label: cc.Label
    },

    // use this for initialization
    onLoad: function onLoad() {
        //检验是否存在pk
        setTimeout(function () {
            var scenName = cc.director.getScene().name;
            if (scenName != "pkWait") {
                ajaxUtils(HxsgUrl.queryPk, null, function (data) {
                    if (data == "2001") {
                        showAlert("你正处在战斗中，请立即战斗", function () {
                            cc.director.loadScene(HxsgScenes.pkWait);
                        }, function () {
                            cc.director.loadScene(HxsgScenes.pkWait);
                        });
                    }
                });
            }
        }, 10);
        this.setLabel(ajaxReturnData.topCity);
        this.addImageAction();
        var anim = this.getComponent(cc.Animation);

        // 如果没有指定播放哪个动画，并且有设置 defaultClip 的话，则会播放 defaultClip 动画
        //anim.play();

    },

    addImageAction: function addImageAction() {
        var self = this;
        var seq = cc.sequence(cc.moveTo(1, cc.p(-360, 0)).easing(cc.easeCubicActionOut(1)));
        this.image.node.runAction(seq);
    },
    play: function play() {
        this.addImageAction();
        var anim = this.getComponent(cc.Animation);
        // 如果没有指定播放哪个动画，并且有设置 defaultClip 的话，则会播放 defaultClip 动画
    },
    setLabel: function setLabel(msg) {
        this.label.string = msg;
    }
});

cc._RFpop();
},{}],"TweenLite":[function(require,module,exports){
(function (global){
"use strict";
cc._RFpush(module, '37eeashlJVKmp5GLgvMXob6', 'TweenLite');
// js\util\TweenLite.js

"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

/*!
 * VERSION: 1.19.1
 * DATE: 2017-01-17
 * UPDATES AND DOCS AT: http://greensock.com
 *
 * @license Copyright (c) 2008-2017, GreenSock. All rights reserved.
 * This work is subject to the terms at http://greensock.com/standard-license or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 * 
 * @author: Jack Doyle, jack@greensock.com
 */
(function (window, moduleName) {

	"use strict";

	var _exports = {},
	    _doc = window.document,
	    _globals = window.GreenSockGlobals = window.GreenSockGlobals || window;
	if (_globals.TweenLite) {
		return; //in case the core set of classes is already loaded, don't instantiate twice.
	}
	var _namespace = function _namespace(ns) {
		var a = ns.split("."),
		    p = _globals,
		    i;
		for (i = 0; i < a.length; i++) {
			p[a[i]] = p = p[a[i]] || {};
		}
		return p;
	},
	    gs = _namespace("com.greensock"),
	    _tinyNum = 0.0000000001,
	    _slice = function _slice(a) {
		//don't use Array.prototype.slice.call(target, 0) because that doesn't work in IE8 with a NodeList that's returned by querySelectorAll()
		var b = [],
		    l = a.length,
		    i;
		for (i = 0; i !== l; b.push(a[i++])) {}
		return b;
	},
	    _emptyFunc = function _emptyFunc() {},
	    _isArray = function () {
		//works around issues in iframe environments where the Array global isn't shared, thus if the object originates in a different window/iframe, "(obj instanceof Array)" will evaluate false. We added some speed optimizations to avoid Object.prototype.toString.call() unless it's absolutely necessary because it's VERY slow (like 20x slower)
		var toString = Object.prototype.toString,
		    array = toString.call([]);
		return function (obj) {
			return obj != null && (obj instanceof Array || (typeof obj === "undefined" ? "undefined" : _typeof(obj)) === "object" && !!obj.push && toString.call(obj) === array);
		};
	}(),
	    a,
	    i,
	    p,
	    _ticker,
	    _tickerActive,
	    _defLookup = {},


	/**
  * @constructor
  * Defines a GreenSock class, optionally with an array of dependencies that must be instantiated first and passed into the definition.
  * This allows users to load GreenSock JS files in any order even if they have interdependencies (like CSSPlugin extends TweenPlugin which is
  * inside TweenLite.js, but if CSSPlugin is loaded first, it should wait to run its code until TweenLite.js loads and instantiates TweenPlugin
  * and then pass TweenPlugin to CSSPlugin's definition). This is all done automatically and internally.
  *
  * Every definition will be added to a "com.greensock" global object (typically window, but if a window.GreenSockGlobals object is found,
  * it will go there as of v1.7). For example, TweenLite will be found at window.com.greensock.TweenLite and since it's a global class that should be available anywhere,
  * it is ALSO referenced at window.TweenLite. However some classes aren't considered global, like the base com.greensock.core.Animation class, so
  * those will only be at the package like window.com.greensock.core.Animation. Again, if you define a GreenSockGlobals object on the window, everything
  * gets tucked neatly inside there instead of on the window directly. This allows you to do advanced things like load multiple versions of GreenSock
  * files and put them into distinct objects (imagine a banner ad uses a newer version but the main site uses an older one). In that case, you could
  * sandbox the banner one like:
  *
  * <script>
  *     var gs = window.GreenSockGlobals = {}; //the newer version we're about to load could now be referenced in a "gs" object, like gs.TweenLite.to(...). Use whatever alias you want as long as it's unique, "gs" or "banner" or whatever.
  * </script>
  * <script src="js/greensock/v1.7/TweenMax.js"></script>
  * <script>
  *     window.GreenSockGlobals = window._gsQueue = window._gsDefine = null; //reset it back to null (along with the special _gsQueue variable) so that the next load of TweenMax affects the window and we can reference things directly like TweenLite.to(...)
  * </script>
  * <script src="js/greensock/v1.6/TweenMax.js"></script>
  * <script>
  *     gs.TweenLite.to(...); //would use v1.7
  *     TweenLite.to(...); //would use v1.6
  * </script>
  *
  * @param {!string} ns The namespace of the class definition, leaving off "com.greensock." as that's assumed. For example, "TweenLite" or "plugins.CSSPlugin" or "easing.Back".
  * @param {!Array.<string>} dependencies An array of dependencies (described as their namespaces minus "com.greensock." prefix). For example ["TweenLite","plugins.TweenPlugin","core.Animation"]
  * @param {!function():Object} func The function that should be called and passed the resolved dependencies which will return the actual class for this definition.
  * @param {boolean=} global If true, the class will be added to the global scope (typically window unless you define a window.GreenSockGlobals object)
  */
	Definition = function Definition(ns, dependencies, func, global) {
		this.sc = _defLookup[ns] ? _defLookup[ns].sc : []; //subclasses
		_defLookup[ns] = this;
		this.gsClass = null;
		this.func = func;
		var _classes = [];
		this.check = function (init) {
			var i = dependencies.length,
			    missing = i,
			    cur,
			    a,
			    n,
			    cl,
			    hasModule;
			while (--i > -1) {
				if ((cur = _defLookup[dependencies[i]] || new Definition(dependencies[i], [])).gsClass) {
					_classes[i] = cur.gsClass;
					missing--;
				} else if (init) {
					cur.sc.push(this);
				}
			}
			if (missing === 0 && func) {
				a = ("com.greensock." + ns).split(".");
				n = a.pop();
				cl = _namespace(a.join("."))[n] = this.gsClass = func.apply(func, _classes);

				//exports to multiple environments
				if (global) {
					_globals[n] = _exports[n] = cl; //provides a way to avoid global namespace pollution. By default, the main classes like TweenLite, Power1, Strong, etc. are added to window unless a GreenSockGlobals is defined. So if you want to have things added to a custom object instead, just do something like window.GreenSockGlobals = {} before loading any GreenSock files. You can even set up an alias like window.GreenSockGlobals = windows.gs = {} so that you can access everything like gs.TweenLite. Also remember that ALL classes are added to the window.com.greensock object (in their respective packages, like com.greensock.easing.Power1, com.greensock.TweenLite, etc.)
					hasModule = typeof module !== "undefined" && module.exports;
					if (!hasModule && typeof define === "function" && define.amd) {
						//AMD
						define((window.GreenSockAMDPath ? window.GreenSockAMDPath + "/" : "") + ns.split(".").pop(), [], function () {
							return cl;
						});
					} else if (hasModule) {
						//node
						if (ns === moduleName) {
							module.exports = _exports[moduleName] = cl;
							for (i in _exports) {
								cl[i] = _exports[i];
							}
						} else if (_exports[moduleName]) {
							_exports[moduleName][n] = cl;
						}
					}
				}
				for (i = 0; i < this.sc.length; i++) {
					this.sc[i].check();
				}
			}
		};
		this.check(true);
	},


	//used to create Definition instances (which basically registers a class that has dependencies).
	_gsDefine = window._gsDefine = function (ns, dependencies, func, global) {
		return new Definition(ns, dependencies, func, global);
	},


	//a quick way to create a class that doesn't have any dependencies. Returns the class, but first registers it in the GreenSock namespace so that other classes can grab it (other classes might be dependent on the class).
	_class = gs._class = function (ns, func, global) {
		func = func || function () {};
		_gsDefine(ns, [], function () {
			return func;
		}, global);
		return func;
	};

	_gsDefine.globals = _globals;

	/*
  * ----------------------------------------------------------------
  * Ease
  * ----------------------------------------------------------------
  */
	var _baseParams = [0, 0, 1, 1],
	    _blankArray = [],
	    Ease = _class("easing.Ease", function (func, extraParams, type, power) {
		this._func = func;
		this._type = type || 0;
		this._power = power || 0;
		this._params = extraParams ? _baseParams.concat(extraParams) : _baseParams;
	}, true),
	    _easeMap = Ease.map = {},
	    _easeReg = Ease.register = function (ease, names, types, create) {
		var na = names.split(","),
		    i = na.length,
		    ta = (types || "easeIn,easeOut,easeInOut").split(","),
		    e,
		    name,
		    j,
		    type;
		while (--i > -1) {
			name = na[i];
			e = create ? _class("easing." + name, null, true) : gs.easing[name] || {};
			j = ta.length;
			while (--j > -1) {
				type = ta[j];
				_easeMap[name + "." + type] = _easeMap[type + name] = e[type] = ease.getRatio ? ease : ease[type] || new ease();
			}
		}
	};

	p = Ease.prototype;
	p._calcEnd = false;
	p.getRatio = function (p) {
		if (this._func) {
			this._params[0] = p;
			return this._func.apply(null, this._params);
		}
		var t = this._type,
		    pw = this._power,
		    r = t === 1 ? 1 - p : t === 2 ? p : p < 0.5 ? p * 2 : (1 - p) * 2;
		if (pw === 1) {
			r *= r;
		} else if (pw === 2) {
			r *= r * r;
		} else if (pw === 3) {
			r *= r * r * r;
		} else if (pw === 4) {
			r *= r * r * r * r;
		}
		return t === 1 ? 1 - r : t === 2 ? r : p < 0.5 ? r / 2 : 1 - r / 2;
	};

	//create all the standard eases like Linear, Quad, Cubic, Quart, Quint, Strong, Power0, Power1, Power2, Power3, and Power4 (each with easeIn, easeOut, and easeInOut)
	a = ["Linear", "Quad", "Cubic", "Quart", "Quint,Strong"];
	i = a.length;
	while (--i > -1) {
		p = a[i] + ",Power" + i;
		_easeReg(new Ease(null, null, 1, i), p, "easeOut", true);
		_easeReg(new Ease(null, null, 2, i), p, "easeIn" + (i === 0 ? ",easeNone" : ""));
		_easeReg(new Ease(null, null, 3, i), p, "easeInOut");
	}
	_easeMap.linear = gs.easing.Linear.easeIn;
	_easeMap.swing = gs.easing.Quad.easeInOut; //for jQuery folks


	/*
  * ----------------------------------------------------------------
  * EventDispatcher
  * ----------------------------------------------------------------
  */
	var EventDispatcher = _class("events.EventDispatcher", function (target) {
		this._listeners = {};
		this._eventTarget = target || this;
	});
	p = EventDispatcher.prototype;

	p.addEventListener = function (type, callback, scope, useParam, priority) {
		priority = priority || 0;
		var list = this._listeners[type],
		    index = 0,
		    listener,
		    i;
		if (this === _ticker && !_tickerActive) {
			_ticker.wake();
		}
		if (list == null) {
			this._listeners[type] = list = [];
		}
		i = list.length;
		while (--i > -1) {
			listener = list[i];
			if (listener.c === callback && listener.s === scope) {
				list.splice(i, 1);
			} else if (index === 0 && listener.pr < priority) {
				index = i + 1;
			}
		}
		list.splice(index, 0, { c: callback, s: scope, up: useParam, pr: priority });
	};

	p.removeEventListener = function (type, callback) {
		var list = this._listeners[type],
		    i;
		if (list) {
			i = list.length;
			while (--i > -1) {
				if (list[i].c === callback) {
					list.splice(i, 1);
					return;
				}
			}
		}
	};

	p.dispatchEvent = function (type) {
		var list = this._listeners[type],
		    i,
		    t,
		    listener;
		if (list) {
			i = list.length;
			if (i > 1) {
				list = list.slice(0); //in case addEventListener() is called from within a listener/callback (otherwise the index could change, resulting in a skip)
			}
			t = this._eventTarget;
			while (--i > -1) {
				listener = list[i];
				if (listener) {
					if (listener.up) {
						listener.c.call(listener.s || t, { type: type, target: t });
					} else {
						listener.c.call(listener.s || t);
					}
				}
			}
		}
	};

	/*
  * ----------------------------------------------------------------
  * Ticker
  * ----------------------------------------------------------------
  */
	var _reqAnimFrame = window.requestAnimationFrame,
	    _cancelAnimFrame = window.cancelAnimationFrame,
	    _getTime = Date.now || function () {
		return new Date().getTime();
	},
	    _lastUpdate = _getTime();

	//now try to determine the requestAnimationFrame and cancelAnimationFrame functions and if none are found, we'll use a setTimeout()/clearTimeout() polyfill.
	a = ["ms", "moz", "webkit", "o"];
	i = a.length;
	while (--i > -1 && !_reqAnimFrame) {
		_reqAnimFrame = window[a[i] + "RequestAnimationFrame"];
		_cancelAnimFrame = window[a[i] + "CancelAnimationFrame"] || window[a[i] + "CancelRequestAnimationFrame"];
	}

	_class("Ticker", function (fps, useRAF) {
		var _self = this,
		    _startTime = _getTime(),
		    _useRAF = useRAF !== false && _reqAnimFrame ? "auto" : false,
		    _lagThreshold = 500,
		    _adjustedLag = 33,
		    _tickWord = "tick",
		    //helps reduce gc burden
		_fps,
		    _req,
		    _id,
		    _gap,
		    _nextTime,
		    _tick = function _tick(manual) {
			var elapsed = _getTime() - _lastUpdate,
			    overlap,
			    dispatch;
			if (elapsed > _lagThreshold) {
				_startTime += elapsed - _adjustedLag;
			}
			_lastUpdate += elapsed;
			_self.time = (_lastUpdate - _startTime) / 1000;
			overlap = _self.time - _nextTime;
			if (!_fps || overlap > 0 || manual === true) {
				_self.frame++;
				_nextTime += overlap + (overlap >= _gap ? 0.004 : _gap - overlap);
				dispatch = true;
			}
			if (manual !== true) {
				//make sure the request is made before we dispatch the "tick" event so that timing is maintained. Otherwise, if processing the "tick" requires a bunch of time (like 15ms) and we're using a setTimeout() that's based on 16.7ms, it'd technically take 31.7ms between frames otherwise.
				_id = _req(_tick);
			}
			if (dispatch) {
				_self.dispatchEvent(_tickWord);
			}
		};

		EventDispatcher.call(_self);
		_self.time = _self.frame = 0;
		_self.tick = function () {
			_tick(true);
		};

		_self.lagSmoothing = function (threshold, adjustedLag) {
			_lagThreshold = threshold || 1 / _tinyNum; //zero should be interpreted as basically unlimited
			_adjustedLag = Math.min(adjustedLag, _lagThreshold, 0);
		};

		_self.sleep = function () {
			if (_id == null) {
				return;
			}
			if (!_useRAF || !_cancelAnimFrame) {
				clearTimeout(_id);
			} else {
				_cancelAnimFrame(_id);
			}
			_req = _emptyFunc;
			_id = null;
			if (_self === _ticker) {
				_tickerActive = false;
			}
		};

		_self.wake = function (seamless) {
			if (_id !== null) {
				_self.sleep();
			} else if (seamless) {
				_startTime += -_lastUpdate + (_lastUpdate = _getTime());
			} else if (_self.frame > 10) {
				//don't trigger lagSmoothing if we're just waking up, and make sure that at least 10 frames have elapsed because of the iOS bug that we work around below with the 1.5-second setTimout().
				_lastUpdate = _getTime() - _lagThreshold + 5;
			}
			_req = _fps === 0 ? _emptyFunc : !_useRAF || !_reqAnimFrame ? function (f) {
				return setTimeout(f, (_nextTime - _self.time) * 1000 + 1 | 0);
			} : _reqAnimFrame;
			if (_self === _ticker) {
				_tickerActive = true;
			}
			_tick(2);
		};

		_self.fps = function (value) {
			if (!arguments.length) {
				return _fps;
			}
			_fps = value;
			_gap = 1 / (_fps || 60);
			_nextTime = this.time + _gap;
			_self.wake();
		};

		_self.useRAF = function (value) {
			if (!arguments.length) {
				return _useRAF;
			}
			_self.sleep();
			_useRAF = value;
			_self.fps(_fps);
		};
		_self.fps(fps);

		//a bug in iOS 6 Safari occasionally prevents the requestAnimationFrame from working initially, so we use a 1.5-second timeout that automatically falls back to setTimeout() if it senses this condition.
		setTimeout(function () {
			if (_useRAF === "auto" && _self.frame < 5 && _doc.visibilityState !== "hidden") {
				_self.useRAF(false);
			}
		}, 1500);
	});

	p = gs.Ticker.prototype = new gs.events.EventDispatcher();
	p.constructor = gs.Ticker;

	/*
  * ----------------------------------------------------------------
  * Animation
  * ----------------------------------------------------------------
  */
	var Animation = _class("core.Animation", function (duration, vars) {
		this.vars = vars = vars || {};
		this._duration = this._totalDuration = duration || 0;
		this._delay = Number(vars.delay) || 0;
		this._timeScale = 1;
		this._active = vars.immediateRender === true;
		this.data = vars.data;
		this._reversed = vars.reversed === true;

		if (!_rootTimeline) {
			return;
		}
		if (!_tickerActive) {
			//some browsers (like iOS 6 Safari) shut down JavaScript execution when the tab is disabled and they [occasionally] neglect to start up requestAnimationFrame again when returning - this code ensures that the engine starts up again properly.
			_ticker.wake();
		}

		var tl = this.vars.useFrames ? _rootFramesTimeline : _rootTimeline;
		tl.add(this, tl._time);

		if (this.vars.paused) {
			this.paused(true);
		}
	});

	_ticker = Animation.ticker = new gs.Ticker();
	p = Animation.prototype;
	p._dirty = p._gc = p._initted = p._paused = false;
	p._totalTime = p._time = 0;
	p._rawPrevTime = -1;
	p._next = p._last = p._onUpdate = p._timeline = p.timeline = null;
	p._paused = false;

	//some browsers (like iOS) occasionally drop the requestAnimationFrame event when the user switches to a different tab and then comes back again, so we use a 2-second setTimeout() to sense if/when that condition occurs and then wake() the ticker.
	var _checkTimeout = function _checkTimeout() {
		if (_tickerActive && _getTime() - _lastUpdate > 2000) {
			_ticker.wake();
		}
		setTimeout(_checkTimeout, 2000);
	};
	_checkTimeout();

	p.play = function (from, suppressEvents) {
		if (from != null) {
			this.seek(from, suppressEvents);
		}
		return this.reversed(false).paused(false);
	};

	p.pause = function (atTime, suppressEvents) {
		if (atTime != null) {
			this.seek(atTime, suppressEvents);
		}
		return this.paused(true);
	};

	p.resume = function (from, suppressEvents) {
		if (from != null) {
			this.seek(from, suppressEvents);
		}
		return this.paused(false);
	};

	p.seek = function (time, suppressEvents) {
		return this.totalTime(Number(time), suppressEvents !== false);
	};

	p.restart = function (includeDelay, suppressEvents) {
		return this.reversed(false).paused(false).totalTime(includeDelay ? -this._delay : 0, suppressEvents !== false, true);
	};

	p.reverse = function (from, suppressEvents) {
		if (from != null) {
			this.seek(from || this.totalDuration(), suppressEvents);
		}
		return this.reversed(true).paused(false);
	};

	p.render = function (time, suppressEvents, force) {
		//stub - we override this method in subclasses.
	};

	p.invalidate = function () {
		this._time = this._totalTime = 0;
		this._initted = this._gc = false;
		this._rawPrevTime = -1;
		if (this._gc || !this.timeline) {
			this._enabled(true);
		}
		return this;
	};

	p.isActive = function () {
		var tl = this._timeline,
		    //the 2 root timelines won't have a _timeline; they're always active.
		startTime = this._startTime,
		    rawTime;
		return !tl || !this._gc && !this._paused && tl.isActive() && (rawTime = tl.rawTime(true)) >= startTime && rawTime < startTime + this.totalDuration() / this._timeScale;
	};

	p._enabled = function (enabled, ignoreTimeline) {
		if (!_tickerActive) {
			_ticker.wake();
		}
		this._gc = !enabled;
		this._active = this.isActive();
		if (ignoreTimeline !== true) {
			if (enabled && !this.timeline) {
				this._timeline.add(this, this._startTime - this._delay);
			} else if (!enabled && this.timeline) {
				this._timeline._remove(this, true);
			}
		}
		return false;
	};

	p._kill = function (vars, target) {
		return this._enabled(false, false);
	};

	p.kill = function (vars, target) {
		this._kill(vars, target);
		return this;
	};

	p._uncache = function (includeSelf) {
		var tween = includeSelf ? this : this.timeline;
		while (tween) {
			tween._dirty = true;
			tween = tween.timeline;
		}
		return this;
	};

	p._swapSelfInParams = function (params) {
		var i = params.length,
		    copy = params.concat();
		while (--i > -1) {
			if (params[i] === "{self}") {
				copy[i] = this;
			}
		}
		return copy;
	};

	p._callback = function (type) {
		var v = this.vars,
		    callback = v[type],
		    params = v[type + "Params"],
		    scope = v[type + "Scope"] || v.callbackScope || this,
		    l = params ? params.length : 0;
		switch (l) {//speed optimization; call() is faster than apply() so use it when there are only a few parameters (which is by far most common). Previously we simply did var v = this.vars; v[type].apply(v[type + "Scope"] || v.callbackScope || this, v[type + "Params"] || _blankArray);
			case 0:
				callback.call(scope);break;
			case 1:
				callback.call(scope, params[0]);break;
			case 2:
				callback.call(scope, params[0], params[1]);break;
			default:
				callback.apply(scope, params);
		}
	};

	//----Animation getters/setters --------------------------------------------------------

	p.eventCallback = function (type, callback, params, scope) {
		if ((type || "").substr(0, 2) === "on") {
			var v = this.vars;
			if (arguments.length === 1) {
				return v[type];
			}
			if (callback == null) {
				delete v[type];
			} else {
				v[type] = callback;
				v[type + "Params"] = _isArray(params) && params.join("").indexOf("{self}") !== -1 ? this._swapSelfInParams(params) : params;
				v[type + "Scope"] = scope;
			}
			if (type === "onUpdate") {
				this._onUpdate = callback;
			}
		}
		return this;
	};

	p.delay = function (value) {
		if (!arguments.length) {
			return this._delay;
		}
		if (this._timeline.smoothChildTiming) {
			this.startTime(this._startTime + value - this._delay);
		}
		this._delay = value;
		return this;
	};

	p.duration = function (value) {
		if (!arguments.length) {
			this._dirty = false;
			return this._duration;
		}
		this._duration = this._totalDuration = value;
		this._uncache(true); //true in case it's a TweenMax or TimelineMax that has a repeat - we'll need to refresh the totalDuration.
		if (this._timeline.smoothChildTiming) if (this._time > 0) if (this._time < this._duration) if (value !== 0) {
			this.totalTime(this._totalTime * (value / this._duration), true);
		}
		return this;
	};

	p.totalDuration = function (value) {
		this._dirty = false;
		return !arguments.length ? this._totalDuration : this.duration(value);
	};

	p.time = function (value, suppressEvents) {
		if (!arguments.length) {
			return this._time;
		}
		if (this._dirty) {
			this.totalDuration();
		}
		return this.totalTime(value > this._duration ? this._duration : value, suppressEvents);
	};

	p.totalTime = function (time, suppressEvents, uncapped) {
		if (!_tickerActive) {
			_ticker.wake();
		}
		if (!arguments.length) {
			return this._totalTime;
		}
		if (this._timeline) {
			if (time < 0 && !uncapped) {
				time += this.totalDuration();
			}
			if (this._timeline.smoothChildTiming) {
				if (this._dirty) {
					this.totalDuration();
				}
				var totalDuration = this._totalDuration,
				    tl = this._timeline;
				if (time > totalDuration && !uncapped) {
					time = totalDuration;
				}
				this._startTime = (this._paused ? this._pauseTime : tl._time) - (!this._reversed ? time : totalDuration - time) / this._timeScale;
				if (!tl._dirty) {
					//for performance improvement. If the parent's cache is already dirty, it already took care of marking the ancestors as dirty too, so skip the function call here.
					this._uncache(false);
				}
				//in case any of the ancestor timelines had completed but should now be enabled, we should reset their totalTime() which will also ensure that they're lined up properly and enabled. Skip for animations that are on the root (wasteful). Example: a TimelineLite.exportRoot() is performed when there's a paused tween on the root, the export will not complete until that tween is unpaused, but imagine a child gets restarted later, after all [unpaused] tweens have completed. The startTime of that child would get pushed out, but one of the ancestors may have completed.
				if (tl._timeline) {
					while (tl._timeline) {
						if (tl._timeline._time !== (tl._startTime + tl._totalTime) / tl._timeScale) {
							tl.totalTime(tl._totalTime, true);
						}
						tl = tl._timeline;
					}
				}
			}
			if (this._gc) {
				this._enabled(true, false);
			}
			if (this._totalTime !== time || this._duration === 0) {
				if (_lazyTweens.length) {
					_lazyRender();
				}
				this.render(time, suppressEvents, false);
				if (_lazyTweens.length) {
					//in case rendering caused any tweens to lazy-init, we should render them because typically when someone calls seek() or time() or progress(), they expect an immediate render.
					_lazyRender();
				}
			}
		}
		return this;
	};

	p.progress = p.totalProgress = function (value, suppressEvents) {
		var duration = this.duration();
		return !arguments.length ? duration ? this._time / duration : this.ratio : this.totalTime(duration * value, suppressEvents);
	};

	p.startTime = function (value) {
		if (!arguments.length) {
			return this._startTime;
		}
		if (value !== this._startTime) {
			this._startTime = value;
			if (this.timeline) if (this.timeline._sortChildren) {
				this.timeline.add(this, value - this._delay); //ensures that any necessary re-sequencing of Animations in the timeline occurs to make sure the rendering order is correct.
			}
		}
		return this;
	};

	p.endTime = function (includeRepeats) {
		return this._startTime + (includeRepeats != false ? this.totalDuration() : this.duration()) / this._timeScale;
	};

	p.timeScale = function (value) {
		if (!arguments.length) {
			return this._timeScale;
		}
		value = value || _tinyNum; //can't allow zero because it'll throw the math off
		if (this._timeline && this._timeline.smoothChildTiming) {
			var pauseTime = this._pauseTime,
			    t = pauseTime || pauseTime === 0 ? pauseTime : this._timeline.totalTime();
			this._startTime = t - (t - this._startTime) * this._timeScale / value;
		}
		this._timeScale = value;
		return this._uncache(false);
	};

	p.reversed = function (value) {
		if (!arguments.length) {
			return this._reversed;
		}
		if (value != this._reversed) {
			this._reversed = value;
			this.totalTime(this._timeline && !this._timeline.smoothChildTiming ? this.totalDuration() - this._totalTime : this._totalTime, true);
		}
		return this;
	};

	p.paused = function (value) {
		if (!arguments.length) {
			return this._paused;
		}
		var tl = this._timeline,
		    raw,
		    elapsed;
		if (value != this._paused) if (tl) {
			if (!_tickerActive && !value) {
				_ticker.wake();
			}
			raw = tl.rawTime();
			elapsed = raw - this._pauseTime;
			if (!value && tl.smoothChildTiming) {
				this._startTime += elapsed;
				this._uncache(false);
			}
			this._pauseTime = value ? raw : null;
			this._paused = value;
			this._active = this.isActive();
			if (!value && elapsed !== 0 && this._initted && this.duration()) {
				raw = tl.smoothChildTiming ? this._totalTime : (raw - this._startTime) / this._timeScale;
				this.render(raw, raw === this._totalTime, true); //in case the target's properties changed via some other tween or manual update by the user, we should force a render.
			}
		}
		if (this._gc && !value) {
			this._enabled(true, false);
		}
		return this;
	};

	/*
  * ----------------------------------------------------------------
  * SimpleTimeline
  * ----------------------------------------------------------------
  */
	var SimpleTimeline = _class("core.SimpleTimeline", function (vars) {
		Animation.call(this, 0, vars);
		this.autoRemoveChildren = this.smoothChildTiming = true;
	});

	p = SimpleTimeline.prototype = new Animation();
	p.constructor = SimpleTimeline;
	p.kill()._gc = false;
	p._first = p._last = p._recent = null;
	p._sortChildren = false;

	p.add = p.insert = function (child, position, align, stagger) {
		var prevTween, st;
		child._startTime = Number(position || 0) + child._delay;
		if (child._paused) if (this !== child._timeline) {
			//we only adjust the _pauseTime if it wasn't in this timeline already. Remember, sometimes a tween will be inserted again into the same timeline when its startTime is changed so that the tweens in the TimelineLite/Max are re-ordered properly in the linked list (so everything renders in the proper order).
			child._pauseTime = child._startTime + (this.rawTime() - child._startTime) / child._timeScale;
		}
		if (child.timeline) {
			child.timeline._remove(child, true); //removes from existing timeline so that it can be properly added to this one.
		}
		child.timeline = child._timeline = this;
		if (child._gc) {
			child._enabled(true, true);
		}
		prevTween = this._last;
		if (this._sortChildren) {
			st = child._startTime;
			while (prevTween && prevTween._startTime > st) {
				prevTween = prevTween._prev;
			}
		}
		if (prevTween) {
			child._next = prevTween._next;
			prevTween._next = child;
		} else {
			child._next = this._first;
			this._first = child;
		}
		if (child._next) {
			child._next._prev = child;
		} else {
			this._last = child;
		}
		child._prev = prevTween;
		this._recent = child;
		if (this._timeline) {
			this._uncache(true);
		}
		return this;
	};

	p._remove = function (tween, skipDisable) {
		if (tween.timeline === this) {
			if (!skipDisable) {
				tween._enabled(false, true);
			}

			if (tween._prev) {
				tween._prev._next = tween._next;
			} else if (this._first === tween) {
				this._first = tween._next;
			}
			if (tween._next) {
				tween._next._prev = tween._prev;
			} else if (this._last === tween) {
				this._last = tween._prev;
			}
			tween._next = tween._prev = tween.timeline = null;
			if (tween === this._recent) {
				this._recent = this._last;
			}

			if (this._timeline) {
				this._uncache(true);
			}
		}
		return this;
	};

	p.render = function (time, suppressEvents, force) {
		var tween = this._first,
		    next;
		this._totalTime = this._time = this._rawPrevTime = time;
		while (tween) {
			next = tween._next; //record it here because the value could change after rendering...
			if (tween._active || time >= tween._startTime && !tween._paused) {
				if (!tween._reversed) {
					tween.render((time - tween._startTime) * tween._timeScale, suppressEvents, force);
				} else {
					tween.render((!tween._dirty ? tween._totalDuration : tween.totalDuration()) - (time - tween._startTime) * tween._timeScale, suppressEvents, force);
				}
			}
			tween = next;
		}
	};

	p.rawTime = function () {
		if (!_tickerActive) {
			_ticker.wake();
		}
		return this._totalTime;
	};

	/*
  * ----------------------------------------------------------------
  * TweenLite
  * ----------------------------------------------------------------
  */
	var TweenLite = _class("TweenLite", function (target, duration, vars) {
		Animation.call(this, duration, vars);
		this.render = TweenLite.prototype.render; //speed optimization (avoid prototype lookup on this "hot" method)

		if (target == null) {
			throw "Cannot tween a null target.";
		}

		this.target = target = typeof target !== "string" ? target : TweenLite.selector(target) || target;

		var isSelector = target.jquery || target.length && target !== window && target[0] && (target[0] === window || target[0].nodeType && target[0].style && !target.nodeType),
		    overwrite = this.vars.overwrite,
		    i,
		    targ,
		    targets;

		this._overwrite = overwrite = overwrite == null ? _overwriteLookup[TweenLite.defaultOverwrite] : typeof overwrite === "number" ? overwrite >> 0 : _overwriteLookup[overwrite];

		if ((isSelector || target instanceof Array || target.push && _isArray(target)) && typeof target[0] !== "number") {
			this._targets = targets = _slice(target); //don't use Array.prototype.slice.call(target, 0) because that doesn't work in IE8 with a NodeList that's returned by querySelectorAll()
			this._propLookup = [];
			this._siblings = [];
			for (i = 0; i < targets.length; i++) {
				targ = targets[i];
				if (!targ) {
					targets.splice(i--, 1);
					continue;
				} else if (typeof targ === "string") {
					targ = targets[i--] = TweenLite.selector(targ); //in case it's an array of strings
					if (typeof targ === "string") {
						targets.splice(i + 1, 1); //to avoid an endless loop (can't imagine why the selector would return a string, but just in case)
					}
					continue;
				} else if (targ.length && targ !== window && targ[0] && (targ[0] === window || targ[0].nodeType && targ[0].style && !targ.nodeType)) {
					//in case the user is passing in an array of selector objects (like jQuery objects), we need to check one more level and pull things out if necessary. Also note that <select> elements pass all the criteria regarding length and the first child having style, so we must also check to ensure the target isn't an HTML node itself.
					targets.splice(i--, 1);
					this._targets = targets = targets.concat(_slice(targ));
					continue;
				}
				this._siblings[i] = _register(targ, this, false);
				if (overwrite === 1) if (this._siblings[i].length > 1) {
					_applyOverwrite(targ, this, null, 1, this._siblings[i]);
				}
			}
		} else {
			this._propLookup = {};
			this._siblings = _register(target, this, false);
			if (overwrite === 1) if (this._siblings.length > 1) {
				_applyOverwrite(target, this, null, 1, this._siblings);
			}
		}
		if (this.vars.immediateRender || duration === 0 && this._delay === 0 && this.vars.immediateRender !== false) {
			this._time = -_tinyNum; //forces a render without having to set the render() "force" parameter to true because we want to allow lazying by default (using the "force" parameter always forces an immediate full render)
			this.render(Math.min(0, -this._delay)); //in case delay is negative
		}
	}, true),
	    _isSelector = function _isSelector(v) {
		return v && v.length && v !== window && v[0] && (v[0] === window || v[0].nodeType && v[0].style && !v.nodeType); //we cannot check "nodeType" if the target is window from within an iframe, otherwise it will trigger a security error in some browsers like Firefox.
	},
	    _autoCSS = function _autoCSS(vars, target) {
		var css = {},
		    p;
		for (p in vars) {
			if (!_reservedProps[p] && (!(p in target) || p === "transform" || p === "x" || p === "y" || p === "width" || p === "height" || p === "className" || p === "border") && (!_plugins[p] || _plugins[p] && _plugins[p]._autoCSS)) {
				//note: <img> elements contain read-only "x" and "y" properties. We should also prioritize editing css width/height rather than the element's properties.
				css[p] = vars[p];
				delete vars[p];
			}
		}
		vars.css = css;
	};

	p = TweenLite.prototype = new Animation();
	p.constructor = TweenLite;
	p.kill()._gc = false;

	//----TweenLite defaults, overwrite management, and root updates ----------------------------------------------------

	p.ratio = 0;
	p._firstPT = p._targets = p._overwrittenProps = p._startAt = null;
	p._notifyPluginsOfEnabled = p._lazy = false;

	TweenLite.version = "1.19.1";
	TweenLite.defaultEase = p._ease = new Ease(null, null, 1, 1);
	TweenLite.defaultOverwrite = "auto";
	TweenLite.ticker = _ticker;
	TweenLite.autoSleep = 120;
	TweenLite.lagSmoothing = function (threshold, adjustedLag) {
		_ticker.lagSmoothing(threshold, adjustedLag);
	};

	TweenLite.selector = window.$ || window.jQuery || function (e) {
		var selector = window.$ || window.jQuery;
		if (selector) {
			TweenLite.selector = selector;
			return selector(e);
		}
		return typeof _doc === "undefined" ? e : _doc.querySelectorAll ? _doc.querySelectorAll(e) : _doc.getElementById(e.charAt(0) === "#" ? e.substr(1) : e);
	};

	var _lazyTweens = [],
	    _lazyLookup = {},
	    _numbersExp = /(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/ig,

	//_nonNumbersExp = /(?:([\-+](?!(\d|=)))|[^\d\-+=e]|(e(?![\-+][\d])))+/ig,
	_setRatio = function _setRatio(v) {
		var pt = this._firstPT,
		    min = 0.000001,
		    val;
		while (pt) {
			val = !pt.blob ? pt.c * v + pt.s : v === 1 ? this.end : v ? this.join("") : this.start;
			if (pt.m) {
				val = pt.m(val, this._target || pt.t);
			} else if (val < min) if (val > -min && !pt.blob) {
				//prevents issues with converting very small numbers to strings in the browser
				val = 0;
			}
			if (!pt.f) {
				pt.t[pt.p] = val;
			} else if (pt.fp) {
				pt.t[pt.p](pt.fp, val);
			} else {
				pt.t[pt.p](val);
			}
			pt = pt._next;
		}
	},

	//compares two strings (start/end), finds the numbers that are different and spits back an array representing the whole value but with the changing values isolated as elements. For example, "rgb(0,0,0)" and "rgb(100,50,0)" would become ["rgb(", 0, ",", 50, ",0)"]. Notice it merges the parts that are identical (performance optimization). The array also has a linked list of PropTweens attached starting with _firstPT that contain the tweening data (t, p, s, c, f, etc.). It also stores the starting value as a "start" property so that we can revert to it if/when necessary, like when a tween rewinds fully. If the quantity of numbers differs between the start and end, it will always prioritize the end value(s). The pt parameter is optional - it's for a PropTween that will be appended to the end of the linked list and is typically for actually setting the value after all of the elements have been updated (with array.join("")).
	_blobDif = function _blobDif(start, end, filter, pt) {
		var a = [],
		    charIndex = 0,
		    s = "",
		    color = 0,
		    startNums,
		    endNums,
		    num,
		    i,
		    l,
		    nonNumbers,
		    currentNum;
		a.start = start;
		a.end = end;
		start = a[0] = start + ""; //ensure values are strings
		end = a[1] = end + "";
		if (filter) {
			filter(a); //pass an array with the starting and ending values and let the filter do whatever it needs to the values.
			start = a[0];
			end = a[1];
		}
		a.length = 0;
		startNums = start.match(_numbersExp) || [];
		endNums = end.match(_numbersExp) || [];
		if (pt) {
			pt._next = null;
			pt.blob = 1;
			a._firstPT = a._applyPT = pt; //apply last in the linked list (which means inserting it first)
		}
		l = endNums.length;
		for (i = 0; i < l; i++) {
			currentNum = endNums[i];
			nonNumbers = end.substr(charIndex, end.indexOf(currentNum, charIndex) - charIndex);
			s += nonNumbers || !i ? nonNumbers : ","; //note: SVG spec allows omission of comma/space when a negative sign is wedged between two numbers, like 2.5-5.3 instead of 2.5,-5.3 but when tweening, the negative value may switch to positive, so we insert the comma just in case.
			charIndex += nonNumbers.length;
			if (color) {
				//sense rgba() values and round them.
				color = (color + 1) % 5;
			} else if (nonNumbers.substr(-5) === "rgba(") {
				color = 1;
			}
			if (currentNum === startNums[i] || startNums.length <= i) {
				s += currentNum;
			} else {
				if (s) {
					a.push(s);
					s = "";
				}
				num = parseFloat(startNums[i]);
				a.push(num);
				a._firstPT = { _next: a._firstPT, t: a, p: a.length - 1, s: num, c: (currentNum.charAt(1) === "=" ? parseInt(currentNum.charAt(0) + "1", 10) * parseFloat(currentNum.substr(2)) : parseFloat(currentNum) - num) || 0, f: 0, m: color && color < 4 ? Math.round : 0 };
				//note: we don't set _prev because we'll never need to remove individual PropTweens from this list.
			}
			charIndex += currentNum.length;
		}
		s += end.substr(charIndex);
		if (s) {
			a.push(s);
		}
		a.setRatio = _setRatio;
		return a;
	},

	//note: "funcParam" is only necessary for function-based getters/setters that require an extra parameter like getAttribute("width") and setAttribute("width", value). In this example, funcParam would be "width". Used by AttrPlugin for example.
	_addPropTween = function _addPropTween(target, prop, start, end, overwriteProp, mod, funcParam, stringFilter, index) {
		if (typeof end === "function") {
			end = end(index || 0, target);
		}
		var type = _typeof(target[prop]),
		    getterName = type !== "function" ? "" : prop.indexOf("set") || typeof target["get" + prop.substr(3)] !== "function" ? prop : "get" + prop.substr(3),
		    s = start !== "get" ? start : !getterName ? target[prop] : funcParam ? target[getterName](funcParam) : target[getterName](),
		    isRelative = typeof end === "string" && end.charAt(1) === "=",
		    pt = { t: target, p: prop, s: s, f: type === "function", pg: 0, n: overwriteProp || prop, m: !mod ? 0 : typeof mod === "function" ? mod : Math.round, pr: 0, c: isRelative ? parseInt(end.charAt(0) + "1", 10) * parseFloat(end.substr(2)) : parseFloat(end) - s || 0 },
		    blob;

		if (typeof s !== "number" || typeof end !== "number" && !isRelative) {
			if (funcParam || isNaN(s) || !isRelative && isNaN(end) || typeof s === "boolean" || typeof end === "boolean") {
				//a blob (string that has multiple numbers in it)
				pt.fp = funcParam;
				blob = _blobDif(s, isRelative ? pt.s + pt.c : end, stringFilter || TweenLite.defaultStringFilter, pt);
				pt = { t: blob, p: "setRatio", s: 0, c: 1, f: 2, pg: 0, n: overwriteProp || prop, pr: 0, m: 0 }; //"2" indicates it's a Blob property tween. Needed for RoundPropsPlugin for example.
			} else {
				pt.s = parseFloat(s);
				if (!isRelative) {
					pt.c = parseFloat(end) - pt.s || 0;
				}
			}
		}
		if (pt.c) {
			//only add it to the linked list if there's a change.
			if (pt._next = this._firstPT) {
				pt._next._prev = pt;
			}
			this._firstPT = pt;
			return pt;
		}
	},
	    _internals = TweenLite._internals = { isArray: _isArray, isSelector: _isSelector, lazyTweens: _lazyTweens, blobDif: _blobDif },
	    //gives us a way to expose certain private values to other GreenSock classes without contaminating tha main TweenLite object.
	_plugins = TweenLite._plugins = {},
	    _tweenLookup = _internals.tweenLookup = {},
	    _tweenLookupNum = 0,
	    _reservedProps = _internals.reservedProps = { ease: 1, delay: 1, overwrite: 1, onComplete: 1, onCompleteParams: 1, onCompleteScope: 1, useFrames: 1, runBackwards: 1, startAt: 1, onUpdate: 1, onUpdateParams: 1, onUpdateScope: 1, onStart: 1, onStartParams: 1, onStartScope: 1, onReverseComplete: 1, onReverseCompleteParams: 1, onReverseCompleteScope: 1, onRepeat: 1, onRepeatParams: 1, onRepeatScope: 1, easeParams: 1, yoyo: 1, immediateRender: 1, repeat: 1, repeatDelay: 1, data: 1, paused: 1, reversed: 1, autoCSS: 1, lazy: 1, onOverwrite: 1, callbackScope: 1, stringFilter: 1, id: 1 },
	    _overwriteLookup = { none: 0, all: 1, auto: 2, concurrent: 3, allOnStart: 4, preexisting: 5, "true": 1, "false": 0 },
	    _rootFramesTimeline = Animation._rootFramesTimeline = new SimpleTimeline(),
	    _rootTimeline = Animation._rootTimeline = new SimpleTimeline(),
	    _nextGCFrame = 30,
	    _lazyRender = _internals.lazyRender = function () {
		var i = _lazyTweens.length,
		    tween;
		_lazyLookup = {};
		while (--i > -1) {
			tween = _lazyTweens[i];
			if (tween && tween._lazy !== false) {
				tween.render(tween._lazy[0], tween._lazy[1], true);
				tween._lazy = false;
			}
		}
		_lazyTweens.length = 0;
	};

	_rootTimeline._startTime = _ticker.time;
	_rootFramesTimeline._startTime = _ticker.frame;
	_rootTimeline._active = _rootFramesTimeline._active = true;
	setTimeout(_lazyRender, 1); //on some mobile devices, there isn't a "tick" before code runs which means any lazy renders wouldn't run before the next official "tick".

	Animation._updateRoot = TweenLite.render = function () {
		var i, a, p;
		if (_lazyTweens.length) {
			//if code is run outside of the requestAnimationFrame loop, there may be tweens queued AFTER the engine refreshed, so we need to ensure any pending renders occur before we refresh again.
			_lazyRender();
		}
		_rootTimeline.render((_ticker.time - _rootTimeline._startTime) * _rootTimeline._timeScale, false, false);
		_rootFramesTimeline.render((_ticker.frame - _rootFramesTimeline._startTime) * _rootFramesTimeline._timeScale, false, false);
		if (_lazyTweens.length) {
			_lazyRender();
		}
		if (_ticker.frame >= _nextGCFrame) {
			//dump garbage every 120 frames or whatever the user sets TweenLite.autoSleep to
			_nextGCFrame = _ticker.frame + (parseInt(TweenLite.autoSleep, 10) || 120);
			for (p in _tweenLookup) {
				a = _tweenLookup[p].tweens;
				i = a.length;
				while (--i > -1) {
					if (a[i]._gc) {
						a.splice(i, 1);
					}
				}
				if (a.length === 0) {
					delete _tweenLookup[p];
				}
			}
			//if there are no more tweens in the root timelines, or if they're all paused, make the _timer sleep to reduce load on the CPU slightly
			p = _rootTimeline._first;
			if (!p || p._paused) if (TweenLite.autoSleep && !_rootFramesTimeline._first && _ticker._listeners.tick.length === 1) {
				while (p && p._paused) {
					p = p._next;
				}
				if (!p) {
					_ticker.sleep();
				}
			}
		}
	};

	_ticker.addEventListener("tick", Animation._updateRoot);

	var _register = function _register(target, tween, scrub) {
		var id = target._gsTweenID,
		    a,
		    i;
		if (!_tweenLookup[id || (target._gsTweenID = id = "t" + _tweenLookupNum++)]) {
			_tweenLookup[id] = { target: target, tweens: [] };
		}
		if (tween) {
			a = _tweenLookup[id].tweens;
			a[i = a.length] = tween;
			if (scrub) {
				while (--i > -1) {
					if (a[i] === tween) {
						a.splice(i, 1);
					}
				}
			}
		}
		return _tweenLookup[id].tweens;
	},
	    _onOverwrite = function _onOverwrite(overwrittenTween, overwritingTween, target, killedProps) {
		var func = overwrittenTween.vars.onOverwrite,
		    r1,
		    r2;
		if (func) {
			r1 = func(overwrittenTween, overwritingTween, target, killedProps);
		}
		func = TweenLite.onOverwrite;
		if (func) {
			r2 = func(overwrittenTween, overwritingTween, target, killedProps);
		}
		return r1 !== false && r2 !== false;
	},
	    _applyOverwrite = function _applyOverwrite(target, tween, props, mode, siblings) {
		var i, changed, curTween, l;
		if (mode === 1 || mode >= 4) {
			l = siblings.length;
			for (i = 0; i < l; i++) {
				if ((curTween = siblings[i]) !== tween) {
					if (!curTween._gc) {
						if (curTween._kill(null, target, tween)) {
							changed = true;
						}
					}
				} else if (mode === 5) {
					break;
				}
			}
			return changed;
		}
		//NOTE: Add 0.0000000001 to overcome floating point errors that can cause the startTime to be VERY slightly off (when a tween's time() is set for example)
		var startTime = tween._startTime + _tinyNum,
		    overlaps = [],
		    oCount = 0,
		    zeroDur = tween._duration === 0,
		    globalStart;
		i = siblings.length;
		while (--i > -1) {
			if ((curTween = siblings[i]) === tween || curTween._gc || curTween._paused) {
				//ignore
			} else if (curTween._timeline !== tween._timeline) {
				globalStart = globalStart || _checkOverlap(tween, 0, zeroDur);
				if (_checkOverlap(curTween, globalStart, zeroDur) === 0) {
					overlaps[oCount++] = curTween;
				}
			} else if (curTween._startTime <= startTime) if (curTween._startTime + curTween.totalDuration() / curTween._timeScale > startTime) if (!((zeroDur || !curTween._initted) && startTime - curTween._startTime <= 0.0000000002)) {
				overlaps[oCount++] = curTween;
			}
		}

		i = oCount;
		while (--i > -1) {
			curTween = overlaps[i];
			if (mode === 2) if (curTween._kill(props, target, tween)) {
				changed = true;
			}
			if (mode !== 2 || !curTween._firstPT && curTween._initted) {
				if (mode !== 2 && !_onOverwrite(curTween, tween)) {
					continue;
				}
				if (curTween._enabled(false, false)) {
					//if all property tweens have been overwritten, kill the tween.
					changed = true;
				}
			}
		}
		return changed;
	},
	    _checkOverlap = function _checkOverlap(tween, reference, zeroDur) {
		var tl = tween._timeline,
		    ts = tl._timeScale,
		    t = tween._startTime;
		while (tl._timeline) {
			t += tl._startTime;
			ts *= tl._timeScale;
			if (tl._paused) {
				return -100;
			}
			tl = tl._timeline;
		}
		t /= ts;
		return t > reference ? t - reference : zeroDur && t === reference || !tween._initted && t - reference < 2 * _tinyNum ? _tinyNum : (t += tween.totalDuration() / tween._timeScale / ts) > reference + _tinyNum ? 0 : t - reference - _tinyNum;
	};

	//---- TweenLite instance methods -----------------------------------------------------------------------------

	p._init = function () {
		var v = this.vars,
		    op = this._overwrittenProps,
		    dur = this._duration,
		    immediate = !!v.immediateRender,
		    ease = v.ease,
		    i,
		    initPlugins,
		    pt,
		    p,
		    startVars,
		    l;
		if (v.startAt) {
			if (this._startAt) {
				this._startAt.render(-1, true); //if we've run a startAt previously (when the tween instantiated), we should revert it so that the values re-instantiate correctly particularly for relative tweens. Without this, a TweenLite.fromTo(obj, 1, {x:"+=100"}, {x:"-=100"}), for example, would actually jump to +=200 because the startAt would run twice, doubling the relative change.
				this._startAt.kill();
			}
			startVars = {};
			for (p in v.startAt) {
				//copy the properties/values into a new object to avoid collisions, like var to = {x:0}, from = {x:500}; timeline.fromTo(e, 1, from, to).fromTo(e, 1, to, from);
				startVars[p] = v.startAt[p];
			}
			startVars.overwrite = false;
			startVars.immediateRender = true;
			startVars.lazy = immediate && v.lazy !== false;
			startVars.startAt = startVars.delay = null; //no nesting of startAt objects allowed (otherwise it could cause an infinite loop).
			this._startAt = TweenLite.to(this.target, 0, startVars);
			if (immediate) {
				if (this._time > 0) {
					this._startAt = null; //tweens that render immediately (like most from() and fromTo() tweens) shouldn't revert when their parent timeline's playhead goes backward past the startTime because the initial render could have happened anytime and it shouldn't be directly correlated to this tween's startTime. Imagine setting up a complex animation where the beginning states of various objects are rendered immediately but the tween doesn't happen for quite some time - if we revert to the starting values as soon as the playhead goes backward past the tween's startTime, it will throw things off visually. Reversion should only happen in TimelineLite/Max instances where immediateRender was false (which is the default in the convenience methods like from()).
				} else if (dur !== 0) {
					return; //we skip initialization here so that overwriting doesn't occur until the tween actually begins. Otherwise, if you create several immediateRender:true tweens of the same target/properties to drop into a TimelineLite or TimelineMax, the last one created would overwrite the first ones because they didn't get placed into the timeline yet before the first render occurs and kicks in overwriting.
				}
			}
		} else if (v.runBackwards && dur !== 0) {
			//from() tweens must be handled uniquely: their beginning values must be rendered but we don't want overwriting to occur yet (when time is still 0). Wait until the tween actually begins before doing all the routines like overwriting. At that time, we should render at the END of the tween to ensure that things initialize correctly (remember, from() tweens go backwards)
			if (this._startAt) {
				this._startAt.render(-1, true);
				this._startAt.kill();
				this._startAt = null;
			} else {
				if (this._time !== 0) {
					//in rare cases (like if a from() tween runs and then is invalidate()-ed), immediateRender could be true but the initial forced-render gets skipped, so there's no need to force the render in this context when the _time is greater than 0
					immediate = false;
				}
				pt = {};
				for (p in v) {
					//copy props into a new object and skip any reserved props, otherwise onComplete or onUpdate or onStart could fire. We should, however, permit autoCSS to go through.
					if (!_reservedProps[p] || p === "autoCSS") {
						pt[p] = v[p];
					}
				}
				pt.overwrite = 0;
				pt.data = "isFromStart"; //we tag the tween with as "isFromStart" so that if [inside a plugin] we need to only do something at the very END of a tween, we have a way of identifying this tween as merely the one that's setting the beginning values for a "from()" tween. For example, clearProps in CSSPlugin should only get applied at the very END of a tween and without this tag, from(...{height:100, clearProps:"height", delay:1}) would wipe the height at the beginning of the tween and after 1 second, it'd kick back in.
				pt.lazy = immediate && v.lazy !== false;
				pt.immediateRender = immediate; //zero-duration tweens render immediately by default, but if we're not specifically instructed to render this tween immediately, we should skip this and merely _init() to record the starting values (rendering them immediately would push them to completion which is wasteful in that case - we'd have to render(-1) immediately after)
				this._startAt = TweenLite.to(this.target, 0, pt);
				if (!immediate) {
					this._startAt._init(); //ensures that the initial values are recorded
					this._startAt._enabled(false); //no need to have the tween render on the next cycle. Disable it because we'll always manually control the renders of the _startAt tween.
					if (this.vars.immediateRender) {
						this._startAt = null;
					}
				} else if (this._time === 0) {
					return;
				}
			}
		}
		this._ease = ease = !ease ? TweenLite.defaultEase : ease instanceof Ease ? ease : typeof ease === "function" ? new Ease(ease, v.easeParams) : _easeMap[ease] || TweenLite.defaultEase;
		if (v.easeParams instanceof Array && ease.config) {
			this._ease = ease.config.apply(ease, v.easeParams);
		}
		this._easeType = this._ease._type;
		this._easePower = this._ease._power;
		this._firstPT = null;

		if (this._targets) {
			l = this._targets.length;
			for (i = 0; i < l; i++) {
				if (this._initProps(this._targets[i], this._propLookup[i] = {}, this._siblings[i], op ? op[i] : null, i)) {
					initPlugins = true;
				}
			}
		} else {
			initPlugins = this._initProps(this.target, this._propLookup, this._siblings, op, 0);
		}

		if (initPlugins) {
			TweenLite._onPluginEvent("_onInitAllProps", this); //reorders the array in order of priority. Uses a static TweenPlugin method in order to minimize file size in TweenLite
		}
		if (op) if (!this._firstPT) if (typeof this.target !== "function") {
			//if all tweening properties have been overwritten, kill the tween. If the target is a function, it's probably a delayedCall so let it live.
			this._enabled(false, false);
		}
		if (v.runBackwards) {
			pt = this._firstPT;
			while (pt) {
				pt.s += pt.c;
				pt.c = -pt.c;
				pt = pt._next;
			}
		}
		this._onUpdate = v.onUpdate;
		this._initted = true;
	};

	p._initProps = function (target, propLookup, siblings, overwrittenProps, index) {
		var p, i, initPlugins, plugin, pt, v;
		if (target == null) {
			return false;
		}

		if (_lazyLookup[target._gsTweenID]) {
			_lazyRender(); //if other tweens of the same target have recently initted but haven't rendered yet, we've got to force the render so that the starting values are correct (imagine populating a timeline with a bunch of sequential tweens and then jumping to the end)
		}

		if (!this.vars.css) if (target.style) if (target !== window && target.nodeType) if (_plugins.css) if (this.vars.autoCSS !== false) {
			//it's so common to use TweenLite/Max to animate the css of DOM elements, we assume that if the target is a DOM element, that's what is intended (a convenience so that users don't have to wrap things in css:{}, although we still recommend it for a slight performance boost and better specificity). Note: we cannot check "nodeType" on the window inside an iframe.
			_autoCSS(this.vars, target);
		}
		for (p in this.vars) {
			v = this.vars[p];
			if (_reservedProps[p]) {
				if (v) if (v instanceof Array || v.push && _isArray(v)) if (v.join("").indexOf("{self}") !== -1) {
					this.vars[p] = v = this._swapSelfInParams(v, this);
				}
			} else if (_plugins[p] && (plugin = new _plugins[p]())._onInitTween(target, this.vars[p], this, index)) {

				//t - target 		[object]
				//p - property 		[string]
				//s - start			[number]
				//c - change		[number]
				//f - isFunction	[boolean]
				//n - name			[string]
				//pg - isPlugin 	[boolean]
				//pr - priority		[number]
				//m - mod           [function | 0]
				this._firstPT = pt = { _next: this._firstPT, t: plugin, p: "setRatio", s: 0, c: 1, f: 1, n: p, pg: 1, pr: plugin._priority, m: 0 };
				i = plugin._overwriteProps.length;
				while (--i > -1) {
					propLookup[plugin._overwriteProps[i]] = this._firstPT;
				}
				if (plugin._priority || plugin._onInitAllProps) {
					initPlugins = true;
				}
				if (plugin._onDisable || plugin._onEnable) {
					this._notifyPluginsOfEnabled = true;
				}
				if (pt._next) {
					pt._next._prev = pt;
				}
			} else {
				propLookup[p] = _addPropTween.call(this, target, p, "get", v, p, 0, null, this.vars.stringFilter, index);
			}
		}

		if (overwrittenProps) if (this._kill(overwrittenProps, target)) {
			//another tween may have tried to overwrite properties of this tween before init() was called (like if two tweens start at the same time, the one created second will run first)
			return this._initProps(target, propLookup, siblings, overwrittenProps, index);
		}
		if (this._overwrite > 1) if (this._firstPT) if (siblings.length > 1) if (_applyOverwrite(target, this, propLookup, this._overwrite, siblings)) {
			this._kill(propLookup, target);
			return this._initProps(target, propLookup, siblings, overwrittenProps, index);
		}
		if (this._firstPT) if (this.vars.lazy !== false && this._duration || this.vars.lazy && !this._duration) {
			//zero duration tweens don't lazy render by default; everything else does.
			_lazyLookup[target._gsTweenID] = true;
		}
		return initPlugins;
	};

	p.render = function (time, suppressEvents, force) {
		var prevTime = this._time,
		    duration = this._duration,
		    prevRawPrevTime = this._rawPrevTime,
		    isComplete,
		    callback,
		    pt,
		    rawPrevTime;
		if (time >= duration - 0.0000001 && time >= 0) {
			//to work around occasional floating point math artifacts.
			this._totalTime = this._time = duration;
			this.ratio = this._ease._calcEnd ? this._ease.getRatio(1) : 1;
			if (!this._reversed) {
				isComplete = true;
				callback = "onComplete";
				force = force || this._timeline.autoRemoveChildren; //otherwise, if the animation is unpaused/activated after it's already finished, it doesn't get removed from the parent timeline.
			}
			if (duration === 0) if (this._initted || !this.vars.lazy || force) {
				//zero-duration tweens are tricky because we must discern the momentum/direction of time in order to determine whether the starting values should be rendered or the ending values. If the "playhead" of its timeline goes past the zero-duration tween in the forward direction or lands directly on it, the end values should be rendered, but if the timeline's "playhead" moves past it in the backward direction (from a postitive time to a negative time), the starting values must be rendered.
				if (this._startTime === this._timeline._duration) {
					//if a zero-duration tween is at the VERY end of a timeline and that timeline renders at its end, it will typically add a tiny bit of cushion to the render time to prevent rounding errors from getting in the way of tweens rendering their VERY end. If we then reverse() that timeline, the zero-duration tween will trigger its onReverseComplete even though technically the playhead didn't pass over it again. It's a very specific edge case we must accommodate.
					time = 0;
				}
				if (prevRawPrevTime < 0 || time <= 0 && time >= -0.0000001 || prevRawPrevTime === _tinyNum && this.data !== "isPause") if (prevRawPrevTime !== time) {
					//note: when this.data is "isPause", it's a callback added by addPause() on a timeline that we should not be triggered when LEAVING its exact start time. In other words, tl.addPause(1).play(1) shouldn't pause.
					force = true;
					if (prevRawPrevTime > _tinyNum) {
						callback = "onReverseComplete";
					}
				}
				this._rawPrevTime = rawPrevTime = !suppressEvents || time || prevRawPrevTime === time ? time : _tinyNum; //when the playhead arrives at EXACTLY time 0 (right on top) of a zero-duration tween, we need to discern if events are suppressed so that when the playhead moves again (next time), it'll trigger the callback. If events are NOT suppressed, obviously the callback would be triggered in this render. Basically, the callback should fire either when the playhead ARRIVES or LEAVES this exact spot, not both. Imagine doing a timeline.seek(0) and there's a callback that sits at 0. Since events are suppressed on that seek() by default, nothing will fire, but when the playhead moves off of that position, the callback should fire. This behavior is what people intuitively expect. We set the _rawPrevTime to be a precise tiny number to indicate this scenario rather than using another property/variable which would increase memory usage. This technique is less readable, but more efficient.
			}
		} else if (time < 0.0000001) {
			//to work around occasional floating point math artifacts, round super small values to 0.
			this._totalTime = this._time = 0;
			this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0;
			if (prevTime !== 0 || duration === 0 && prevRawPrevTime > 0) {
				callback = "onReverseComplete";
				isComplete = this._reversed;
			}
			if (time < 0) {
				this._active = false;
				if (duration === 0) if (this._initted || !this.vars.lazy || force) {
					//zero-duration tweens are tricky because we must discern the momentum/direction of time in order to determine whether the starting values should be rendered or the ending values. If the "playhead" of its timeline goes past the zero-duration tween in the forward direction or lands directly on it, the end values should be rendered, but if the timeline's "playhead" moves past it in the backward direction (from a postitive time to a negative time), the starting values must be rendered.
					if (prevRawPrevTime >= 0 && !(prevRawPrevTime === _tinyNum && this.data === "isPause")) {
						force = true;
					}
					this._rawPrevTime = rawPrevTime = !suppressEvents || time || prevRawPrevTime === time ? time : _tinyNum; //when the playhead arrives at EXACTLY time 0 (right on top) of a zero-duration tween, we need to discern if events are suppressed so that when the playhead moves again (next time), it'll trigger the callback. If events are NOT suppressed, obviously the callback would be triggered in this render. Basically, the callback should fire either when the playhead ARRIVES or LEAVES this exact spot, not both. Imagine doing a timeline.seek(0) and there's a callback that sits at 0. Since events are suppressed on that seek() by default, nothing will fire, but when the playhead moves off of that position, the callback should fire. This behavior is what people intuitively expect. We set the _rawPrevTime to be a precise tiny number to indicate this scenario rather than using another property/variable which would increase memory usage. This technique is less readable, but more efficient.
				}
			}
			if (!this._initted) {
				//if we render the very beginning (time == 0) of a fromTo(), we must force the render (normal tweens wouldn't need to render at a time of 0 when the prevTime was also 0). This is also mandatory to make sure overwriting kicks in immediately.
				force = true;
			}
		} else {
			this._totalTime = this._time = time;

			if (this._easeType) {
				var r = time / duration,
				    type = this._easeType,
				    pow = this._easePower;
				if (type === 1 || type === 3 && r >= 0.5) {
					r = 1 - r;
				}
				if (type === 3) {
					r *= 2;
				}
				if (pow === 1) {
					r *= r;
				} else if (pow === 2) {
					r *= r * r;
				} else if (pow === 3) {
					r *= r * r * r;
				} else if (pow === 4) {
					r *= r * r * r * r;
				}

				if (type === 1) {
					this.ratio = 1 - r;
				} else if (type === 2) {
					this.ratio = r;
				} else if (time / duration < 0.5) {
					this.ratio = r / 2;
				} else {
					this.ratio = 1 - r / 2;
				}
			} else {
				this.ratio = this._ease.getRatio(time / duration);
			}
		}

		if (this._time === prevTime && !force) {
			return;
		} else if (!this._initted) {
			this._init();
			if (!this._initted || this._gc) {
				//immediateRender tweens typically won't initialize until the playhead advances (_time is greater than 0) in order to ensure that overwriting occurs properly. Also, if all of the tweening properties have been overwritten (which would cause _gc to be true, as set in _init()), we shouldn't continue otherwise an onStart callback could be called for example.
				return;
			} else if (!force && this._firstPT && (this.vars.lazy !== false && this._duration || this.vars.lazy && !this._duration)) {
				this._time = this._totalTime = prevTime;
				this._rawPrevTime = prevRawPrevTime;
				_lazyTweens.push(this);
				this._lazy = [time, suppressEvents];
				return;
			}
			//_ease is initially set to defaultEase, so now that init() has run, _ease is set properly and we need to recalculate the ratio. Overall this is faster than using conditional logic earlier in the method to avoid having to set ratio twice because we only init() once but renderTime() gets called VERY frequently.
			if (this._time && !isComplete) {
				this.ratio = this._ease.getRatio(this._time / duration);
			} else if (isComplete && this._ease._calcEnd) {
				this.ratio = this._ease.getRatio(this._time === 0 ? 0 : 1);
			}
		}
		if (this._lazy !== false) {
			//in case a lazy render is pending, we should flush it because the new render is occurring now (imagine a lazy tween instantiating and then immediately the user calls tween.seek(tween.duration()), skipping to the end - the end render would be forced, and then if we didn't flush the lazy render, it'd fire AFTER the seek(), rendering it at the wrong time.
			this._lazy = false;
		}
		if (!this._active) if (!this._paused && this._time !== prevTime && time >= 0) {
			this._active = true; //so that if the user renders a tween (as opposed to the timeline rendering it), the timeline is forced to re-render and align it with the proper time/frame on the next rendering cycle. Maybe the tween already finished but the user manually re-renders it as halfway done.
		}
		if (prevTime === 0) {
			if (this._startAt) {
				if (time >= 0) {
					this._startAt.render(time, suppressEvents, force);
				} else if (!callback) {
					callback = "_dummyGS"; //if no callback is defined, use a dummy value just so that the condition at the end evaluates as true because _startAt should render AFTER the normal render loop when the time is negative. We could handle this in a more intuitive way, of course, but the render loop is the MOST important thing to optimize, so this technique allows us to avoid adding extra conditional logic in a high-frequency area.
				}
			}
			if (this.vars.onStart) if (this._time !== 0 || duration === 0) if (!suppressEvents) {
				this._callback("onStart");
			}
		}
		pt = this._firstPT;
		while (pt) {
			if (pt.f) {
				pt.t[pt.p](pt.c * this.ratio + pt.s);
			} else {
				pt.t[pt.p] = pt.c * this.ratio + pt.s;
			}
			pt = pt._next;
		}

		if (this._onUpdate) {
			if (time < 0) if (this._startAt && time !== -0.0001) {
				//if the tween is positioned at the VERY beginning (_startTime 0) of its parent timeline, it's illegal for the playhead to go back further, so we should not render the recorded startAt values.
				this._startAt.render(time, suppressEvents, force); //note: for performance reasons, we tuck this conditional logic inside less traveled areas (most tweens don't have an onUpdate). We'd just have it at the end before the onComplete, but the values should be updated before any onUpdate is called, so we ALSO put it here and then if it's not called, we do so later near the onComplete.
			}
			if (!suppressEvents) if (this._time !== prevTime || isComplete || force) {
				this._callback("onUpdate");
			}
		}
		if (callback) if (!this._gc || force) {
			//check _gc because there's a chance that kill() could be called in an onUpdate
			if (time < 0 && this._startAt && !this._onUpdate && time !== -0.0001) {
				//-0.0001 is a special value that we use when looping back to the beginning of a repeated TimelineMax, in which case we shouldn't render the _startAt values.
				this._startAt.render(time, suppressEvents, force);
			}
			if (isComplete) {
				if (this._timeline.autoRemoveChildren) {
					this._enabled(false, false);
				}
				this._active = false;
			}
			if (!suppressEvents && this.vars[callback]) {
				this._callback(callback);
			}
			if (duration === 0 && this._rawPrevTime === _tinyNum && rawPrevTime !== _tinyNum) {
				//the onComplete or onReverseComplete could trigger movement of the playhead and for zero-duration tweens (which must discern direction) that land directly back on their start time, we don't want to fire again on the next render. Think of several addPause()'s in a timeline that forces the playhead to a certain spot, but what if it's already paused and another tween is tweening the "time" of the timeline? Each time it moves [forward] past that spot, it would move back, and since suppressEvents is true, it'd reset _rawPrevTime to _tinyNum so that when it begins again, the callback would fire (so ultimately it could bounce back and forth during that tween). Again, this is a very uncommon scenario, but possible nonetheless.
				this._rawPrevTime = 0;
			}
		}
	};

	p._kill = function (vars, target, overwritingTween) {
		if (vars === "all") {
			vars = null;
		}
		if (vars == null) if (target == null || target === this.target) {
			this._lazy = false;
			return this._enabled(false, false);
		}
		target = typeof target !== "string" ? target || this._targets || this.target : TweenLite.selector(target) || target;
		var simultaneousOverwrite = overwritingTween && this._time && overwritingTween._startTime === this._startTime && this._timeline === overwritingTween._timeline,
		    i,
		    overwrittenProps,
		    p,
		    pt,
		    propLookup,
		    changed,
		    killProps,
		    record,
		    killed;
		if ((_isArray(target) || _isSelector(target)) && typeof target[0] !== "number") {
			i = target.length;
			while (--i > -1) {
				if (this._kill(vars, target[i], overwritingTween)) {
					changed = true;
				}
			}
		} else {
			if (this._targets) {
				i = this._targets.length;
				while (--i > -1) {
					if (target === this._targets[i]) {
						propLookup = this._propLookup[i] || {};
						this._overwrittenProps = this._overwrittenProps || [];
						overwrittenProps = this._overwrittenProps[i] = vars ? this._overwrittenProps[i] || {} : "all";
						break;
					}
				}
			} else if (target !== this.target) {
				return false;
			} else {
				propLookup = this._propLookup;
				overwrittenProps = this._overwrittenProps = vars ? this._overwrittenProps || {} : "all";
			}

			if (propLookup) {
				killProps = vars || propLookup;
				record = vars !== overwrittenProps && overwrittenProps !== "all" && vars !== propLookup && ((typeof vars === "undefined" ? "undefined" : _typeof(vars)) !== "object" || !vars._tempKill); //_tempKill is a super-secret way to delete a particular tweening property but NOT have it remembered as an official overwritten property (like in BezierPlugin)
				if (overwritingTween && (TweenLite.onOverwrite || this.vars.onOverwrite)) {
					for (p in killProps) {
						if (propLookup[p]) {
							if (!killed) {
								killed = [];
							}
							killed.push(p);
						}
					}
					if ((killed || !vars) && !_onOverwrite(this, overwritingTween, target, killed)) {
						//if the onOverwrite returned false, that means the user wants to override the overwriting (cancel it).
						return false;
					}
				}

				for (p in killProps) {
					if (pt = propLookup[p]) {
						if (simultaneousOverwrite) {
							//if another tween overwrites this one and they both start at exactly the same time, yet this tween has already rendered once (for example, at 0.001) because it's first in the queue, we should revert the values to where they were at 0 so that the starting values aren't contaminated on the overwriting tween.
							if (pt.f) {
								pt.t[pt.p](pt.s);
							} else {
								pt.t[pt.p] = pt.s;
							}
							changed = true;
						}
						if (pt.pg && pt.t._kill(killProps)) {
							changed = true; //some plugins need to be notified so they can perform cleanup tasks first
						}
						if (!pt.pg || pt.t._overwriteProps.length === 0) {
							if (pt._prev) {
								pt._prev._next = pt._next;
							} else if (pt === this._firstPT) {
								this._firstPT = pt._next;
							}
							if (pt._next) {
								pt._next._prev = pt._prev;
							}
							pt._next = pt._prev = null;
						}
						delete propLookup[p];
					}
					if (record) {
						overwrittenProps[p] = 1;
					}
				}
				if (!this._firstPT && this._initted) {
					//if all tweening properties are killed, kill the tween. Without this line, if there's a tween with multiple targets and then you killTweensOf() each target individually, the tween would technically still remain active and fire its onComplete even though there aren't any more properties tweening.
					this._enabled(false, false);
				}
			}
		}
		return changed;
	};

	p.invalidate = function () {
		if (this._notifyPluginsOfEnabled) {
			TweenLite._onPluginEvent("_onDisable", this);
		}
		this._firstPT = this._overwrittenProps = this._startAt = this._onUpdate = null;
		this._notifyPluginsOfEnabled = this._active = this._lazy = false;
		this._propLookup = this._targets ? {} : [];
		Animation.prototype.invalidate.call(this);
		if (this.vars.immediateRender) {
			this._time = -_tinyNum; //forces a render without having to set the render() "force" parameter to true because we want to allow lazying by default (using the "force" parameter always forces an immediate full render)
			this.render(Math.min(0, -this._delay)); //in case delay is negative.
		}
		return this;
	};

	p._enabled = function (enabled, ignoreTimeline) {
		if (!_tickerActive) {
			_ticker.wake();
		}
		if (enabled && this._gc) {
			var targets = this._targets,
			    i;
			if (targets) {
				i = targets.length;
				while (--i > -1) {
					this._siblings[i] = _register(targets[i], this, true);
				}
			} else {
				this._siblings = _register(this.target, this, true);
			}
		}
		Animation.prototype._enabled.call(this, enabled, ignoreTimeline);
		if (this._notifyPluginsOfEnabled) if (this._firstPT) {
			return TweenLite._onPluginEvent(enabled ? "_onEnable" : "_onDisable", this);
		}
		return false;
	};

	//----TweenLite static methods -----------------------------------------------------

	TweenLite.to = function (target, duration, vars) {
		return new TweenLite(target, duration, vars);
	};

	TweenLite.from = function (target, duration, vars) {
		vars.runBackwards = true;
		vars.immediateRender = vars.immediateRender != false;
		return new TweenLite(target, duration, vars);
	};

	TweenLite.fromTo = function (target, duration, fromVars, toVars) {
		toVars.startAt = fromVars;
		toVars.immediateRender = toVars.immediateRender != false && fromVars.immediateRender != false;
		return new TweenLite(target, duration, toVars);
	};

	TweenLite.delayedCall = function (delay, callback, params, scope, useFrames) {
		return new TweenLite(callback, 0, { delay: delay, onComplete: callback, onCompleteParams: params, callbackScope: scope, onReverseComplete: callback, onReverseCompleteParams: params, immediateRender: false, lazy: false, useFrames: useFrames, overwrite: 0 });
	};

	TweenLite.set = function (target, vars) {
		return new TweenLite(target, 0, vars);
	};

	TweenLite.getTweensOf = function (target, onlyActive) {
		if (target == null) {
			return [];
		}
		target = typeof target !== "string" ? target : TweenLite.selector(target) || target;
		var i, a, j, t;
		if ((_isArray(target) || _isSelector(target)) && typeof target[0] !== "number") {
			i = target.length;
			a = [];
			while (--i > -1) {
				a = a.concat(TweenLite.getTweensOf(target[i], onlyActive));
			}
			i = a.length;
			//now get rid of any duplicates (tweens of arrays of objects could cause duplicates)
			while (--i > -1) {
				t = a[i];
				j = i;
				while (--j > -1) {
					if (t === a[j]) {
						a.splice(i, 1);
					}
				}
			}
		} else {
			a = _register(target).concat();
			i = a.length;
			while (--i > -1) {
				if (a[i]._gc || onlyActive && !a[i].isActive()) {
					a.splice(i, 1);
				}
			}
		}
		return a;
	};

	TweenLite.killTweensOf = TweenLite.killDelayedCallsTo = function (target, onlyActive, vars) {
		if ((typeof onlyActive === "undefined" ? "undefined" : _typeof(onlyActive)) === "object") {
			vars = onlyActive; //for backwards compatibility (before "onlyActive" parameter was inserted)
			onlyActive = false;
		}
		var a = TweenLite.getTweensOf(target, onlyActive),
		    i = a.length;
		while (--i > -1) {
			a[i]._kill(vars, target);
		}
	};

	/*
  * ----------------------------------------------------------------
  * TweenPlugin   (could easily be split out as a separate file/class, but included for ease of use (so that people don't need to include another script call before loading plugins which is easy to forget)
  * ----------------------------------------------------------------
  */
	var TweenPlugin = _class("plugins.TweenPlugin", function (props, priority) {
		this._overwriteProps = (props || "").split(",");
		this._propName = this._overwriteProps[0];
		this._priority = priority || 0;
		this._super = TweenPlugin.prototype;
	}, true);

	p = TweenPlugin.prototype;
	TweenPlugin.version = "1.19.0";
	TweenPlugin.API = 2;
	p._firstPT = null;
	p._addTween = _addPropTween;
	p.setRatio = _setRatio;

	p._kill = function (lookup) {
		var a = this._overwriteProps,
		    pt = this._firstPT,
		    i;
		if (lookup[this._propName] != null) {
			this._overwriteProps = [];
		} else {
			i = a.length;
			while (--i > -1) {
				if (lookup[a[i]] != null) {
					a.splice(i, 1);
				}
			}
		}
		while (pt) {
			if (lookup[pt.n] != null) {
				if (pt._next) {
					pt._next._prev = pt._prev;
				}
				if (pt._prev) {
					pt._prev._next = pt._next;
					pt._prev = null;
				} else if (this._firstPT === pt) {
					this._firstPT = pt._next;
				}
			}
			pt = pt._next;
		}
		return false;
	};

	p._mod = p._roundProps = function (lookup) {
		var pt = this._firstPT,
		    val;
		while (pt) {
			val = lookup[this._propName] || pt.n != null && lookup[pt.n.split(this._propName + "_").join("")];
			if (val && typeof val === "function") {
				//some properties that are very plugin-specific add a prefix named after the _propName plus an underscore, so we need to ignore that extra stuff here.
				if (pt.f === 2) {
					pt.t._applyPT.m = val;
				} else {
					pt.m = val;
				}
			}
			pt = pt._next;
		}
	};

	TweenLite._onPluginEvent = function (type, tween) {
		var pt = tween._firstPT,
		    changed,
		    pt2,
		    first,
		    last,
		    next;
		if (type === "_onInitAllProps") {
			//sorts the PropTween linked list in order of priority because some plugins need to render earlier/later than others, like MotionBlurPlugin applies its effects after all x/y/alpha tweens have rendered on each frame.
			while (pt) {
				next = pt._next;
				pt2 = first;
				while (pt2 && pt2.pr > pt.pr) {
					pt2 = pt2._next;
				}
				if (pt._prev = pt2 ? pt2._prev : last) {
					pt._prev._next = pt;
				} else {
					first = pt;
				}
				if (pt._next = pt2) {
					pt2._prev = pt;
				} else {
					last = pt;
				}
				pt = next;
			}
			pt = tween._firstPT = first;
		}
		while (pt) {
			if (pt.pg) if (typeof pt.t[type] === "function") if (pt.t[type]()) {
				changed = true;
			}
			pt = pt._next;
		}
		return changed;
	};

	TweenPlugin.activate = function (plugins) {
		var i = plugins.length;
		while (--i > -1) {
			if (plugins[i].API === TweenPlugin.API) {
				_plugins[new plugins[i]()._propName] = plugins[i];
			}
		}
		return true;
	};

	//provides a more concise way to define plugins that have no dependencies besides TweenPlugin and TweenLite, wrapping common boilerplate stuff into one function (added in 1.9.0). You don't NEED to use this to define a plugin - the old way still works and can be useful in certain (rare) situations.
	_gsDefine.plugin = function (config) {
		if (!config || !config.propName || !config.init || !config.API) {
			throw "illegal plugin definition.";
		}
		var propName = config.propName,
		    priority = config.priority || 0,
		    overwriteProps = config.overwriteProps,
		    map = { init: "_onInitTween", set: "setRatio", kill: "_kill", round: "_mod", mod: "_mod", initAll: "_onInitAllProps" },
		    Plugin = _class("plugins." + propName.charAt(0).toUpperCase() + propName.substr(1) + "Plugin", function () {
			TweenPlugin.call(this, propName, priority);
			this._overwriteProps = overwriteProps || [];
		}, config.global === true),
		    p = Plugin.prototype = new TweenPlugin(propName),
		    prop;
		p.constructor = Plugin;
		Plugin.API = config.API;
		for (prop in map) {
			if (typeof config[prop] === "function") {
				p[map[prop]] = config[prop];
			}
		}
		Plugin.version = config.version;
		TweenPlugin.activate([Plugin]);
		return Plugin;
	};

	//now run through all the dependencies discovered and if any are missing, log that to the console as a warning. This is why it's best to have TweenLite load last - it can check all the dependencies for you.
	a = window._gsQueue;
	if (a) {
		for (i = 0; i < a.length; i++) {
			a[i]();
		}
		for (p in _defLookup) {
			if (!_defLookup[p].func) {
				window.console.log("GSAP encountered missing dependency: " + p);
			}
		}
	}

	_tickerActive = false; //ensures that the first official animation forces a ticker.tick() to update the time when it is instantiated
})(typeof module !== "undefined" && module.exports && typeof global !== "undefined" ? global : undefined || window, "TweenLite");

cc._RFpop();
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],"WupinItem":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'd3e39OALhBJ/J6hvFPICp3U', 'WupinItem');
// js\wupin\WupinItem.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        richLabel: cc.RichText,
        sprite: cc.Sprite,
        selectBn: cc.Button
    },

    // use this for initialization
    onLoad: function onLoad() {},

    /**
     * 装备
     * index: 实例化item的序号，0开始
     * type: 类型：yaopin，zhuangbei，kuangshi，zawu
     * data：数据
     * event：按钮回掉方法（如果有按钮）
     */
    initZhuangbeiItem: function initZhuangbeiItem(index, type, data, event) {
        this.spriteToggle(index);

        this.node.name = type + index;
        this.type = type;
        this.data = data;
        this.event = event;
        var richString = '<color=#FFFF00 click="zhuangbeiRichTextEvent">' + data.name + '</c>';
        this.richLabel.string = richString;
    },

    zhuangbeiRichTextEvent: function zhuangbeiRichTextEvent() {
        cc.log('zhuangbei item ' + this.data.name);
        curItemData = this.data;
        cc.log(this.data);
        zhaungBeiDetailsZbid.id = this.data.id;
        loadScene(HxsgScenes.zhuangbei, HxsgScenes.wupin);
    },

    /**
     * 矿石
     * index: 实例化item的序号，0开始
     * type: 类型：yaopin，zhuangbei，kuangshi，zawu
     * data：数据
     * event：按钮回掉方法（如果有按钮）
     */
    initKuangshiItem: function initKuangshiItem(index, type, data, event) {
        this.spriteToggle(index);

        this.node.name = type + index;
        this.type = type;
        this.data = data;

        var richString = '<color=#FFFF00 click="kuangshiRichTextEvent">' + data.zwName + '(' + data.zwXiaoGuo + ')' + '</c>';
        this.richLabel.string = richString;
    },

    kuangshiRichTextEvent: function kuangshiRichTextEvent() {
        cc.log('kuangshi item ' + this.data.zwName);
        curItemData = { 'id': this.data.id + '' };
        loadScene(HxsgScenes.baoshi, HxsgScenes.wupin);
    },

    /**
     * 杂物
     * index: 实例化item的序号，0开始
     * type: 类型：yaopin，zhuangbei，kuangshi，zawu
     * data：数据
     * event：按钮回掉方法（如果有按钮）
     */
    initZawuItem: function initZawuItem(index, type, data, event, userParam) {
        this.spriteToggle(index);

        this.node.name = type + index;
        this.type = type;
        this.data = data;
        this.clickEvent = event;
        this.userParam = userParam;
        //数量
        var btn = this.node.parent.getChildByName('useBtn');
        btn.active = data.custom1 === '1' ? true : false; //&& (data.num > 0)

        var num = '(' + data.num + ')';

        var richString = '<color=#FFFF00 click="zawuRichTextEvent">' + data.name + '</c> ' + num;
        this.richLabel.string = richString;
    },

    zawuRichTextEvent: function zawuRichTextEvent() {
        cc.log('zawu item ' + this.data.name);
        var url = HxsgUrl.zawuItemUrl;
        var data = JSON.stringify({ 'id': this.data.id });
        ajaxData(url, data);
    },

    buttonEvent: function buttonEvent() {
        cc.log('buttonEvent');
        if (this.clickEvent) {
            this.clickEvent(this.userParam);
        }
    },

    /**
     * index奇偶数判断，奇数关闭sprite组件，显示背景明暗相间效果
     */
    spriteToggle: function spriteToggle(index) {
        var isOdd = index % 2 === 0 ? true : false;
        this.sprite.enabled = isOdd;
    }
});

cc._RFpop();
},{}],"WupinManager":[function(require,module,exports){
"use strict";
cc._RFpush(module, '7f31fm60v5Gfbfgie0o5d73', 'WupinManager');
// js\wupin\WupinManager.js

'use strict';

window.curItemData = null;
window.currentWupin = 0;
var self;
cc.Class({
    extends: cc.Component,

    properties: {
        kshuifuPrefab: cc.Prefab,
        yaopinPrefab: cc.Prefab,
        zhuangbeiPrefab: cc.Prefab,
        kuangshiPrefab: cc.Prefab,
        zawuPrefab: cc.Prefab,

        content: cc.Node,
        title: cc.Label,
        fuzhong: cc.Label,
        menu: {
            default: [],
            type: cc.Button
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        self = this;
        loadCommomScence();
        this.clearScrollview();

        switch (currentWupin) {
            case 0:
                this.yaopinEvent();
                break;
            case 1:
                this.zhuangbeiEvent();
                break;
            case 2:
                this.kuangshiEvent();
                break;
            case 3:
                this.zawuEvent();
                break;
            default:
                this.yaopinEvent();
                break;
        }
    },

    /**
     * 点击事件-->快速恢复
     */
    kshuifuEvent: function kshuifuEvent() {
        cc.log('wupin mananger 快速恢复');
    },

    /**
     * 点击事件-->返回
     */
    backEvent: function backEvent() {
        //调用通用的返回上一场景方法
        returnLast();
        curItemData = null;
    },
    myZhuangBeiEvent: function myZhuangBeiEvent() {
        //调用通用的返回上一场景方法
        loadingScene(HxsgScenes.myZhuangBei, HxsgScenes.wupin);
    },
    /**
     * -->药品
     */
    yaopinEvent: function yaopinEvent() {
        cc.log('wupin mananger 药品');
        this.title.string = '药品';
        this.clearScrollview();
        this.menu[currentWupin].interactable = true;
        currentWupin = 0;
        this.menu[currentWupin].interactable = false;

        var kshuifu = cc.instantiate(this.kshuifuPrefab);
        this.content.addChild(kshuifu);
        this.kshuifuButton = kshuifu.getChildByName('huifuBtn');
        this.kshuifuButton.on(cc.Node.EventType.TOUCH_END, function () {
            //TODO快速恢复
            cc.log('wupin mananger 药品 快速恢复');
        });

        // ajax(HxsgUrl.yaopinUrl, this.initYaopin);
    },

    initYaopin: function initYaopin(data) {
        if (currentWupin != data.type) return;

        // this.content.height = (msg.length + 1) * 65;
    },

    /**
     * -->装备
     */
    zhuangbeiEvent: function zhuangbeiEvent() {
        cc.log('wupin mananger 装备');
        this.title.string = '装备';
        this.clearScrollview();
        this.menu[currentWupin].interactable = true;
        currentWupin = 1;
        this.menu[currentWupin].interactable = false;

        ajaxData(HxsgUrl.zhuangbeiUrl, null, this.initZhuangbei);
    },

    initZhuangbei: function initZhuangbei(data) {
        if (currentWupin != data.type) return;

        var msg = data.msg;
        for (var i = 0; i < msg.length; i++) {
            var itemMsg = msg[i];
            var item = cc.instantiate(self.zhuangbeiPrefab);
            self.content.addChild(item);
            var comp = item.getComponentInChildren('WupinItem');
            comp.initZhuangbeiItem(i, 'zhuangbei', itemMsg);
        }
        self.content.height = msg.length * 65;
    },

    /**
     * -->矿石
     */
    kuangshiEvent: function kuangshiEvent() {
        cc.log('wupin mananger 矿石');
        this.title.string = '矿石';
        this.clearScrollview();
        this.menu[currentWupin].interactable = true;
        currentWupin = 2;
        this.menu[currentWupin].interactable = false;

        ajaxData(HxsgUrl.kuangshiUrl, null, this.initKuangshi);
    },

    initKuangshi: function initKuangshi(data) {
        if (currentWupin != data.type) return;

        var msg = data.msg;
        for (var i = 0; i < msg.length; i++) {
            var item = cc.instantiate(self.kuangshiPrefab);
            self.content.addChild(item);
            var comp = item.getComponentInChildren('WupinItem');
            var itemMsg = msg[i];
            comp.initKuangshiItem(i, 'kuangshi', itemMsg);
        }
        self.content.height = msg.length * 65;
    },

    /**
     * -->杂物
     */
    zawuEvent: function zawuEvent() {
        cc.log('wupin mananger 杂物');
        this.title.string = '杂物';
        this.clearScrollview();
        this.menu[currentWupin].interactable = true;
        currentWupin = 3;
        this.menu[currentWupin].interactable = false;

        ajaxData(HxsgUrl.zawuUrl, null, this.initZawu);
    },

    initZawu: function initZawu(data) {
        if (currentWupin != data.type) return;

        var msg = data.msg;
        for (var i = 0; i < msg.length; i++) {
            try {
                var itemMsg = msg[i];
                var item = cc.instantiate(self.zawuPrefab);
                self.content.addChild(item);
                var comp = item.getComponentInChildren('WupinItem');
                comp.initZawuItem(i, 'zawu', itemMsg, self.zawuItemEvent, itemMsg);
            } catch (e) {}
        }
        self.content.height = msg.length * 65;
    },

    zawuItemEvent: function zawuItemEvent(data) {
        var type = data.type1;
        userWuPin.wupinId = data.id;
        userWuPin.objects = data;
        cc.log(userWuPin.wupinId);
        if (type == '令') {
            cc.log('令');
            loadScene(HxsgScenes.userJiangJunLing, HxsgScenes.wupin);
        }
        if (type == '技能书' || type == '技能') {
            cc.log('技能书');
            loadScene(HxsgScenes.userList, HxsgScenes.wupin);
        }
        if (type == '心法书') {
            cc.log('心法书');
            loadScene(HxsgScenes.userXinFaShu, HxsgScenes.wupin);
        }
        if (type == '石') {
            cc.log('砸矿石');
            self.userMineral();
        }
    },
    clearScrollview: function clearScrollview() {
        this.content.removeAllChildren();
    },
    userMineral: function userMineral() {
        cc.log('data:' + userWuPin.wupinId);
        ajaxData(HxsgUrl.userMineral, { 'id': userWuPin.wupinId, 'num': '1' }, self.tiShi);
    },
    tiShi: function tiShi(data) {
        cc.log(data);
        showAlert(data.msg);
    }

});

cc._RFpop();
},{}],"alert":[function(require,module,exports){
"use strict";
cc._RFpush(module, '11e1eOHLqJEv4JbApSbm/zQ', 'alert');
// js\wupin\userJiNengShu\alert.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        msg: cc.Label
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.canceldialog();
    },
    canceldialog: function canceldialog(event) {
        cc.find("Canvas/alert").active = false;
    }

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"back":[function(require,module,exports){
"use strict";
cc._RFpush(module, '680bboqzy1NgpcwQyM+uvi1', 'back');
// js\common\back.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    // use this for initialization
    onLoad: function onLoad() {},
    backEvent: function backEvent() {
        returnLast();
    }
    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"bangItem":[function(require,module,exports){
"use strict";
cc._RFpush(module, '867a2xjhsRA6YWSs/8rqFcd', 'bangItem');
// js\gamble\bangItem.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        msg: cc.RichText
    },

    // use this for initialization
    onLoad: function onLoad() {},
    setMsg: function setMsg(data) {
        this.msg.string = data;
    },
    getMsg: function getMsg() {
        return this.msg.string;
    }

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"bang":[function(require,module,exports){
"use strict";
cc._RFpush(module, '37ddcArJ7tBfbAGtluYAXD/', 'bang');
// js\gc\bang.js

'use strict';

var self;
cc.Class({
    extends: cc.Component,

    properties: {
        bangItem: cc.Prefab,
        content: cc.Node,
        title: cc.Label
    },

    // use this for initialization
    onLoad: function onLoad() {

        self = this;
        self.title.string = ChiBiVo.title;
        ajaxData(ChiBiVo.url, null, this.loading);
    },
    loading: function loading(data) {
        // this.clearScrollview();
        var msg = data.msg;
        cc.log(data);
        if (msg == '' || typeof msg == 'undefined' || msg.length == 0) {
            showAlert("系统没有该信息！");
        } else {
            self.content.removeAllChildren();
            self.content.height = msg.length * 100;
            for (var i = 0; i < msg.length; i++) {
                var itemMsg = msg[i];
                var item = cc.instantiate(self.bangItem);

                self.content.addChild(item);
                var comp = item.getComponent('bangItem');
                if (ChiBiVo.title == "历史查询") {
                    comp.setMsg("第" + msg[i].id + "期赤壁斗" + msg[i].resut + "胜利");
                }
                if (ChiBiVo.title == "战利品排行") {
                    comp.setMsg("<color=#F19CC5>" + msg[i].rolename + "</c>" + msg[i].jin + "金" + msg[i].yin + "银");
                }
                if (ChiBiVo.title == "声援记录") {
                    var m = "";
                    if (msg[i].jieguo == null || typeof msg[i].jieguo == 'undefined') {
                        m = "待定";
                    } else {
                        m = msg[i].jieguo;
                    }
                    comp.setMsg("第" + msg[i].num + "期赤壁斗，增援" + msg[i].result + "军" + msg[i].jin + "金" + msg[i].yin + "银【" + m + "】");
                }
                if (ChiBiVo.title == "奖励排行") {
                    comp.setMsg("<color=#F19CC5>" + msg[i].rolename + "</c>" + msg[i].jin + "金" + msg[i].yin + "银");
                }
                // comp.selectBn.node.on("click",self.skillList,self)
            }
        }
    },
    /**
    * 点击事件-->返回
    */
    backEvent: function backEvent() {
        returnLast();
    }
});

cc._RFpop();
},{}],"baoshiDetail2":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'b44ebNL62xGSZdZpeb3rNIg', 'baoshiDetail2');
// js\wupin\zhuangbei\baoshiDetail2.js

'use strict';

var self;

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    // use this for initialization
    onLoad: function onLoad() {
        self = this;
        this.onloadBaoShi();
    },
    onloadBaoShi: function onloadBaoShi() {

        ajaxData(HxsgUrl.xqbsList, { 'zbid': zhaungBeiDetailsZbid.id }, function (data) {
            console.log(data.data);
            if (data.code == "000") {
                (function () {
                    var dataArry = data.data;
                    self.node.removeAllChildren();
                    self.node.height = dataArry.length / 6 * 60 + 240;

                    var _loop = function _loop(i) {
                        cc.loader.loadRes('prefabs/kong', cc.Prefab, function (err, prefab) {
                            if (!err) {
                                var kong = cc.instantiate(prefab);
                                // 使用事件名来注册
                                kong.on('touchstart', function (event) {
                                    if (cc.find('Canvas/zbBaoshi2') != null) {
                                        cc.find('Canvas/zbBaoshi2').destroy();
                                    }
                                    cc.loader.loadRes('prefabs/zbBaoshi2', cc.Prefab, function (err, prefab) {
                                        if (!err) {
                                            var zbBaoshi = cc.instantiate(prefab);
                                            cc.find('Canvas').addChild(zbBaoshi, 90);
                                            zbBaoshi.setPositionX(30);
                                            zbBaoshi.setPositionY(-10);
                                            //加載zbBaoshi腳本,初始化界面
                                            var zbBaoshiJs = zbBaoshi.getComponent('zbBaoshiDetail');
                                            zbBaoshiJs.init(dataArry[i]);
                                        }
                                    });
                                }, this);
                                self.node.addChild(kong);
                            }
                        });
                    };

                    for (var i = 0; i < dataArry.length; i++) {
                        _loop(i);
                    }
                })();
            } else {
                showAlert("服务器出问题了");
            }
        });
    },
    click: function click() {
        if (cc.find('Canvas/bs') != null) {
            cc.find('Canvas/bs').destroy();
        }
    }

});

cc._RFpop();
},{}],"buffDetail":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'fc178Y6Sy9Iya94IOvrYc80', 'buffDetail');
// js\pk\buffDetail.js

"use strict";

var self;

cc.Class({
    extends: cc.Component,

    properties: {
        feng: cc.SpriteFrame,
        wei: cc.SpriteFrame,
        luan: cc.SpriteFrame,
        gong: cc.SpriteFrame,
        yin: cc.SpriteFrame,
        su: cc.SpriteFrame,
        gu: cc.SpriteFrame,
        du: cc.SpriteFrame
    },

    // use this for initialization
    onLoad: function onLoad() {
        self = this;
    },
    getSpriteFrame: function getSpriteFrame(name) {
        cc.log(this[name]);

        return this[name];
    }
    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"buff":[function(require,module,exports){
"use strict";
cc._RFpush(module, '72b9e+O+DRFUrIvrk7xRY65', 'buff');
// js\pk\buff.js

"use strict";

var self;
cc.Class({
    extends: cc.Component,

    properties: {
        buffPrefab: cc.Prefab
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    // use this for initialization
    onLoad: function onLoad() {
        self = this;
    },

    getBuffPrefab: function getBuffPrefab() {
        return self.buffPrefab;
    }
    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"chatMsgItem":[function(require,module,exports){
"use strict";
cc._RFpush(module, '03a96gOmmROkbFyld5P4LOO', 'chatMsgItem');
// js\friends\chatMsgItem.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        richLabel: cc.RichText,
        sprite: cc.Sprite
    },

    // use this for initialization
    onLoad: function onLoad() {},

    initChatMsgItem: function initChatMsgItem(index, type, data, event) {

        this.node.name = type + index;
        this.type = type;
        this.data = data;
        this.event = event;
        var richString;
        var time = data.data;
        var d = new Date(time);
        var hh = d.getHours();
        var mm = d.getMinutes();
        if (mm < 10) {
            mm = "0" + mm;
        }
        if (hh < 10) {
            hh = "0" + hh;
        }
        var times = hh + ":" + mm;
        if (myFriends.friendid == data.roleid) {
            richString = times + '<color=#FF0000 click="zawuRichTextEvent">' + data.rolename + ":<c><color=#FAF9F9 >" + data.message + '</c>';
        } else {
            richString = times + '<color=#00B30F click="zawuRichTextEvent">' + data.rolename + ':<c><color=#FAF9F9>' + data.message + '</c>';
        }

        this.richLabel.string = richString;
    }

});

cc._RFpop();
},{}],"chiBiYaZhu":[function(require,module,exports){
"use strict";
cc._RFpush(module, '79986+13DpJeaaVp1maOhRq', 'chiBiYaZhu');
// js\gamble\chiBiYaZhu.js

"use strict";

var self;
cc.Class({
    extends: cc.Component,

    properties: {
        topMsg: cc.Label,
        playerMoney: cc.Label,
        yaZhuMoney: cc.Label,
        wei: {
            default: null,
            type: cc.EditBox
        },
        shu: {
            default: null,
            type: cc.EditBox
        },
        wu: {
            default: null,
            type: cc.EditBox
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        ajaxData(HxsgUrl.loadYaZhuMsg, null, function (msg) {

            self.playerMoney.string = "您有" + msg.msg.roleJin + "金" + msg.msg.roleYin + "银";

            self.yaZhuMoney.string = "您目前已增援" + msg.msg.sumJin + "金" + msg.msg.sumYin + "银";
        });
        self = this;
        self.topMsg.string = ChiBiVo.topMsg;
    },
    backEvent: function backEvent() {
        var yaZhu = cc.find("Canvas/chiBiYaZhu");
        yaZhu.active = false;
        var chibi = cc.find("Canvas/chibi").getComponent("chiBi");
        chibi.load();
    },
    sure: function sure(e, num) {
        var money;
        var result;
        var data;
        var tishi;

        switch (num) {
            case '1':
                {
                    money = self.wei.string;

                    result = '魏';

                    break;
                }
            case '2':
                {
                    money = self.shu.string;
                    result = '蜀';
                    break;
                }
            case '3':
                {
                    money = self.wu.string;
                    result = '吴';
                    break;
                }
        }
        if (ChiBiVo.type == "jin") {
            data = { 'result': result, 'jin': money };
            tishi = "您押了" + result + "军" + money + "金砖";
        } else {
            data = { 'result': result, 'yin': money };
            tishi = "您押了" + result + "军" + money + "银两";
        }

        ajaxData(HxsgUrl.chiBiYaZhu, data, function (msg) {
            if ("true" == msg.msg) {
                showAlert(tishi);
            } else if ("5001" == msg.msg) {
                showAlert("每期押注总数不能超过1000金10万银");
            } else if ("false" == msg.msg) {
                showAlert("您的余额不足");
            }

            self.onLoad();
        });
    }
    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"chiBi":[function(require,module,exports){
"use strict";
cc._RFpush(module, '278c0pEPRxN95Nkdaj/gSFg', 'chiBi');
// js\gamble\chiBi.js

"use strict";

/**
 * 赤壁游戏基类
 */
var self;
var _times = 3000;
cc.Class({
    extends: cc.Component,

    properties: {
        num: cc.Label,
        gameTime: cc.Label,
        battleMsg: cc.Label,
        wu: cc.Label,
        shu: cc.Label,
        wei: cc.Label,
        gameResult: cc.Label
    },

    // use this for initialization
    onLoad: function onLoad() {
        var yaZhu = cc.find("Canvas/chiBiYaZhu");
        yaZhu.active = false;
        self = this;
        SocketEvents.cbMsg = function () {
            self.load();
        };
        ajaxData(HxsgUrl.chiBiTime, null, self.times);
        this.load();
    },
    sure: function sure() {
        loadingScene(HxsgScenes.guangChang, HxsgScenes.index);
    },
    times: function times(msg) {
        _times = msg.times;
        _times = Date.now() + _times;
        self.schedule(self.scheduleTime, 1);
    },
    scheduleTime: function scheduleTime() {
        ChiBiVo.num = _times - Date.now();
        if (_times - Date.now() <= 0 || typeof _times == 'undefined') {
            self.unschedule(self.scheduleTime);
            var jiesuan = cc.find("Canvas/jiesuan");
            jiesuan.active = true;
            jiesuan.getComponent("jiesuan").setMsg("赤壁结算中，请稍后再来");
        }
        var minutes = Math.floor((_times - Date.now()) / 1000 / 60 % 60); //所余分钟数  
        var second = Math.floor((_times - Date.now()) / 1000 % 60); //所余秒数  
        //1分58秒后开盅，买定离手
        var target = cc.find("Canvas/saizi/main/label2");
        var mstr = minutes.toString() + "分" + second.toString() + "秒后决出胜负，请求增援";
        self.gameTime.string = mstr;

        //times=times-1000;

    },
    load: function load() {
        var rand = Math.floor(Math.random() * 3);
        var battleMsg = "";
        switch (rand) {
            case 0:
                {
                    battleMsg = "吴军节节败退，魏军旗开得胜";
                    break;
                }
            case 1:
                {
                    battleMsg = "蜀军新得名将，魏军士气低落";
                    break;
                }
            case 2:
                {
                    battleMsg = "魏军被困山谷，蜀军趁虚而入";
                    break;
                }

        }
        self.battleMsg.string = battleMsg;
        ajaxData(HxsgUrl.loadChiBi, null, function (msg) {
            try {

                var ld = msg.msg.result;
                var yaMsg = msg.msg.cbLi;
                self.num.string = "第" + msg.msg.num + "期赤壁斗进行中";
                if (yaMsg == null || typeof yaMsg == 'undefined' || yaMsg.length == 0) {
                    self.wei.string = "魏军目前军资0金0银";
                    self.shu.string = "蜀军目前军资0金0银";
                    self.wu.string = "吴军目前军资0金0银";
                } else {
                    for (var key in yaMsg) {
                        if (yaMsg[key].result == "魏") {
                            self.wei.string = "魏军目前军资" + yaMsg[key].jin + "金" + yaMsg[key].yin + "银";
                        }
                        if (yaMsg[key].result == "蜀") {
                            self.shu.string = "蜀军目前军资" + yaMsg[key].jin + "金" + yaMsg[key].yin + "银";
                        }
                        if (yaMsg[key].result == "吴") {
                            self.wu.string = "吴军目前军资" + yaMsg[key].jin + "金" + yaMsg[key].yin + "银";
                        }
                    }
                }

                self.gameResult.string = "上次战事" + ld + "军胜利";
            } catch (e) {
                cc.log(e);
            }
        });
    },
    zyjz: function zyjz() {
        cc.log("增援金砖");
        ChiBiVo.topMsg = "增援金砖";
        ChiBiVo.type = "jin";
        var yaZhu = cc.find("Canvas/chiBiYaZhu");
        yaZhu.active = true;
    },
    zyyl: function zyyl() {
        ChiBiVo.topMsg = "增援银两";
        ChiBiVo.type = "yin";
        var yaZhu = cc.find("Canvas/chiBiYaZhu");
        yaZhu.active = true;
        cc.log("增援银两");
    },
    zlpph: function zlpph() {
        cc.log("战利品排行");

        ChiBiVo.title = "战利品排行";
        ChiBiVo.url = HxsgUrl.chiBiWinRecord;
        loadingScene(HxsgScenes.bang, HxsgScenes.saizi);
    },
    lscx: function lscx() {
        cc.log("历史查询");
        ChiBiVo.title = "历史查询";
        ChiBiVo.url = HxsgUrl.chiBiHistory;
        loadingScene(HxsgScenes.bang, HxsgScenes.saizi);
    },
    syjl: function syjl() {
        cc.log("声援记录");
        ChiBiVo.title = "声援记录";
        ChiBiVo.url = HxsgUrl.chiBiYaZhuRecord;
        loadingScene(HxsgScenes.bang, HxsgScenes.saizi);
    },
    jlph: function jlph() {
        cc.log("奖励排行");
        ChiBiVo.title = "奖励排行";
        ChiBiVo.url = HxsgUrl.chiBiBang;
        loadingScene(HxsgScenes.bang, HxsgScenes.saizi);
    },
    yxsm: function yxsm() {
        cc.log("游戏说明");
        ChiBiVo.title = "游戏说明";
        loadingScene(HxsgScenes.bang, HxsgScenes.saizi);
    }
});

cc._RFpop();
},{}],"chuZhiPy":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'd3908F+0o5PL6+3THdR61X5', 'chuZhiPy');
// js\fuJiang\chuZhiPy\chuZhiPy.js

'use strict';

var self;
cc.Class({
    extends: cc.Component,

    properties: {
        jjMsg: cc.RichText,
        fuName: cc.Label,
        cz: cc.Label,
        gj: cc.Label,
        jl: cc.Label,
        mj: cc.Label,
        qx: cc.Label,
        czb: cc.Button,
        gjb: cc.Button,
        jlb: cc.Button,
        qxb: cc.Button,
        mjb: cc.Button,
        pysm: cc.Button,
        qtfj: cc.Button,
        zyfj: cc.Button

        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },
    /**
       * 点击事件-->返回
       */
    backEvent: function backEvent() {
        returnLast();
    },
    // use this for initialization
    onLoad: function onLoad() {
        self = this;
        ajaxData(HxsgUrl.loadChuZhiPeiYang, { 'fuId': userWuPin.wupinId }, self.loadFujiangPy);
    },

    loadFujiangPy: function loadFujiangPy(msg) {
        var p = msg.msg;
        if (typeof p.czl == 'undefined') {
            showAlert(p.tiShiMsg);
        } else {
            self.jjMsg.string = p.jjMsg;
            self.fuName.string = p.fuName;
            self.cz.string = p.czl;
            self.gj.string = p.gj;
            self.qx.string = p.qx;
            self.jl.string = p.jl;
            self.mj.string = p.mj;
        }

        cc.log(p.tiShiMsg);
    },
    pycz: function pycz() {
        var da = { "type": "成长", "fuId": userWuPin.wupinId };
        ajaxData(HxsgUrl.peiYangFuJiang, da, self.pyajax);
    },
    pygj: function pygj() {
        var da = { "type": "攻击", "fuId": userWuPin.wupinId };
        ajaxData(HxsgUrl.peiYangFuJiang, da, self.pyajax);
    },
    pymj: function pymj() {
        var da = { "type": "敏捷", "fuId": userWuPin.wupinId };
        ajaxData(HxsgUrl.peiYangFuJiang, da, self.pyajax);
    },
    pyjl: function pyjl() {
        var da = { "type": "精力", "fuId": userWuPin.wupinId };
        ajaxData(HxsgUrl.peiYangFuJiang, da, self.pyajax);
    },
    pyqx: function pyqx() {
        var da = { "type": "气血", "fuId": userWuPin.wupinId };
        ajaxData(HxsgUrl.peiYangFuJiang, da, self.pyajax);
    },
    pyShuoMing: function pyShuoMing() {
        loadingScene(HxsgScenes.pyShuoMing, HxsgScenes.chuZhiPy);
        //cc.director.loadScene('pyShuoMing');
    },
    pyajax: function pyajax(msg) {
        var m = msg.msg;
        if (m[0] == 0) {
            self.jjMsg.string = "<color=#ff0000>您没有将军令了!</c>";
        } else {
            ajaxData(HxsgUrl.loadChuZhiPeiYang, { 'fuId': userWuPin.wupinId }, self.loadFujiangPy);
        }
    }

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"commonItem":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'e1b83955fdPh4VszYrUTGIt', 'commonItem');
// js\gamble\commonItem.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        id: 0,
        richText: cc.RichText
    },

    init: function init(data, id) {
        if (this.node.name === "zhuanqianItem") {
            var str = "<color=#ff9e00>【" + data.rolename + "】</c>";
            if (typeof data.jin != "undefined" && data.jin !== null && data.jin !== 0) {
                str += "<color=#ffffff>" + "(赢得" + data.jin.toString() + "金)" + "</color>";
            }
            if (typeof data.yin != "undefined" && data.yin !== null && data.yin !== 0) {
                str += "<color=#ffffff>" + "(赢得" + data.yin.toString() + "银)" + "</color>";
            }
            this.richText.string = str;
            this.id = id;
        } else {
            var str = "<color=#ff9e00>【" + data.rolename + "】</c>在第" + data.num + "期" + "";
            if (typeof data.jin != "undefined" && data.jin !== null && data.jin !== 0) {
                str += "<color=#ffffff>" + "(买" + data.result + "" + data.jin.toString() + "金)" + "</color>";
            }
            if (typeof data.yin != "undefined" && data.yin !== null && data.yin !== 0) {
                str += "<color=#ffffff>" + "(买" + data.result + "" + data.yin.toString() + "银)" + "</color>";
            }
            if (data.jieguo == '输') {
                str += "<color=#ffffff>" + "," + data.jieguo + "</color>";
            } else {
                str += "<color=#EDF715>" + "," + data.jieguo + "</color>";
            }

            this.richText.string = str;
            this.id = id;
        }
        if (id % 2 === 0) {
            this.node.color = new cc.Color(0, 0, 38);
        } else {
            this.node.color = new cc.Color(99, 65, 99);
        }
    },

    // use this for initialization
    onLoad: function onLoad() {}

});

cc._RFpop();
},{}],"commonlist":[function(require,module,exports){
"use strict";
cc._RFpush(module, '491c6NnhCRKsb/AZd+hW7JZ', 'commonlist');
// js\gamble\commonlist.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        itemPrefab: cc.Prefab
    },

    // use this for initialization
    onLoad: function onLoad() {
        var prefab = this.itemPrefab;
        var node = this.node;
        var ajaxUrl = '';
        cc.log(prefab.name);
        if ('zhuanqianitem' == prefab.name) {
            ajaxUrl = HxsgUrl.queryWinJinBang;
        } else {
            ajaxUrl = HxsgUrl.queryBettingRecord;
        }
        ajaxData(ajaxUrl, null, function (msg) {
            cc.log(msg.msg);
            var mheight = 0;
            for (var i = 0; i < msg.msg.length; ++i) {
                try {
                    var item = cc.instantiate(prefab);
                    node.addChild(item);
                    item.getComponent('commonItem').init(msg.msg[i], i);
                    mheight += item.height;
                } catch (e) {}
            }
            node.height = mheight;
        });
    },
    /**
     * 点击事件-->返回
     */
    backEvent: function backEvent() {
        //调用通用的返回上一场景方法
        returnLast();
    }

});

cc._RFpop();
},{}],"dzzb":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'decfbRPuRBL3YBU+1qlsTS7', 'dzzb');
// js\shichang\tjp\dzzb.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    // use this for initialization
    onLoad: function onLoad() {
        loadCommomScence();
    },
    tk: function tk() {
        cc.director.loadScene('tkType');
    },
    wq: function wq() {
        cc.director.loadScene('wqType');
    }

});

cc._RFpop();
},{}],"end":[function(require,module,exports){
"use strict";
cc._RFpush(module, '9f115hmhSRNAbD9G/m0aMn7', 'end');
// js\pk\end.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        background: [cc.SpriteFrame],
        bankLose: [cc.SpriteFrame]

    },

    // use this for initialization
    onLoad: function onLoad() {},
    gameOver: function gameOver() {

        var JsonData = pk.gameOverDetail;
        var arrJy = JsonData.jy;
        var arrJyResult = "";
        for (var key in arrJy) {
            arrJyResult += arrJy[key];
        }
        var arrDj = JsonData.djArr;
        var result = ".恭喜您获得";
        for (var i = 0; i < arrDj.length; i++) {
            result += "【" + arrDj[i].name + "】";
        }
        showAlert(arrJyResult + result, function () {
            cc.director.loadScene(HxsgScenes.index);
        });
    }

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"friendInfo":[function(require,module,exports){
"use strict";
cc._RFpush(module, '07cd6RXoUBO+aYpyKTxFTQT', 'friendInfo');
// js\friends\friendInfo.js

"use strict";

var self;
cc.Class({
    extends: cc.Component,

    properties: {},
    // use this for initialization
    onLoad: function onLoad() {
        self = this;
        cc.log(roleMsg.id);
        ajaxData(HxsgUrl.indexNewRoleMsg, roleMsg, this.init.bind(this));
    },
    init: function init(msg) {
        var m = msg.roleMsg;
        myFriends.friendid = m.id;
        myFriends.friendname = m.rolename;
        // cc.log(ajaxReturnData)
        var ViewNode = this.node.getChildByName("scrollView");
        var btnlist = ViewNode.getChildByName("view").getChildByName("content").getChildByName("top_btnlist");
        //拉黑，解黑
        var lahei = btnlist.getChildByName("lahei").getChildren()[0].getComponent(cc.Label);
        lahei.string = m.heiStatus;
        //禁言，解禁
        var jinyan = btnlist.getChildByName("jinyan").getChildren()[0].getComponent(cc.Label);
        jinyan.string = m.jinStatus;
        var playerInfo = ViewNode.getChildByName("view").getChildByName("content").getChildByName("playerinfo");
        var name = ViewNode.getChildByName("Info").getChildren()[0].getComponent(cc.Label);
        name.string = m.rolename + '(ID:' + m.id + ')' + '【' + m.roleStatus + '】';
        var img = playerInfo.getChildByName("img").getComponent(cc.Sprite);
        var zhiy = playerInfo.getChildByName("zhiy").getChildren()[0].getComponent(cc.Label);
        zhiy.string = m.level + '级' + m.zhiye;
        var chenh = playerInfo.getChildByName("chenh").getChildren()[0].getComponent(cc.Label);
        chenh.string = m.chenghao; //称号
        var jiaop = playerInfo.getChildByName("jiaop").getChildren()[0].getComponent(cc.Label);
        jiaop.string = m.jiaopai; //教派
        var huol = playerInfo.getChildByName("huol").getChildren()[0].getComponent(cc.Label);
        huol.string = m.tilizhi; //体力值
        var meil = playerInfo.getChildByName("meil").getChildren()[0].getComponent(cc.Label);
        meil.string = m.meili; //魅力值
        var tanw = playerInfo.getChildByName("tanw").getChildren()[0].getComponent(cc.Label);
        tanw.string = m.tanwei; //摊位
        var fanc = playerInfo.getChildByName("fanc").getChildren()[0].getComponent(cc.Label);
        fanc.string = m.fangchan; //房产
        var yis = playerInfo.getChildByName("yis").getChildren()[0].getComponent(cc.Label);
        yis.string = m.killnum; //杀人数目
        var xing = playerInfo.getChildByName("xing").getChildren()[0].getComponent(cc.Label);
        xing.string = m.xingge; //性格
        var peio = playerInfo.getChildByName("peio").getChildren()[0].getComponent(cc.Label);
        peio.string = m.peiou; //配偶
        var fuj = playerInfo.getChildByName("fuj").getChildren()[0].getComponent(cc.Label);

        var tianf = playerInfo.getChildByName("tianf").getChildren()[0].getComponent(cc.Label);
        tianf.string = m.tianfu; //天赋
        var zuoq = playerInfo.getChildByName("zuoq").getChildren()[0].getComponent(cc.Label);
        zuoq.string = m.zuoqi; //坐骑
        var kangx = playerInfo.getChildByName("kangx").getChildren()[0].getComponent(cc.Label);
        var kangf = playerInfo.getChildByName("kangf").getChildren()[0].getComponent(cc.Label);
        var feng = playerInfo.getChildByName("feng").getChildren()[0].getComponent(cc.Label);
    },
    onBtnList: function onBtnList(e, d) {
        switch (d) {
            case "1":
                console.log(e.target.getChildByName('Label').getComponent(cc.Label).string + "," + d);
                loadScene(HxsgScenes.talking, HxsgScenes.friendInfo);
                break;
            case "2":
                console.log(e.target.getChildByName('Label').getComponent(cc.Label).string + "," + d);
                myFriends.status = '202';
                myFriends.type = 'yes';
                ajaxData(HxsgUrl.noAddFriends, myFriends);
                break;
            case "3":
                console.log(e.target.getChildByName('Label').getComponent(cc.Label).string + "," + d);
                break;
            case "4":
                try {
                    var notice = e.target.getChildByName('Label').getComponent(cc.Label).string;
                    console.log(notice);
                    if (notice === '拉黑') {
                        myFriends.status = '拉黑';
                        ajaxData(HxsgUrl.speakStatus, myFriends, function (data) {
                            if (data.msg === 'true') {
                                showAlert('拉黑成功');
                                e.target.getChildByName('Label').getComponent(cc.Label).string = '解黑';
                            }
                        });
                    }
                    if (notice === '解黑') {
                        myFriends.status = '正常';
                        ajaxData(HxsgUrl.speakStatus, myFriends, function (data) {
                            if (data.msg === 'true') {
                                showAlert('解黑成功');
                                e.target.getChildByName('Label').getComponent(cc.Label).string = '拉黑';
                            }
                        });
                    }
                    //拉黑解黑操作
                    cc.log(myFriends);
                } catch (e) {}

                break;
            case "5":
                console.log(e.target.getChildByName('Label').getComponent(cc.Label).string + "," + d);
                break;
            case "6":
                console.log(e.target.getChildByName('Label').getComponent(cc.Label).string + "," + d);
                break;
            case "7":
                try {
                    var notice = e.target.getChildByName('Label').getComponent(cc.Label).string;
                    console.log(notice);
                    if (notice === '禁言') {
                        showAlert("禁言成功，在本次登录时有效");
                        e.target.getChildByName('Label').getComponent(cc.Label).string = '解禁';
                    }
                    if (notice === '解禁') {
                        showAlert("解禁成功");
                        e.target.getChildByName('Label').getComponent(cc.Label).string = '禁言';
                    }
                    //拉黑解黑操作
                    cc.log(myFriends);
                } catch (e) {}
                break;
            case "8":
                console.log(e.target.getChildByName('Label').getComponent(cc.Label).string + "," + d);
                break;
            case "9":
                console.log(e.target.getChildByName('Label').getComponent(cc.Label).string + "," + d);
                break;
            case "10":
                console.log(e.target.getChildByName('Label').getComponent(cc.Label).string + "," + d);
                break;
            case "11":
                console.log(e.target.getChildByName('Label').getComponent(cc.Label).string + "," + d);
                break;
            case "12":
                console.log(e.target.getChildByName('Label').getComponent(cc.Label).string + "," + d);
                break;
            case "13":
                console.log(e.target.getChildByName('Label').getComponent(cc.Label).string + "," + d);
                break;
            case "14":
                console.log(e.target.getChildByName('Label').getComponent(cc.Label).string + "," + d);
                break;
            case "15":
                console.log(e.target.getChildByName('Label').getComponent(cc.Label).string + "," + d);
                break;
            case "16":
                returnLast();
                break;
        }
    }
});

cc._RFpop();
},{}],"friendsItem":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'c5026ad9PxDuoWhcU3m7QI/', 'friendsItem');
// js\friends\friendsItem.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        richLabel: cc.RichText,
        sprite: cc.Sprite,
        selectBn: cc.Button

    },

    // use this for initialization
    onLoad: function onLoad() {},
    /**
        * 装备
        * index: 实例化item的序号，0开始
        * type: 类型：yaopin，zhuangbei，kuangshi，zawu
        * data：数据
        * event：按钮回掉方法（如果有按钮）
        */
    initFriendsItem: function initFriendsItem(index, type, data) {
        var num = 0;
        this.spriteToggle(index);
        this.node.name = type + index;
        this.type = type;
        this.data = data;
        // this.event = event;
        var richString;

        var btn = this.selectBn.id = { 'id': data.friendId, 'name': data.friendName };

        //cc.log(btn+btn2);
        if (data.status == '离线') {
            richString = '<color=#918E83 click="friendInfo">' + data.friendName + '【离线】</c> ';
        } else {
            num = 1;
            richString = '<color=#FFFF00 click="friendInfo">' + data.friendName + '</c><color=#FF0000>【在线】</c> ';
        }

        this.richLabel.string = richString;
        this.richLabel.id = data;
        return num;
    },
    /**
    * 装备
    * index: 实例化item的序号，0开始
    * type: 类型：yaopin，zhuangbei，kuangshi，zawu
    * data：数据
    * event：按钮回掉方法（如果有按钮）
    */
    initFriendsList: function initFriendsList(index, type, data, event) {
        var num = 0;
        this.spriteToggle(index);

        this.node.name = type + index;
        this.type = type;
        this.data = data;
        this.event = event;
        var richString;

        var btn = this.selectBn.id = { 'id': data.id, 'name': data.rolename };

        //cc.log(btn+btn2);
        if (data.status == '离线') {
            richString = '<color=#918E83 click="friendInfo">' + data.rolename + '【离线】</c> ';
        } else {
            num = 1;
            richString = '<color=#FFFF00 click="friendInfo">' + data.rolename + '</c><color=#FF0000>【在线】</c> ';
        }

        this.richLabel.string = richString;
        this.richLabel.id = data;
        return num;
    },
    /**
     *跳转到好友详情界面 
     */
    friendInfo: function friendInfo(event) {
        var node = event.target;
        var r = node.getComponent(cc.RichText);
        cc.log(r.id);
        roleMsg.id = r.id.friendId;
        //  cc.log("跳转到好友详情界面:"+msg.friendName)
        loadingScene(HxsgScenes.friendInfo, HxsgScenes.friends);
    },
    /**
     * 装备
     * index: 实例化item的序号，0开始
     * type: 类型：yaopin，zhuangbei，kuangshi，zawu
     * data：数据
     * event：按钮回掉方法（如果有按钮）
     */
    initZhuangbeiItem: function initZhuangbeiItem(index, type, data, event) {
        this.spriteToggle(index);

        this.node.name = type + index;
        this.type = type;
        this.data = data;
        this.event = event;

        var richString = '<color=#FFFF00 click="zhuangbeiRichTextEvent">' + data.friendName + '</c>';
        this.richLabel.string = richString;
    },

    RichTextEvent: function RichTextEvent() {
        cc.log('跳转到查询该角色详情界面' + this.data.name);
    },

    /**
     * 矿石
     * index: 实例化item的序号，0开始
     * type: 类型：yaopin，zhuangbei，kuangshi，zawu
     * data：数据
     * event：按钮回掉方法（如果有按钮）
     */
    initKuangshiItem: function initKuangshiItem(index, type, data, event) {
        this.spriteToggle(index);

        this.node.name = type + index;
        this.type = type;
        this.data = data;
        this.selectBn.getCom;
        var richString = '<color=#FFFF00 click="kuangshiRichTextEvent">' + data.zwName + '(' + data.zwXiaoGuo + ')' + '</c>';
        this.richLabel.string = richString;
    },

    kuangshiRichTextEvent: function kuangshiRichTextEvent() {
        cc.log('kuangshi item ' + this.data.zwName);
        curItemData = { 'id': this.data.id + '' };
        loadScene(HxsgScenes.baoshi, HxsgScenes.wupin);
    },

    /**
     * 杂物
     * index: 实例化item的序号，0开始
     * type: 类型：yaopin，zhuangbei，kuangshi，zawu
     * data：数据
     * event：按钮回掉方法（如果有按钮）
     */
    initZawuItem: function initZawuItem(index, type, data, event) {
        this.spriteToggle(index);

        this.node.name = type + index;
        this.type = type;
        this.data = data;
        this.clickEvent = event;

        //数量
        var btn = this.node.parent.getChildByName('useBtn');
        btn.active = data.custom1 === '1' ? true : false; //&& (data.num > 0)

        var num = '(' + data.num + ')';
        var richString;
        if (data.status == '离线') {
            richString = '<color=#918E83 click="zawuRichTextEvent">' + data.name + '</c> ' + num;
        } else {
            richString = '<color=#FFFF00 click="zawuRichTextEvent">' + data.name + '</c> ' + num;
        }

        this.richLabel.string = richString;
    },

    zawuRichTextEvent: function zawuRichTextEvent() {
        cc.log('zawu item ' + this.data.name);
        var url = HxsgUrl.zawuItemUrl;
        var data = JSON.stringify({ 'id': this.data.id });
        ajaxData(url, data);
    },

    buttonEvent: function buttonEvent() {
        if (this.clickEvent) {
            this.clickEvent();
        }
    },

    /**
     * index奇偶数判断，奇数关闭sprite组件，显示背景明暗相间效果
     */
    spriteToggle: function spriteToggle(index) {
        var isOdd = index % 2 === 0 ? true : false;
        this.sprite.enabled = isOdd;
    }
});

cc._RFpop();
},{}],"friendsListItem":[function(require,module,exports){
"use strict";
cc._RFpush(module, '69618wiQxZHS77HQ5Yt03E5', 'friendsListItem');
// js\friends\friendsListItem.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        richLabel: cc.RichText,
        sprite: cc.Sprite,
        selectBn: cc.Button
    },

    // use this for initialization
    onLoad: function onLoad() {},
    /**
     *跳转到好友详情界面 
     */
    friendInfo: function friendInfo(event) {
        cc.log('跳转到好友详情界面');
        var node = event.target;
        var r = node.getComponent(cc.RichText);
        cc.log(r.id);
        roleMsg.id = r.id.id;
        //  cc.log("跳转到好友详情界面:"+msg.friendName)
        loadingScene(HxsgScenes.friendInfo, HxsgScenes.friends);
    },
    initFriendsList: function initFriendsList(index, type, data) {

        var num = 0;
        this.node.name = type + index;
        this.type = type;
        this.data = data;
        // this.event = event;
        var richString;

        var btn = this.selectBn.id = { 'id': data.id, 'name': data.rolename };

        //cc.log(btn+btn2);
        if (data.status == '离线') {
            richString = '<color=#918E83 click="friendInfo">' + data.rolename + '【离线】</c> ';
        } else {
            num = 1;
            richString = '<color=#FFFF00 click="friendInfo">' + data.rolename + '</c><color=#FF0000 click="friendInfo">【在线】</c> ';
        }
        this.richLabel.string = richString;
        this.richLabel.id = data;
        return num;
    }

});

cc._RFpop();
},{}],"friendsList":[function(require,module,exports){
"use strict";
cc._RFpush(module, '72a561qUzZCwqyDiGWbiTqZ', 'friendsList');
// js\friends\friendsList.js

'use strict';

var self;
cc.Class({
    extends: cc.Component,

    properties: {
        yaopinPrefab: cc.Prefab,
        content: cc.Node
    },

    // use this for initialization
    onLoad: function onLoad() {

        self = this;
        ajaxData(HxsgUrl.queryFriends, userWuPin.objects, this.friendsList);
    },
    friendsList: function friendsList(data) {
        // this.clearScrollview();
        var msg = data.msg;
        cc.log(data);
        var num = 0;
        if (msg == '' || typeof msg == 'undefined' || msg.length == 0) {
            showAlert("没有查到搜索信息！");
        } else {
            var total = msg.length;
            for (var i = 0; i < msg.length; i++) {
                var itemMsg = msg[i];
                var item = cc.instantiate(self.yaopinPrefab);
                self.content.addChild(item);
                var comp = item.getComponentInChildren('friendsListItem');
                num += comp.initFriendsList(i, 'friends', itemMsg);
                // comp.selectBn.node.on("click",self.skillList,self)
            }
            self.content.height = msg.length * 65;
        }
    },
    /**
    * 点击事件-->返回
    */
    backEvent: function backEvent() {
        returnLast();
    }
});

cc._RFpop();
},{}],"friendsManager":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'e0d6eI92jxJMIYujH2nqZ4k', 'friendsManager');
// js\friends\friendsManager.js

'use strict';

window.curItemData = null;
window.currentWupin = 0;
var self;
cc.Class({
    extends: cc.Component,

    properties: {
        kshuifuPrefab: cc.Prefab,
        yaopinPrefab: cc.Prefab,
        zhuangbeiPrefab: cc.Prefab,
        kuangshiPrefab: cc.Prefab,
        zawuPrefab: cc.Prefab,
        content: cc.Node,
        title: cc.Label,
        fuzhong: cc.Label,
        msg: cc.EditBox,
        menu: {
            default: [],
            type: cc.Button
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        self = this;
        cc.director.preloadScene('talking');
        // this.clearScrollview();

        switch (currentWupin) {
            case 0:
                this.yaopinEvent();
                break;
            case 1:
                this.zhuangbeiEvent();
                break;
            case 2:
                this.kuangshiEvent();
                break;
            case 3:
                this.zawuEvent();
                break;
            default:
                this.yaopinEvent();
                break;
        }
    },

    /**
     * 点击事件-->快速恢复
     */
    sendMsg: function sendMsg() {
        //cc.log('wupin mananger 发送消息');
        ajaxData(HxsgUrl.sendMsgForFriends, { 'type': '好友' }, this.initYaopin);
        var msessage = this.msg.getComponent(cc.EditBox).string;
    },

    /**
     * 点击事件-->返回
     */
    backEvent: function backEvent() {
        //调用通用的返回上一场景方法
        loadScene(HxsgScenes.index, HxsgScenes.index);
        curItemData = null;
    },

    /**
     * -->药品
     */
    yaopinEvent: function yaopinEvent() {
        // cc.log('wupin mananger 好友');
        this.clearScrollview();
        this.menu[currentWupin].interactable = true;
        currentWupin = 0;
        this.menu[currentWupin].interactable = false;

        // var kshuifu = cc.instantiate(this.kshuifuPrefab);
        // this.content.addChild(kshuifu);
        // this.kshuifuButton = kshuifu.getChildByName('huifuBtn');
        // this.kshuifuButton.on(cc.Node.EventType.TOUCH_END, function () {
        //     //TODO快速恢复
        //     cc.log('wupin mananger 药品 快速恢复');
        // });
        ajaxData(HxsgUrl.friends, { 'type': '好友' }, this.initYaopin);
    },
    queryMoHu: function queryMoHu(e, type) {
        var msg = cc.find("Canvas/mohu/input").getComponent('cc.EditBox').string;
        if (msg == '' || typeof msg == 'undefined') {
            showAlert("输入不能为空");
        } else {
            switch (type) {
                case "ID":
                    //正则表达式
                    var re = /[^0-9]/;
                    if (!re.test(msg)) {
                        userWuPin.objects = { 'type': 'ID', 'msg': msg };
                        loadingScene(HxsgScenes.friendsList, HxsgScenes.friends);
                    } else {
                        showAlert("查询ID只能输入数字");
                    }
                    break;
                case "NAME":
                    userWuPin.objects = { 'type': 'NAME', 'msg': msg };
                    loadingScene(HxsgScenes.friendsList, HxsgScenes.friends);
                    break;
            }
        }
    },
    friendsList: function friendsList(data) {
        // this.clearScrollview();
        var msg = data.msg;
        cc.log(data);
        var num = 0;
        var total = msg.length;
        for (var i = 0; i < msg.length; i++) {
            var itemMsg = msg[i];
            var item = cc.instantiate(self.yaopinPrefab);
            self.content.addChild(item);
            var comp = item.getComponentInChildren('friendsItem');
            num += comp.initFriendsList(i, 'friends', itemMsg);
            comp.selectBn.node.on("click", self.skillList, self);
        }
        self.title.string = '在线' + num + '/' + total;
        self.content.height = msg.length * 65;
    },

    initYaopin: function initYaopin(data) {
        //if(currentWupin != data.type) return;

        var msg = data.msg;
        var num = 0;
        var total = msg.length;
        //showAlert(msg, null, null);
        for (var i = 0; i < msg.length; i++) {
            var itemMsg = msg[i];
            var item = cc.instantiate(self.yaopinPrefab);
            self.content.addChild(item);
            var comp = item.getComponentInChildren('friendsItem');
            num += comp.initFriendsItem(i, 'friends', itemMsg);
            comp.selectBn.node.on("click", self.skillList, self);
        }
        self.title.string = '在线' + num + '/' + total;
        self.content.height = msg.length * 65;
    },
    skillList: function skillList(event) {
        //这里 event 是一个 Touch Event 对象，你可以通过 event.target 取到事件的发送节点
        var node = event.target;

        var button = node.getComponent(cc.Button);
        //window.wuPin.jinengList=bn.id;
        myFriends.friendid = button.id.id;
        myFriends.friendname = button.id.name;
        loadingScene("talking", "friends");

        //这里的 customEventData 参数就等于你之前设置的 "foobar"
    },
    /**
     * -->装备
     */
    zhuangbeiEvent: function zhuangbeiEvent() {

        this.clearScrollview();
        this.menu[currentWupin].interactable = true;
        currentWupin = 1;
        this.menu[currentWupin].interactable = false;

        ajaxData(HxsgUrl.friends, { 'type': '最近' }, this.initYaopin);
    },

    initZhuangbei: function initZhuangbei(data) {
        if (currentWupin != data.type) return;

        var msg = data.msg;
        for (var i = 0; i < msg.length; i++) {
            var itemMsg = msg[i];
            var item = cc.instantiate(self.zawuPrefab);
            self.content.addChild(item);
            var comp = item.getComponentInChildren('WupinItem');
            comp.initZhuangbeiItem(i, 'zhuangbei', itemMsg);
        }
        self.content.height = msg.length * 65;
    },

    /**
     * -->矿石
     */
    kuangshiEvent: function kuangshiEvent() {
        cc.log('wupin mananger 亲人');

        this.clearScrollview();
        this.menu[currentWupin].interactable = true;
        currentWupin = 2;
        this.menu[currentWupin].interactable = false;

        ajaxData(HxsgUrl.friends, { 'type': '亲人' }, this.initYaopin);
    },

    initKuangshi: function initKuangshi(data) {
        if (currentWupin != data.type) return;

        var msg = data.msg;
        for (var i = 0; i < msg.length; i++) {
            var item = cc.instantiate(self.kuangshiPrefab);
            self.content.addChild(item);
            var comp = item.getComponentInChildren('WupinItem');
            var itemMsg = msg[i];
            comp.initKuangshiItem(i, 'kuangshi', itemMsg);
        }
        self.content.height = msg.length * 65;
    },

    /**
     * -->杂物
     */
    zawuEvent: function zawuEvent() {
        cc.log('wupin mananger 仇人');

        this.clearScrollview();
        this.menu[currentWupin].interactable = true;
        currentWupin = 3;
        this.menu[currentWupin].interactable = false;

        ajaxData(HxsgUrl.friends, { 'type': '仇人' }, this.initYaopin);
    },

    initZawu: function initZawu(data) {
        if (currentWupin != data.type) return;

        var msg = data.msg;
        for (var i = 0; i < msg.length; i++) {
            var itemMsg = msg[i];
            var item = cc.instantiate(self.zawuPrefab);
            self.content.addChild(item);
            var comp = item.getComponentInChildren('WupinItem');
            comp.initZawuItem(i, 'zawu', itemMsg);
        }
        self.content.height = msg.length * 65;
    },

    zawuItemEvent: function zawuItemEvent(data) {
        //TODO:
    },

    clearScrollview: function clearScrollview() {
        this.content.removeAllChildren();
    }

});

cc._RFpop();
},{}],"gameMenu":[function(require,module,exports){
"use strict";
cc._RFpush(module, '71d90ToOZBOzYwIcFBqJB0m', 'gameMenu');
// js\gamble\gameMenu.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    // use this for initialization
    onLoad: function onLoad() {},
    clickEvent: function clickEvent(e, num) {
        var jiesuan = cc.find("Canvas/jiesuan");
        switch (num) {
            case '1':
                {
                    //猜猜猜
                    jiesuan.active = false;
                    cc.find("Canvas/chibi").active = false;
                    cc.find("Canvas/saizi").active = true;
                    cc.log("DuChangVo.num" + DuChangVo.num);

                    if (DuChangVo.num <= 0) {
                        jiesuan.active = true;
                        jiesuan.getComponent("jiesuan").setMsg("猜猜猜结算中，请稍后再来");
                    }
                    break;
                }
            case '2':
                {
                    //赤壁
                    cc.find("Canvas/jiesuan").active = false;
                    cc.find("Canvas/chibi").active = true;
                    cc.find("Canvas/saizi").active = false;
                    if (ChiBiVo.num <= 0) {
                        jiesuan.active = true;
                        jiesuan.getComponent("jiesuan").setMsg("赤壁结算中，请稍后再来");
                    }
                    break;
                }
            case '3':
                {
                    break;
                }
            case '4':
                {
                    break;
                }
        }
    }
    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"headItem":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'e6533uJMmVINroDI+2oXFNO', 'headItem');
// js\index\nearbyPlayer\headItem.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        headImg: cc.Sprite,
        headImgList: {
            default: [],
            type: cc.SpriteFrame
        }
    },

    // use this for initialization
    onLoad: function onLoad() {},
    init: function init(num) {
        this.headImg.spriteFrame = this.headImgList[num];
    }
});

cc._RFpop();
},{}],"inputNum":[function(require,module,exports){
"use strict";
cc._RFpush(module, '7adb4G60EdDeZOjU+goKhjj', 'inputNum');
// js\wupin\userJiNengShu\inputNum.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        msg: cc.EditBox,
        selectBn: cc.Button
    },

    // use this for initialization
    onLoad: function onLoad() {},
    buttonEvent: function buttonEvent() {
        var num = this.msg.string;
        if (num > 10 || num < 0) {
            showAlert('请输正确的数量');
        } else {
            userWuPin.num = num;
            console.log(userWuPin);
            ajaxData(HxsgUrl.userWuPin, userWuPin, this.tiShi);
        }
    },
    tiShi: function tiShi(data) {
        cc.log(data.msg);
        showAlert(data.msg);
    },
    backEvent: function backEvent() {
        //调用通用的返回上一场景方法
        loadScene(HxsgScenes.wupin, HxsgScenes.index);
    }
});

cc._RFpop();
},{}],"jiNengList":[function(require,module,exports){
"use strict";
cc._RFpush(module, '90e351eGlNKbpxW2m7Aw6IU', 'jiNengList');
// js\wupin\userJiNengShu\jiNengList.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        target: {
            default: null,
            type: cc.Prefab
        },
        leftContent: cc.Node,
        content: cc.Node
    },

    // use this for initialization
    onLoad: function onLoad() {
        var self = this;
        ajax({
            type: 'GET',
            // url: "" + localhost + "gchang/applishi",
            url: "http://192.168.130.18:8080/cocos2dWuPin/getJiNengShuList?id=98",
            dataType: 'jsonp',
            jsonp: "jsonpCallback", //服务端用于接收callback调用的function名的参数
            success: function success(msg) {
                var p = msg.msg;
                //alert(p);
                for (var i = 0; i < p.length; i++) {
                    var item = cc.instantiate(self.target);
                    self.content.addChild(item);
                    item.x = 1;
                    item.y = -1 * i * item.height;
                    item.name = 'userList' + i;
                    self.leftContent.height = (i + 1) * item.height + 20;

                    var lab = item.getComponent("wuPinList");

                    lab.msg.string = p[i].rolename + "(" + p[i].fulevel + "级)";
                    // lab.id.string=p[i].rfid;
                    if (i % 2 != 0) {
                        item.color = new cc.Color(0, 0, 49);
                        console.log(item.color);
                        //lab.Node.Color="WHITE";
                    }
                    lab.selectBn.name = 'button' + i;
                    // var clickEventHandler = new cc.Component.EventHandler();
                    // clickEventHandler.target = lab.selectBn.node; //这个 node 节点是你的事件处理代码组件所属的节点
                    // clickEventHandler.component ='button0';
                    // clickEventHandler.handler = "skillList";
                    // clickEventHandler.customEventData =p[i].id;
                    //wuPin.jinengList="10311"
                    //lab.selectBn.id.string=p[i].rfid
                    var bn = lab.selectBn.getComponent("jiNengButton");
                    bn.id = p[i].rfid;
                    // lab.selectBn.setId(new cc.Label())
                    lab.selectBn.node.on('click', self.skillList, self);
                    //lab.selectBn.clickEvents.push(clickEventHandler);
                    // console.log (bn.id)
                    // console.log(p[i].id)
                    //s += " <p class=\"yaoping\" style='color:#FFF3AE'>第" + p[i].id + "期，开出" + p[i].num1 + "," + p[i].num2 + "," + p[i].num3 + "&nbsp;&nbsp;" + p[i].result + "</p>";
                    // var item = cc.instantiate(self.itemPrefab);
                    // self.leftContent.addChild(item);
                    // item.x = 0;
                    // item.y = -1 * i * item.height;
                    // item.name = 'history' + i;
                    // self.content.height = (i + 1) * item.height;

                    // item = item.getComponent('HistoryItem');
                    // var labelStr = "第" + p[i].id + "期，开出" + p[i].num1 + "," + p[i].num2 + "," + p[i].num3 + "\t\t" + p[i].result;
                    // item.setMsg(labelStr);
                }
            }
        });
    },
    skillList: function skillList(event) {
        //这里 event 是一个 Touch Event 对象，你可以通过 event.target 取到事件的发送节点
        var node = event.target;
        var bn = node.getComponent("jiNengButton");
        var button = node.getComponent(cc.Button);
        window.wuPin.jinengList = bn.id;
        console.log(bn.id);
        //这里的 customEventData 参数就等于你之前设置的 "foobar"
    }
});

cc._RFpop();
},{}],"jiesuan":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'ae98bgsZlZArYZOm2rtGagC', 'jiesuan');
// js\gamble\jiesuan.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        msg: cc.Label
    },

    // use this for initialization
    onLoad: function onLoad() {},
    setMsg: function setMsg(data) {
        this.msg.string = data;
    }
    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"jnName":[function(require,module,exports){
"use strict";
cc._RFpush(module, '3bdacimPmdBwLV6EnVF3ztv', 'jnName');
// js\pk\jnName.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        jName: cc.Label
    },

    // use this for initialization
    onLoad: function onLoad() {},
    setJname: function setJname(data) {
        this.jName.string = data;
    },
    animationTest: function animationTest() {}

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"kong":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'fe54eUeaOFPVqGP1BgqVMV8', 'kong');
// js\wupin\zhuangbei\kong.js

'use strict';

var self;
cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    // use this for initialization
    onLoad: function onLoad() {
        self = this;
    },
    click: function click(e, id) {
        if (cc.find('Canvas/zbBaoshi') != null) {
            cc.find('Canvas/zbBaoshi').destroy();
        }

        //空槽
        if (id == 1) {
            cc.log("宝石孔按钮: " + id);
            cc.loader.loadRes('prefabs/bs', cc.Prefab, function (err, prefab) {
                if (!err) {

                    var bsList = cc.instantiate(prefab);
                    cc.find('Canvas').addChild(bsList);
                }
            });
        } else {
            cc.log("宝石孔按钮: " + id);
            cc.loader.loadRes('prefabs/zbBaoshi', cc.Prefab, function (err, prefab) {
                if (!err) {
                    cc.log(self);
                    cc.log(self.msgid);
                    var zbBaoshi = cc.instantiate(prefab);
                    cc.find('Canvas').addChild(zbBaoshi, 90);
                    zbBaoshi.setPositionX(30);
                    zbBaoshi.setPositionY(-10);
                }
            });
        }
    }
    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"loadSelectRole":[function(require,module,exports){
"use strict";
cc._RFpush(module, '7d27dshfGtIULnjPgEv+AFg', 'loadSelectRole');
// js\login\loadSelectRole.js

'use strict';

var id = 0;
cc.Class({
    extends: cc.Component,

    properties: {
        itemPrefab: cc.Prefab,
        content: cc.Node

    },

    // use this for initialization
    onLoad: function onLoad() {
        var self = this;
        ajax({
            type: 'GET',
            url: HxsgUrl.loadCreateRole,
            data: { "key": uuidKey },
            //jsonp: "jsonpCallback",//服务端用于接收callback调用的function名的参数
            success: function success(msg) {
                cc.log(uuidKey);
                msg = eval('(' + msg + ')');
                if (msg.code == "000") {

                    for (var j = 0; j < 3; j++) {
                        var item = cc.instantiate(self.itemPrefab);
                        item.x = 1;
                        item.y = 1 * j * item.height;

                        cc.find("Canvas/cotent").addChild(item);
                        var lab = item.getComponent("selectedRole");

                        lab.node.on(cc.Node.EventType.TOUCH_START, self.toIndex, self);
                        var p = msg.data;
                        if (p == null || p == "") {
                            lab.name = j;
                            item.name = 'item' + j;
                            lab.msg.string = "【空】";
                            lab.id.string = "";
                            lab.zhiye.string = "新建角色";
                        } else {
                            if (p[j] !== undefined && p[j] !== null) {
                                item.name = 'item' + p[j].id;
                                lab.name = p[j].id;
                                //将预制资源写入
                                lab.msg.string = p[j].rolename;
                                lab.id.string = "ID:" + p[j].id;
                                lab.zhiye.string = p[j].level + "级" + p[j].zhiye;

                                //lab.img.spriteFrame.setTexture("http://localhost:7456/res/raw-assets//resources/touxiang/wushi3.jpg");
                            } else {
                                lab.name = j;
                                item.name = 'item' + j;
                                lab.msg.string = "【空】";
                                lab.id.string = "";
                                lab.zhiye.string = "新建角色";
                            }
                        }

                        //点击事件

                    }
                } else {
                    showAlert("服务器异常");
                }
            }
        });
    },
    toIndex: function toIndex(event) {

        var node = event.target;

        var lab = node.getComponent("selectedRole");
        id = lab.name;
        //node.color=new cc.Color(230,21,21);
        var arr = node.parent.children;
        cc.log(id);
        for (var i = 0; i < arr.length; i++) {

            if (arr[i].name == "item" + id) {
                cc.log(arr[i].name.indexOf(id));
                arr[i].color = new cc.Color(240, 232, 232);
            } else {
                arr[i].color = new cc.Color(199, 135, 135);
            }
        }
        // node.parent.getChildByName("item1000").color=new cc.Color(230,21,21);
        cc.log(node.parent.getChildByName("item" + id));
        //  if(id<1000)
        // {
        //       cc.director.loadScene('createRole');
        //  }
        // cc.director.loadScene('inputNum');
    },
    game: function game() {
        if (id >= 1000) {
            ajaxData(HxsgUrl.selectRole, { 'id': id, "keys": uuidKey }, loadingScene('indexhg'));
        } else {

            loadingScene('createRole');
        }
    }
});

cc._RFpop();
},{}],"loading":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'b14c6PtlP9MR5pthRLrjfP4', 'loading');
// js\common\loading.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        text: cc.Label
    },

    /**
     * msg: 显示的内容
     * sureEvent: 确定按钮回调函数，没有传undefined或者null
     * cancelEvent: 返回按钮回调函数，没有传undefined或者null
     * suerParameter: 确定按钮回调函数参数
     * cancelParameter: 返回按钮回调函数参数
     */
    initAlert: function initAlert(msg, sureEvent, cancelEvent, suerParameter, cancelParameter) {
        this.text.string = msg;
        this.sureEvent = sureEvent;
        this.cancelEvent = cancelEvent;
        this.suerParameter = suerParameter;
        this.cancelParameter = cancelParameter;
    },

    sureClickEvent: function sureClickEvent() {
        if (this.sureEvent) {
            this.sureEvent(this.suerParameter);
        }
        this.node.destroy();
    },

    cancelClickEvnet: function cancelClickEvnet() {
        cc.log('cancelClickEvnet');
        if (this.cancelEvent) {
            this.cancelEvent(this.cancelParameter);
        }
        this.node.destroy();
    }
});

cc._RFpop();
},{}],"loginCreateRole":[function(require,module,exports){
"use strict";
cc._RFpush(module, '280c3rsZJJKnZ9RqbALVwtK', 'loginCreateRole');
// js\login\loginCreateRole.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {

        inputName: {
            default: null,
            type: cc.EditBox
        },
        touxiang1: {
            default: null,
            type: cc.Sprite
        },
        touxiang2: {
            default: null,
            type: cc.Sprite
        },
        touxiang3: {
            default: null,
            type: cc.Sprite
        },
        txt: {
            default: null,
            type: cc.Label
        }
    },

    // 上传角色信息 创建角色
    uploadinfo: function uploadinfo() {
        var self = this;
        self.info.name = self.inputName.string;
        //cc.log("验证角色信息：",self.info);
        //cc.log("验证选中的头像：",eval("self.txFile.tx"+self.txFile.flag));
        var dataJson = { 'rolename': self.info.name };
        //cc.log("角色名验证\n准备创建角色");
        ajaxData(HxsgUrl.checkRole, dataJson, function (msg) {
            cc.log(msg);
            if (msg.code == "000") {
                switch (msg.data) {
                    case '000':
                        //var txurl = eval("self.txFile.tx"+self.txFile.flag);
                        var dataJson = {
                            "zhiye": self.info.job,
                            "rolename": self.info.name,
                            "sex": self.info.sex,
                            "img": self.txFile.tx,
                            "keys": uuidKey
                        };

                        cc.log("准备开始创建角色:", dataJson);
                        //此处需要丰富内容
                        ajaxData(HxsgUrl.createRole, dataJson, function (msg) {
                            cc.log(msg);
                            if (msg.code == "000") {
                                if (msg.data == '000') {
                                    cc.log("创建角色成功");
                                    loadScene(HxsgScenes.index, HxsgScenes.index);
                                } else {
                                    cc.log("创建角色失败");
                                    showAlert("创建角色失败");
                                }
                            } else {
                                showAlert("服务器异常");
                            }
                        });
                        //end
                        break;
                    case '001':
                        cc.log("角色名已存在或为空");
                        showAlert("角色名已存在或为空");
                        break;
                    default:
                        cc.log("发生未知错误");
                        showAlert("注册失败，未知错误：" + msg);
                        break;
                } //end switch
            } else {
                showAlert("服务器异常");
            }
        });
    },
    // use this for initialization
    onLoad: function onLoad() {
        var self = this;
        self.txt.string = "请输入您在游戏中的名称";

        //保存角色信息
        self.info = new Object();
        self.info.txUrl = 'resources/touxiang/';
        self.info.sex = "男";
        self.info.sex_flg = 0;
        self.info.job = "武士";
        self.info.job_flg = 0;
        self.info.name = '';

        //保存选中的头像路径    
        self.txFile = new Object();
        //self.txFile.flag = 1;
        //self.txFile.tx1 = '';
        //self.txFile.tx2 = '';
        self.txFile.tx = ''; //保存选中的头像

        /* 获取所有按钮组件 */
        self.buttons = self.node.getComponentsInChildren(cc.Button);
        self.nanButton = this.getComponentByNodeName("nan");
        self.nvButton = this.getComponentByNodeName("nv");
        self.wushiButton = this.getComponentByNodeName("wushi");
        self.wenrenButton = this.getComponentByNodeName("wenren");
        self.yishiButton = this.getComponentByNodeName("yishi");
        self.tx1Button = this.getComponentByNodeName("touxiang1");
        self.tx2Button = this.getComponentByNodeName("touxiang2");
        self.tx3Button = this.getComponentByNodeName("touxiang3");

        //获取头像按钮的精灵组件
        //cc.log(self.tx1Button.node.name);
        self.touxiang1 = self.tx1Button.node.getComponent(cc.Sprite);

        /* 初始化头像矩阵 */
        /*
            +----+------+-----+------+-----
            |    | 武士 | 文人 | 异士 |
            +----+-------------------------
            | 男 |      |      |     |
            +----+-------------------------
            | 女 |      |      |     |
            +----+---------------------------
         */
        self.txtable = new Array(new Array(), new Array());

        self.txtable[0][0] = [cc.url.raw(self.info.txUrl + 'wushi1.jpg'), cc.url.raw(self.info.txUrl + 'wushi2.jpg'), cc.url.raw(self.info.txUrl + 'wushi3.jpg')];
        self.txtable[0][1] = [cc.url.raw(self.info.txUrl + 'wenren1.jpg'), cc.url.raw(self.info.txUrl + 'wenren2.jpg'), cc.url.raw(self.info.txUrl + 'wenren3.jpg')];
        self.txtable[0][2] = [cc.url.raw(self.info.txUrl + 'yishi1.jpg'), cc.url.raw(self.info.txUrl + 'yishi2.jpg'), cc.url.raw(self.info.txUrl + 'yishi3.jpg')];

        self.txtable[1][0] = [cc.url.raw(self.info.txUrl + 'wushinv1.jpg'), cc.url.raw(self.info.txUrl + 'wushinv2.jpg'), cc.url.raw(self.info.txUrl + 'wushinv3.jpg')];
        self.txtable[1][1] = [cc.url.raw(self.info.txUrl + 'wenrennv1.jpg'), cc.url.raw(self.info.txUrl + 'wenrennv2.jpg'), cc.url.raw(self.info.txUrl + 'wenrennv3.jpg')];
        self.txtable[1][2] = [cc.url.raw(self.info.txUrl + 'yishinv1.jpg'), cc.url.raw(self.info.txUrl + 'yishinv2.jpg'), cc.url.raw(self.info.txUrl + 'yishinv3.jpg')];
        cc.log(self.txtable);
    },
    /* 通过node.name获取按钮 */
    getComponentByNodeName: function getComponentByNodeName(nodeName) {
        //cc.log(nodeName);
        //cc.log(typeName);
        for (var i = 0; i < this.buttons.length; i++) {
            var element = this.buttons[i];
            if (element.node.name === nodeName) {
                /* enableAutoGrayEffect==true，当 button 的 interactable 属性为 false 的时候
                会使用内置 shader 让 button 的 target 节点的 sprite 组件变灰 */
                element.enableAutoGrayEffect = true;
                return element;
            }
        }

        return null;
    },

    // called every frame
    /*
    update: function (dt) {
        
    },
    */
    updatetx: function updatetx() {

        var self = this;
        var sex_flg = self.info.sex_flg;
        var job_flg = self.info.job_flg;
        // 更新头像
        cc.log(self.txtable[sex_flg][job_flg][0]);
        cc.log(self.txtable[sex_flg][job_flg][1]);
        cc.log(self.txtable[sex_flg][job_flg][2]);

        self.touxiang1.spriteFrame.setTexture(self.txtable[sex_flg][job_flg][0]);
        self.touxiang2.spriteFrame.setTexture(self.txtable[sex_flg][job_flg][1]);
        self.touxiang3.spriteFrame.setTexture(self.txtable[sex_flg][job_flg][2]);

        //self.touxiang1.spriteFrame.ensureLoadTexture();
        //调试代码
        /*
                var url = self.info.txUrl + "yishi1";  
                cc.loader.loadRes(self.txtable[sex_flg][job_flg][0], function (err, spriteFrame) {
                    if(!err && spriteFrame)
                    {
                        cc.log("dsds");
                    //var node = new cc.Node("New Sprite");
                    //var sprite = node.addComponent(cc.Sprite);
                    self.touxiang1.spriteFrame = spriteFrame;
                    self.touxiang2.spriteFrame = spriteFrame;
                    self.touxiang3.spriteFrame = spriteFrame;
                    //node.parent = self.node
                    //self.touxiang1.spriteFrame.ensureLoadTexture();
                    }
                    if (!spriteFrame)
                    {
                        cc.log(err);
                        cc.log("xxxx");
                    }
                });
        */
        //调试代码 end
    },
    //输入框回调
    inputCK: function inputCK() {
        var self = this;
        self.txt.string = "请输入您在游戏中的名称";
    },

    //男按钮
    nanButt: function nanButt() {
        var self = this;
        self.info.sex = "男";
        self.info.sex_flg = 0;
        self.txt.string = "请选择在游戏中角色的性别";

        self.nanButton.interactable = false;
        self.nvButton.interactable = true;

        self.updatetx();
    },
    //女按钮
    nvButt: function nvButt() {
        var self = this;
        self.info.sex = "女";
        self.info.sex_flg = 1;
        self.txt.string = "请选择在游戏中角色的性别";

        self.nvButton.interactable = false;
        self.nanButton.interactable = true;

        self.updatetx();
    },
    //武士
    wushiButt: function wushiButt() {
        var self = this;
        self.info.job = "武士";
        self.info.job_flg = 0;
        self.txt.string = "请选择在游戏中角色的职业";

        self.wushiButton.interactable = false;
        self.wenrenButton.interactable = true;
        self.yishiButton.interactable = true;

        self.updatetx();
    },
    //文人
    wenrenButt: function wenrenButt() {
        var self = this;
        self.info.job = "文人";
        self.info.job_flg = 1;
        self.txt.string = "请选择在游戏中角色的职业";

        self.wushiButton.interactable = true;
        self.wenrenButton.interactable = false;
        self.yishiButton.interactable = true;

        self.updatetx();
    },
    //异士
    yishiButt: function yishiButt() {
        var self = this;
        self.info.job = "异人";
        self.info.job_flg = 2;
        self.txt.string = "请选择在游戏中角色的职业";

        self.wushiButton.interactable = true;
        self.wenrenButton.interactable = true;
        self.yishiButton.interactable = false;

        self.updatetx();
    },
    //头像1选中
    tx1Butt: function tx1Butt() {
        var self = this;
        var sex_flg = self.info.sex_flg;
        var job_flg = self.info.job_flg;
        // 更新头像
        cc.log(self.txtable[sex_flg][job_flg][0]);
        self.txFile.tx = self.txtable[sex_flg][job_flg][0];

        self.txt.string = "请选择在游戏中角色的头像";
        self.tx1Button.interactable = false;
        self.tx2Button.interactable = true;
        self.tx3Button.interactable = true;
    },
    //头像2选中
    tx2Butt: function tx2Butt() {
        var self = this;
        var sex_flg = self.info.sex_flg;
        var job_flg = self.info.job_flg;
        cc.log(self.txtable[sex_flg][job_flg][1]);
        self.txFile.tx = self.txtable[sex_flg][job_flg][1];

        self.txt.string = "请选择在游戏中角色的头像";
        self.tx1Button.interactable = true;
        self.tx2Button.interactable = false;
        self.tx3Button.interactable = true;
    },
    //头像3选中
    tx3Butt: function tx3Butt() {
        var self = this;
        var sex_flg = self.info.sex_flg;
        var job_flg = self.info.job_flg;
        cc.log(self.txtable[sex_flg][job_flg][2]);
        self.txFile.tx = self.txtable[sex_flg][job_flg][2];

        self.txt.string = "请选择在游戏中角色的头像";
        self.tx1Button.interactable = true;
        self.tx2Button.interactable = true;
        self.tx3Button.interactable = false;
    }
});

cc._RFpop();
},{}],"loginRegister":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'cce955RZWxKcbMTYr4odArr', 'loginRegister');
// js\login\loginRegister.js

"use strict";

//var WS = require('serverSetup.js');
cc.Class({
    extends: cc.Component,

    properties: {
        account: {
            default: null,
            type: cc.EditBox
        },
        pass: {
            default: null,
            type: cc.EditBox
        },
        pass2: {
            default: null,
            type: cc.EditBox
        },
        suppass: {
            default: null,
            type: cc.EditBox
        },
        suppass2: {
            default: null,
            type: cc.EditBox
        },
        regInfo: {
            default: null,
            type: cc.Label
        }
    },

    // use this for initialization
    onLoad: function onLoad() {
        this.regInfo.string = '';
    },

    //注册按钮
    zhuce: function zhuce() {
        //获取注册信息
        var self = this;
        var account = this.account.string;
        var pass = this.pass.string;
        var pass2 = this.pass2.string;
        var suppass = this.suppass.string;
        var suppass2 = this.suppass2.string;
        //判断密码一致性（是否设置密码与超级密码不同？）
        if (pass !== pass2) {
            showAlert("两次密码不一致");
            //this.regInfo.string = "两次密码不一致";
            pass2.string = "";
            return;
        }
        if (suppass !== suppass2) {
            showAlert("两次超级密码不一致");
            //this.regInfo.string = "两次超级密码不一致";
            suppass2.string = "";
            return;
        }

        cc.log(account);
        cc.log(pass + "==" + pass2);
        cc.log(suppass + "==" + suppass2);

        var dataJson = { "name": account };
        //检测账号重名
        ajaxData(HxsgUrl.checkAcount, dataJson, function (msg) {
            if (msg.code == "000") {
                if (msg.data === "001") {
                    showAlert("账号已存在");
                    //self.regInfo.string = "账号已存在"
                    self.account.string = "";
                    return;
                }
                //允许注册 
                else if (msg.data === "000") {
                        cc.log("账号注册开始");
                        cc.log(account);
                        cc.log(pass);
                        cc.log(suppass);
                        var dataJson = { "name": account, "password": pass, "supperpass": suppass };
                        //注册账号
                        ajaxData(HxsgUrl.register, dataJson, function (msg) {
                            cc.log(msg);
                            if (msg.code == "000") {
                                if (msg.data === "000") {
                                    cc.log("注册成功，跳转到角色创建界面");
                                    showAlert("恭喜您注册成功", function () {
                                        loadScene("login", "register");
                                    }, function () {
                                        loadScene("login", "register");
                                    });

                                    //cc.director.loadScene('createRole');
                                } else if (msg.data === "001") {
                                    cc.log("注册失败");
                                    showAlert(msg.message);
                                    return;
                                } else {
                                    showAlert("未知错误，注册失败：msg：" + msg);
                                    cc.log("未知错误");
                                }
                            } else {
                                showAlert("服务器异常");
                            }
                        });
                        return;
                    }
            } else {
                showAlert("服务器异常");
            }
        });
    },

    //返回登入界面
    comeBack: function comeBack() {
        loadScene("login", "register");
        //cc.director.loadScene('login');
    }
});

cc._RFpop();
},{}],"login":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'cdbd6Cr1GRE15wVwWDeqP8c', 'login');
// js\login\login.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        username: {
            default: null,
            type: cc.EditBox
        },
        pass: {
            default: null,
            type: cc.EditBox
        }
    },
    // use this for initialization
    onLoad: function onLoad() {

        // var key= uuid(16,36);
        // uuidKey=key;
        var anim = this.getComponent(cc.Animation);
        // 如果没有指定播放哪个动画，并且有设置 defaultClip 的话，则会播放 defaultClip 动画
        anim.play();
        // 指定播放 test 动画
        anim.play('system');
        this.check();
    },
    start: function start() {

        // Change the text in Label Component    
    },
    check: function check() {
        ajaxUtils(HxsgUrl.checkVersion, null, function (data) {
            if (data == "1") {
                showAlert("检测到有新的版本！q群455895673下载", function () {
                    cc.director.end();
                }, function () {
                    cc.director.end();
                });
            }
            if (data == "2") {
                showAlert("停服维护中！q群455895673", function () {
                    cc.director.end();
                }, function () {
                    cc.director.end();
                });
            }
        });
    },
    //登入按钮
    login: function login() {

        var self = this;
        //获取用户输入         
        var name = self.username.string;
        var pass = self.pass.string;
        //空数据拦截
        if (name === null || name === undefined || name === '') {
            showAlert('请输入用户名');
            return;
        }
        if (pass === null || pass === undefined || pass === '') {
            showAlert('请输入密码');
            return;
        }
        cc.log(name, pass);
        //敏感词检测 ？
        var dataJson = { "name": name, "password": pass, "key": uuidKey };
        ajaxData(HxsgUrl.login, dataJson, function (msg) {
            if (msg.code == "000") {
                if (msg.data === "005") {
                    cc.log("跳转到选择角色界面");
                    //跳转到选择界面
                    loadScene('selectRole', 'login');
                    //cc.director.loadScene('scenes/login/selectRole');
                } else if (msg.data === "003") {
                    //创建角色
                    cc.log("跳转到创建角色界面");
                    loadScene('selectRole', 'login');
                    //cc.director.loadScene('scenes/login/createRole');
                } else if (msg.data === "001") {
                    cc.log("登入失败" + msg.msg);
                    showAlert('用户名或者密码错误');
                } else if (msg.data === "002") {
                    //服务器异常
                    cc.log("登入失败" + msg.msg);
                    showAlert('用户名或者密码错误');
                } else {
                    cc.log("未定义错误" + msg.data);
                    showAlert('发生未知错误');
                }
            } else {
                showAlert('服务器异常');
            }
        });
    },
    //注册按钮 回调函数
    register: function register() {
        loadScene('register', 'login');
        //cc.director.loadScene('register');
    }
});

cc._RFpop();
},{}],"move":[function(require,module,exports){
"use strict";
cc._RFpush(module, '0162cHQoYZJGa0BHf2X6mKp', 'move');
// js\index\move\move.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        cityName: cc.Label,
        zuoBiao: cc.Sprite,
        move2: cc.Sprite,
        cityImg: cc.Sprite,
        zuoBiaoList: {
            default: [],
            type: cc.SpriteFrame
        },
        cityImgList: {
            default: [],
            type: cc.SpriteFrame
        }
    },
    init: function init(msg) {
        try {
            this.cityName.string = msg.name;
            this.zuoBiao.spriteFrame = null;
            this.cityImg.spriteFrame = null;
            var key = Math.round(Math.random() * 15);
            cc.log('key' + key);
            this.cityImg.spriteFrame = this.cityImgList[key];
            if (msg.num != 4) {
                this.zuoBiao.spriteFrame = this.zuoBiaoList[msg.num];
            }
        } catch (e) {
            cc.log('加载地图信息异常:' + e);
        }
    }
});

cc._RFpop();
},{}],"myZhuangBei":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'fc4cbiFXyRGTrbuoyN9GTQA', 'myZhuangBei');
// js\wupin\zhuangbei\myZhuangBei.js

"use strict";

var self;
cc.Class({
    extends: cc.Component,

    properties: {
        gj: cc.Label,
        su: cc.Label,
        qx: cc.RichText,
        jl: cc.RichText
    },

    // use this for initialization
    onLoad: function onLoad() {
        self = this;
        loadCommomScence();
        this.init();
        this.initData();
    },
    init: function init() {
        ajaxData(HxsgUrl.myZhuangBei, null, function (data) {
            if ("000" == data.code) {
                (function () {
                    var arrJson = data.data;

                    var _loop = function _loop(i) {
                        var wuqiType = arrJson[i].wuqiType;

                        if (wuqiType.indexOf("武") >= 0) {
                            cc.loader.loadRes('prefabs/zbIcon', cc.Prefab, function (err, prefab) {
                                var zbIcon = cc.instantiate(prefab);
                                var sprite = zbIcon.getComponent('cc.Sprite');
                                //网络加载图片
                                cc.loader.load(imgUrl + arrJson[i].imgUrl, function (error, texture) {
                                    sprite.spriteFrame = new cc.SpriteFrame(texture);
                                });
                                zbIcon.on('click', function (event) {
                                    zhaungBeiDetailsZbid.id = arrJson[i].id;
                                    cc.log("武器详情:" + arrJson[i].id);
                                    loadingScene(HxsgScenes.zhuangbei, HxsgScenes.myZhuangBei);
                                });
                                cc.find('Canvas/wuqi').addChild(zbIcon);
                            });
                        }
                        if (wuqiType.indexOf("靴") >= 0) {
                            cc.loader.loadRes('prefabs/zbIcon', cc.Prefab, function (err, prefab) {
                                var zbIcon = cc.instantiate(prefab);
                                var sprite = zbIcon.getComponent('cc.Sprite');
                                //网络加载图片
                                cc.loader.load(imgUrl + arrJson[i].imgUrl, function (error, texture) {
                                    sprite.spriteFrame = new cc.SpriteFrame(texture);
                                });
                                zbIcon.on('click', function (event) {
                                    zhaungBeiDetailsZbid.id = arrJson[i].id;
                                    loadingScene(HxsgScenes.zhuangbei, HxsgScenes.myZhuangBei);
                                });
                                cc.find('Canvas/xiezi').addChild(zbIcon);
                            });
                        }
                        if (wuqiType.indexOf("链") >= 0) {
                            cc.loader.loadRes('prefabs/zbIcon', cc.Prefab, function (err, prefab) {
                                var zbIcon = cc.instantiate(prefab);
                                var sprite = zbIcon.getComponent('cc.Sprite');
                                //网络加载图片
                                cc.loader.load(imgUrl + arrJson[i].imgUrl, function (error, texture) {
                                    sprite.spriteFrame = new cc.SpriteFrame(texture);
                                });
                                zbIcon.on('click', function (event) {
                                    zhaungBeiDetailsZbid.id = arrJson[i].id;
                                    loadingScene(HxsgScenes.zhuangbei, HxsgScenes.myZhuangBei);
                                });
                                cc.find('Canvas/xianlian').addChild(zbIcon);
                            });
                        }
                        if (wuqiType.indexOf("腕") >= 0) {
                            cc.loader.loadRes('prefabs/zbIcon', cc.Prefab, function (err, prefab) {
                                var zbIcon = cc.instantiate(prefab);
                                var sprite = zbIcon.getComponent('cc.Sprite');
                                //网络加载图片
                                cc.loader.load(imgUrl + arrJson[i].imgUrl, function (error, texture) {
                                    sprite.spriteFrame = new cc.SpriteFrame(texture);
                                });
                                zbIcon.on('click', function (event) {
                                    zhaungBeiDetailsZbid.id = arrJson[i].id;
                                    loadingScene(HxsgScenes.zhuangbei, HxsgScenes.myZhuangBei);
                                });
                                cc.find('Canvas/huwan').addChild(zbIcon);
                            });
                        }
                        if (wuqiType.indexOf("盔") >= 0) {
                            cc.loader.loadRes('prefabs/zbIcon', cc.Prefab, function (err, prefab) {
                                var zbIcon = cc.instantiate(prefab);
                                var sprite = zbIcon.getComponent('cc.Sprite');
                                //网络加载图片
                                cc.loader.load(imgUrl + arrJson[i].imgUrl, function (error, texture) {
                                    sprite.spriteFrame = new cc.SpriteFrame(texture);
                                });
                                zbIcon.on('click', function (event) {
                                    zhaungBeiDetailsZbid.id = arrJson[i].id;
                                    loadingScene(HxsgScenes.zhuangbei, HxsgScenes.myZhuangBei);
                                });
                                cc.find('Canvas/tou').addChild(zbIcon);
                            });
                        }
                        if (wuqiType.indexOf("甲") >= 0) {
                            cc.loader.loadRes('prefabs/zbIcon', cc.Prefab, function (err, prefab) {
                                var zbIcon = cc.instantiate(prefab);
                                var sprite = zbIcon.getComponent('cc.Sprite');
                                //网络加载图片
                                cc.loader.load(imgUrl + arrJson[i].imgUrl, function (error, texture) {
                                    sprite.spriteFrame = new cc.SpriteFrame(texture);
                                });
                                zbIcon.on('click', function (event) {
                                    zhaungBeiDetailsZbid.id = arrJson[i].id;
                                    loadingScene(HxsgScenes.zhuangbei, HxsgScenes.myZhuangBei);
                                });
                                cc.find('Canvas/gaijia').addChild(zbIcon);
                            });
                        }
                    };

                    for (var i = 0; i < arrJson.length; i++) {
                        _loop(i);
                    }
                })();
            } else {
                showAlert("系统错误!");
            }
        });
    },
    initData: function initData() {
        ajaxData(HxsgUrl.indexroleMsgUrl, null, function (data) {
            var roleMsg = data.roleMsg;
            self.gj.string = roleMsg.totalgong;
            self.qx.string = roleMsg.totalxue1 + "/" + roleMsg.totalxue2;
            self.jl.string = roleMsg.totaljing1 + "/" + roleMsg.totaljing2;
            self.su.string = roleMsg.totalsudu;
            cc.log(self.gj.string);
            cc.log(self.su.string);
        });
    }

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"nearbyPlayer":[function(require,module,exports){
"use strict";
cc._RFpush(module, '7a8ad7oAOxEh7z3pVjRjWs/', 'nearbyPlayer');
// js\index\nearbyPlayer\nearbyPlayer.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        label: cc.Label
    },

    // use this for initialization
    onLoad: function onLoad() {},
    setLabel: function setLabel(msg) {
        this.label.string = msg;
    }
    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"parent":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'e246fGA/fBBAaSrPXkEpY6C', 'parent');
// js\index\parent.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    // use this for initialization
    onLoad: function onLoad() {
        cc.game.addPersistRootNode(this);
    }

});

cc._RFpop();
},{}],"pkJnContent":[function(require,module,exports){
"use strict";
cc._RFpush(module, '87d5eJuEIBNIrIMcdWp3lqw', 'pkJnContent');
// js\pk\pkJnContent.js

"use strict";

var self;
var pkWait = require("pkWait");
cc.Class({
    extends: cc.Component,

    properties: {
        contents: cc.Node
    },

    // use this for initialization
    onLoad: function onLoad() {
        self = this;
        // this.onloading();
    },
    backEvent: function backEvent() {
        cc.find("Canvas/zhiling").active = true;
        cc.log("初始化技能列表");
        cc.find("Canvas/jineng").active = false;
    },
    onloading: function onloading(e, id) {
        cc.loader.loadRes('pk/jnButton', cc.Prefab, function (err, prefab) {
            if (!err) {
                var p = getRoleMsg(pk.clickArrayRight[0], pk.player2);
                var jn = p.jineng;
                self.contents.removeAllChildren();
                var hPrefab = cc.instantiate(prefab);
                self.contents.height = jn.length * (hPrefab.height + 5);
                for (var i = 0; i < jn.length; i++) {
                    var jnPrefab = cc.instantiate(prefab);
                    var jnJs = jnPrefab.getComponent("jnName");
                    jnJs.setJname(jn[i].skillname);
                    jnPrefab.on('click', self.clickEvent, self);
                    jnPrefab.id = jn[i];
                    self.contents.addChild(jnPrefab);
                }
            }
        });
    },
    clickEvent: function clickEvent(event) {
        var node = event.target;
        var jn = node.id;
        cc.log('技能名称:' + node.id.skillname);
        cc.find("Canvas/jineng").active = false;
        var data = null;
        //有些技能可以对自己或者队友释放
        switch (node.id.skillname) {
            case "气冲斗牛":
                {
                    pk.selectStatus = 2000;
                    data = pk.clickArrayRight[0];
                    break;
                }
            default:
                {
                    pk.selectStatus = 3000;
                    data = pk.clickArrayLeft[0];
                    break;
                }
        }

        onloadJnZhiling(false);
        console.log("选择指令完成");

        //模拟点击第一个人物按钮效果
        clickRoleTool(data, node.id.skillname);
    }
});

cc._RFpop();
},{"pkWait":"pkWait"}],"pkOnload":[function(require,module,exports){
"use strict";
cc._RFpush(module, '2d7d6vhqtBAg7K5avIKn/Yw', 'pkOnload');
// js\pk\pkOnload.js

"use strict";

window.pkOnload;
var self;

cc.Class({
    extends: cc.Component,

    properties: {
        leftPlay: cc.Prefab,
        rightPlay: cc.Prefab
    },

    // use this for initialization
    onLoad: function onLoad() {
        /**
         * -212 59    -123    heigt=72   width 89
         */
        self = this;
        window.pkOnload = this;
        PkSocketEvents.onloadPlay = this.onloadPlay;
        //this.init();
        cc.log("pkOnload加载了。。。。。。。。");
        openPkScoket(true);
        self.init();
        /////////////////////////////////////////////////
        // ajaxData("http://127.0.0.1:8080/Cocos2dAddPk/getYeGuaiData?level=10,15&name=侍卫群", null, function (data) {
        //     if (data.code != "000") {
        //         showAlert(data.message);
        //     } else {

        //         let initData = JSON.parse(data.data);
        //         onloadPkMsg(initData);
        //         self.onloadPlay(-160, -165, 0);
        //         self.onloadPlay(253, 205, 1);
        //         onloadJn(true);


        //         // self.init();
        //     }

        // });

        //    / self.init();
    },
    clickEvent: function clickEvent(event) {
        var node = event.target;
        var jn = node.id;
        cc.log('技能名称:' + node.id.skillname);
        cc.find("Canvas/jineng").active = false;
        var data = null;
        //有些技能可以对自己或者队友释放
        switch (node.id.skillname) {
            case "气冲斗牛":
                {
                    pk.selectStatus = 2000;
                    data = pk.clickArrayRight[0];
                    break;
                }
            default:
                {
                    pk.selectStatus = 3000;
                    data = pk.clickArrayLeft[0];
                    break;
                }
        }

        onloadJnZhiling(false);
        console.log("选择指令完成");

        //模拟点击第一个人物按钮效果
        clickRoleTool(data, node.id.skillname);
    },

    /**right   w=89 h=59
     * x=253 
     * left 
     * x=-212   -265   305
     */

    onloadPlay: function onloadPlay(x, y, prefab) {
        cc.log("onloadPlay被调用了------------------");
        //初始化加载界面，所有角色都不可以点击
        pk.selectStatus = "001";
        var leftp;
        if (prefab == 0) {
            prefab = self.leftPlay;
            cc.log(pk.player1);
            leftp = pk.player1;
        } else {
            prefab = self.rightPlay;
            leftp = pk.player2;
        }
        for (var i = 0; i < leftp.length; i++) {
            var play = cc.instantiate(prefab);
            self.node.addChild(play);
            play.setPositionY(59 - i * 72);
            if (leftp.length == 1) {
                play.setPositionY(0);
                play.setPositionX(x);
            } else {
                switch (i) {
                    case 0:
                    case 2:
                        {

                            play.setPositionX(x - 89);
                            break;
                        }
                    case 1:
                    case 3:
                        {
                            play.setPositionX(x);

                            break;
                        }

                }
            }

            play.name = leftp[i].id;
            var role = play.getComponent("role");

            var xue = leftp[i].qixue / leftp[i].qixue2;
            var jing = leftp[i].jingli / leftp[i].jingli2;
            role.setXueAndJing(xue, jing);

            //buff
            try {
                var buffLi = leftp[i].buff;
                if (buffLi != null && buffLi.length > 0) {
                    var buff = play.getChildByName("buff");
                    buff.removeAllChildren();
                    for (var k = 0; k < buffLi.length; k++) {
                        cc.log("-kkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkk");
                        var buffJs = buff.getComponent("buff");
                        var PrefabBuff = buffJs.getBuffPrefab();
                        var buffIn = cc.instantiate(PrefabBuff);
                        var buffDetail = buffIn.getComponent("buffDetail");
                        var buffAni = buffDetail.getComponent(cc.Animation);
                        var spriteFrame;
                        for (var j in buffLi[k]) {
                            spriteFrame = buffDetail.getSpriteFrame(j);
                        }
                        //spriteFrame存在时加入
                        if (typeof spriteFrame != 'undefined') {
                            var sprite = buffIn.getComponent(cc.Sprite);
                            sprite.spriteFrame = spriteFrame;
                            buff.addChild(buffIn);
                        }
                    }
                }
                //气血为0
                if (leftp[i].qixue <= 0) {
                    role.setDead();
                    if (leftp[i].id != pk.rightOne) {
                        pk.clickArrayLeft.remove(leftp[i].id);
                    }
                }

                // if (leftp[i].buffType != null) {
                //     var buff = play.getChildByName("buff");
                //     var buffJs = buff.getComponent("buff");
                //     var PrefabBuff = buffJs.getBuffPrefab();
                //     var buffIn = cc.instantiate(PrefabBuff);
                //     var buffDetail = buffIn.getComponent("buffDetail");
                //     var buffAni = buffDetail.getComponent(cc.Animation);
                //     var spriteFrame = buffDetail.getSpriteFrame(leftp[i].buffTypeKey);
                //     var sprite = buffIn.getComponent(cc.Sprite);
                //     sprite.spriteFrame = spriteFrame;
                //     buff.addChild(buffIn);
                // }
            } catch (e) {
                cc.log("加载buff失败：" + e);
            }
        }
    },
    /**
     * 发送指令状态标识
     */

    /**
    * 指令函数
    * param e 事件对象
    * param num 区分按钮类型
    * param type 区分攻击类型
    * param status 区分左右角色
    */
    attack: function attack(e, num) {
        var name;
        try {
            switch (num) {
                //攻击指令
                case 'gj':
                    {
                        onloadJnZhiling(false);
                        console.log("选择指令完成");
                        pk.selectStatus = 3000;

                        //模拟点击第一个人物按钮效果
                        clickRoleTool(pk.clickArrayLeft[0], "普通攻击");

                        break;
                    }
                //攻击指令
                case 'fy':
                    {
                        //模拟点击第一个人物按钮效果
                        clickRoleTool(pk.clickArrayLeft[0], "防御");
                        break;
                    }
                case 'tp':
                    {
                        cc.log("逃跑");
                        cc.find("Canvas/zhiling").active = false;
                        var play = cc.find("Canvas/background/" + pk.clickArrayRight[0]);
                        //获取边框到中心的距离，即得到两边框的坐标。注意：因为时序问题，必须要canvas的宽度来计算
                        var seqRight = cc.sequence(cc.moveTo(2, cc.p(play.getPositionX() + 500, play.getPositionY())).easing(cc.easeCubicActionOut(1)));
                        play.runAction(seqRight);
                        break;
                    }
                //技能指令
                case 'jn':
                    {
                        cc.log("技能");
                        cc.find("Canvas/zhiling").active = false;
                        cc.log("初始化技能列表");
                        var jineng = cc.find("Canvas/jineng");
                        jineng.active = true;
                        var content = cc.find("Canvas/jineng/detail/scrollview/view/content");
                        cc.loader.loadRes('pk/jnButton', cc.Prefab, function (err, prefab) {
                            if (!err) {
                                var p = getRoleMsg(pk.clickArrayRight[0], pk.player2);
                                var jn = p.jineng;
                                content.removeAllChildren();
                                var hPrefab = cc.instantiate(prefab);
                                content.height = jn.length * (hPrefab.height + 5);
                                for (var i = 0; i < jn.length; i++) {
                                    var jnPrefab = cc.instantiate(prefab);
                                    var jnJs = jnPrefab.getComponent("jnName");
                                    jnJs.setJname(jn[i].skillname);
                                    jnPrefab.on('click', self.clickEvent, self);
                                    jnPrefab.id = jn[i];
                                    content.addChild(jnPrefab);
                                }
                            }
                        });

                        break;
                    }
                //物品
                case 'wp':
                    {
                        cc.log("物品");
                        cc.find("Canvas/zhiling").active = false;
                        cc.find("Canvas/wupin").active = true;
                        cc.find("Canvas/jineng").active = false;
                        cc.log("物品列表");
                        cc.find("Canvas/wupin/detail/scrollview/view/content").getComponent('pkWuPin').onloading();
                        pk.pkyaostatus = "1";

                        break;
                    }
                //招将
                case 'zj':
                    {
                        cc.log("物品");
                        cc.find("Canvas/zhiling").active = false;
                        cc.find("Canvas/zhaojiang").active = true;
                        cc.find("Canvas/jineng").active = false;
                        cc.log("物品列表");

                        break;
                    }
            }
        } catch (e) {
            cc.log('加载技能列表异常:' + e);
        }
    },
    zidong: function zidong() {
        var _this = this;

        var num = 1;
        for (var i = 0; i < pk.clickArrayRight.length; i++) {
            setTimeout(function () {
                self.attack(_this, "gj");
            }, 200 * num);
            num++;
            setTimeout(function () {
                clickRoleTool(pk.clickArrayLeft[0], "普通攻击");
            }, 200 * num);
            num++;
        }
    },
    init: function init() {
        try {

            cc.find("Canvas/roleDetail").active = false;
            cc.find("Canvas/jineng").active = false;
            cc.find("Canvas/wupin").active = false;
            cc.find("Canvas/zhaojiang").active = false;
            cc.find("Canvas/end").active = false;
            cc.find("Canvas/zhiling").active = true;
            var leftp = pk.player1;
            var rightp = pk.player2;
            self.node.removeAllChildren();
            cc.find("Canvas/vs/left").getComponent(cc.Label).string = leftp[0].name;
            cc.find("Canvas/vs/right").getComponent(cc.Label).string = rightp[0].name;
            cc.find("Canvas/time/name").getComponent(cc.Label).string = rightp[0].name;
            //倒计时
            var count = 60;
            var timeCallback = function timeCallback(dt) {
                if (count === 0) {
                    // 在第六次执行回调时取消这个计时器
                    this.unschedule(timeCallback);
                    this.zidong();
                } else {
                    cc.find("Canvas/time").active = true;
                    cc.find("Canvas/time/time").getComponent(cc.Label).string = "出招(" + count + ")";
                    count--;
                }
                if (pk.timeStatus === 8000) {
                    // 在第六次执行回调时取消这个计时器
                    this.unschedule(timeCallback);
                    cc.find("Canvas/time").active = false;
                }
            };

            this.schedule(timeCallback, 1);
        } catch (e) {
            cc.log(e);
        }
    }

});

//  window.pkWs= new WebSocket(ws://127.0.0.1:8080/pkServer');
//         pkWs.onopen = function (event) {
//             // 发送一个初始化消息
//             // 发送一个初始化消息
//             var jsonData = {
//                 type: "pkWait",
//                 pkType: "1001",
//                 jsonData: {
//                     roleA: "1000",
//                     roleB: "1000",
//                     guaiData: {
//                         "level": "115,120",
//                         "name": "藤甲兵群"
//                     }

//                 },
//             }
//             pkWs.send(JSON.stringify(jsonData));
//         }
//         // 监听消息
//         pkWs.onmessage = function (event) {
//             console.log('Client notified socket has closed', JSON.stringify(event.data));
//             var returnJsonData =JSON.parse(event.data);
//             cc.log(returnJsonData)
//             pk.uuid = returnJsonData[0];
//             pk.player1 = returnJsonData[1];
//           //  pk.player2 = returnJsonData;
//             pk.leftPlay = [];
//               pk.clickArrayLeft=[];
//           //  pk.rightPlay = [];
//             for (var i = 0; i <  pk.player1.length; i++) {
//                 cc.log( pk.player1[i].id);
//                  pk.leftPlay.push( pk.player1[i].id);
//                  pk.clickArrayLeft.push( pk.player1[i].id);
//               //  pk.rightPlay.push(returnJsonData[i].id)
//             }
//             self.onloadPlay( pk.player1, -160, -165,  self.leftPlay, self);
//             self.onloadPlay( pk.player2, 253, 205,  self.rightPlay, self);
//             onloadJn(true);
//         };

cc._RFpop();
},{}],"pkWait":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'd327100YpJHOre2ZozzX7vp', 'pkWait');
// js\pk\pkWait.js

"use strict";

var self;
var playJs = require("playerItem");

/**
 * PK动画播放有限状态机
 */

var status;

// var pkStateMachine = new StateMachine({
//     data: {
//         battle: null,
//     },
//     transitions: [
//         { name: 'toStart', from: 'none', to: 'start' },
//         { name: 'toShifa', from: 'start', to: 'shifa' },
//         { name: 'toMoveBackGround', from: 'shifa', to: 'backgorund' },
//         { name: 'toSkill', from: 'backgorund', to: 'skill' },
//         { name: 'finshed', from: 'skill', to: 'end' },
//         { name: 'end', from: 'end', to: 'start' }
//     ],
//     methods: {
//         onToShifa() {


//         },
//         onToMoveBackGround() {

//         },

//         onToSkill() {

//         },

//         onFinshed() {

//         },
//         onEnd() {

//         },
//     }
// });
var pkWait = cc.Class({
    extends: cc.Component,

    properties: {
        playPrefab: cc.Prefab
    },

    // use this for initialization
    onLoad: function onLoad() {
        self = this;
        pkWait.load = this;
        var py = new playJs();
        var pkStateMachine = py.pkStateMachine;
        pkStateMachine.toStart();
        // this.back();
        //this.loading();
    },
    loading: function loading() {
        cc.find("Canvas/jineng").active = false;

        var result = {
            'player1': [{
                'name': '黄月英',
                'id': '1002',
                'qixue': '2123',
                'jingli': '21210',
                'sudu': '1',
                'jineng': [{
                    'name': '舍命一击',
                    'type': '1',
                    'status': 'left'
                }, {
                    'name': '力劈华山',
                    'type': '1',
                    'status': 'left'
                }, {
                    'name': '气冲斗牛',
                    'type': '1',
                    'status': 'right'
                }]
            }, {
                'name': '黄月英',
                'id': '1003',
                'qixue': '21210',
                'jingli': '20',
                'sudu': '1',
                'jineng': [{
                    'name': '五雷轰顶',
                    'type': '1',
                    'status': 'left'
                }]
            }, {
                'name': '黄月英',
                'id': '1004',
                'qixue': '3130',
                'jingli': '0',
                'sudu': '1'
            }, {
                'name': '黄月英',
                'id': '1005',
                'qixue': '0',
                'jingli': '0',
                'sudu': '1'
            }],
            'player2': [{
                'name': '咕叽',
                'id': '1032',
                'qixue': '0',
                'jingli': '0',
                'sudu': '1',
                'jineng': [{
                    'name': '舍命一击',
                    'type': '1',
                    'status': 'left'
                }, {
                    'name': '力劈华山',
                    'type': '1',
                    'status': 'left'
                }, {
                    'name': '气冲斗牛',
                    'type': '1',
                    'status': 'right'
                }]
            }, {
                'name': '黄月英',
                'id': '10077',
                'qixue': '21210',
                'jingli': '20',
                'sudu': '1',
                'jineng': [{
                    'name': '五雷轰顶',
                    'type': '1',
                    'status': 'left'
                }]
            }, {
                'name': '舞女',
                'id': '1062',
                'qixue': '0',
                'jingli': '0',
                'sudu': '1'
            }, {
                'name': '舞女',
                'id': '1006',
                'qixue': '0',
                'jingli': '0',
                'sudu': '1'
            }]
        };

        try {
            //初始化右边玩家数组
            pk.rightPlay = new Array();
            //初始化右边玩家数组
            pk.leftPlay = new Array();
            cc.loader.loadRes('pk/player', cc.Prefab, function (err, prefab) {
                if (!err) {
                    var p2 = result.player2;
                    var p1 = result.player1;
                    pk.play1 = p1;
                    pk.play2 = p2;
                    pk.jn = '普通攻击';

                    for (var i in p1) {
                        pk.leftPlay.push(p1[i].id);
                        var play1 = cc.instantiate(prefab);
                        play1.id = p1[i].id;
                        play1.name = p1[i].id;

                        var play1Js = play1.getComponent("playerItem");
                        play1Js.attackHide();
                        play1.id = i;
                        var x = 0;
                        var y = 740 - i * 70;
                        var num = parseInt(i) + parseInt(1);
                        cc.log(num);
                        if (num % 2 == 0) {
                            x = 170;
                        } else {
                            x = 100;
                        }

                        play1.setPosition(x, y);
                        cc.director.getScene().addChild(play1);
                    }

                    for (var m in p2) {
                        pk.rightPlay.push(p2[m].id);

                        var play2 = cc.instantiate(prefab);

                        var play2Js = play2.getComponent("playerItem");
                        if (m == 0) {
                            play2Js.attackShow();
                        } else {
                            play2Js.attackHide();
                        }

                        var flipYAction = cc.flipX(true);
                        play2.runAction(flipYAction);
                        play2.name = p2[m].id;
                        var x = 0;
                        var y = 740 - m * 70;
                        var num = parseInt(m) + parseInt(1);
                        cc.log(num);
                        if (num % 2 == 0) {
                            x = 650;
                        } else {
                            x = 560;
                        }

                        play2.setPosition(x, y);
                        cc.director.getScene().addChild(play2);
                    }
                }
            });
        } catch (e) {
            cc.log("初始化pk界面异常:" + e);
        }
    },
    index: function index() {
        loading();
        cc.director.preloadScene('indexhg', function () {

            cc.log('Next scene index');

            cc.director.loadScene('indexhg');
        });
    },
    /**
     * 指令函数
     * param e 事件对象
     * param num 区分按钮类型
     * param type 区分攻击类型
     * param status 区分左右角色
     */
    attack: function attack(e, num, type, status) {
        var name;
        try {
            switch (num) {
                //攻击指令
                case 'gj':
                    {
                        cc.log(type);
                        if (typeof type == 'undefined' || type == null || type == '') {
                            pk.jn = '普通攻击';
                        }
                        cc.log("攻击");
                        cc.find("Canvas/zhiling").active = false;
                        cc.find("Canvas/roleDetail").active = true;
                        if (status == 'left' || typeof status == 'undefined') {
                            name = pk.leftPlay[0];
                            this.rightShow();
                        } else if (status == 'right') {
                            name = pk.rightPlay[0];
                        }

                        pk.clickStatus = true;
                        // this.leftShow(name)
                        var role = cc.director.getScene().getChildByName(name);

                        var button = role.getComponentInChildren(cc.Button);
                        playJs.load.playerClickEvent(role);

                        break;
                    }
                //技能指令
                case 'jn':
                    {
                        cc.log("技能");
                        var p = getPkRoleMsg(pk.rightPlay[0], 2);
                        var jn = p.jineng;
                        cc.log(jn[0].name);
                        cc.find("Canvas/zhiling").active = false;
                        cc.log("初始化技能列表");
                        var jineng = cc.find("Canvas/jineng");
                        jineng.active = true;
                        cc.find("Canvas/jineng/detail/scrollview/view/content").getComponent('pkJnContent').onloading();

                        break;
                    }
            }
        } catch (e) {
            cc.log('加载技能列表异常:' + e);
        }
    },
    leftShow: function leftShow(num) {
        var left = pk.leftPlay;
        var sccen = cc.director.getScene();

        for (var i in left) {
            var child = sccen.getChildByName(left[i]);
            if (num != left[i]) {
                child.getComponent("playerItem").attackHide();
            } else {
                child.getComponent("playerItem").attackShow();
            }
        }
    },
    rightShow: function rightShow() {
        var right = pk.rightPlay;
        var child = cc.director.getScene().getChildByName(right[0]);
        child.getComponent("playerItem").attackHide();
    },
    back: function back() {
        pk.status = null;
        cc.find("Canvas/zhiling").active = true;
        cc.find("Canvas/roleDetail").active = false;
        var left = pk.leftPlay;
        for (var i in left) {
            var child = cc.director.getScene().getChildByName(left[i]);
            child.getComponent("playerItem").attackHide();
        }
        var right = pk.rightPlay;

        for (var m in right) {
            var child = cc.director.getScene().getChildByName(right[m]);
            if (m == 0) {
                child.getComponent("playerItem").attackShow();
            } else {
                child.getComponent("playerItem").attackHide();
            }
        }
    },
    playerClickEvent: function playerClickEvent(event) {
        var node = event.target;
        cc.log(node.name);
    },
    /**
     * 接收服务器返回数据播放动画
     */
    playPkAnimation: function playPkAnimation() {
        PkAnimation();
    },
    animationTest: function animationTest() {
        //this.playPkAnimation()
        //     var background = cc.find("Canvas/background");
        //     var seq;
        //     if (status == 1) {
        //         seq = cc.sequence(cc.moveTo(1, cc.p(0, 137)).easing(cc.easeCubicActionOut(1)));
        //         background.color = new cc.Color(245, 245, 245);

        //         status = null;
        //     } else {
        //         seq = cc.sequence(cc.moveTo(1, cc.p(200, 137)).easing(cc.easeCubicActionOut(1)));
        //         background.color = new cc.Color(0, 0, 0);
        //         //对应技能动画
        //         //五雷轰顶

        //         status = 1;
        //     }


        //     background.runAction(seq);
        //   jinengLoad('wanjian',background);


    },
    JnAnimation: function JnAnimation(msg) {
        var background = cc.find("Canvas/background");
        var seq;
        var x = 0;
        if ('left' == msg.msg.attackType.direction) {
            x = 200;
            background.color = new cc.Color(0, 0, 0);
        } else {
            x = -200;
        }
        seq = cc.sequence(cc.moveTo(1, cc.p(x, 137)).easing(cc.easeCubicActionOut(1)));

        // seq = cc.sequence(cc.moveTo(1, cc.p(x, 137)).easing(cc.easeCubicActionOut(1)));
        // background.color = new cc.Color(0, 0, 0);
        background.runAction(seq);
        jinengLoad(msg, background, null);
    },
    animationDanClose: function animationDanClose(event) {

        var background = cc.find("Canvas/background");
        background.getChildByName("dan").active = false;
        this.animationTest();
    },
    alertImg: function alertImg() {
        loadingScene(HxsgScenes.index, HxsgScenes.index);
    }
});

cc._RFpop();
},{"playerItem":"playerItem"}],"pkWuPin":[function(require,module,exports){
"use strict";
cc._RFpush(module, '82d4cPSt7JANYbsW4stCSKS', 'pkWuPin');
// js\pk\pkWuPin.js

"use strict";

var self;
cc.Class({
    extends: cc.Component,

    properties: {
        contents: cc.Node
    },

    // use this for initialization
    onLoad: function onLoad() {

        self = this;
    },
    backEvent: function backEvent() {
        cc.find("Canvas/zhiling").active = true;
        cc.log("初始化技能列表");
        cc.find("Canvas/jineng").active = false;
    },
    onloading: function onloading(e, id) {
        cc.loader.loadRes('pk/yao', cc.Prefab, function (err, prefab) {
            if (!err) {
                self.contents.removeAllChildren();
                ajaxUtils(HxsgUrl.queryRoleYao, null, function (data) {
                    self.contents.height = data.length / 2 * 80 + 80;
                    for (var i = 0; i < data.length; i++) {
                        var node = cc.instantiate(prefab);
                        var imgName = data[i].yaoid;
                        var path = void 0;
                        if (imgName <= 10) {
                            path = "qx/";
                        } else {
                            path = "jl/";
                        }

                        var jnJs = node.getComponent("yao");
                        var sprite = node.getComponent('cc.Sprite');
                        sprite.spriteFrame = new cc.SpriteFrame(cc.url.raw("resources/yao/" + path + imgName + ".png"));
                        //cc.log(sprite.spriteFrame)
                        jnJs.setNum(data[i].sum);
                        node.on('click', self.clickEvent, self);
                        node.id = data[i];
                        self.contents.addChild(node);
                    }
                });
            }
        });
    },
    clickEvent: function clickEvent(event) {
        var node = event.target;
        var jn = node.id;
        cc.log('使用药品名称:' + node.id.skillname);
        cc.find("Canvas/wupin").active = false;
        var data = null;
        //道具的使用，后期需要增加，经军令
        pk.selectStatus = 2000;
        data = pk.clickArrayRight[0];
        onloadJnZhiling(false);
        console.log("选择指令完成");
        //模拟点击第一个人物按钮效果
        clickRoleTool(data, node.id.yaoname);
    }
});

cc._RFpop();
},{}],"playerItem":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'eed673P22ZHNZnGpGbrK4+W', 'playerItem');
// js\pk\playerItem.js

'use strict';

var self;
var playStatus = 0;
var msg = pk.msg;
var msgJson;
var TweenLite = require('TweenLite');
/**
 * PK动画播放有限状态机
 */
module.exports = function getpkStateMachine() {

    this.pkStateMachine = new StateMachine({
        data: {
            battle: null
        },
        transitions: [{ name: 'toStart', from: 'none', to: 'start' }, { name: 'toShifa', from: 'start', to: 'shifa' }, { name: 'toMoveBackGround', from: 'shifa', to: 'backgorund' }, { name: 'toSkill', from: 'backgorund', to: 'skill' }, { name: 'toKouXue', from: 'skill', to: 'kouxue' }, { name: 'toReturnBackGround', from: 'kouxue', to: 'moveBack' }, { name: 'finshed', from: 'moveBack', to: 'end' }, { name: 'end', from: 'end', to: 'start' }],
        methods: {
            onStart: function onStart() {
                var _this = this;

                msg = pk.msg;
                msgJson = msg[playStatus];
                try {
                    cc.log(msgJson.player1 + "使用了【" + msgJson.attackType.name + "】造成" + msgJson.player2[0] + "：" + msgJson.battleData[msgJson.player2[0]].Qx + "被攻击者剩余：" + msgJson.battleData[msgJson.player2[0]].Qx2);
                } catch (e) {}

                console.log("onStart");
                setTimeout(function () {
                    _this.onToShifa();
                }, 100);
            },
            onToShifa: function onToShifa() {
                if (playStatus >= pk.msg.length) {
                    playStatus = 0;
                    if (pk.pkstatus != "6000" && pk.pkstatus != "") {
                        cc.log("战斗结束");
                        cc.find("Canvas/end").active = true;
                        pk.msg = [];
                        pk.pkstatus = "";
                        //重置
                        pk.initType = "init";
                        pk.player1 = {};
                        pk.player2 = {};
                        return;
                    }
                    if (pk.initType != "init") {
                        //重置
                        pk.initType = "init";

                        var jsonData = pk.tempMsg;
                        //重新加载主界面数据----2018-1-21修复重复加载rightPlay问题
                        onloadPkMsg(jsonData);
                        pk.selectStatus = 2000;
                        pk.timeStatus = 0; //开启倒计时
                        pk.msg = []; //初始化数据
                        playStatus = 0;
                        cc.log(pk);
                        window.pkOnload.init();
                        PkSocketEvents.onloadPlay(-160, -165, 0);
                        PkSocketEvents.onloadPlay(253, 205, 1);
                        onloadJn(true);
                    }
                } else {
                    cc.find("Canvas/name/attackType").getComponent(cc.Label).string = msgJson.attackType.name;
                    console.log("施法。。。" + msgJson.player1);
                    var body = cc.find("Canvas/background/" + msgJson.player1 + "/play/role/body");
                    var shifAnim = body.getChildByName("shifa").getComponent(cc.Animation);

                    //关闭血条显示
                    playbloodClose(0);
                    //关闭所有人物buff显示
                    buffClose();

                    //对自身队友释放技能，场景不移动
                    var _self = this;
                    setTimeout(function () {
                        playAnim(shifAnim, function () {
                            _self.onToMoveBackGround();
                        });
                    }, 100);
                }
            },
            onToMoveBackGround: function onToMoveBackGround() {
                var _this2 = this;

                console.log("背景移动开始");
                var jnName = msgJson.attackType.type;
                if (jnName == "jnzhanpugong" || jnName == "usryao" || jnName == "jlbz") {
                    setTimeout(function () {
                        _this2.onToSkill();
                    }, 100);
                } else {
                    setTimeout(function () {
                        var background = cc.find("Canvas/background");

                        var x = msgJson.attackType.rolePosition == 'left' ? -200 : 200;
                        if (msgJson.attackType.rolePosition == "self") {
                            x = -200;
                        }
                        var self = _this2;
                        moveTo(background, x, 137, function () {
                            self.onToSkill();
                        });
                    }, 100);
                }
            },
            onToSkill: function onToSkill() {
                var _this3 = this;

                var background = cc.find("Canvas/jn");
                var jnAnim = null;
                //停止站立
                standAnim(msgJson.player2, false);
                var jnName = msgJson.attackType.type;
                var key = false;

                switch (jnName) {
                    case "jnzhanpugong":
                        {
                            var playGongId = msgJson.player1;
                            var playShouId = msgJson.player2[0];
                            var playGong = cc.find("Canvas/background/" + playGongId);
                            var playShou = cc.find("Canvas/background/" + playShouId);
                            var playGongX = playGong.x;
                            var playGongY = playGong.y;
                            var _self2 = this;
                            moveTo(playGong, playShou.x, playShou.y, function () {
                                _self2.onToKouXue();
                                moveTo(playGong, playGongX, playGongY, function () {
                                    setTimeout(function () {
                                        _self2.onFinshed();
                                    }, 1000);
                                });
                            });

                            break;
                        }
                    case "wugujidu":
                        {

                            cc.find("Canvas/background").color = new cc.Color(255, 255, 255);
                            jnAnim = background.getComponent(cc.Animation);
                            key = true;
                            break;
                        }
                    case "jlbz":
                        {
                            var _self3 = this;
                            _self3.onFinshed();

                            key = false;
                            break;
                        }
                    case "wei":
                    case "luan":
                    case "feng":
                    case "usryao":
                    case "qichong":
                        {
                            var playShouId;
                            var num;

                            var _ret = function () {
                                playShouId = msgJson.player2;
                                num = 0;

                                var self = _this3;

                                var _loop = function _loop(i) {
                                    setTimeout(function () {
                                        var jnDan = cc.find("Canvas/background/" + playShouId[i] + "/jnDan");
                                        cc.log("Canvas/background/" + playShouId[i] + "/jnDan");
                                        jnAnim = jnDan.getComponent(cc.Animation);

                                        playAnimArr(jnAnim, jnName, function () {
                                            msg = pk.msg;
                                            num++;
                                            if (num == playShouId.length - 1) {
                                                self.onToReturnBackGround();
                                            }
                                            self.onToReturnBackGround();
                                            console.log(jnName + "技能释放完毕");
                                        });
                                        self.onToKouXue(jnName);
                                    }, 100);
                                };

                                for (var i = 0; i < playShouId.length; i++) {
                                    _loop(i);
                                }
                                // setTimeout(() => {
                                //    pkStateMachine.onToReturnBackGround();
                                // }, 100 * (playShouId.length+1));
                                key = false;
                                return 'break';
                            }();

                            if (_ret === 'break') break;
                        }

                    case "lei":
                    case "lipi":
                    case "sheming":
                        {
                            cc.find("Canvas/background").color = new cc.Color(0, 0, 0);
                            var playShouId = msgJson.player2[0];
                            var jnDan = cc.find("Canvas/background/" + playShouId + "/jnDan");
                            jnAnim = jnDan.getComponent(cc.Animation);
                            key = true;
                            break;
                        }

                    default:
                        {
                            cc.find("Canvas/background").color = new cc.Color(0, 0, 0);
                            jnAnim = background.getComponent(cc.Animation);
                            key = true;
                            break;
                        }
                }
                if (key) {
                    var _self4 = this;
                    setTimeout(function () {
                        playAnimArr(jnAnim, jnName, function () {
                            // pkStateMachine.onToKouXue();
                            console.log("技能释放完毕");
                            _self4.onToReturnBackGround();
                        });
                        _self4.onToKouXue();
                    }, 100);
                }
            },
            onToKouXue: function onToKouXue(jnName) {
                //被攻击着
                var play = msgJson.player2;
                var battleData = msgJson.battleData;
                var attackType = msgJson.attackType;

                var _loop2 = function _loop2(i) {
                    // var re = kouxue(pk.player1, play[i], battleData[play[i]],attackType);
                    // if (re) {
                    //     kouxue(pk.player2, play[i], battleData[play[i]],attackType);
                    // }
                    setTimeout(function () {
                        var qx = battleData[play[i]].Qx;
                        //播放扣血，或者种了BUFF动画，buff动画根据技能名称选择
                        var shouji = cc.find("Canvas/background/" + play[i]).getComponent(cc.Animation);
                        var kouxue = cc.find("Canvas/background/" + play[i] + "/play/kouxue");
                        kouxue.getComponent(cc.Label).string = qx;
                        var dead = cc.find("Canvas/background/" + play[i] + "/dead");
                        //  let kouxue = cc.find("Canvas/background/" + play[i] + "/play/kouxue");
                        if (jnName == "usryao") {
                            cc.find("Canvas/background/" + play[i] + "/play").active = true;
                            //  kouxue.color = new cc.Color("#16F10D");
                            dead.active = false;
                        } else {
                            //  kouxue.color = new cc.Color("#000000");
                        }
                        if (qx == 0) {
                            kouxue.getComponent(cc.Label).string = "";
                            var wz = cc.find("Canvas/background/" + play[i] + "/play/wz").getComponent(cc.Animation);;
                            playAnim(wz);
                        }
                        playAnim(shouji, function () {

                            var qx2 = battleData[play[i]].Qx2;
                            cc.find("Canvas/background/" + play[i] + "/play/kouxue").getComponent(cc.Label).string = "";
                            if (qx2 == 0) {
                                //播放死亡动画
                                dead.scaleX = -1;
                                cc.find("Canvas/background/" + play[i] + "/play").active = false;
                                var deadAnim = dead.getComponent(cc.Animation);
                                playAnim(deadAnim, null);
                            }
                        });
                    }, 200);
                };

                for (var i = 0; i < play.length; i++) {
                    _loop2(i);
                }
            },
            onToReturnBackGround: function onToReturnBackGround() {
                console.log("onMoveBack----");
                var background = cc.find("Canvas/background");
                background.color = new cc.Color(240, 240, 240);
                var self = this;
                setTimeout(function () {
                    moveTo(background, -20, 137, function () {
                        self.onFinshed();
                    });
                }, 100);
            },
            onFinshed: function onFinshed() {
                console.log("onFinshed----");
                cc.find("Canvas/name/attackType").getComponent(cc.Label).string = "";
                this.onEnd();
            },
            onEnd: function onEnd() {
                playStatus++;
                this.onStart();
                console.log("end----");
            }
        }
    });
    //return pkStateMachine;
};

function kouxue(arr, id, battleData, attackType) {
    var qx = battleData.Qx;
    var re = true;
    cc.log(id);
    for (var m = 0; m < arr.length; m++) {
        cc.log("------------------------");
        cc.log(arr[m].id);
        if (arr[m].id == id) {
            try {
                qx = parseInt(qx);
                arr[m].qixue = battleData.Qx2;
                re = false;
                cc.log(arr);
                var buffType = battleData.buff;
                if (buffType != null && typeof buffType != 'undefined') {
                    arr[m]['battleData'] = battleData;
                }
            } catch (e) {
                cc.log("buff加载异常:" + e);
            }
        }
    }
    cc.log(pk);
    return re;
}
function playAnim(anim, callback) {
    anim.play();
    if (callback) {
        anim.on('finished', callback);
    }
}
function playAnimArr(anim, name, callback) {
    anim.play(name);
    if (callback) {
        anim.on('finished', callback);
    }
}
function moveTo(position, x, y, callback) {

    TweenLite.to(position, 0.5, {
        x: x,
        y: y,
        ease: Power2.easeOut,
        onComplete: callback
    });
}
/**
 * 玩家血条显示开关
 */
function playbloodClose(num) {
    var left = pk.leftPlay;
    var right = pk.rightPlay;
    for (var i = 0; i < left.length; i++) {
        cc.find("Canvas/background/" + left[i] + "/play/status").opacity = num;
    }
    for (var _i = 0; _i < right.length; _i++) {
        cc.find("Canvas/background/" + right[_i] + "/play/status").opacity = num;
    }
}
/**
 * 关闭玩家buff
 */
function buffClose() {
    var background = cc.find("Canvas/background");
    var children = background.children;
    for (var i = 0; i < children.length; ++i) {
        try {
            var buff = children[i].getChildByName("buff");
            buff.removeAllChildren();
        } catch (e) {
            cc.log(e);
        }
    }
}
/**
 * 站立动画控制开关
 */
function standAnim(arr, key) {

    for (var i = 0; i < arr.length; i++) {
        var role = cc.find("Canvas/background/" + arr[i] + "/play/role");
        if (key) {
            role.getComponent(cc.Animation).play();
        } else {
            role.getComponent(cc.Animation).stop();
        }
    }
}
var playJs = cc.Class({
    extends: cc.Component,

    properties: {
        head: cc.Sprite,
        body: cc.Sprite,
        foot: cc.Sprite,
        attack: cc.Node,
        button: cc.Button,
        roleDeath: cc.Node,
        label: cc.Node
    },
    death: function death() {
        this.roleDeath.active = true;
    },
    shifa: function shifa() {
        var playJs = require("playerItem");
        var py = new playJs();
        var stateMachine = py.pkStateMachine;
        stateMachine.toStart();
    },
    // use this for initialization
    onLoad: function onLoad() {
        self = this;

        // var flipYAction = cc.flipX(true);
        // var actionBy = cc.moveTo(0.5, cc.p(130,698));
        //    this.node.runAction(flipYAction);

        //  this.node.runAction(actionBy);

        //    var y= this.node.getPositionY();
        //       var x= this.node.getPositionX();
        //       var height=y+10;
        //     var seq = cc.repeatForever(cc.moveTo(x, cc.p(0,y+10)).easing(cc.easeCubicActionOut(1)));
        //     if(height==this.node.getPositionY())
        //       var seq = cc.repeatForever(cc.moveTo(x, cc.p(0,y-10)).easing(cc.easeCubicActionOut(1)));
        //     this.body.node.runAction(seq);

        //         cc.log("---height:"+this.node.getPositionY())

    },
    attackHide: function attackHide() {
        this.attack.active = false;
    },

    attackShow: function attackShow() {
        this.attack.active = true;
    },
    /**
     * 遍历数组返回角色信息----
     */
    getRoleMsg: function getRoleMsg(id) {
        try {
            var p = pk.play1;
            for (var i in p) {
                if (id == p[i].id) {
                    return p[i];
                }
            }
        } catch (e) {}
    },
    playerClickEvent: function playerClickEvent(event) {
        cc.log('人物点击时间触发');
        var parent;
        var msg;
        var left;
        try {
            if (pk.clickStatus) {
                var node = event.target;

                if (typeof node == 'undefined') {
                    cc.log('------------------');
                    parent = event;
                } else {
                    parent = node.parent;
                    cc.log('-------+++++-----------');
                }

                var roleDetail = cc.find("Canvas/roleDetail");
                var roleDetailJs = roleDetail.getComponent("roledetail");
                msg = getPkRoleMsg(parent.name, 1);
                left = pk.leftPlay;
                if (typeof msg == 'undefined') {
                    msg = getPkRoleMsg(parent.name, 2);
                    left = pk.rightPlay;
                }

                roleDetailJs.setAttackName(pk.jn);
                roleDetailJs.setType(msg.name);
                roleDetailJs.setXue("血:" + msg.qixue);
                roleDetailJs.setJing("精:" + msg.jingli);
                roleDetailJs.setsu("速度第八");
                cc.log(pk.status);
                if (pk.status == parent.name) {
                    cc.log("攻击指令完成:" + pk.rightPlay[0] + "使用【" + pk.jn + "】攻击了" + parent.name);
                    //指令数组
                    pk.attacked.push({ 'attack': pk.rightPlay[0], 'attacked': parent.name, 'attackType': pk.jn });

                    pk.rightPlay.shift();
                    if (pk.rightPlay.length == 0) {
                        //右方攻击指令全部完成
                        cc.log("发送攻击指令给服务器:" + pk.attacked.length);
                    }
                    this.back();
                    parent.getComponent("playerItem").attackHide();
                    pk.clickStatus = false;
                    pk.status = null;
                    pk.jn = '普通攻击';
                } else {
                    pk.status = parent.name;
                    parent.getComponent("playerItem").attackShow();
                    var sccen = cc.director.getScene();
                    for (var i in left) {
                        if (left[i] != parent.name) {
                            var child = sccen.getChildByName(left[i]);
                            child.getComponent("playerItem").attackHide();
                        }
                    }
                }
            }
        } catch (e) {

            cc.log(e);
        }
    },

    back: function back() {
        var right = pk.rightPlay;
        if (typeof right[0] == 'undefined' || right[0] == null || right[0] == '') {
            cc.find("Canvas/zhiling").active = false;
            cc.find("Canvas/roleDetail").active = false;
        } else {
            cc.find("Canvas/zhiling").active = true;
            cc.find("Canvas/roleDetail").active = false;
            for (var m in right) {
                var child = cc.director.getScene().getChildByName(right[m]);
                if (m == 0) {
                    child.getComponent("playerItem").attackShow();
                } else {
                    child.getComponent("playerItem").attackHide();
                }
            }
        }
    }

});

cc._RFpop();
},{"TweenLite":"TweenLite","playerItem":"playerItem"}],"return":[function(require,module,exports){
"use strict";
cc._RFpush(module, '4d49eTbdUpKKLy/4Nyzq+qH', 'return');
// js\util\return.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    // use this for initialization
    onLoad: function onLoad() {},
    backEvent: function backEvent() {
        //调用通用的返回上一场景方法
        var scene = cc.director.getScene().name;
        returnLastScene(scene);
    },
    backUserList: function backUserList() {
        cc.director.loadScene('userList');
    }
});

cc._RFpop();
},{}],"rolePrefabs":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'c43d9WONCpCyr0iMFbK5BXB', 'rolePrefabs');
// js\index\move\rolePrefabs.js

'use strict';

var self;
cc.Class({
    extends: cc.Component,

    properties: {
        roleName: cc.Label,
        battle: cc.Sprite,
        battleList: {
            default: [],
            type: cc.SpriteFrame
        },
        img: cc.Sprite
    },
    onLoad: function onLoad() {
        self = this;
    },

    init: function init(msg) {
        this.roleName.string = msg.roleName;
        this.battle.spriteFrame = this.battleList[msg.num];
        this.id = msg;

        this.battle.node.on(cc.Node.EventType.TOUCH_START, this.alert, this);
    },
    alert: function alert(event) {
        if (this.id.num == 0) {
            pk.yeguai = this.id;
            loadingScene(HxsgScenes.pkWait, HxsgScenes.index);
        } else {
            if (this.id.roleName == '内测使者') {
                showAlert('你想领取每天的藏宝图大礼包吗？', this.succes);
                userWuPin.objets = this.id.roleName;
            } else {
                showAlert('可以找内测使者领取礼包哦');
            }
        }
    },
    succes: function succes() {
        ajaxData(HxsgUrl.giftPackage, { 'name': userWuPin.objets }, self.succesAlert);
    },
    succesAlert: function succesAlert(msg) {
        showAlert(msg.msg);
    }
});

cc._RFpop();
},{}],"roledetail":[function(require,module,exports){
"use strict";
cc._RFpush(module, '511b6rlidpDZ7W4+APl6KuL', 'roledetail');
// js\pk\roledetail.js

"use strict";

cc.Class({
    extends: cc.Component,
    properties: {
        attackName: cc.Label,
        type: cc.Label,
        xue: cc.Label,
        jing: cc.Label,
        su: cc.Label

    },

    // use this for initialization
    onLoad: function onLoad() {},
    setAttackName: function setAttackName(name) {
        this.attackName.string = name;
    },
    setType: function setType(name) {
        this.type.string = name;
    },
    setXue: function setXue(name) {
        this.xue.string = name;
    },
    setJing: function setJing(name) {
        this.jing.string = name;
    },
    setsu: function setsu(name) {
        this.su.string = name;
    },
    return: function _return() {
        var roleDetail = cc.find("Canvas/roleDetail");
        roleDetail.active = false;
        var zhiLing = cc.find("Canvas/zhiling");
        zhiLing.active = true;
        onloadJnZhiling(true);
        selectEnemy(null, pk.clickArrayLeft);
        pk.sureClick = "";
        if (pk.pkyaostatus != "0") {
            pk.pkyaostatus = "0";
            selectEnemy(pk.clickArrayRight[0], pk.rightPlay);
        }
    }

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"role":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'b054bXVlohHCrg1+T5Kr7vC', 'role');
// js\pk\role.js

"use strict";

var self;
var status;
cc.Class({
    extends: cc.Component,

    properties: {
        xue: cc.ProgressBar,
        jing: cc.ProgressBar,
        dead: cc.Node,
        play: cc.Node

    },

    // use this for initialization
    onLoad: function onLoad() {
        self = this;
    },
    clickRole: function clickRole(event, num) {
        var node = event.target;
        var name = node.parent.name;
        var p = node.parent;
        var role = p.getComponent("role");
        var progress = role.xue.getComponent(cc.ProgressBar).progress;
        //选择队友
        if (pk.pkyaostatus == "1") {
            //主角不管是否死亡都可以选择
            if (name == pk.rightOne) {
                clickRoleTool(name, pk.jnName);
            } else {
                //副将死亡不可以选择，并且只能选择右边副将
                for (var i = 0; i < pk.rightPlay.length; i++) {
                    if (name == pk.rightPlay[i] && progress > 0) {
                        clickRoleTool(name, pk.jnName);
                    } else {
                        cc.log("当前状态不符合，禁止点击操作");
                    }
                }
            }
        } else {
            //选择敌人
            if (num == pk.selectStatus && progress > 0) {
                clickRoleTool(name, pk.jnName);
                //已死副将不能点击
            } else {
                cc.log("当前状态不符合，禁止点击操作");
            }
        }
    },
    setXueAndJing: function setXueAndJing(xue, jing) {
        this.xue.getComponent(cc.ProgressBar).progress = xue;
        this.jing.getComponent(cc.ProgressBar).progress = jing;
    },
    setDead: function setDead() {
        this.dead.active = true;
        this.dead.opacity = 255;

        this.play.active = false;
        //死亡停止buff动画播放
        var buff = self.node.getChildByName("buff");
        buff.removeAllChildren();
    }

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"saiziButton":[function(require,module,exports){
"use strict";
cc._RFpush(module, '676f410vCxCZLzWqsZf42uc', 'saiziButton');
// js\gamble\saiziButton.js

'use strict';

var _times = 3000;
var self;
cc.Class({
    extends: cc.Component,

    properties: {
        type: 3,
        gold: true,
        issend: 0,
        msg: cc.RichText
    },
    sure: function sure() {
        loadingScene(HxsgScenes.guangChang, HxsgScenes.index);
    },
    times: function times(msg) {
        _times = msg.times;
        self.schedule(self.scheduleTime, 1);
    },
    scheduleTime: function scheduleTime() {
        DuChangVo.num = _times;

        if (_times == '0' || typeof _times == 'undefined') {
            self.unschedule(self.scheduleTime);
            self.init();
            var jiesuan = cc.find("Canvas/jiesuan");
            jiesuan.active = true;
            jiesuan.getComponent("jiesuan").setMsg("猜猜猜结算中，请稍后再来");
            //showAlert("赌场结算中，请稍后再来", self.sure, self.sure);
        }
        var minutes = Math.floor(_times / 1000 / 60 % 60); //所余分钟数  
        var second = Math.floor(_times / 1000 % 60); //所余秒数  
        //1分58秒后开盅，买定离手
        var target = cc.find("Canvas/saizi/main/label2");
        var mstr = minutes.toString() + "分" + second.toString() + "秒后开蛊";
        target.getComponent("cc.Label").string = mstr;

        _times = _times - 1000;
    },
    initMsg: function initMsg(msg) {
        var loadJson = msg.msg;
        cc.log('initMsg:-------');

        var baozijin = loadJson.baoZiJin;
        var baoziyin = loadJson.baoZiYin;

        var dajin = loadJson.daJin;
        var dayin = loadJson.daYin;

        var danjin = loadJson.danJin;
        var danyin = loadJson.danYin;

        var xiaojin = loadJson.xiaoJin;
        var xiaoyin = loadJson.xiaoYin;

        var shuangjin = loadJson.shuangJin;
        var shuangyin = loadJson.shuangYin;

        var lastId = loadJson.yldaxiao.id;
        var lastNum1 = loadJson.yldaxiao.num1;
        var lastNum2 = loadJson.yldaxiao.num2;
        var lastNum3 = loadJson.yldaxiao.num3;
        var lastResult = loadJson.yldaxiao.result;
        var lastStatus = loadJson.yldaxiao.status;

        var sumJin = loadJson.totalSumJin;
        var sumYin = loadJson.totalSumYin;
        var curstr;
        var curtarget;
        try {
            curstr = "上期" + lastId.toString() + "开" + lastNum1.toString() + " " + lastNum2.toString() + " " + lastNum3.toString() + " " + lastResult;
            curtarget = cc.find("Canvas/saizi/main/label1");
            curtarget.getComponent("cc.Label").string = curstr;
        } catch (e) {}
        try {
            curstr = "目前买小" + xiaojin.toString() + "金" + xiaoyin.toString() + "银";
            curtarget = cc.find("Canvas/saizi/main/label3");
            curtarget.getComponent("cc.Label").string = curstr;
        } catch (e) {}
        try {
            curstr = "目前买大" + dajin.toString() + "金" + dayin.toString() + "银";
            curtarget = cc.find("Canvas/saizi/main/label4");
            curtarget.getComponent("cc.Label").string = curstr;
        } catch (e) {}
        try {
            curstr = "目前买单" + danjin.toString() + "金" + danyin.toString() + "银";
            curtarget = cc.find("Canvas/saizi/main/label5");
            curtarget.getComponent("cc.Label").string = curstr;
        } catch (e) {}
        try {
            curstr = "目前买双" + shuangjin.toString() + "金" + shuangyin.toString() + "银";
            curtarget = cc.find("Canvas/saizi/main/label6");
            curtarget.getComponent("cc.Label").string = curstr;
        } catch (e) {}
        try {
            curstr = "目前买豹子" + baozijin.toString() + "金" + baoziyin.toString() + "银";
            curtarget = cc.find("Canvas/saizi/main/label7");
            curtarget.getComponent("cc.Label").string = curstr;
        } catch (e) {}
        try {
            curstr = '<on click="handler">' + sumJin.toString() + '金' + sumYin.toString() + '银</on>';
            curtarget = cc.find("Canvas/saizi/msg");
            //   cc.log(curtarget)
            //   this.msg.string=curstr;
            curtarget.getComponent("cc.RichText").string = curstr;
        } catch (e) {}
    },
    init: function init() {
        cc.log('init----------');
        ajaxData(HxsgUrl.queryCasinoMsg, null, self.initMsg);
    },
    // use this for initialization
    onLoad: function onLoad() {
        self = this;
        //alert(globalInfo.url());
        if (DuChangVo.num === '1000') {
            cc.find("Canvas/jiesuan").active = true;
        } else {
            cc.find("Canvas/jiesuan").active = false;
        }
        this.canceldialog(null);
        SocketEvents.dzMsg = function () {
            self.init();
            ajaxData(HxsgUrl.appsxtime, null, self.times);
            // 这里的 this 指向 component
        };
        this.init();
        ajaxData(HxsgUrl.appsxtime, null, this.times);
    },
    buttonChangeNormal: function buttonChangeNormal(node) {
        node.color = new cc.Color(236, 13, 13);
    },
    handler: function handler(data) {
        cc.log('赢家');
        loadingScene(HxsgScenes.yingJia, HxsgScenes.saizi);
    },
    buttonChangeLight: function buttonChangeLight(node) {
        node.color = new cc.Color(236, 86, 0);
    },
    displaydialog: function displaydialog() {
        cc.find("Canvas/saizi/dialog/dialog/msg").active = false;
        cc.find("Canvas/saizi/dialog/dialog/count").active = true;
        cc.find("Canvas/saizi/dialog/dialog/top").active = true;
        cc.find("Canvas/saizi/dialog/dialog/right").active = true;
        var topString = "您选择的是 ";
        switch (this.type) {
            case 1:
                topString += "大";break;
            case 2:
                topString += "小";break;
            case 3:
                topString += "豹子";break;
            case 4:
                topString += "单";break;
            case 5:
                topString += "双";break;
        }
        var rightString = "";
        if (this.gold === true) rightString += "金";else rightString += "银";
        var dialog = cc.find("Canvas/saizi/dialog");
        var top = cc.find("Canvas/saizi/dialog/dialog/top");
        var right = cc.find("Canvas/saizi/dialog/dialog/right");
        top.getComponent("cc.Label").string = topString;
        right.getComponent("cc.Label").string = rightString;
        dialog.active = true;
    },
    goldtype: function goldtype(event) {
        var node = event.target;
        var typenode = node.parent;

        switch (typenode.name) {
            case "da":
                this.type = 1;break;
            case "xiao":
                this.type = 2;break;
            case "baozi":
                this.type = 3;break;
            case "dan":
                this.type = 4;break;
            case "shuang":
                this.type = 5;break;
        }
        if (node.name == "ying") this.gold = false;else this.gold = true;
        this.displaydialog();
    },

    okdialog: function okdialog(event) {
        var msgnode = cc.find("Canvas/saizi/dialog/dialog/msg");
        if (this.issend == 0) {
            msgnode.active = true;
            cc.find("Canvas/saizi/dialog/dialog/count").active = false;
            cc.find("Canvas/saizi/dialog/dialog/top").active = false;
            cc.find("Canvas/saizi/dialog/dialog/right").active = false;
            var count = parseInt(cc.find("Canvas/saizi/dialog/dialog/count").getComponent("cc.EditBox").string);
            if (count <= 0 || isNaN(count)) {
                msgnode.getComponent("cc.Label").string = "请输入正确的金额";
                this.issend = -1;
            } else {
                //msgnode.getComponent("cc.Label").string=count.toString();
                var result = "";

                switch (this.type) {
                    case 1:
                        result = "大";break;
                    case 2:
                        result = "小";break;
                    case 3:
                        result = "豹子";break;
                    case 4:
                        result = "单";break;
                    case 5:
                        result = "双";break;
                }
                var sdata;
                if (this.gold) {
                    sdata = {
                        'jin': count,
                        'result': result
                    };
                } else {
                    sdata = {
                        'yin': count,
                        'result': result
                    };
                }
                ajaxData(HxsgUrl.roleStakeResult, sdata, function (msg) {
                    msgnode.getComponent("cc.Label").string = msg.msg; //返回消息
                });
                this.issend = 1;
            }
        } else if (this.issend == 1) {
            msgnode.getComponent("cc.Label").string = "正在连接";
            this.canceldialog(event);
        } else {
            msgnode.getComponent("cc.Label").string = "正在连接";
            this.displaydialog();
            this.issend = 0;
        }
    },
    canceldialog: function canceldialog(event) {
        cc.find("Canvas/saizi/dialog").active = false;
        this.issend = 0;
    },
    bottomMenu: function bottomMenu(event) {
        var node = event.target;
        switch (node.name) {
            case "touzhujilu":
                loadingScene(HxsgScenes.touzhujilu, HxsgScenes.saizi);
                break;
            case "zhuanqianpaihang":
                loadingScene(HxsgScenes.zhuanqianpaihang, HxsgScenes.saizi);
                break;
            case "lishichaxun":
                loadingScene(HxsgScenes.lishichaxun, HxsgScenes.saizi);
                break;

        }
    },
    /**
    * 点击事件-->返回
    */
    backEvent: function backEvent() {
        //调用通用的返回上一场景方法
        returnLast();
    }

});

cc._RFpop();
},{}],"selectedRole":[function(require,module,exports){
"use strict";
cc._RFpush(module, '7ffb4BUeexECbBBLEnXKxM/', 'selectedRole');
// js\login\selectedRole.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        msg: cc.Label,
        id: cc.Label,
        zhiye: cc.Label,
        img: cc.Sprite
    },

    // use this for initialization
    onLoad: function onLoad() {}

});

cc._RFpop();
},{}],"shiChangIndex":[function(require,module,exports){
"use strict";
cc._RFpush(module, '5b466w20gFHGIhxNEfSFhmb', 'shiChangIndex');
// js\shichang\shiChangIndex.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    // use this for initialization
    onLoad: function onLoad() {
        loadCommomScence();
    },
    zhp: function zhp() {
        showAlert("暂未开放");
    },
    tjp: function tjp() {
        showAlert("暂未开放");
    },
    wqd: function wqd() {
        loadingScene(HxsgScenes.wuqi, HxsgScenes.index);
    },
    tzsc: function tzsc() {
        showAlert("暂未开放");
    },
    dp: function dp() {
        showAlert("暂未开放");
    }

});

cc._RFpop();
},{}],"siliao":[function(require,module,exports){
"use strict";
cc._RFpush(module, '34e88+7MAdKZ7n6tfEM/HRe', 'siliao');
// js\friends\siliao.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        id: cc.Label,
        friendName: cc.Label
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    // use this for initialization
    onLoad: function onLoad() {}

});

cc._RFpop();
},{}],"systemMsg":[function(require,module,exports){
"use strict";
cc._RFpush(module, '5fe1fVWPB9EB6Aywn2zFU9U', 'systemMsg');
// js\common\systemMsg.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },
    msg: null,
    // use this for initialization
    onLoad: function onLoad() {},
    showAlert: function (_showAlert) {
        function showAlert(_x) {
            return _showAlert.apply(this, arguments);
        }

        showAlert.toString = function () {
            return _showAlert.toString();
        };

        return showAlert;
    }(function (event) {
        var e = event.target;
        showAlert(this['msg']);
        e.destroy();
    }),
    init: function init(msg) {
        this['msg'] = msg;
    }
    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"systemNotice":[function(require,module,exports){
"use strict";
cc._RFpush(module, '36b11q1YyhBmYhxB/gJbu/h', 'systemNotice');
// js\system\systemNotice.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        msg: cc.RichText,
        buttonMsg: cc.Button
    },

    // use this for initialization
    onLoad: function onLoad() {},

    setMsg: function setMsg(msgStr) {
        this.msg.string = msgStr;
    }

});

cc._RFpop();
},{}],"system":[function(require,module,exports){
"use strict";
cc._RFpush(module, '9be47WfeoxFuYzkbjEKxcYl', 'system');
// js\system\system.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        itemPrefab: cc.Prefab,
        content: cc.Node,
        leftContent: cc.Node

    },

    // use this for initialization
    onLoad: function onLoad() {
        var self = this;
        ajax({
            type: 'GET',
            url: "" + localhost + "cocos2dNotis/querySystemNotis",
            dataType: 'jsonp',

            jsonp: "jsonpCallback", //服务端用于接收callback调用的function名的参数
            success: function success(msg) {
                var p = msg.msg;
                //alert(p);
                for (var i = 0; i < p.length; i++) {
                    //s += " <p class=\"yaoping\" style='color:#FFF3AE'>第" + p[i].id + "期，开出" + p[i].num1 + "," + p[i].num2 + "," + p[i].num3 + "&nbsp;&nbsp;" + p[i].result + "</p>";
                    var item = cc.instantiate(self.itemPrefab);
                    self.leftContent.addChild(item);
                    item.x = 0;
                    item.y = -1 * i * item.height;
                    item.name = 'history' + i;
                    self.content.height = (i + 1) * item.height;

                    item = item.getComponent('systemNotice');
                    var labelStr = "<color=#ff0000>新 </c><color=#ffffff>" + p[i].custom1 + "</color>";
                    cc.log(labelStr);
                    item.setMsg(labelStr);
                }
            }
        });
    }
});

cc._RFpop();
},{}],"talking":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'de7b26ZuGpEX48zr34fUcBM', 'talking');
// js\friends\talking.js

'use strict';

window.curItemData = null;
window.currentWupin = 0;
var self;
cc.Class({
    extends: cc.Component,

    properties: {
        chatMsg: cc.Prefab,
        content: cc.Node,
        title: cc.RichText,
        msg: cc.EditBox
    },

    // use this for initialization
    onLoad: function onLoad() {

        self = this;
        for (var i = 0; i < 20; i++) {
            var item = cc.instantiate(self.chatMsg);
            self.content.addChild(item);
        }
        cc.view.setDesignResolutionSize(720, 1080, 2);
        SocketEvents.updataFriendsMsg = this.initFriendsMsg;
        //cc.log(myFriends)
        ajaxData(HxsgUrl.chatRecord, myFriends, this.initChatMsg);
    },
    /**
        * 点击事件-->快速恢复
        */
    sendMsg: function sendMsg() {

        var msessage = this.msg.getComponent(cc.EditBox).string;
        myFriends.message = msessage;
        ajaxData(HxsgUrl.sendMsgForFriends, myFriends, this.initSendMsg);

        //cc.log(msessage);
    },
    initSendMsg: function initSendMsg(data) {

        var msg = data.msg;
        //cc.log(msg)
        var itemMsg = msg;
        if (itemMsg === '' || typeof itemMsg === 'undefined') {
            cc.log("返回null");
        } else {
            var item = cc.instantiate(self.chatMsg);

            // frist.zIndex=0;

            //self.content.children[0].zIndex=0;

            //  var li=self.content.children;

            self.content.addChild(item);
            //  for(var i=0;i<li.length;i++){
            //       cc.log('index'+i+':'+li[i].zIndex)
            //  }
            cc.log(self.content);
            var comp = item.getComponent('chatMsgItem');
            comp.initChatMsgItem(self.content.height, 'friends', itemMsg);
            self.content.height += 50;
        }

        //cc.log(item)
    },
    initFriendsMsg: function initFriendsMsg(data) {
        var itemMsg = data;
        // cc.log(itemMsg)
        var item = cc.instantiate(self.chatMsg);
        self.content.addChild(item);
        // cc.log( self.content)
        var comp = item.getComponent('chatMsgItem');
        comp.initChatMsgItem(self.content.height, 'friends', itemMsg);
        self.content.height += 50;
        // cc.log(item)
    },

    /**
     * 点击事件-->返回
     */
    backEvent: function backEvent() {
        //调用通用的返回上一场景方法
        returnLastScene();
    },

    initChatMsg: function initChatMsg(data) {
        //self.content.removeAllChildren();
        var msg = data.msg;
        var len = msg.length - 1;
        // cc.log(msg)
        var items = self.content.children;
        for (var i = 19; i >= 0; i--) {
            var item = items[i];
            var comp = item.getComponent('chatMsgItem');
            var itemMsg = msg[len];
            len--;
            comp.initChatMsgItem(i, 'friends', itemMsg);
        }
        self.title.string = '<color=#00ff00>与【' + myFriends.friendname + '】聊天</c>';
        self.content.height = msg.length * 50;
    },

    zawuItemEvent: function zawuItemEvent(data) {
        //TODO:
    },

    clearScrollview: function clearScrollview() {
        this.content.removeAllChildren();
    }

});

cc._RFpop();
},{}],"test222":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'f85b1aj7/hFfIstvjZu168L', 'test222');
// js\yao\test222.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    // use this for initialization
    onLoad: function onLoad() {

        cc.game.addPersistRootNode(this.node);
    }

});

cc._RFpop();
},{}],"test":[function(require,module,exports){
"use strict";
cc._RFpush(module, '0224fkxnRtENLw8C7WDYgQg', 'test');
// js\pk\test.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    // use this for initialization
    onLoad: function onLoad() {
        cc.game.addPersistRootNode(this.node);
        // var animation = this.node.getComponent(cc.Animation);
        // // frames 这是一个 SpriteFrame 的数组.
        //  cc.url.raw(self.info.txUrl + 'yishinv3.jpg');
        // var spriteFrameArr=new
        // var clip = cc.AnimationClip.createWithSpriteFrames(frames, 17);
        // clip.name = "anim_run";
        // clip.wrapMode = cc.WrapMode.Loop;

    },
    endEvent: function endEvent() {
        cc.log("技能释放结束s");
    }
    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"tjp":[function(require,module,exports){
"use strict";
cc._RFpush(module, '1884aSqb/JFjq1b3umkYQj/', 'tjp');
// js\shichang\tjp\tjp.js

'use strict';

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    // use this for initialization
    onLoad: function onLoad() {
        loadCommomScence();
    },
    dzzb: function dzzb() {
        cc.director.loadScene('dzzb');
    },
    hsbs: function hsbs() {},
    hcbs: function hcbs() {},
    hcks: function hcks() {},
    gmks: function gmks() {},
    wphs: function wphs() {}

});

cc._RFpop();
},{}],"touzhuitem":[function(require,module,exports){
"use strict";
cc._RFpush(module, '5cf89M7HsZN2bdtWZkdWj+G', 'touzhuitem');
// js\wupin\userJiNengShu\touzhuitem.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        id: cc.Label
    },

    // use this for initialization
    onLoad: function onLoad() {},
    setId: function setId(msg) {
        this.id = msg;
    },
    getId: function getId() {
        return this.id;
    }

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"userJiangJunLing":[function(require,module,exports){
"use strict";
cc._RFpush(module, '3d1fa4ScBVBMKRC1Z7jkUzi', 'userJiangJunLing');
// js\wupin\jiangJingLing\userJiangJunLing.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        msg: cc.RichText
    },

    // use this for initialization
    onLoad: function onLoad() {
        var self = this;
        self.msg.string = "";
        ajaxData(HxsgUrl.userWuPin, { "wupinId": userWuPin.wupinId, "num": 1 }, function (msg) {
            self.msg.string = msg.msg;
        });
    },
    /**
        * 点击事件-->返回
        */
    backEvent: function backEvent() {
        //调用通用的返回上一场景方法
        //调用通用的返回上一场景方法
        loadScene(HxsgScenes.wupin, HxsgScenes.index);
    }
});

cc._RFpop();
},{}],"userList":[function(require,module,exports){
"use strict";
cc._RFpush(module, '0bf82QqE29IcJosOkJfZocA', 'userList');
// js\wupin\userJiNengShu\userList.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        target: {
            default: null,
            type: cc.Prefab
        },
        leftContent: cc.Node,
        content: cc.Node
    },
    backEvent: function backEvent() {
        //调用通用的返回上一场景方法
        loadScene(HxsgScenes.wupin, HxsgScenes.index);
        curItemData = null;
    },

    // use this for initialization
    onLoad: function onLoad() {
        cc.log(userWuPin.objects);
        var obj = userWuPin.objects;
        cc.log(obj);
        var title = cc.find("Canvas/title");
        var userTitle = cc.find("Canvas/book/userTitle");
        var xiaoGuo = cc.find("Canvas/result/xiaoGuo");
        title.getComponent('cc.Label').string = obj.name;
        userTitle.getComponent('cc.Label').string = '使用' + obj.name;
        var urls;
        switch (obj.type1) {
            case '技能':
                xiaoGuo.getComponent('cc.Label').string = '效果:可使玩家或者副将学习技能【' + obj.name + '】';
                urls = HxsgUrl.queryFuJiangJiNengBook;
                break;
            case '技能书':
                xiaoGuo.getComponent('cc.Label').string = '效果:可使玩家或者副将的' + obj.name + '的熟练度增加100';
                urls = HxsgUrl.jiNengShu;
                break;
        }

        var self = this;
        ajaxData(urls, { "id": userWuPin.wupinId }, function (msg) {
            var p = msg.msg;
            if (p.length === 0 || p.length === 'undefined') {
                showAlert('没有可以使用的对象');
                return;
            }
            //alert(p);
            for (var i = 0; i < p.length; i++) {
                var item = cc.instantiate(self.target);
                self.content.addChild(item);
                item.x = 1;
                item.y = -1 * i * item.height;
                item.name = 'userList' + i;
                self.leftContent.height = (i + 1) * item.height + 20;

                var lab = item.getComponent("wuPinList");

                // lab.id.string=p[i].rfid;
                if (i % 2 !== 0) {
                    item.color = new cc.Color(0, 0, 49);
                    console.log(item.color);
                    //lab.Node.Color="WHITE";
                }
                lab.selectBn.name = 'button' + i;
                // var clickEventHandler = new cc.Component.EventHandler();
                // clickEventHandler.target = lab.selectBn.node; //这个 node 节点是你的事件处理代码组件所属的节点
                // clickEventHandler.component ='button0';
                // clickEventHandler.handler = "skillList";
                // clickEventHandler.customEventData =p[i].id;
                //wuPin.jinengList="10311"
                //lab.selectBn.id.string=p[i].rfid
                var bn = lab.selectBn;
                cc.log(p[i].rolename);
                cc.log(p[i].name);
                if (typeof p[i].rolename == 'undefined') {
                    bn.id = p[i].roleId;
                    lab.msg.string = p[i].name;
                    userWuPin.fuId = p[i].roleId;
                    lab.selectBn.node.on('click', self.showUserBook, self);
                }
                if (typeof p[i].name == 'undefined') {
                    bn.id = p[i].rfid;
                    userWuPin.fuId = p[i].rfid;
                    lab.msg.string = p[i].rolename + "(" + p[i].roleLevel + "级)";
                    lab.selectBn.node.on('click', self.skillList, self);
                }

                // lab.selectBn.setId(new cc.Label())

                //lab.selectBn.clickEvents.push(clickEventHandler);
                // console.log (bn.id)
                // console.log(p[i].id)
                //s += " <p class=\"yaoping\" style='color:#FFF3AE'>第" + p[i].id + "期，开出" + p[i].num1 + "," + p[i].num2 + "," + p[i].num3 + "&nbsp;&nbsp;" + p[i].result + "</p>";
                // var item = cc.instantiate(self.itemPrefab);
                // self.leftContent.addChild(item);
                // item.x = 0;
                // item.y = -1 * i * item.height;
                // item.name = 'history' + i;
                // self.content.height = (i + 1) * item.height;

                // item = item.getComponent('HistoryItem');
                // var labelStr = "第" + p[i].id + "期，开出" + p[i].num1 + "," + p[i].num2 + "," + p[i].num3 + "\t\t" + p[i].result;
                // item.setMsg(labelStr);
            }
        });
    },
    returnWuPin: function returnWuPin() {
        cc.log("ccccccccc");
        loadScene(HxsgScenes.wupin, HxsgScenes.index);
    },
    showUserBook: function showUserBook(event) {
        var node = event.target;
        var button = node.getComponent(cc.Button);
        userWuPin.num = 1;
        userWuPin.id = button.id;
        ajaxData(HxsgUrl.userWuPin, userWuPin, this.tishi);
    },
    tishi: function tishi(msg) {
        showAlert(msg.msg, self.returnWuPin, self.returnWuPin);
    },

    skillList: function skillList(event) {
        //这里 event 是一个 Touch Event 对象，你可以通过 event.target 取到事件的发送节点


        //this.node.Scrollview.clearScrollview();
        //   this.cannons = [];
        //     this.cannons = this.node.getChildren();
        // this.node.getChildren()[3].clearScrollview()
        // console.log( this.node.getChildren()[3]) 
        var node = event.target;
        var button = node.getComponent(cc.Button);
        console.log(button.id);
        var self = this;
        ajaxData(HxsgUrl.userJiNengShu, { "id": userWuPin.wupinId, "status": button.id }, function (msg) {
            self.content.removeAllChildren();
            var p = msg.msg;
            for (var i = 0; i < p.length; i++) {
                var item = cc.instantiate(self.target);
                self.content.addChild(item);

                item.x = 1;
                item.y = -1 * i * item.height;
                item.name = 'userList' + i;
                self.leftContent.height = (i + 1) * item.height + 20;
                var lab = item.getComponent("wuPinList");
                lab.msg.string = p[i].skillname;
                var bn = lab.selectBn;
                bn.id = p[i].id;
                //userWuPin.jnId=p[i].id;
                console.log("技能ID" + bn.id);
                if (i % 2 !== 0) {
                    item.color = new cc.Color(0, 0, 49);
                    console.log(item.color);
                    //lab.Node.Color="WHITE";
                }
                lab.selectBn.name = 'button' + i;
                lab.selectBn.node.on('click', self.imputNum, self);
            }
        });
        // console.log(bn.id)
    },

    imputNum: function imputNum(event) {
        var node = event.target;

        var button = node.getComponent(cc.Button);

        userWuPin.jnId = button.id;
        cc.log(button.id);
        cc.director.loadScene('inputNum');
    }

});

cc._RFpop();
},{}],"userXinFaShu":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'd604dBRxsFIsrX4X8gX8X2S', 'userXinFaShu');
// js\wupin\userXinFaShu\userXinFaShu.js

'use strict';

cc.Class({
  extends: cc.Component,
  properties: {
    target: {
      default: null,
      type: cc.Prefab
    },
    leftContent: cc.Node,
    content: cc.Node
  },
  backEvent: function backEvent() {
    //调用通用的返回上一场景方法
    loadScene(HxsgScenes.wupin, HxsgScenes.index);
    curItemData = null;
  },
  onLoad: function onLoad() {
    var self = this;
    ajaxData(HxsgUrl.getXinFaFuJiang, userWuPin, function (msg) {
      var p = msg.msg;
      if (p == null || p == 'undefined' || p.length == 0) {
        showAlert('没有可以使用该心法书的副将');
      } else {
        for (var i = 0; i < p.length; i++) {
          var item = cc.instantiate(self.target);
          self.content.addChild(item);
          item.x = 1;
          item.y = -1 * i * item.height;
          item.name = 'userList' + i;
          self.leftContent.height = (i + 1) * item.height + 20;

          var lab = item.getComponent("wuPinList");

          lab.msg.string = p[i].fujiangname + "(" + p[i].leve + "级)";
          // lab.id.string=p[i].rfid;
          if (i % 2 !== 0) {
            item.color = new cc.Color(0, 0, 49);
            console.log(item.color);
            //lab.Node.Color="WHITE";
          }
          lab.selectBn.name = 'button' + i;
          //lab.selectBn.id.string=p[i].rfid
          var bn = lab.selectBn;
          bn.id = p[i].id;
          //userWuPin.fuId=p[i].id;
          // lab.selectBn.setId(new cc.Label())
          lab.selectBn.node.on('click', self.imputNum, self);
        }
      }
    });
  },
  skillList: function skillList(event) {
    //这里 event 是一个 Touch Event 对象，你可以通过 event.target 取到事件的发送节点

    cc.director.loadScene('inputNum');
    //this.node.Scrollview.clearScrollview();
    //   this.cannons = [];
    //     this.cannons = this.node.getChildren();
    // this.node.getChildren()[3].clearScrollview()
    // console.log( this.node.getChildren()[3]) 
    console.log(userWuPin.fuId);
    var self = this;

    // console.log(bn.id)
  },
  imputNum: function imputNum(event) {
    var node = event.target;

    var button = node.getComponent(cc.Button);
    userWuPin.fuId = button.id;
    cc.director.loadScene('inputNum');
  }

});

cc._RFpop();
},{}],"wabaoMsgItem":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'aff31r7cp9KWISjxklkwKnQ', 'wabaoMsgItem');
// js\wabao\wabaoMsgItem.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        id: 0,
        richText: cc.RichText
    },

    init: function init(data, id) {
        var str = "<color=#08E7BA>" + getDate(data.date) + "</c><color=#ff9e00>   " + data.rolename + "</c>";
        str += "<color=#F8EEEB>挖到了</c>";
        str += "<color=#F34913>  " + data.baoname + "</color>";
        this.richText.string = str;
        this.id = id;

        if (id % 2 === 0) {
            this.node.color = new cc.Color(0, 0, 38);
        } else {
            this.node.color = new cc.Color(99, 65, 99);
        }
    },

    // use this for initialization
    onLoad: function onLoad() {}

});

cc._RFpop();
},{}],"wabaolist":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'dbd28xBs3ZJ05MQu9NbIUi4', 'wabaolist');
// js\wabao\wabaolist.js

"use strict";

var self;
cc.Class({
    extends: cc.Component,

    properties: {
        itemPrefab: cc.Prefab,
        msgCount: 0
    },

    // use this for initialization
    onLoad: function onLoad() {
        self = this;
        var prefab = this.itemPrefab;
        var node = this.node;
        var thisclass = this;
        var ajaxUrl = HxsgUrl.wabaoMsg;
        cc.log(prefab.name);
        ajaxData(ajaxUrl, null, function (msg) {
            var m = msg.msg;

            for (var i = m.length - 1; i >= 0; i--) {
                thisclass.addMsg(msg.msg[i]);
            }
        });
        SocketEvents.wabaoMsg = this.addMsg;
    },
    /**
     * 点击事件-->返回
     */
    backEvent: function backEvent() {
        //调用通用的返回上一场景方法
        loadScene(HxsgScenes.saizi, HxsgScenes.index);
    },

    addMsg: function addMsg(msg) {
        var node = cc.find("Canvas/scrollView/view/content/list");
        try {
            var item = cc.instantiate(self.itemPrefab);
            node.addChild(item);
            item.getComponent('wabaoMsgItem').init(msg, self.msgCount);
            node.height += item.height;
            selfthis.msgCount++;
        } catch (e) {}
    }

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"wabao":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'ef666/irzZBZr6DjtVAQRJK', 'wabao');
// js\wabao\wabao.js

"use strict";

var thisclass;
cc.Class({
    extends: cc.Component,

    properties: {
        id: 0,
        num: 0,
        getChance: false,
        wacount: 0
    },

    // use this for initialization
    onLoad: function onLoad() {
        cc.find("Canvas/main/topzone1/jixuwabao").active = false;
        var nodetop1 = cc.find("Canvas/main/topzone1");
        var nodetop2 = cc.find("Canvas/main/topzone2");
        nodetop1.active = false;
        nodetop2.active = false;
        var dialog = cc.find("Canvas/main/topzone2/dialog");
        dialog.active = false;
        thisclass = this;
        ajaxData(HxsgUrl.loadWaBao, null, function (data) {
            var msg = data.msg;
            thisclass.id = msg.id;
            roleMsg.id = msg.id;
            thisclass.num = msg.num;
            if (msg.num == 0 & (msg.w1 == 0 && msg.w2 == 0 && msg.w3 == 0 && msg.w4 == 0 && msg.w5 == 0 && msg.w6 == 0 && msg.w7 == 0 && msg.w8 == 0 && msg.w9 == 0)) {
                thisclass.switchScene(3, 2);
            } else {
                thisclass.switchScene(3, 1, msg);
            }
        });
    },
    /**
         * 点击事件-->返回
         */
    backEvent: function backEvent() {
        //调用通用的返回上一场景方法
        returnLast();
    },
    switchScene: function switchScene(before, after, msg) {
        var beforen;
        switch (before) {
            case 1:
                beforen = cc.find("Canvas/main/topzone1");break;
            case 2:
                beforen = cc.find("Canvas/main/topzone2");break;
            case 3:
                beforen = cc.find("Canvas/main/topzone3");break;
        }
        if (typeof beforen != "undefined") beforen.active = false;
        var aftern;
        switch (after) {
            case 1:
                aftern = cc.find("Canvas/main/topzone1");
                cc.find("Canvas/main/topzone1/numlabel").getComponent("cc.Label").string = "剩余挖宝次数:" + this.num.toString();
                this.wacount = 0;
                var wabaonode = cc.find("Canvas/main/topzone1/wabao");
                for (var i = 1; i <= 9; i++) {
                    var name = "w" + i;
                    var node = cc.find(name + "/button", wabaonode);
                    cc.log('msg.name:' + msg[name]);
                    if (msg[name] == 0) {
                        this.wacount++;
                        cc.log(name + "---false");
                        cc.log(" this.wacount:" + this.wacount);
                        node.getComponent("cc.Button").interactable = false;
                        node.color = new cc.Color(0, 0, 49);
                        node.getComponent(cc.Button).enabled = true;
                        node.getChildByName("Label").getComponent("cc.Label").string = "已挖";
                    } else {
                        cc.log(name + "---true");
                        node.getComponent("cc.Button").interactable = true;
                        node.color = new cc.Color(231, 14, 101);
                        node.getComponent(cc.Button).enabled = true;
                        node.getChildByName("Label").getComponent("cc.Label").string = "挖宝";
                    }
                }
                this.keySwitch();
                break;
            case 2:
                aftern = cc.find("Canvas/main/topzone2");break;
            case 3:
                aftern = cc.find("Canvas/main/topzone3");break;
        }
        aftern.active = true;
    },

    wabao: function wabao(event) {
        var node = event.target;
        node.color = new cc.Color(0, 0, 49);
        node.getComponent(cc.Button).enabled = false;
        node.getChildByName("Label").getComponent("cc.Label").string = "已挖";
        var name = node.parent.name;
        this.wacount++;
        var jsonData = {};
        jsonData["id"] = this.id;
        jsonData[name] = '0';
        cc.log(jsonData);
        ajaxData(HxsgUrl.startWaBao, jsonData, function (data) {
            var node = cc.find("Canvas/main/topzone1/tiplabel");
            node.getComponent("cc.Label").string = data.msg;
        });
        this.keySwitch();
    },
    keySwitch: function keySwitch() {
        if (this.wacount >= 9) {
            if (this.num <= 0) this.switchScene(1, 2);else {
                cc.find("Canvas/main/downline").y -= 50;
                cc.find("Canvas/scrollView").y -= 50;
                cc.find("Canvas/main/topzone1/jixuwabao").active = true;
            }
        }
    },

    enter: function enter(event) {
        // var dialog=cc.find("Canvas/main/topzone2/dialog");
        // dialog.active=true;
        // var mymsg=dialog.getChildByName("msg").getComponent("cc.Label");
        var thisclass = this;
        // mymsg.string="连接中。。。";
        ajaxData(HxsgUrl.init, null, function (data) {
            // mymsg.string=data.msg;

            if (data.msg == 'false' || data.msg == '000003') {
                thisclass.getChance = true;
                showAlert('你没有藏宝图，无法进入');
            } else {
                showAlert('消耗藏宝图一个，点击进入宝洞', thisclass.okdialog);
            }
        });
    },

    jixuwabao: function jixuwabao(event) {
        cc.find("Canvas/main/downline").y += 50;
        cc.find("Canvas/scrollView").y += 50;
        cc.find("Canvas/main/topzone1/jixuwabao").active = false;
        ajaxData(HxsgUrl.nextWaBao, roleMsg, thisclass.sx);

        //this.switchScene(0, 1);
    },
    sx: function sx() {
        cc.log("-----继续挖宝");
        ajaxData(HxsgUrl.loadWaBao, null, function (data) {
            var msg = data.msg;
            thisclass.id = msg.id;
            roleMsg.id = msg.id;
            thisclass.num = msg.num;
            if (msg.num == 0 & (msg.w1 == 0 && msg.w2 == 0 && msg.w3 == 0 && msg.w4 == 0 && msg.w5 == 0 && msg.w6 == 0 && msg.w7 == 0 && msg.w8 == 0 && msg.w9 == 0)) {
                thisclass.switchScene(3, 2);
            } else {
                thisclass.switchScene(3, 1, msg);
            }
        });
    },
    okdialog: function okdialog(event) {

        loadingScene(HxsgScenes.wabao, HxsgScenes.index);
    },

    test: function test(event) {
        this.switchScene(1, 2);
    }

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"wait":[function(require,module,exports){
"use strict";
cc._RFpush(module, '7ceedFz5kpCR4JUqYhhDWDM', 'wait');
// js\pk\wait.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        wait: cc.Sprite
    },

    // use this for initialization
    onLoad: function onLoad() {
        var action = cc.repeatForever(cc.rotateBy(3.0, 360));
        this.wait.node.runAction(action);
    }

});

cc._RFpop();
},{}],"wanjian":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'e2271aK0SBBa44nRPvhcslN', 'wanjian');
// js\jineng\wanjian.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    // use this for initialization
    onLoad: function onLoad() {},
    endEvent: function endEvent(event) {
        cc.log("动画播放完毕");
        var node = event.targer;
        node.active = false;

        var background = cc.find('Canvas/background');
        var seq = cc.sequence(cc.moveTo(1, cc.p(0, 137)).easing(cc.easeCubicActionOut(1)));
        background.color = new cc.Color(245, 245, 245);
        background.runAction(seq);
    }
    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"wuPinList":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'ed8525sD55GY5OpvOZp6lW0', 'wuPinList');
// js\wupin\userJiNengShu\wuPinList.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        msg: cc.Label,
        id: cc.Label,
        selectBn: cc.Button
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    // use this for initialization
    onLoad: function onLoad() {},
    setMsg: function setMsg(dataMsg) {
        this.msg = dataMsg;
    }

});

cc._RFpop();
},{}],"wupin":[function(require,module,exports){
"use strict";
cc._RFpush(module, '825d6J4LcJPnaSAzr33fVvC', 'wupin');
// js\pk\wupin.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    // use this for initialization
    onLoad: function onLoad() {},
    backEvent: function backEvent() {
        cc.find("Canvas/zhiling").active = true;
        cc.log("物品");
        cc.find("Canvas/wupin").active = false;
        pk.pkyaostatus = "0";
    }

});

cc._RFpop();
},{}],"xunLian":[function(require,module,exports){
"use strict";
cc._RFpush(module, '5745a5GCNdIDp8RmLj5MwWI', 'xunLian');
// js\xunlian\xunLian.js

"use strict";

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var self;
cc.Class({
    extends: cc.Component,

    properties: {
        num: cc.EditBox,
        msg: cc.RichText
    },
    setMsg: function setMsg(msg) {
        this.msg.string = msg;
    },

    // use this for initialization
    onLoad: function onLoad() {
        self = this;
        //this.menuButton(this,0);
    },
    /**
     * 点击事件-->返回
     */
    backEvent: function backEvent() {
        returnLast();
    },
    buttonEvent: function buttonEvent() {
        var num = this.num.string;
        ajaxData(HxsgUrl.startTraining, { 'num': num }, this.alertSucces);
    },
    alertSucces: function alertSucces(msg) {
        showAlert(msg.msg);
    },

    menuButton: function menuButton(event, dataNum) {
        var content = cc.find("Canvas/scrollView/view/content");
        content.removeAllChildren();
        var buttonList = cc.find("Canvas/buttonList");
        var list = buttonList.children;
        for (var i = 0; i < list.length; i++) {
            if (i == dataNum) {
                list[i].color = new cc.Color(63, 23, 66);
            } else {
                list[i].color = new cc.Color(224, 27, 193);
            }
        }
        switch (dataNum) {
            case '0':
                cc.loader.loadRes('prefabs/xunLian', cc.Prefab, function (err, prefab) {
                    if (!err) {
                        var jsxl = cc.instantiate(prefab);
                        var jsxlJs = jsxl.getComponent('xunLian');
                        jsxlJs.jieshouEvent();
                        content.addChild(jsxl);
                    }
                });
                break;
            case '1':
                ajaxData(HxsgUrl.training, { 'status': '0' }, this.zhengZaiEvent);
                break;
            case '2':
                ajaxData(HxsgUrl.training, { 'status': '1' }, this.wanChengEvent);
                break;
            case '3':
                cc.loader.loadRes('prefabs/IndexGongNengXunLian/shuoMing', cc.Prefab, function (err, prefab) {
                    if (!err) {
                        var jsxl = cc.instantiate(prefab);
                        content.addChild(jsxl);
                    }
                });
                cc.log('说明');
                break;
            case '4':
                ajaxData(HxsgUrl.queryJingYan, null, self.lingQuJingYan);
                cc.log('领取经验');
                break;

        }
    },
    jieshouEvent: function jieshouEvent() {
        var jin = 60;
        var jy = 100;
        cc.log(roleMsg.roleId);
        if (roleMsg.roleId >= 120) {
            jin = 140;
            jy = 450;
        } else if (roleMsg.roleId >= 100) {
            jin = 120;
            jy = 300;
        } else if (roleMsg.roleId >= 71) {
            jin = 100;
            jy = 200;
        } else if (roleMsg.roleId >= 40) {
            jin = 80;
            jy = 150;
        } else if (roleMsg.roleId >= 1) {
            jin = 60;
            jy = 100;
        }
        var msg = '训练说明:玩家可将角色委托给教军场训练（每日可训练一次，最长10小时,每训练1小时需要消耗20点体力值' + '您当前' + roleMsg.roleId + '级，训练费用每小时' + jin + '金砖，每小时训练可以获得当前' + jy + '次战斗经验值，每次军训1小时可增加额外的1%的经验值';
        this.setMsg(msg);
    },
    zhengZaiEvent: function zhengZaiEvent(msg) {
        cc.loader.loadRes('prefabs/xunlianDetail', cc.Prefab, function (err, prefab) {
            var content = cc.find("Canvas/scrollView/view/content");
            content.removeAllChildren();
            if (!err) {
                for (var key in msg.msg) {
                    var zaxl = cc.instantiate(prefab);
                    if (key % 2 == 0) {
                        zaxl.color = new cc.Color(207, 105, 221);
                    } else {
                        zaxl.color = new cc.Color(0, 0, 49);
                    }

                    zaxl.getChildByName("msg").getComponent("cc.RichText").string = '<color=#F8DD50 click="this.clickEvent">' + msg.msg[key].rolename + '</c>';
                    content.addChild(zaxl);
                }
            }
        });
    },
    wanChengEvent: function wanChengEvent(msg) {
        cc.loader.loadRes('prefabs/xunlianDetail', cc.Prefab, function (err, prefab) {
            var content = cc.find("Canvas/scrollView/view/content");
            content.removeAllChildren();
            if (!err) {
                for (var key in msg.msg) {
                    var zaxl = cc.instantiate(prefab);
                    if (key % 2 == 0) {
                        zaxl.color = new cc.Color(207, 105, 221);
                    } else {
                        zaxl.color = new cc.Color(0, 0, 49);
                    }
                    zaxl.getChildByName("msg").getComponent("cc.RichText").string = '<color=#F8DD50 click="this.clickEvent">' + msg.msg[key].rolename + '</c><color=#FCFCFC>完成训练，获得经验' + msg.msg[key].jingyan + '</c>';
                    content.addChild(zaxl);
                }
            }
        });
    },
    lingQuJingYan: function lingQuJingYan(msg) {

        cc.loader.loadRes('prefabs/IndexGongNengXunLian/lingQuJingYan', cc.Prefab, function (err, prefab) {
            var content = cc.find("Canvas/scrollView/view/content");
            content.removeAllChildren();

            if (!err) {
                var p = msg.msg;
                //if (p = !'' && typeof (p) != 'undefined' && p != null) {

                var pTime = p.status;
                cc.log("-------------" + _typeof(p.date));
                var zaxl = cc.instantiate(prefab);
                content.addChild(zaxl);
                var nowTime = new Date().getTime();
                var time = pTime - nowTime;
                cc.log("-------------" + time);
                if (time < 0) {
                    zaxl.getChildByName("time").getComponent("cc.RichText").string = "";
                } else {
                    //计时器
                    self.schedule(function () {
                        // 这里的 this 指向 component
                        time = time - 1000;
                        self.time(time, zaxl.getChildByName("time").getComponent("cc.RichText"));
                    }, 1);
                }
                var jy = p.jingyan;

                zaxl.getChildByName("jingyan").getComponent("cc.Label").string = '本次可领取经验:' + jy;

                // }

            }
        });
    },
    clickEvent: function clickEvent() {
        loadingScene(HxsgScenes.friendInfo);
    },
    time: function time(_time, p) {
        cc.log(_time);
        _time = _time - 1000;

        if (_time >= 0) {
            var t = getTime(_time);
            p.string = "领取倒计时 " + t;
            cc.log(t);
            //  cc.find("Canvas/scrollView/view/content/lingQuJingYan").getChildByName("jingyan").getComponent("cc.RichText").string ="领取倒计时"+t;
        } else {
            this.unschedule(this.time);
            p.string = '';
            //cc.find("Canvas/scrollView/view/content/lingQuJingYan").getChildByName("jingyan").getComponent("cc.RichText").string ="";
        }
    },
    getJingYanButton: function getJingYanButton() {
        ajaxData(HxsgUrl.getJingYan, null, self.getJingYanButtonSucces);
    },
    getJingYanButtonSucces: function getJingYanButtonSucces(msg) {
        showAlert(msg.msg);
    }

});

cc._RFpop();
},{}],"yao":[function(require,module,exports){
"use strict";
cc._RFpush(module, '81d33tgnb5EgqvGVOAla1Ns', 'yao');
// js\pk\yao.js

"use strict";

var self = void 0;
cc.Class({
    extends: cc.Component,

    properties: {
        num: cc.Label,
        img: cc.Sprite
    },

    // use this for initialization
    onLoad: function onLoad() {
        self = this;
    },
    setNum: function setNum(num) {
        this.num.string = num;
    },
    setImg: function setImg(url) {}

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"yiguan":[function(require,module,exports){
"use strict";
cc._RFpush(module, '834a6k7SjNCqIRtuAN8fFFd', 'yiguan');
// js\yao\yiguan.js

"use strict";

var self;
cc.Class({
    extends: cc.Component,

    properties: {
        yaoname: cc.Label,
        level: cc.Label,
        ms: cc.Label,
        price: cc.Label,
        num: cc.EditBox
    },

    // use this for initialization
    onLoad: function onLoad() {
        self = this;
        loadCommomScence();
    },
    yaoClick: function yaoClick(event, num) {
        ajaxData(HxsgUrl.queryYaoPinDetail, {
            'id': num
        }, function (data) {
            if (data.code = "000") {
                var re = data.data;
                self.yaoname.string = re.yaoname;
                self.level.string = re.yaoid;
                self.ms.string = re.ms;
                self.price.string = re.yaoprice;
            } else {
                showAlert("服务器出错！");
            }
        });
    },
    goumai: function goumai() {
        cc.log("购买药品：" + self.level.string);
        cc.log("购买药品：" + self.num.string);
        if (self.num.string == "") {
            showAlert("请输入购买数量");
        } else {
            cc.log("提交购买药品");
            ajaxData(HxsgUrl.buyYao, { 'id': self.level.string, 'num': self.num.string }, function (data) {
                if (data.code == "000") {
                    showAlert(data.data.message);
                } else {
                    showAlert("服务器错误");
                }
            });
        }
    }

    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"ylc":[function(require,module,exports){
"use strict";
cc._RFpush(module, '21f4a+gffhAs4FlX+fIDkm1', 'ylc');
// js\gc\ylc.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    // use this for initialization
    onLoad: function onLoad() {
        // showSystemMsgAlert(1,'11111');
        //  showSystemMsgAlert(2,'22222');
        //   showSystemMsgAlert(3,'33333');

    },
    ylc: function ylc() {
        loadingScene(HxsgScenes.saizi, HxsgScenes.index);
    },
    /**
     * 点击事件-->返回
     */
    backEvent: function backEvent() {
        //调用通用的返回上一场景方法
        returnLast();
    }
});

cc._RFpop();
},{}],"zbBaoshiDetail":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'd4d08tBpoZCx7iIm0/m30b0', 'zbBaoshiDetail');
// js\wupin\zhuangbei\zbBaoshiDetail.js

'use strict';

var self;
var bsid;
var zbid;
cc.Class({
    extends: cc.Component,

    properties: {
        bsname: cc.Label,
        level: cc.Label,
        xiaoguo: cc.Label,
        jieshao: cc.RichText,
        img: cc.Sprite
    },

    // use this for initialization
    onLoad: function onLoad() {
        self = this;
    },
    click: function click() {
        self.node.destroy();
    },
    init: function init(data) {
        self.bsname.string = data.zwName;
        self.level.string = data.zwLevel;
        self.xiaoguo.string = data.zwXiaoGuo;
        self.jieshao.string = data.zwMiaoShu;
        bsid = data.id;
    },
    xqClick: function xqClick() {

        var param = { 'bsId': bsid, 'zbId': zhaungBeiDetailsZbid.id };
        ajaxData(HxsgUrl.mosaicGemtoZhuangBei, param, function (data) {
            cc.log(data);
            if (data.code = "000") {
                showAlert(data.data, function () {
                    cc.director.loadScene(HxsgScenes.zhuangbei);
                }, function () {
                    cc.director.loadScene(HxsgScenes.zhuangbei);
                });
            } else {
                showAlert("服务器崩溃了:" + data.message, function () {
                    cc.director.loadScene(HxsgScenes.zhuangbei);
                }, function () {
                    cc.director.loadScene(HxsgScenes.zhuangbei);
                });
            }
        });
    }
    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"zbIcon":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'bcd67hMCMtHW6r61T207cVF', 'zbIcon');
// js\wupin\zhuangbei\zbIcon.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    // use this for initialization
    onLoad: function onLoad() {}

});

cc._RFpop();
},{}],"zhaojiang":[function(require,module,exports){
"use strict";
cc._RFpush(module, '361b7U68b1Bj6qBO6qvSyG2', 'zhaojiang');
// js\pk\zhaojiang.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    // use this for initialization
    onLoad: function onLoad() {},
    backEvent: function backEvent() {
        cc.find("Canvas/zhiling").active = true;
        cc.log("物品");
        cc.find("Canvas/zhaojiang").active = false;
    }

});

cc._RFpop();
},{}],"zhaungBeiDetail":[function(require,module,exports){
"use strict";
cc._RFpush(module, 'bc521Li9hpM7Ym0uuy+/mdn', 'zhaungBeiDetail');
// js\wupin\zhuangbei\zhaungBeiDetail.js

'use strict';

var self;

cc.Class({
    extends: cc.Component,

    properties: {
        titleLabel: cc.Label,
        nameLabel: cc.Label,
        LvLabel: cc.Label,
        effectLabel: cc.RichText,
        presentLabel: cc.RichText,
        holeLabel: cc.Sprite

    },

    // use this for initialization
    onLoad: function onLoad() {

        self = this;

        var data = { 'id': zhaungBeiDetailsZbid.id };

        ajaxData(HxsgUrl.zbDetailUrl, data, self.initZhuangbei);
        loadCommomScence();
    },

    initZhuangbei: function initZhuangbei(res) {
        var _this = this;

        if (cc.find('Canvas/zbBaoshi2') != null) {
            cc.find('Canvas/zbBaoshi2').destroy();
        }
        if (cc.find('Canvas/bs') != null) {
            cc.find('Canvas/bs').destroy();
        }
        var msg = res.msg;
        cc.log(self.titleLabel);
        self.titleLabel.string = msg.zbName;
        self.nameLabel.string = msg.zbName;
        // self.LvLabel.string = msg.
        self.effectLabel.string = msg.zbXiaoGuo;
        self.presentLabel.string = msg.zbMiaoShu + "<color=#ff0000>" + msg.zbTiaoJian + "</color>";
        self.LvLabel.string = msg.level;

        var icon = cc.find('Canvas/sprite/icon');
        var sprite2 = icon.getComponent('cc.Sprite');
        //网络加载图片
        cc.loader.load(imgUrl + msg.imgUrl, function (error, texture) {
            sprite2.spriteFrame = new cc.SpriteFrame(texture);
        });
        //孔傮
        var bsArr = msg.baoshiId;

        var _loop = function _loop(i) {
            if (null == bsArr[i]) {
                cc.loader.loadRes('prefabs/kong2', cc.Prefab, function (err, prefab) {
                    if (!err) {
                        cc.log(bsArr[i]);
                        var kong = cc.instantiate(prefab);
                        self.holeLabel.node.addChild(kong);

                        kong.on('click', function (event) {
                            if (cc.find('Canvas/bs') != null) {
                                cc.find('Canvas/bs').destroy();
                            }
                            cc.log("空槽");
                            cc.loader.loadRes('prefabs/bs', cc.Prefab, function (err, prefab) {
                                if (!err) {
                                    var bs = cc.instantiate(prefab);
                                    cc.find('Canvas').addChild(bs, 70);
                                }
                            });
                        }.bind(this));
                    }
                });
            } else {
                cc.loader.loadRes('prefabs/kong', cc.Prefab, function (err, prefab) {
                    if (!err) {
                        var kong = cc.instantiate(prefab);
                        kong.on('click', function (event) {
                            var node = event.target;
                            var button = node.getComponent(cc.Button);
                            if (cc.find('Canvas/zbBaoshi') != null) {
                                cc.find('Canvas/zbBaoshi').destroy();
                            }
                            cc.loader.loadRes('prefabs/zbBaoshi', cc.Prefab, function (err, prefab) {
                                if (!err) {
                                    var zbBaoshi = cc.instantiate(prefab);
                                    cc.find('Canvas').addChild(zbBaoshi, 90);
                                    zbBaoshi.setPositionX(30);
                                    zbBaoshi.setPositionY(-10);
                                    //加載zbBaoshi腳本,初始化界面
                                    ajaxData(HxsgUrl.baoshiItemUrl, { 'id': bsArr[i] }, function (data) {
                                        cc.log(data);
                                        var zbBaoshiJs = zbBaoshi.getComponent('zbBaoshiDetail');
                                        zbBaoshiJs.init(data.msg);
                                    });
                                }
                            });
                        }.bind(this));
                        self.holeLabel.node.addChild(kong);
                    }
                }.bind(_this));
            }
        };

        for (var i = 0; i < bsArr.length; i++) {
            _loop(i);
        }
        cc.loader.loadRes(msg.imgUrl, cc.SpriteFrame, function (err, tex) {
            if (!err) {
                self.sprite.spriteFrame = tex;
            }
        });
    },

    userBtnEvent: function userBtnEvent() {

        ajaxData(HxsgUrl.zbWuQi, { 'id': zhaungBeiDetailsZbid.id, 'type': 'role' }, function (data) {
            cc.log(data);
            if (data.code == "000") {
                showAlert(data.data);
            } else {
                showAlert("系统错误");
            }
        });
    },

    dropBtnEvent: function dropBtnEvent() {

        ajaxData(HxsgUrl.xiezai, { 'id': zhaungBeiDetailsZbid.id, 'type': 'role' }, function (data) {
            cc.log(data);
            if (data.code == "000") {
                showAlert(data.data);
            } else {
                showAlert("系统错误");
            }
        });
    },

    backEvent: function backEvent() {
        loadScene(HxsgScenes.wupin, HxsgScenes.zhuangbei);
    }

});

cc._RFpop();
},{}],"zhaungbei":[function(require,module,exports){
"use strict";
cc._RFpush(module, '0bfb6az2mFKpbCt8Q6ltqBE', 'zhaungbei');
// js\shichang\tjp\zhaungbei.js

'use strict';

var self;
cc.Class({
    extends: cc.Component,

    properties: {
        yaoname: cc.Label,
        level: cc.Label,
        ms: cc.RichText,
        price: cc.Label
    },

    // use this for initialization
    onLoad: function onLoad() {
        loadCommomScence();
        self = this;
        self.init({ 'type': '武' });
    },
    selectType: function selectType(event, num) {
        var param = "";
        switch (num) {
            case "1":
                {
                    param = { 'type': '武' };
                    break;
                }
            case "2":
                {
                    param = { 'type': '盔' };
                    break;
                }
            case "3":
                {
                    param = { 'type': '甲' };
                    break;
                }
            case "4":
                {
                    param = { 'type': '腕' };
                    break;
                }
            case "5":
                {
                    param = { 'type': '链' };
                    break;
                }
            case "6":
                {
                    param = { 'type': '靴' };
                    break;
                }
        }
        self.init(param);
    },
    init: function init(dataJson) {
        self.node.removeAllChildren();

        ajaxUtils(HxsgUrl.queryZhuangBei, dataJson, function (data) {
            cc.loader.loadRes('prefabs/zbShopIcon', cc.Prefab, function (err, prefab) {
                if (!err) {
                    var _loop = function _loop(i) {
                        var zbShopIcon = cc.instantiate(prefab);
                        var yao = zbShopIcon.getChildByName("yao");
                        var xz = zbShopIcon.getChildByName("xz");
                        yao.on("click", function () {
                            //加载选中特效.关闭其他动画，加载当前动画
                            var child = self.node.children;
                            for (var _i = 0; _i < child.length; _i++) {
                                var xzChild = child[_i].getChildByName("xz");
                                xzChild.getComponent(cc.Animation).stop();
                                xzChild.opacity = 0;
                            }
                            xz.opacity = 255;
                            xz.getComponent(cc.Animation).play();
                            self.zbDetail(data[i]);
                        }, self);
                        //网络加载图片
                        cc.loader.load(imgUrl + data[i].imgUrl, function (error, texture) {
                            cc.log(imgUrl + data[i].imgUrl);
                            yao.getComponent('cc.Sprite').spriteFrame = new cc.SpriteFrame(texture);
                        });
                        self.node.addChild(zbShopIcon);
                    };

                    for (var i = 0; i < data.length; i++) {
                        _loop(i);
                    }
                }
            });
        });
    },
    zbDetail: function zbDetail(data) {

        //武器点击时，将该变量保存提供给购买按钮
        wuqiShop.shop = data;
        cc.log(data);
        self.yaoname.string = data.wuQiName;
        self.level.string = data.level;
        self.ms.string = data.miaoShu + "<color=#AE0BEE>" + data.kangXing + "+" + data.xiaoGuo + "</color>";
        self.price.string = data.price + "银";
    },
    buy: function buy() {
        showAlert("您确定花费" + wuqiShop.shop.price + "银两，购买" + wuqiShop.shop.wuQiName + "吗？", function () {
            ajaxUtils(HxsgUrl.buyZhuangBei, { id: wuqiShop.shop.id }, function (data) {
                showAlert(data);
            });
        });
    }
    // called every frame, uncomment this function to activate update callback
    // update: function (dt) {

    // },
});

cc._RFpop();
},{}],"zhp":[function(require,module,exports){
"use strict";
cc._RFpush(module, '12959iYDoJHpq25gxMNODgT', 'zhp');
// js\shichang\zhp\zhp.js

"use strict";

cc.Class({
    extends: cc.Component,

    properties: {
        // foo: {
        //    default: null,      // The default value will be used only when the component attaching
        //                           to a node for the first time
        //    url: cc.Texture2D,  // optional, default is typeof default
        //    serializable: true, // optional, default is true
        //    visible: true,      // optional, default is true
        //    displayName: 'Foo', // optional
        //    readonly: false,    // optional, default is false
        // },
        // ...
    },

    // use this for initialization
    onLoad: function onLoad() {
        loadCommomScence();
    }

});

cc._RFpop();
},{}]},{},["Bank","BankOrders","BuyGold","GetGold","GetSilver","RechargeGold","RechargeReward","SaveGold","SaveSilver","SellGold","Alert","Speak","Strake","TopManager","back","loading","systemMsg","chatMsgItem","friendInfo","friendsItem","friendsList","friendsListItem","friendsManager","siliao","talking","chuZhiPy","bangItem","chiBi","chiBiYaZhu","commonItem","commonlist","gameMenu","jiesuan","saiziButton","HistoryItem","HistoryManager","bang","ylc","GGDetails","GGItem","GGList","FujiangConfig","FujiangItem","FujiangXiangqing","PorpertyManager","PropertyChecker","PropertyPoints","HotkeyBoard","ChatButtonEvent","ChatLabelEvent","ChatManager","IndexManager","GongnengPanel","IndexMenu","SheshiPanel","IndexFujiangButton","PlayerStatus","RoleDetailsManager","Emoji","move","rolePrefabs","headItem","nearbyPlayer","parent","wanjian","loadSelectRole","login","loginCreateRole","loginRegister","selectedRole","buff","buffDetail","end","jnName","pkJnContent","pkOnload","pkWait","pkWuPin","playerItem","role","roledetail","test","wait","wupin","yao","zhaojiang","shiChangIndex","dzzb","tjp","zhaungbei","zhp","system","systemNotice","TimelineLite","TweenLite","return","wabao","wabaoMsgItem","wabaolist","PkScoket","WupinItem","WupinManager","BaoshiDetial","userJiangJunLing","alert","inputNum","jiNengList","touzhuitem","userList","wuPinList","userXinFaShu","baoshiDetail2","kong","myZhuangBei","zbBaoshiDetail","zbIcon","zhaungBeiDetail","xunLian","test222","yiguan"])

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9qcy9jb21tb24vQWxlcnQuanMiLCJhc3NldHMvanMvYmFuay9CYW5rT3JkZXJzLmpzIiwiYXNzZXRzL2pzL2JhbmsvQmFuay5qcyIsImFzc2V0cy9qcy93dXBpbi9iYW9zaGkvQmFvc2hpRGV0aWFsLmpzIiwiYXNzZXRzL2pzL2JhbmsvQnV5R29sZC5qcyIsImFzc2V0cy9qcy9pbmRleC9JbmRleENoYXQvQ2hhdEJ1dHRvbkV2ZW50LmpzIiwiYXNzZXRzL2pzL2luZGV4L0luZGV4Q2hhdC9DaGF0TGFiZWxFdmVudC5qcyIsImFzc2V0cy9qcy9pbmRleC9JbmRleENoYXQvQ2hhdE1hbmFnZXIuanMiLCJhc3NldHMvanMvaW5kZXgvZW1vamkvRW1vamkuanMiLCJhc3NldHMvanMvaW5kZXgvRnVqaWFuZy9GdWppYW5nQ29uZmlnLmpzIiwiYXNzZXRzL2pzL2luZGV4L0Z1amlhbmcvRnVqaWFuZ0l0ZW0uanMiLCJhc3NldHMvanMvaW5kZXgvRnVqaWFuZy9GdWppYW5nWGlhbmdxaW5nLmpzIiwiYXNzZXRzL2pzL2dnL0dHRGV0YWlscy5qcyIsImFzc2V0cy9qcy9nZy9HR0l0ZW0uanMiLCJhc3NldHMvanMvZ2cvR0dMaXN0LmpzIiwiYXNzZXRzL2pzL2JhbmsvR2V0R29sZC5qcyIsImFzc2V0cy9qcy9iYW5rL0dldFNpbHZlci5qcyIsImFzc2V0cy9qcy9pbmRleC9JbmRleFBhbmVsL0dvbmduZW5nUGFuZWwuanMiLCJhc3NldHMvanMvZ2MvSGlzdG9yeUl0ZW0uanMiLCJhc3NldHMvanMvZ2MvSGlzdG9yeU1hbmFnZXIuanMiLCJhc3NldHMvanMvaW5kZXgvSG90a2V5Qm9hcmQuanMiLCJhc3NldHMvanMvaW5kZXgvSW5kZXhQbGF5ZXIvSW5kZXhGdWppYW5nQnV0dG9uLmpzIiwiYXNzZXRzL2pzL2luZGV4L0luZGV4TWFuYWdlci5qcyIsImFzc2V0cy9qcy9pbmRleC9JbmRleFBhbmVsL0luZGV4TWVudS5qcyIsImFzc2V0cy9qcy9pbmRleC9JbmRleFBsYXllci9QbGF5ZXJTdGF0dXMuanMiLCJhc3NldHMvanMvaW5kZXgvRnVqaWFuZy9Qb3JwZXJ0eU1hbmFnZXIuanMiLCJhc3NldHMvanMvaW5kZXgvRnVqaWFuZy9Qcm9wZXJ0eUNoZWNrZXIuanMiLCJhc3NldHMvanMvaW5kZXgvRnVqaWFuZy9Qcm9wZXJ0eVBvaW50cy5qcyIsImFzc2V0cy9qcy9iYW5rL1JlY2hhcmdlR29sZC5qcyIsImFzc2V0cy9qcy9iYW5rL1JlY2hhcmdlUmV3YXJkLmpzIiwiYXNzZXRzL2pzL2luZGV4L1JvbGVEZXRhaWxzTWFuYWdlci5qcyIsImFzc2V0cy9qcy9iYW5rL1NhdmVHb2xkLmpzIiwiYXNzZXRzL2pzL2JhbmsvU2F2ZVNpbHZlci5qcyIsImFzc2V0cy9qcy9iYW5rL1NlbGxHb2xkLmpzIiwiYXNzZXRzL2pzL2luZGV4L0luZGV4UGFuZWwvU2hlc2hpUGFuZWwuanMiLCJhc3NldHMvanMvY29tbW9uL1NwZWFrLmpzIiwiYXNzZXRzL2pzL2NvbW1vbi9TdHJha2UuanMiLCJhc3NldHMvanMvdXRpbC9UaW1lbGluZUxpdGUuanMiLCJhc3NldHMvanMvY29tbW9uL1RvcE1hbmFnZXIuanMiLCJhc3NldHMvanMvdXRpbC9Ud2VlbkxpdGUuanMiLCJhc3NldHMvanMvd3VwaW4vV3VwaW5JdGVtLmpzIiwiYXNzZXRzL2pzL3d1cGluL1d1cGluTWFuYWdlci5qcyIsImFzc2V0cy9qcy93dXBpbi91c2VySmlOZW5nU2h1L2FsZXJ0LmpzIiwiYXNzZXRzL2pzL2NvbW1vbi9iYWNrLmpzIiwiYXNzZXRzL2pzL2dhbWJsZS9iYW5nSXRlbS5qcyIsImFzc2V0cy9qcy9nYy9iYW5nLmpzIiwiYXNzZXRzL2pzL3d1cGluL3podWFuZ2JlaS9iYW9zaGlEZXRhaWwyLmpzIiwiYXNzZXRzL2pzL3BrL2J1ZmZEZXRhaWwuanMiLCJhc3NldHMvanMvcGsvYnVmZi5qcyIsImFzc2V0cy9qcy9mcmllbmRzL2NoYXRNc2dJdGVtLmpzIiwiYXNzZXRzL2pzL2dhbWJsZS9jaGlCaVlhWmh1LmpzIiwiYXNzZXRzL2pzL2dhbWJsZS9jaGlCaS5qcyIsImFzc2V0cy9qcy9mdUppYW5nL2NodVpoaVB5L2NodVpoaVB5LmpzIiwiYXNzZXRzL2pzL2dhbWJsZS9jb21tb25JdGVtLmpzIiwiYXNzZXRzL2pzL2dhbWJsZS9jb21tb25saXN0LmpzIiwiYXNzZXRzL2pzL3NoaWNoYW5nL3RqcC9kenpiLmpzIiwiYXNzZXRzL2pzL3BrL2VuZC5qcyIsImFzc2V0cy9qcy9mcmllbmRzL2ZyaWVuZEluZm8uanMiLCJhc3NldHMvanMvZnJpZW5kcy9mcmllbmRzSXRlbS5qcyIsImFzc2V0cy9qcy9mcmllbmRzL2ZyaWVuZHNMaXN0SXRlbS5qcyIsImFzc2V0cy9qcy9mcmllbmRzL2ZyaWVuZHNMaXN0LmpzIiwiYXNzZXRzL2pzL2ZyaWVuZHMvZnJpZW5kc01hbmFnZXIuanMiLCJhc3NldHMvanMvZ2FtYmxlL2dhbWVNZW51LmpzIiwiYXNzZXRzL2pzL2luZGV4L25lYXJieVBsYXllci9oZWFkSXRlbS5qcyIsImFzc2V0cy9qcy93dXBpbi91c2VySmlOZW5nU2h1L2lucHV0TnVtLmpzIiwiYXNzZXRzL2pzL3d1cGluL3VzZXJKaU5lbmdTaHUvamlOZW5nTGlzdC5qcyIsImFzc2V0cy9qcy9nYW1ibGUvamllc3Vhbi5qcyIsImFzc2V0cy9qcy9way9qbk5hbWUuanMiLCJhc3NldHMvanMvd3VwaW4vemh1YW5nYmVpL2tvbmcuanMiLCJhc3NldHMvanMvbG9naW4vbG9hZFNlbGVjdFJvbGUuanMiLCJhc3NldHMvanMvY29tbW9uL2xvYWRpbmcuanMiLCJhc3NldHMvanMvbG9naW4vbG9naW5DcmVhdGVSb2xlLmpzIiwiYXNzZXRzL2pzL2xvZ2luL2xvZ2luUmVnaXN0ZXIuanMiLCJhc3NldHMvanMvbG9naW4vbG9naW4uanMiLCJhc3NldHMvanMvaW5kZXgvbW92ZS9tb3ZlLmpzIiwiYXNzZXRzL2pzL3d1cGluL3podWFuZ2JlaS9teVpodWFuZ0JlaS5qcyIsImFzc2V0cy9qcy9pbmRleC9uZWFyYnlQbGF5ZXIvbmVhcmJ5UGxheWVyLmpzIiwiYXNzZXRzL2pzL2luZGV4L3BhcmVudC5qcyIsImFzc2V0cy9qcy9way9wa0puQ29udGVudC5qcyIsImFzc2V0cy9qcy9way9wa09ubG9hZC5qcyIsImFzc2V0cy9qcy9way9wa1dhaXQuanMiLCJhc3NldHMvanMvcGsvcGtXdVBpbi5qcyIsImFzc2V0cy9qcy9way9wbGF5ZXJJdGVtLmpzIiwiYXNzZXRzL2pzL3V0aWwvcmV0dXJuLmpzIiwiYXNzZXRzL2pzL2luZGV4L21vdmUvcm9sZVByZWZhYnMuanMiLCJhc3NldHMvanMvcGsvcm9sZWRldGFpbC5qcyIsImFzc2V0cy9qcy9way9yb2xlLmpzIiwiYXNzZXRzL2pzL2dhbWJsZS9zYWl6aUJ1dHRvbi5qcyIsImFzc2V0cy9qcy9sb2dpbi9zZWxlY3RlZFJvbGUuanMiLCJhc3NldHMvanMvc2hpY2hhbmcvc2hpQ2hhbmdJbmRleC5qcyIsImFzc2V0cy9qcy9mcmllbmRzL3NpbGlhby5qcyIsImFzc2V0cy9qcy9jb21tb24vc3lzdGVtTXNnLmpzIiwiYXNzZXRzL2pzL3N5c3RlbS9zeXN0ZW1Ob3RpY2UuanMiLCJhc3NldHMvanMvc3lzdGVtL3N5c3RlbS5qcyIsImFzc2V0cy9qcy9mcmllbmRzL3RhbGtpbmcuanMiLCJhc3NldHMvanMveWFvL3Rlc3QyMjIuanMiLCJhc3NldHMvanMvcGsvdGVzdC5qcyIsImFzc2V0cy9qcy9zaGljaGFuZy90anAvdGpwLmpzIiwiYXNzZXRzL2pzL3d1cGluL3VzZXJKaU5lbmdTaHUvdG91emh1aXRlbS5qcyIsImFzc2V0cy9qcy93dXBpbi9qaWFuZ0ppbmdMaW5nL3VzZXJKaWFuZ0p1bkxpbmcuanMiLCJhc3NldHMvanMvd3VwaW4vdXNlckppTmVuZ1NodS91c2VyTGlzdC5qcyIsImFzc2V0cy9qcy93dXBpbi91c2VyWGluRmFTaHUvdXNlclhpbkZhU2h1LmpzIiwiYXNzZXRzL2pzL3dhYmFvL3dhYmFvTXNnSXRlbS5qcyIsImFzc2V0cy9qcy93YWJhby93YWJhb2xpc3QuanMiLCJhc3NldHMvanMvd2FiYW8vd2FiYW8uanMiLCJhc3NldHMvanMvcGsvd2FpdC5qcyIsImFzc2V0cy9qcy9qaW5lbmcvd2Fuamlhbi5qcyIsImFzc2V0cy9qcy93dXBpbi91c2VySmlOZW5nU2h1L3d1UGluTGlzdC5qcyIsImFzc2V0cy9qcy9way93dXBpbi5qcyIsImFzc2V0cy9qcy94dW5saWFuL3h1bkxpYW4uanMiLCJhc3NldHMvanMvcGsveWFvLmpzIiwiYXNzZXRzL2pzL3lhby95aWd1YW4uanMiLCJhc3NldHMvanMvZ2MveWxjLmpzIiwiYXNzZXRzL2pzL3d1cGluL3podWFuZ2JlaS96YkJhb3NoaURldGFpbC5qcyIsImFzc2V0cy9qcy93dXBpbi96aHVhbmdiZWkvemJJY29uLmpzIiwiYXNzZXRzL2pzL3BrL3poYW9qaWFuZy5qcyIsImFzc2V0cy9qcy93dXBpbi96aHVhbmdiZWkvemhhdW5nQmVpRGV0YWlsLmpzIiwiYXNzZXRzL2pzL3NoaWNoYW5nL3RqcC96aGF1bmdiZWkuanMiLCJhc3NldHMvanMvc2hpY2hhbmcvemhwL3pocC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBRFE7O0FBSVo7Ozs7Ozs7QUFPQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0k7QUFDSDtBQUNEO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0g7QUFuQ0k7Ozs7Ozs7Ozs7QUNEVDtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFWUTs7QUFhWjtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNBOztBQXRCSzs7Ozs7Ozs7OztBQ0FUO0FBQ0k7O0FBRUE7QUFDSTtBQURROztBQUlaO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0g7QUFDSjs7QUEzRUk7Ozs7Ozs7Ozs7QUNBVDtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFOUTs7QUFTWjtBQUNBO0FBQ007QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUVHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSTtBQUNJO0FBQ0g7QUFDSjtBQUNKO0FBQ0Q7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTs7QUFFQTtBQXpESzs7Ozs7Ozs7OztBQ0RUO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZROztBQWFaO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7O0FBdEJLOzs7Ozs7Ozs7O0FDQVQ7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFGUTs7QUFLWjtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEOzs7QUFHQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBRUc7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7OztBQUdBO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNIOztBQTFESTs7Ozs7Ozs7OztBQ0FUO0FBQ0k7O0FBRUE7QUFDSTtBQUNJO0FBQ0E7QUFGRTtBQURFOztBQU9aO0FBQ0E7QUFDSTtBQUNIOztBQUVEOzs7QUFHQTtBQUNJO0FBQ0E7QUFDTDs7QUFJSztBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7OztBQUdBO0FBQ0k7QUFDSDs7QUFFRDs7O0FBR0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDs7O0FBR0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSDtBQWxFSTs7Ozs7Ozs7OztBQ0FUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBRks7QUFJVDtBQUNJO0FBQ0E7QUFGTztBQUlYO0FBQ0E7QUFDQTs7QUFHSjtBQUNBO0FBQ0k7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMTztBQU9YO0FBQ0k7QUFDSDtBQUNKOztBQUVEOzs7QUFHQTs7QUFHSTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDQTs7O0FBR0E7QUFDSTtBQUNBO0FBQ0Q7QUFDQztBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0g7O0FBRUQ7OztBQUdBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7OztBQUlBO0FBQ0g7O0FBRUQ7Ozs7O0FBS0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDs7Ozs7QUFLQTtBQUNJO0FBQ0g7O0FBRUQ7OztBQUdBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUVHO0FBQ0E7QUFDSDtBQUNKOztBQUVEOztBQUVBOzs7QUFHQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDRTtBQUNGO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRztBQUNIO0FBSUo7O0FBSUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNIOztBQUVEOzs7QUFHQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNIO0FBdk9JOzs7Ozs7Ozs7O0FDSlQ7Ozs7Ozs7Ozs7QUNDQTtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFIUTs7QUFNWjtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFHRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUF0SEs7Ozs7Ozs7Ozs7QUNGVDtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFKUTs7QUFPWjtBQUNBOztBQUlBO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0k7QUFDSTtBQUE2QjtBQUFvRDtBQUFnQjtBQUFvRDtBQUN4SjtBQUNKO0FBQ0Q7QUFDSTtBQUNJO0FBQTZCO0FBQW9EO0FBQWdCO0FBQW9EO0FBQ3hKO0FBQ0o7O0FBRUQ7QUFDTTtBQUVMOztBQUVFO0FBQ0Y7QUFHSjs7QUFFRDs7O0FBR0E7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDs7QUFFSTtBQUNIOztBQUVEO0FBQ0k7QUFDSDtBQWpFSTs7Ozs7Ozs7OztBQ0FUO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWpDUTs7QUFvQ1o7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVLO0FBQ0o7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNHO0FBQ0g7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDRDtBQUNDO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNBO0FBQ0Q7QUFDSDtBQUNKOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUlBOztBQUtBO0FBQ0s7QUFDSjs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7O0FBSUE7QUFDSTtBQUVIOztBQUVEOztBQUlBOztBQUlBOztBQUlBO0FBQ0k7QUFDQTtBQUNIO0FBN0lJOzs7Ozs7Ozs7O0FDRFQ7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFGUTs7QUFLWjtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQWpCSTs7Ozs7Ozs7OztBQ0FUOztBQUVBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFGUTs7QUFLWjtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBckJLOzs7Ozs7Ozs7O0FDRlQ7QUFDSTs7QUFFQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBSEk7QUFEQTs7QUFRWjtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFBbUI7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUFrQjtBQUNkO0FBQ0g7QUFBUTtBQUNMO0FBQ0g7QUFDRDtBQUFhO0FBQ1Q7QUFDSDtBQUNEO0FBQ0E7QUFDSDtBQUNKO0FBQ0o7O0FBckNJOzs7Ozs7Ozs7O0FDQVQ7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUhROztBQU1aO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7O0FBSUE7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBRUo7QUFDSTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQXBDSTs7Ozs7Ozs7OztBQ0FUO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFIUTs7QUFNWjtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNBOztBQUlBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUVKOztBQUVJO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQXBDSTs7Ozs7Ozs7OztBQ0FUO0FBQ0k7O0FBRUE7O0FBSUE7QUFDQTs7QUFJQTtBQUNJO0FBQ0c7QUFDTjs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNDO0FBQ0o7O0FBRUQ7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUVEO0FBQ007QUFDRjtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0U7QUFFTDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIO0FBOUVJOzs7Ozs7Ozs7O0FDQVQ7QUFDSTs7QUFFQTtBQUNJO0FBRFE7O0FBSVo7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQWRJOzs7Ozs7Ozs7O0FDQVQ7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTs7QUFIUTs7QUFPWjtBQUNBO0FBQ0k7QUFDQTs7QUFFUTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDSDtBQUlSO0FBQ0o7QUFDQTs7O0FBR0Q7QUFDSTtBQUNDO0FBQ0o7O0FBekNJOzs7Ozs7Ozs7O0FDQVQ7QUFDSTs7QUFFQTtBQUNJO0FBRFE7O0FBSVo7QUFDQTtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNIO0FBRUc7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7QUE5RUk7Ozs7Ozs7Ozs7QUNBVDtBQUNJOztBQUVBOztBQUlBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0g7QUFDSjtBQUNKO0FBN0JJOzs7Ozs7Ozs7O0FDQVQ7QUFDQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxROztBQVFaO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDSDtBQUNHO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNKO0FBQ0c7QUFDQTtBQUNIO0FBQ0o7QUFDRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNBOztBQUVBO0FBcEVLOzs7Ozs7Ozs7O0FDRFQ7QUFDQTtBQUNJOztBQUVBO0FBQ0k7QUFDSTtBQUNBO0FBRkU7QUFJTjtBQUNJO0FBQ0E7QUFGVztBQUlmO0FBQ0k7QUFDQTtBQUZhO0FBSWpCO0FBQ0k7QUFDQTtBQUZFO0FBYkU7O0FBbUJaO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRztBQUNIO0FBRUo7O0FBR0Q7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUVIO0FBQ0c7QUFDSDtBQUVKOztBQUVEO0FBQ0k7QUFDSTs7QUFFQTtBQUNBO0FBRUg7QUFDRztBQUNIO0FBRUo7O0FBRUQ7QUFDSTtBQUNJOztBQUVBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUVIO0FBQ0Q7QUFDQTtBQUVIO0FBQ0c7QUFDSDtBQUlKO0FBQ0Q7QUFDSTs7QUFFSTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0c7QUFDSTtBQUNBO0FBQ0g7QUFDSjtBQUNEO0FBRUg7QUFDRztBQUNIO0FBRUo7O0FBRUQ7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUVIO0FBQ0c7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTs7QUFFSTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBRUo7QUFDRztBQUNBO0FBR0g7QUFDSjtBQUNEOztBQUVJO0FBQ0g7QUFFSjtBQUNEO0FBQ0k7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDRztBQUNIO0FBRUo7QUFDRDtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSTs7QUFFSTtBQUNBO0FBQ0g7QUFDSjtBQUNEO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUg7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTs7QUFFSjtBQUNJO0FBakNSO0FBbUNBO0FBQ0E7QUFDQTtBQUVIO0FBRUo7QUFDSjtBQUNEO0FBQ0k7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFSDtBQUNHOztBQUVBO0FBRUg7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFHSjtBQUNKO0FBQ0o7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0k7QUFDSTtBQUNIO0FBQ0c7QUFDSDtBQUVKO0FBQ0Q7QUFDSTtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBQ0o7QUFDRDtBQUNKO0FBQ0k7QUFDSTtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBRUo7QUFDRDtBQUNJO0FBQ0k7QUFDSDtBQUNHO0FBQ0g7QUFDSjtBQUNEO0FBQ0o7QUFDSTtBQUNJO0FBQ0k7QUFDSDtBQUNHO0FBQ0g7QUFFSjtBQUNEO0FBQ0k7QUFDSTtBQUNIO0FBQ0c7QUFDSDtBQUNKO0FBQ0Q7QUFuRFI7QUFxREE7QUFDQTtBQUdIO0FBSUo7QUFDSjtBQUNEO0FBQ0k7QUFDSDtBQUNKO0FBQ0c7QUFDSDtBQUlKO0FBQ0Q7O0FBRUk7QUFFSDtBQUNEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQXZiSTs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDRFQ7QUFDQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVhROztBQWNaO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQWxFSTs7Ozs7Ozs7OztBQ0RUOzs7Ozs7Ozs7OztBQVdBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUnVCOztBQVczQjtBQUNJOztBQUVBO0FBQ0k7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQVBROztBQVVaO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDRztBQUNIO0FBQ0Q7QUFDRjs7QUFJRDs7OztBQUlBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7OztBQUdBO0FBQ0k7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEOzs7QUFHQTtBQUNJO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZPO0FBWVg7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7OztBQUdBOztBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7Ozs7QUFJQTtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEOzs7O0FBSUE7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNIOztBQUVEOzs7Ozs7QUFNQTtBQUNJO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFDSjtBQUNJO0FBZFI7QUFnQkE7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTs7QUFFQTtBQWxLSzs7Ozs7Ozs7OztBQ3ZCVDtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFWUTs7QUFhWjtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7Ozs7QUFJQTtBQUNJO0FBQ0g7O0FBRUQ7Ozs7QUFJQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNBOztBQUVBO0FBMURLOzs7Ozs7Ozs7O0FDQVQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUnVCO0FBVTNCO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUZNO0FBSVY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFaUTs7QUFlWjtBQUNBO0FBQ0k7QUFDSDs7QUFFRDs7Ozs7QUFLQTtBQUNJO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNIOztBQUVEOzs7QUFHQTtBQUNJO0FBQ0E7QUFDSDs7QUFFRDs7O0FBR0E7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0o7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQWhCUjtBQWtCQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNKO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFDQTtBQWJSO0FBZUg7O0FBRUQ7Ozs7O0FBS0E7QUFDSTtBQUVJO0FBQ0E7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQUVEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNIO0FBQ0o7QUEzSUk7Ozs7Ozs7Ozs7QUNWVDtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFWUTs7QUFhWjtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNBOztBQXRCSzs7Ozs7Ozs7OztBQ0FUO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZROztBQWFaO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7O0FBdEJLOzs7Ozs7Ozs7O0FDQVI7QUFDRDtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTVDUTs7QUErQ1o7QUFDQTtBQUNLOztBQUVEO0FBQ0k7QUFDSDtBQUNKOztBQUVEO0FBQ0k7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDSDs7QUFFRDtBQUNJOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDSDtBQUNKOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7O0FBSUE7O0FBSUE7O0FBSUE7O0FBSUE7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0g7O0FBRUQ7O0FBSUE7O0FBSUE7O0FBSUE7O0FBSUE7O0FBSUE7O0FBSUE7O0FBSUE7QUFDSTtBQUNIO0FBN05JOzs7Ozs7Ozs7O0FDRFQ7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUhROztBQU1aO0FBQ0E7QUFDSTtBQUNIOztBQUVEO0FBQ0E7O0FBSUE7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBRUo7QUFDSTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQXBDSTs7Ozs7Ozs7OztBQ0FUO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFIUTs7QUFNWjtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNBOztBQUlBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUVKO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSDs7QUFwQ0k7Ozs7Ozs7Ozs7QUNBVDtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFWUTs7QUFhWjtBQUNBO0FBQ0k7QUFDSDs7QUFFRDtBQUNBOztBQXRCSzs7Ozs7Ozs7OztBQ0FUO0FBQ0k7O0FBRUE7O0FBSUE7QUFDQTs7QUFJQTtBQUNJO0FBQ0U7QUFDTDs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNNO0FBQ0Y7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDSDs7QUFFRDtBQUNNO0FBQ0Y7QUFDSDs7QUFFRDtBQUNNO0FBQ0Y7QUFDSDtBQUNBO0FBQ0U7QUFDRjs7QUFyREk7Ozs7Ozs7Ozs7QUNDVDtBQUNJOztBQUVBO0FBQ0k7QUFEUTs7QUFJWjtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUVHO0FBQ0g7QUFFSjs7QUFFRDtBQUNJO0FBQ0g7QUF0Qkk7Ozs7Ozs7Ozs7QUNEVDtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBRlE7O0FBS1o7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUF0Qkk7Ozs7Ozs7Ozs7O0FDRFQ7Ozs7Ozs7Ozs7O0FBV0E7QUFDQTs7QUFFQzs7QUFFQTs7QUFFQztBQUNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUVBO0FBQ0M7QUFDQTtBQUNDO0FBQ0E7QUFDRDtBQUNEO0FBQ0M7QUFDQTtBQUNEO0FBbEJGO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQTRCRTtBQUFBO0FBQ0E7QUFDQztBQUNBO0FBQ0Q7QUFDQTtBQWpDRjtBQW1DRTtBQUFBO0FBQUE7QUFFQTtBQUNDO0FBQ0E7QUFDQTtBQUNEO0FBQ0E7QUExQ0Y7QUFBQTtBQTRDd0I7QUFDdEI7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBbERGOztBQXFEQTtBQUNBO0FBQ0E7O0FBRUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQXNCQTtBQUNDO0FBQ0E7QUFDQTs7QUFFRDtBQUNDO0FBQ0E7O0FBRUQ7QUFDQztBQUNBO0FBQ0E7O0FBRUQ7QUFDQztBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0M7QUFDQTtBQUNEO0FBQ0E7QUFBNEI7QUFDM0I7QUFDQTtBQUNEO0FBQ0E7QUFDQztBQUNBO0FBQ0E7QUFDQTtBQUNEO0FBQ0M7QUFDQTtBQUNDO0FBQ0E7QUFDQztBQUNBO0FBQ0Q7QUFDRDtBQUNDO0FBQ0E7QUFDQztBQUNBO0FBQ0E7QUFDRDtBQUNEO0FBQ0E7QUFDRDtBQUNBOztBQUVEO0FBQ0M7QUFDQTtBQUNBO0FBQ0E7O0FBRUQ7QUFDQztBQUNBO0FBQ0E7QUFDQTs7QUFFRDtBQUNDO0FBQ0E7O0FBRUQ7QUFDQztBQUNBO0FBQ0M7QUFDQTtBQUNEO0FBQ0E7O0FBRUQ7QUFDQztBQUNBO0FBQ0M7QUFDQTtBQUNEO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQztBQUNBO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNDO0FBQ0E7QUFDQztBQUNBO0FBQ0Q7QUFDQTtBQUNEO0FBQ0E7QUFDQTs7QUFFRDtBQUNDO0FBQ0E7QUFDQztBQUNBO0FBQ0Q7QUFDQztBQUNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQztBQUNDO0FBQ0E7QUFDRDtBQUNBO0FBQ0M7QUFDQztBQUNBO0FBQ0E7QUFDQTtBQUNEO0FBQ0Q7QUFDQTtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDRDs7QUFFRDs7QUFFQTtBQUNBO0FBQ0M7QUFDQTtBQUNBO0FBQ0E7QUFDQztBQUNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Q7QUFDQTtBQUNEOztBQUVEO0FBQ0E7O0FBRUQ7QUFDQztBQUNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0M7QUFDQTtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Q7QUFDQTs7QUFFRDtBQUNDO0FBQ0E7QUFDQTtBQUNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDRDtBQUNBOztBQUVEO0FBQ0M7QUFDQTs7QUFFRDtBQUNDO0FBQ0E7O0FBRUQ7QUFDQztBQUNBOztBQUVEO0FBQ0M7QUFDQTtBQUNBOztBQUVEO0FBQ0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVEO0FBQ0M7QUFDQTtBQUNBOztBQUVEO0FBQ0M7QUFDQTs7QUFFRDtBQUNDO0FBQ0E7QUFDQTtBQUNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0M7QUFDQztBQUNBO0FBQ0Q7QUFDRDtBQUNEO0FBQ0M7QUFDQTtBQUNEO0FBQ0E7QUFBcUc7QUFDcEc7QUFDQTtBQUNDO0FBQ0M7QUFDQTtBQUNEO0FBQ0E7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Q7QUFDQTs7QUFFRDtBQUNDO0FBQ0E7O0FBRUQ7QUFDQztBQUNBOztBQUVEO0FBQ0M7QUFDQTs7QUFFRDtBQUNDO0FBQ0E7O0FBRUQ7QUFDQztBQUNDO0FBQ0E7QUFDRDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFNQTtBQUFpRDtBQUNoRDtBQUNBO0FBQ0M7QUFDQTtBQUNBO0FBQ0E7QUFDQztBQUNBO0FBQ0M7QUFDQTtBQUNEO0FBQ0Q7QUFDRDtBQUNBO0FBRUE7QUFBOEI7QUFDOUI7QUFDQTtBQUNDO0FBQ0E7QUFDQTtBQUNEO0FBQ0M7QUFDQTtBQUEyRDtBQUMxRDtBQUNBO0FBQ0E7QUFBbUQ7QUFDbkQ7QUFDQTtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQWdDO0FBQy9CO0FBQ0E7QUFDQztBQUNDO0FBQ0E7QUFDRDtBQUNBO0FBQ0Q7QUFDRDtBQUNBO0FBQ0M7QUFDQTtBQUNEO0FBRUQ7O0FBRUE7QUFDQztBQUNDO0FBQ0E7QUFDQztBQUNDO0FBQ0E7QUFDRDtBQUNBO0FBQ0Q7QUFDQTtBQUNBO0FBQ0M7QUFDQztBQUNBO0FBQ0Q7QUFDQTtBQUNEO0FBQ0Q7QUFDQztBQUNBO0FBQ0E7QUFDRDs7QUFFRDtBQUNBO0FBQ0Q7QUFDQztBQUNBO0FBQ0E7QUFDQTs7QUFFRDtBQUNDO0FBQ0E7O0FBRUQ7QUFDQztBQUNBOztBQUVEO0FBQ0E7QUFDQztBQUNBO0FBQ0M7QUFDQTtBQUErRDtBQUM5RDtBQUNBO0FBQ0E7QUFDQztBQUNBO0FBQ0Q7QUFDQztBQUNBO0FBQ0E7QUFDQTtBQUNEO0FBQ0Q7QUFDQTtBQUNEO0FBQ0E7QUFDQTtBQUNDO0FBQ0E7QUFBK0Q7QUFDOUQ7QUFDQTtBQUNBO0FBQ0M7QUFDQTtBQUNDO0FBQ0E7QUFDQTtBQUNEO0FBQ0E7QUFDQTtBQUNEO0FBQ0M7QUFDQTtBQUNBO0FBQ0E7QUFDRDtBQUNEO0FBQ0E7QUFDRDs7QUFFRDtBQUNDO0FBQTBCO0FBQ3pCO0FBQ0E7QUFDRDtBQUNBOztBQUVEO0FBQWlLO0FBQ2hLO0FBQ0M7QUFBMEI7QUFDekI7QUFDQTtBQUNEO0FBQ0M7QUFDQTtBQUNEO0FBQ0E7QUFDRDtBQUNDO0FBQ0E7QUFDRDtBQUNEOztBQUVEO0FBQ0M7QUFDQTtBQUNDO0FBQ0M7QUFDQTtBQUNEO0FBQ0E7QUFDRDtBQUNBOztBQUVEO0FBQ0M7QUFDQTtBQUFBO0FBQUE7QUFHQTtBQUNDO0FBQ0M7QUFDQTtBQUNBO0FBQ0M7QUFDQTtBQUNEO0FBQ0E7QUFDQztBQUNBO0FBQ0Q7QUFDQztBQUNBO0FBQ0E7QUFDRDtBQUNEO0FBQ0E7QUFDRDtBQUNBOztBQUVEO0FBQ0M7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0M7QUFDQTtBQUNEO0FBQ0E7QUFDQTtBQUNDO0FBQ0M7QUFDQTtBQUNEO0FBQ0Q7QUFDQztBQUNBO0FBQ0Q7QUFDQTs7QUFFRDtBQUNDO0FBQ0E7O0FBRUQ7QUFDQztBQUNBO0FBQ0M7QUFDQztBQUNBO0FBQ0Q7QUFDQTtBQUNEO0FBQ0E7O0FBRUQ7QUFDQztBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0M7QUFDQztBQUNBO0FBQ0Q7QUFDQTtBQUNEO0FBQ0M7QUFDQztBQUNDO0FBQ0E7QUFDRDtBQUNEO0FBQ0Q7QUFDQTs7QUFFRDtBQUNDO0FBQ0M7QUFDQTtBQUNEO0FBQUE7QUFBQTtBQUdBO0FBQ0M7QUFDQztBQUNBO0FBQ0Q7QUFDRDtBQUNBOztBQUVEO0FBQ0M7QUFBQTtBQUVBO0FBQ0E7QUFDQztBQUNBO0FBQ0Q7QUFDQztBQUNBO0FBQ0Q7QUFDQTs7QUFFRDtBQUNDO0FBQ0E7QUFDQztBQUNBO0FBQ0E7QUFDRDtBQUNBOztBQUVEO0FBQ0M7QUFDQztBQUNBO0FBQ0M7QUFDQTtBQUNBO0FBQ0Q7QUFDRDtBQUNBOztBQUVEO0FBQ0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFRDtBQUNDO0FBQ0M7QUFDQztBQUNBO0FBQ0Q7QUFDQTtBQUNEO0FBQ0M7QUFDQTtBQUNEO0FBQ0E7O0FBRUQ7QUFDQztBQUNDO0FBQ0M7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQ0M7QUFDQTtBQUNDO0FBQ0E7QUFDRDtBQUE0RTtBQUMzRTtBQUNBO0FBQ0E7QUFDQTtBQUNEO0FBQThDO0FBQzdDO0FBQ0E7QUFDQztBQUNBO0FBQ0Q7QUFDQTtBQUNBO0FBQ0Q7QUFDQTtBQUNDO0FBQ0E7QUFDRDtBQUNBO0FBQ0Q7QUFDQTtBQUNBO0FBQ0Q7QUFDQTtBQUNEO0FBQ0E7O0FBRUQ7QUFDQztBQUFjO0FBQ2I7QUFBQTtBQUVBO0FBQ0M7QUFDQztBQUNBO0FBQ0Q7QUFDQTtBQUNEO0FBQ0Q7QUFDQTs7QUFFRDtBQUNDO0FBQ0E7QUFDQztBQUNBO0FBQ0Q7QUFDQTs7QUFFRDtBQUNDO0FBQ0E7O0FBRUQ7QUFFQTtBQUdEO0FBQTZCO0FBQTRCOztBQUUxRDtBQUNDO0FBQ0E7O0FBQ0E7QUFDQztBQUNBO0FBQ0Q7QUFBbUQ7QUFDbEQ7QUFDQTtBQUE4RDtBQUM5RDtBQUNBO0FBQ0E7QUFDRDs7Ozs7Ozs7Ozs7O0FDNXdCRDtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUZROztBQUtaO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0k7QUFDSTtBQUNJO0FBQ0g7QUFFTztBQUNIO0FBQ1I7QUFDSjtBQUNKO0FBQ0o7QUFDRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFHSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFFSDtBQUNEO0FBQ0k7QUFFSDtBQWxESTs7Ozs7Ozs7Ozs7OztBQ0FUOzs7Ozs7Ozs7OztBQVdBOztBQUVFOztBQUNBO0FBQUE7QUFBQTtBQUdBO0FBQ0M7QUFDQTtBQUNEO0FBQ0U7QUFBQTtBQUFBO0FBRUE7QUFDQztBQUNBO0FBQ0Q7QUFDQTtBQVBGO0FBQUE7QUFBQTtBQVV3QjtBQUN0QjtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFoQkY7QUFBQTtBQWtCMEI7QUFDeEI7QUFBQTtBQUVBO0FBQ0M7QUFDQTtBQUNEO0FBeEJGO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7O0FBNEJDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFpQ0E7QUFDQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUdBO0FBQ0M7QUFDQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Q7QUFDRDtBQUNDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0M7QUFDQTtBQUNBO0FBQWdFO0FBQy9EO0FBQThHO0FBQVk7QUFDMUg7QUFBc0I7QUFDdEI7QUFDQztBQUNBO0FBQ0M7QUFDQTtBQUNEO0FBQ0E7QUFDQTtBQUNEO0FBQ0Q7QUFDRDtBQUNDO0FBQ0E7QUFDRDtBQUNEO0FBQ0Q7QUFDQTs7O0FBRUQ7QUFDQTtBQUNDO0FBQ0E7OztBQUVEO0FBQ0E7QUFDQztBQUNBO0FBQThCO0FBQWM7QUFDNUM7QUFDQTs7QUFFRjs7QUFJRjs7Ozs7QUFLRTtBQUFBO0FBQUE7QUFHRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEY7QUFBQTtBQVVFO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSUE7QUFDQztBQUNBO0FBQ0E7QUFDQTtBQUNDO0FBQ0E7QUFDQTtBQUNEO0FBQ0Q7O0FBRUY7QUFDQTtBQUNBO0FBQ0M7QUFDQztBQUNBO0FBQ0E7QUFDRDtBQUFBO0FBQUE7QUFHQTtBQUNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDRDtBQUNBOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNEO0FBQ0E7OztBQUdGOzs7OztBQUtFO0FBQ0M7QUFDQTtBQUNBO0FBQ0Q7O0FBRUE7QUFDQztBQUNBO0FBQUE7QUFBQTtBQUFBO0FBR0E7QUFDQztBQUNBO0FBQ0Q7QUFDQztBQUNBO0FBQ0Q7QUFDQTtBQUNDO0FBQ0E7QUFDQztBQUNBO0FBQ0E7QUFDQTtBQUNEO0FBQ0Q7QUFDQTs7QUFFRDtBQUNDO0FBQUE7QUFDQTtBQUNDO0FBQ0E7QUFDQztBQUNDO0FBQ0E7QUFDQTtBQUNEO0FBQ0Q7QUFDRDs7QUFFRDtBQUNDO0FBQUE7QUFBQTtBQUFBO0FBRUE7QUFDQztBQUNBO0FBQ0M7QUFDQTtBQUNEO0FBQ0E7QUFDQztBQUNBO0FBQ0M7QUFDQztBQUNBO0FBQ0E7QUFDQTtBQUNEO0FBQ0Q7QUFDRDtBQUNEOztBQUdIOzs7OztBQUtHO0FBQUE7QUFBQTtBQUVtQztBQUE2QjtBQUZoRTs7QUFLRDtBQUNBO0FBQ0E7QUFDQTtBQUNDO0FBQ0E7QUFDQTs7QUFFRDtBQUNDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBTUM7QUFORDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBUUU7QUFBQTtBQUFBO0FBRUE7QUFDQztBQUNBO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQztBQUNBO0FBQ0E7QUFDQTtBQUNEO0FBQXVCO0FBQ3RCO0FBQ0E7QUFDRDtBQUNDO0FBQ0E7QUFDRDs7QUFFRjtBQUNBO0FBQ0E7QUFDQztBQUNBOztBQUVEO0FBQ0M7QUFDQTtBQUNBOztBQUVEO0FBQ0M7QUFDQztBQUNBO0FBQ0Q7QUFDQztBQUNBO0FBQ0E7QUFDQTtBQUNEO0FBQ0E7QUFDQTtBQUNDO0FBQ0E7QUFDRDs7QUFFRDtBQUNDO0FBQ0M7QUFDQTtBQUNBO0FBQ0E7QUFBOEI7QUFDOUI7QUFDQTtBQUNEO0FBQWdGO0FBQWtFO0FBQ2xKO0FBQ0M7QUFDQTtBQUNEO0FBQ0E7O0FBRUQ7QUFDQztBQUNDO0FBQ0E7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVEO0FBQ0M7QUFDQztBQUNBO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDRDs7QUFFQTtBQUNBO0FBQ0M7QUFDQztBQUNBO0FBQ0Q7QUFDRDs7QUFFRDtBQUNBOztBQUdGOzs7OztBQUtFO0FBQ0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQztBQUNBO0FBQ0Q7QUFBc0I7QUFDckI7QUFDQTs7QUFFRDtBQUNBOztBQUVBO0FBQ0M7QUFDQTtBQUNEOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBO0FBQ0E7QUFDRTtBQUNDO0FBQ0E7QUFDRDtBQUNBO0FBQ0Y7O0FBR0E7QUFDQztBQUNDO0FBQ0E7QUFDRDtBQUNBOztBQUVEO0FBQ0M7QUFDQztBQUNBO0FBQ0Q7QUFDQTs7QUFFRDtBQUNDO0FBQ0M7QUFDQTtBQUNEO0FBQ0E7O0FBRUQ7QUFDQztBQUNBOztBQUVEO0FBQ0M7QUFDQTs7QUFFRDtBQUNDO0FBQ0M7QUFDQTtBQUNEO0FBQ0E7O0FBRUQ7QUFDQztBQUNBOztBQUVEO0FBQ0M7QUFDQTtBQUNBO0FBQ0E7QUFDQztBQUNBO0FBQ0Q7QUFDQTs7QUFFRDtBQUNDO0FBQUE7QUFDQztBQUREO0FBR0E7QUFDQTs7QUFFRDtBQUNDO0FBQ0M7QUFDQTtBQUNEO0FBQ0E7QUFDQTtBQUNDO0FBQ0M7QUFDQTtBQUNBO0FBQ0E7QUFDRDtBQUNEO0FBQ0E7O0FBR0Q7QUFDQztBQUNBOztBQUVEO0FBQ0M7QUFDQTtBQUNBOztBQUVEO0FBQ0M7QUFDQTtBQUNDO0FBQ0E7QUFDQTtBQUNEO0FBQ0E7O0FBRUQ7QUFDQztBQUFBO0FBRUE7QUFDQztBQUNDO0FBQ0E7QUFDRDtBQUNEO0FBQ0E7O0FBRUQ7QUFDQztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBS0E7QUFDQztBQUFRO0FBQ1I7QUFBUTtBQUNSO0FBQVE7QUFDUjtBQUFTO0FBSlY7QUFNQTs7QUFFSDs7QUFFRTtBQUNDO0FBQ0M7QUFDQTtBQUNDO0FBQ0E7QUFDRDtBQUNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNEO0FBQ0M7QUFDQTtBQUNEO0FBQ0Q7QUFDQTs7QUFFRDtBQUNDO0FBQ0M7QUFDQTtBQUNEO0FBQ0M7QUFDQTtBQUNEO0FBQ0E7QUFDQTs7QUFFRDtBQUNDO0FBQ0M7QUFDQTtBQUNBO0FBQ0Q7QUFDQTtBQUNBO0FBQ0M7QUFDQTtBQUNEO0FBQ0E7O0FBRUQ7QUFDQztBQUNBO0FBQ0E7O0FBRUQ7QUFDQztBQUNDO0FBQ0E7QUFDRDtBQUNDO0FBQ0E7QUFDRDtBQUNBOztBQUVEO0FBQ0M7QUFDQztBQUNBO0FBQ0Q7QUFDQztBQUNBO0FBQ0Q7QUFDQztBQUNDO0FBQ0E7QUFDRDtBQUNDO0FBQ0M7QUFDQTtBQUNEO0FBQUE7QUFFQTtBQUNDO0FBQ0E7QUFDRDtBQUNBO0FBQWtCO0FBQ2pCO0FBQ0E7QUFDRDtBQUNBO0FBQ0M7QUFDQztBQUNDO0FBQ0E7QUFDRDtBQUNBO0FBQ0Q7QUFDRDtBQUNEO0FBQ0M7QUFDQTtBQUNEO0FBQ0M7QUFDQztBQUNBO0FBQ0Q7QUFDQTtBQUEwQjtBQUN6QjtBQUNBO0FBQ0Q7QUFDRDtBQUNEO0FBQ0E7O0FBRUQ7QUFDQztBQUNBO0FBQ0E7O0FBRUQ7QUFDQztBQUNDO0FBQ0E7QUFDRDtBQUNDO0FBQ0E7QUFDQztBQUNBO0FBQ0Q7QUFDRDtBQUNBOztBQUVEO0FBQ0M7QUFDQTs7QUFFRDtBQUNDO0FBQ0M7QUFDQTtBQUNEO0FBQ0E7QUFDQztBQUFBO0FBRUE7QUFDQTtBQUNEO0FBQ0E7QUFDQTs7QUFFRDtBQUNDO0FBQ0M7QUFDQTtBQUNEO0FBQ0M7QUFDQTtBQUNBO0FBQ0Q7QUFDQTs7QUFFRDtBQUNDO0FBQ0M7QUFDQTtBQUNEO0FBQUE7QUFBQTtBQUVBO0FBQ0M7QUFDQztBQUNBO0FBQ0Q7QUFDQTtBQUNBO0FBQ0M7QUFDQTtBQUNBO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQztBQUNBO0FBQ0E7QUFDRDtBQUNEO0FBQ0M7QUFDQTtBQUNEO0FBQ0E7O0FBR0g7Ozs7O0FBS0U7QUFDQztBQUNBO0FBQ0E7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNDO0FBQ0E7QUFDQTtBQUFtRDtBQUNsRDtBQUNBO0FBQ0Q7QUFDQztBQUNBO0FBQ0Q7QUFDQTtBQUNDO0FBQ0E7QUFDRDtBQUNBO0FBQ0M7QUFDQTtBQUNDO0FBQ0E7QUFDRDtBQUNEO0FBQ0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Q7QUFDQztBQUNBO0FBQ0E7QUFDQTtBQUNEO0FBQ0E7QUFDQTtBQUNDO0FBQ0E7QUFDRDtBQUNBOztBQUVEO0FBQ0M7QUFDQztBQUNDO0FBQ0E7O0FBRUQ7QUFDQztBQUNBO0FBQ0E7QUFDQTtBQUNEO0FBQ0M7QUFDQTtBQUNBO0FBQ0E7QUFDRDtBQUNBO0FBQ0M7QUFDQTs7QUFFRDtBQUNDO0FBQ0E7QUFDRDtBQUNEO0FBQ0E7O0FBRUQ7QUFDQztBQUFBO0FBRUE7QUFDQTtBQUNDO0FBQ0E7QUFDQztBQUNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Q7QUFDRDtBQUNBO0FBQ0Q7O0FBRUQ7QUFDQztBQUNDO0FBQ0E7QUFDRDtBQUNBOztBQUVIOzs7OztBQUtFO0FBQ0U7QUFDQTs7QUFFQTtBQUNDO0FBQ0E7O0FBRUQ7O0FBRUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFJQTs7QUFFQTtBQUNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0M7QUFDQTtBQUNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQztBQUNBO0FBQ0Q7QUFDQTtBQUF3STtBQUN4STtBQUNBO0FBQ0E7QUFDQTtBQUNEO0FBQ0E7QUFDQztBQUNBO0FBQ0Q7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNDO0FBQ0E7QUFDRDtBQUNEO0FBQ0M7QUFDQTtBQUNBO0FBQ0Q7QUFyREY7QUF1REU7QUFDQTtBQXhERjtBQTBERTtBQUFBO0FBRUE7QUFDQztBQUFrTztBQUNqTztBQUNBO0FBQ0E7QUFDRDtBQUNEO0FBQ0E7O0FBRUY7QUFDQTtBQUNBOztBQUVGOztBQUVFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQztBQUNBOztBQUVEO0FBQ0M7QUFDQTtBQUNDO0FBQ0E7QUFDQTtBQUNEO0FBQ0E7O0FBRUQ7QUFBQTtBQUFBOztBQUdDO0FBQ0E7QUFDQztBQUFBO0FBQUE7QUFHQTtBQUNDO0FBQ0E7QUFDQztBQUNBO0FBQW1EO0FBQ25EO0FBQ0E7QUFDRDtBQUNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNEO0FBQ0E7QUFDRDs7QUFDRDtBQUNBO0FBQ0M7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQztBQUNBO0FBQ0E7QUFDQTtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0M7QUFDQTtBQUNBO0FBQ0E7QUFDRDtBQUNBO0FBQ0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFhO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDRDtBQUNDO0FBQ0E7QUFDQTtBQUNDO0FBQ0E7QUFDQTtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDRDtBQUNBO0FBQ0Q7QUFDQTtBQUNDO0FBQ0E7QUFDRDtBQUNBO0FBQ0E7O0FBQ0Q7QUFDQTtBQUNDO0FBQ0M7QUFDQTtBQUNEO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTs7QUFPQTtBQUNDO0FBQ0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQztBQUNBO0FBQ0Q7QUFDRDtBQUNEO0FBQVk7QUFDWDtBQUNDO0FBQ0E7QUFDRDtBQUNBO0FBQ0E7QUFDRDtBQWpIRjtBQUFBO0FBbUhDO0FBbkhEO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUE0SEU7QUFBQTtBQUVBO0FBQ0E7QUFDQztBQUNBO0FBQ0M7QUFDQTtBQUNBO0FBQ0Q7QUFDRDtBQUNBOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0U7QUFDQTtBQUEwQjtBQUN6QjtBQUNBO0FBQ0Q7QUFDQTtBQUNBO0FBQ0M7QUFDQTtBQUNEO0FBQXFDO0FBQ3BDO0FBQ0E7QUFDQztBQUNBO0FBQ0E7QUFDQztBQUNDO0FBQ0E7QUFDRDtBQUNEO0FBQ0M7QUFDQTtBQUNEO0FBQ0Q7QUFDQTtBQUNBO0FBQ0M7QUFDQztBQUNBO0FBQ0Q7QUFDQztBQUNBO0FBQ0Q7QUFDRDtBQUNEOztBQUVGOztBQUVBO0FBQ0U7QUFBQTtBQUFBO0FBQ0E7QUFDQztBQUNBO0FBQ0Q7QUFDQztBQUNBO0FBQ0E7QUFDQztBQUNDO0FBQ0M7QUFDQTtBQUNEO0FBQ0Q7QUFDRDtBQUNEO0FBQ0E7QUFqQkY7QUFtQkU7QUFBQTtBQUFBO0FBQ0E7QUFDQztBQUNBO0FBQ0Q7QUFDQTtBQUNDO0FBQ0E7QUFDRDtBQUNBO0FBNUJGO0FBOEJFO0FBQ0E7QUFDQztBQUNBO0FBQ0M7QUFDQztBQUNDO0FBQ0M7QUFDQTtBQUNEO0FBQ0Q7QUFDQTtBQUNBO0FBQ0Q7QUFDRDtBQUNBO0FBQ0Q7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBS0E7QUFDQTtBQUNDO0FBQ0M7QUFDQTtBQUNBO0FBQ0E7QUFDQztBQUNBO0FBQ0Q7QUFDQTtBQUNBO0FBQ0Q7O0FBRUQ7QUFDQTtBQUNDO0FBQ0E7QUFDQztBQUNBO0FBQ0Q7QUFDQztBQUNDO0FBQ0E7QUFDRDtBQUF1QztBQUN0QztBQUNBO0FBQ0Q7QUFDRDtBQUNEO0FBQ0E7QUFsRkY7QUFvRkU7QUFBQTtBQUFBO0FBR0E7QUFDQztBQUNBO0FBQ0E7QUFDQztBQUNBO0FBQ0Q7QUFDQTtBQUNEO0FBQ0E7QUFDQTs7QUFHSjs7QUFFRTtBQUNDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFNQTtBQUNDO0FBQ0M7QUFDQTtBQUNBO0FBQ0Q7QUFDQTtBQUF1QjtBQUN0QjtBQUNBO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0M7QUFDQztBQUNBO0FBQ0E7QUFDQTtBQUNEO0FBQ0Q7QUFDQTtBQUNBO0FBQ0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUF3QjtBQUN2QjtBQUNBO0FBQ0Q7QUFDQTtBQUFlO0FBQ2Q7QUFDQztBQUNBO0FBQ0Q7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQztBQUNBO0FBQ0E7QUFDQztBQUNBO0FBQ0Q7QUFDQTtBQUNBO0FBQ0Q7QUFDRDtBQUNEO0FBQ0E7QUFDQztBQUNBO0FBQ0Q7QUFDQTtBQUNBOztBQUVBO0FBQ0M7QUFDQTtBQUNDO0FBQ0M7QUFDQTtBQUNEO0FBQ0Q7QUFDQTtBQUNBOztBQUVEO0FBQ0M7QUFDQTtBQUNEO0FBQXNFO0FBQ3JFO0FBQ0E7QUFDRDtBQUNDO0FBQ0E7QUFDQztBQUNBO0FBQ0E7QUFDQTtBQUNEO0FBQ0Q7QUFDQTtBQUNBOztBQUVEO0FBQ0M7QUFDQTtBQUNDO0FBQ0E7O0FBRUQ7QUFDQztBQUNBOztBQUVEO0FBQXFJO0FBQ3BJO0FBQ0E7QUFDRDtBQUNDO0FBQ0E7QUFDQztBQUNDO0FBQ0E7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQztBQUNBO0FBQ0Q7QUFDQztBQUNBO0FBQ0Q7QUFDQztBQUNBO0FBQ0Q7QUFDQztBQUNBO0FBRUQ7QUFDQTtBQUNBO0FBQ0Q7O0FBRUQ7QUFBa0U7QUFDakU7QUFDQTtBQUNEO0FBQ0M7QUFDQTtBQUNBO0FBQ0Q7QUFBOEc7QUFDN0c7QUFDQTtBQUNEO0FBQ0E7O0FBRUQ7QUFDQztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUlBO0FBQWlEO0FBQ2hEO0FBQ0E7QUFDQTtBQUNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Q7QUFBcUU7QUFDcEU7QUFBb0Q7QUFDbkQ7QUFDQTtBQUNEO0FBQTJKO0FBQzFKO0FBQ0E7QUFDQztBQUNBO0FBQ0Q7QUFDRDtBQUNBO0FBRUQ7QUFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0M7QUFDQTtBQUNBO0FBQ0Q7QUFDQztBQUNBO0FBQXFFO0FBQ3BFO0FBQ0M7QUFDQTtBQUNEO0FBQ0E7QUFDRDtBQUNEO0FBQXNCO0FBQ3JCO0FBQ0E7QUFDRDtBQUNBOztBQUVBO0FBQ0M7QUFBQTtBQUFBO0FBQ0E7QUFDQztBQUNBO0FBQ0Q7QUFDQztBQUNBO0FBQ0Q7QUFDQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVEO0FBQ0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVEO0FBQ0E7QUFDQTtBQUNEOztBQUVEO0FBQ0M7QUFDQTtBQUNBO0FBQ0E7QUFBa0M7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNEO0FBQ0E7QUFDQztBQUNBO0FBQ0E7QUFDQTtBQUNEO0FBQ0Q7QUFBNEI7QUFDM0I7QUFDQTtBQUNEO0FBQ0M7QUFDQTtBQUNEO0FBQ0M7QUFDQztBQUNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Q7QUFDRDtBQUNDO0FBQ0E7QUFDRDtBQUNEO0FBQ0E7QUFDQztBQUNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Q7QUFDQTs7QUFFRDtBQUNDO0FBQXVEO0FBQ3REO0FBQ0E7QUFDRDtBQUNDO0FBQ0E7QUFDRDtBQUNEO0FBQXdDO0FBQ3ZDO0FBQXdFO0FBQ3ZFO0FBQ0E7QUFDRDtBQUNDO0FBQ0M7QUFDQTtBQUNEO0FBQ0E7QUFDRDtBQUNDO0FBQ0E7QUFDRDtBQUFvRjtBQUNuRjtBQUNBO0FBQ0Q7QUFDRDs7QUFFRDtBQUNDO0FBQ0M7QUFDQTtBQUNEO0FBQ0M7QUFDQTtBQUNBO0FBQ0Q7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0M7QUFDQTtBQUNDO0FBQ0M7QUFDQTtBQUNEO0FBQ0Q7QUFDQTtBQUNDO0FBQ0E7QUFDQztBQUNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDRDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFRDtBQUNDO0FBQ0E7QUFDQTtBQUNDO0FBQ0M7QUFDQztBQUNDO0FBQ0E7QUFDRDtBQUNBO0FBQ0Q7QUFDRDtBQUFrRjtBQUNqRjtBQUNBO0FBQ0Q7O0FBRUQ7QUFDQztBQUNDO0FBQTZCO0FBQzVCO0FBQ0M7QUFDQTtBQUNBO0FBQ0E7QUFDRDtBQUNBO0FBQ0Q7QUFDQztBQUNBO0FBQ0Q7QUFDQztBQUNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Q7QUFDQztBQUNBO0FBQ0Q7QUFDQTtBQUNEO0FBQ0E7QUFDRDtBQUNDO0FBQ0E7QUFDRDtBQUNEO0FBQXVDO0FBQ3RDO0FBQ0E7QUFDRDtBQUNEO0FBQ0Q7QUFDQTs7QUFFRDtBQUNDO0FBQ0M7QUFDQTtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQztBQUNBO0FBQ0E7QUFDRDtBQUNBOztBQUVEO0FBQ0M7QUFDQztBQUNBO0FBQ0Q7QUFDQztBQUFBO0FBRUE7QUFDQztBQUNBO0FBQ0M7QUFDQTtBQUNEO0FBQ0E7QUFDQTtBQUNEO0FBQ0Q7QUFDQTtBQUNDO0FBQ0E7QUFDRDtBQUNBOztBQUdIOztBQUVFO0FBQ0M7QUFDQTs7QUFFRDtBQUNDO0FBQ0E7QUFDQTtBQUNBOztBQUVEO0FBQ0M7QUFDQTtBQUNBO0FBQ0E7O0FBRUQ7QUFDQztBQUNBOztBQUVEO0FBQ0M7QUFDQTs7QUFFRDtBQUNDO0FBQXNCO0FBQVk7QUFDbEM7QUFDQTtBQUNBO0FBQ0M7QUFDQTtBQUNBO0FBQ0M7QUFDQTtBQUNEO0FBQ0E7QUFDQTtBQUNDO0FBQ0E7QUFDQTtBQUNDO0FBQ0M7QUFDQTtBQUNEO0FBQ0Q7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNDO0FBQ0M7QUFDQTtBQUNEO0FBQ0Q7QUFDRDtBQUNBOztBQUVEO0FBQ0M7QUFDQztBQUNBO0FBQ0E7QUFDRDtBQUFBO0FBRUE7QUFDQztBQUNBO0FBQ0Q7O0FBSUg7Ozs7O0FBS0U7QUFDRztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNDO0FBQUE7QUFBQTtBQUdBO0FBQ0M7QUFDQTtBQUNBO0FBQ0E7QUFDQztBQUNDO0FBQ0E7QUFDRDtBQUNEO0FBQ0Q7QUFDQztBQUNDO0FBQ0M7QUFDQTtBQUNEO0FBQ0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNEO0FBQ0Q7QUFDQTtBQUNEO0FBQ0E7O0FBRUQ7QUFDQztBQUFBO0FBRUE7QUFDQztBQUNBO0FBQXlDO0FBQ3hDO0FBQ0M7QUFDQTtBQUNBO0FBQ0E7QUFDRDtBQUNEO0FBQ0E7QUFDRDs7QUFFRDtBQUNDO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQ0M7QUFDQTtBQUNDO0FBQ0E7QUFDQTtBQUNDO0FBQ0E7QUFDRDtBQUNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Q7QUFDQztBQUNBO0FBQ0E7QUFDQTtBQUNEO0FBQ0E7QUFDRDtBQUNBO0FBQ0Q7QUFDQztBQUNDO0FBQ0E7QUFDRDtBQUNBO0FBQ0Q7QUFDQTs7QUFFRDtBQUNDO0FBQ0E7QUFDQztBQUNDO0FBQ0E7QUFDRDtBQUNEO0FBQ0E7O0FBRUQ7QUFDQTtBQUNDO0FBQWtFO0FBQXFDO0FBQ3ZHO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFNRztBQUNBO0FBQ0E7QUFSSDtBQUFBO0FBV0E7QUFDQTtBQUNBO0FBQ0M7QUFDQztBQUNBO0FBQ0Q7QUFDRDtBQUNBO0FBQ0E7QUFDQTs7QUFHRDtBQUNBO0FBQ0E7QUFDQztBQUNDO0FBQ0E7QUFDRDtBQUNDO0FBQ0M7QUFDQTtBQUNEO0FBQ0Q7O0FBRUQ7QUFFRDs7Ozs7Ozs7Ozs7O0FDajRERDtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBSFE7O0FBTVo7QUFDQTs7QUFJQTs7Ozs7OztBQU9BO0FBQ0k7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQztBQUNEO0FBQ0g7O0FBRUQ7Ozs7Ozs7QUFPQTtBQUNJOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDs7Ozs7OztBQU9BO0FBQ0k7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Q7QUFDQzs7QUFFQTs7QUFFQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDSjs7QUFFRDs7O0FBR0E7QUFDSTtBQUNBO0FBQ0g7QUE3R0k7Ozs7Ozs7Ozs7QUNBVDtBQUNBO0FBQ0E7QUFDQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFGRTtBQVZFOztBQWdCWjtBQUNBO0FBQ0k7QUFDTjtBQUNNOztBQUVBO0FBQ0k7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBZlI7QUFrQkg7O0FBRUQ7OztBQUdBO0FBQ0k7QUFDSDs7QUFFRDs7O0FBR0E7QUFDSTtBQUNEO0FBQ0M7QUFDSDtBQUNEO0FBQ0k7QUFDRjtBQUNEO0FBQ0Q7OztBQUdBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0g7O0FBRUQ7QUFDSTs7QUFFQTtBQUNIOztBQUVEOzs7QUFHQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNIOztBQUVEO0FBQ0k7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFSDtBQUNEO0FBQ0g7O0FBRUQ7OztBQUdBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0g7O0FBRUQ7QUFDSTs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSDs7QUFFRDs7O0FBR0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSDs7QUFFRDtBQUNJOztBQUVBO0FBQ0E7QUFDSTtBQUNLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQztBQUtKO0FBQ0Q7QUFDSDs7QUFFRDtBQUNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSztBQUNKO0FBQ0E7QUFDRDtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNIO0FBQ0E7QUFDRztBQUNBO0FBQ0g7QUFFSDtBQUNEO0FBQ0k7QUFDSDtBQUNEO0FBQ007QUFDRDtBQUVKO0FBQ0Q7QUFDSTtBQUNBO0FBQ0g7O0FBek5JOzs7Ozs7Ozs7O0FDSFQ7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYUTs7QUFjWjtBQUNBO0FBQ0c7QUFHRjtBQUNEO0FBQ0k7QUFFSDs7QUFFRDtBQUNBOztBQUVBO0FBL0JLOzs7Ozs7Ozs7O0FDQVQ7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVlE7O0FBYVo7QUFDQTtBQUdBO0FBQ0s7QUFDSjtBQUNEO0FBQ0E7O0FBRUE7QUExQks7Ozs7Ozs7Ozs7QUNBVDtBQUNJOztBQUVBO0FBQ0k7QUFEUTs7QUFjWjtBQUNBO0FBR0E7QUFDSTtBQUVIO0FBQ0Q7QUFDSTtBQUVIOztBQUVEO0FBQ0E7O0FBRUE7QUFqQ0s7Ozs7Ozs7Ozs7QUNBVDtBQUNBO0FBQ0k7O0FBRUE7QUFDUTtBQUNLO0FBQ0Q7QUFIQTs7QUFnQlo7QUFDQTs7QUFFSTtBQUNBO0FBQ0M7QUFDSjtBQUNEO0FBQ0c7QUFDQztBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0k7QUFDQTs7QUFFQTtBQUNFO0FBQ0E7QUFDRztBQUNGO0FBQ0E7QUFDRTtBQUNGO0FBQ0Y7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNHO0FBQ0g7QUFDRDtBQUNGO0FBQ0Q7QUFDSztBQUNKO0FBQ0o7QUFDRjtBQUVBO0FBRUo7QUFDQTs7O0FBR0Q7QUFDQztBQUNBO0FBdEVJOzs7Ozs7Ozs7O0FDRFQ7O0FBRUE7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVlE7O0FBYVo7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEOztBQUVJO0FBQ0k7QUFDQTtBQUF3QjtBQUNwQjtBQUNJO0FBQ0o7O0FBSG9CO0FBTWhCO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHSDtBQUNKO0FBQ0o7QUFDRDtBQUdIO0FBQ0o7QUFoQ2U7O0FBS3BCO0FBQXdDO0FBNkJ2QztBQWxDbUI7QUFtQ3ZCO0FBQ0k7QUFFSjtBQUtKO0FBSUo7QUFDRDtBQUNJO0FBQ0k7QUFDSDtBQUNKOztBQTdFSTs7Ozs7Ozs7OztBQ0ZUOztBQUVBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUlE7O0FBcUJaO0FBQ0E7QUFDRTtBQUNEO0FBQ0Y7QUFDSTs7QUFFQztBQUVKO0FBQ0E7QUFDQTs7QUFFQTtBQXJDSzs7Ozs7Ozs7OztBQ0ZUO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYUTs7QUFjWjtBQUNBO0FBQ0k7QUFFSDs7QUFFRDtBQUNDO0FBQ0E7QUFDRDtBQUNBOztBQUVBO0FBN0JLOzs7Ozs7Ozs7O0FDRFQ7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFGUTs7QUFLWjtBQUNBOztBQUlEOztBQUdLO0FBQ0E7QUFDQTtBQUNBO0FBQ0M7QUFDQTtBQUNIO0FBQ0U7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDSDtBQUNEO0FBQ0M7QUFDVTtBQUNGO0FBQ0k7QUFDSjs7QUFFVDtBQUVIOztBQXhDSTs7Ozs7Ozs7OztBQ0FUO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUZBO0FBSUo7QUFDSTtBQUNBO0FBRkE7QUFJSjtBQUNJO0FBQ0E7QUFGRDtBQVpLOztBQTRCWjtBQUNBO0FBQ0k7O0FBRUk7O0FBRUM7QUFDSjtBQUNEO0FBQ0E7QUFFSDtBQUNGO0FBQ0k7QUFDQztBQUNDO0FBQ0E7QUFLTDtBQUNEO0FBQ0k7QUFDQTtBQUNDO0FBQ0Q7O0FBRUE7QUFDSTtBQUFTO0FBQ0w7O0FBRUE7O0FBRUE7QUFDSDtBQUNBO0FBQVM7QUFDTDtBQUNJO0FBQ0w7QUFDSDtBQUNBO0FBQVM7QUFDSjtBQUNHO0FBQ0w7QUFDSDtBQWpCTDtBQW1CQztBQUNDO0FBQ0U7QUFDSjtBQUNBO0FBQ0M7QUFDRDs7QUFHRjtBQUNJO0FBQ0k7QUFDSjtBQUNJO0FBQ0o7QUFDSTtBQUNKOztBQUVGO0FBRUQ7QUFHRjtBQUNBO0FBQ0E7O0FBRUE7QUF6R0s7Ozs7Ozs7Ozs7QUNDVDs7O0FBR0E7QUFDQTtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBROztBQW9CWjtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQU1IO0FBQ0Q7QUFDSTtBQUVIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFFSDtBQUNEO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBRUg7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBR0g7QUFDRDtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQVE7QUFDSjtBQUNBO0FBQ0g7QUFDRDtBQUFRO0FBQ0o7QUFDQTtBQUNIO0FBQ0Q7QUFBUTtBQUNKO0FBQ0E7QUFDSDs7QUFaTDtBQWVBO0FBQ0E7QUFDSTs7QUFFSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0c7QUFDSTtBQUNJO0FBRUg7QUFDRDtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBRUg7QUFDSjtBQUNKOztBQUVEO0FBQ0g7QUFDRztBQUNIO0FBS0o7QUFFSjtBQUNEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUg7QUFDRDtBQUNJOztBQUVBO0FBQ0E7QUFDQTtBQUVIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUVIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUVIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFHSDtBQS9LSTs7Ozs7Ozs7OztBQ1BUO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFJRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQTVCUTtBQThCZDs7O0FBR0U7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNLO0FBQ0E7QUFFSjs7QUFFRDtBQUNZO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQzs7QUFFRDtBQUNYO0FBQ0Q7QUFDSTtBQUNDO0FBRUo7QUFDRDtBQUNJO0FBQ0U7QUFFTDtBQUNEO0FBQ0k7QUFDSTtBQUVQO0FBQ0Q7QUFDSTtBQUNHO0FBRU47QUFDQTtBQUNHO0FBQ0E7QUFFSDtBQUNEO0FBQ0c7QUFDRTtBQUVKO0FBQ0Q7QUFDWTtBQUNBO0FBQ0s7QUFDSjtBQUNEO0FBQ0M7QUFDWjs7QUFHRDtBQUNBOztBQUVBO0FBekdLOzs7Ozs7Ozs7O0FDRFQ7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFGUTs7QUFPWjtBQUNFO0FBQ007QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0w7QUFFSztBQUNBO0FBQ0c7QUFDRjtBQUNGO0FBQ0k7QUFDRjtBQUNEO0FBQ007QUFDTDtBQUNLO0FBQ0w7O0FBRUQ7QUFDQTtBQUVMO0FBQ0E7QUFDUTtBQUNGO0FBRUU7QUFDSDtBQUNQOztBQUVEO0FBQ0E7O0FBakRLOzs7Ozs7Ozs7O0FDQVQ7QUFDSTs7QUFFQTtBQUNFO0FBRFU7O0FBSVo7QUFDQTtBQUNPO0FBQ0E7QUFDQTtBQUNHO0FBQ0E7QUFDSztBQUNKO0FBQ0c7QUFDSDtBQUNKO0FBQ2E7QUFDQztBQUNYO0FBQ0k7QUFDaUI7QUFDQTtBQUNBO0FBQ0E7QUFDaEI7QUFJTDtBQUNEO0FBR0o7QUFDSjtBQUNEOzs7QUFHQTtBQUNJO0FBQ0E7QUFDSDs7QUEzQ0k7Ozs7Ozs7Ozs7QUNBVDtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFWUTs7QUFhWjtBQUNBO0FBQ0Y7QUFDRztBQUNBO0FBQ0k7QUFDSjtBQUNBO0FBQ0k7QUFDSjs7QUF6Qkk7Ozs7Ozs7Ozs7QUNBVDtBQUNJOztBQUVBO0FBQ0k7QUFDQTs7QUFGUTs7QUFnQlo7QUFDQTtBQUdBOztBQUVJO0FBQ0E7QUFDQztBQUNEO0FBQ0k7QUFDSDtBQUNBO0FBQ0Q7QUFDQTtBQUNBO0FBQ0M7QUFDQTtBQUEwQztBQUF3QztBQUV0Rjs7QUFFRDtBQUNBOztBQUVBO0FBM0NLOzs7Ozs7Ozs7O0FDQ1Q7QUFDQTtBQUNJOztBQUVBO0FBR0E7QUFDQTtBQUNFO0FBQ0U7QUFDRDtBQUdGO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1IO0FBQ0Q7QUFDSTtBQUNJO0FBQ0k7QUFDQztBQUNMO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNKO0FBQ0E7QUFDSTtBQUNKO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0M7QUFDRDtBQUNBO0FBQ0E7QUFDQztBQUVKO0FBQ0E7QUFDRDtBQUNJO0FBQ0U7QUFDRjtBQUNBO0FBQ0E7QUFDQztBQUVKO0FBQ0E7QUFDRDtBQUNBO0FBRUg7O0FBSUQ7QUFDQTtBQUNJO0FBQ0o7QUFDQTtBQUNJO0FBQ0o7QUFDQTtBQUNDO0FBQ0c7QUFDQTtBQUNBO0FBQ0c7QUFDTDtBQUdHO0FBQ0Q7QUFDSztBQUNLO0FBQ1Q7QUFDRDtBQUNBO0FBRUg7QUFHRDtBQUNBO0FBQ0k7QUFDSjtBQUNBO0FBQ0k7QUFDSjtBQUNBO0FBQ0k7QUFDSjtBQUNBO0FBQ0k7QUFDSjtBQUNBO0FBQ0k7QUFDSjtBQUNBO0FBQ0k7QUFDSjtBQUNBO0FBQ0k7QUFDSjtBQUNBO0FBQ0k7QUFDSjtBQUNBO0FBQ0Q7QUFDQztBQW5HSjtBQXFHSDtBQXhLSTs7Ozs7Ozs7OztBQ0ZUO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7O0FBSFE7O0FBT1o7QUFDQTtBQUdIOzs7Ozs7O0FBT0c7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Q7QUFDRTs7QUFFRDs7QUFFQTtBQUNDO0FBQ1U7QUFDRjtBQUNHO0FBQ0c7QUFDTjs7QUFFVDtBQUNBO0FBQ0E7QUFDSDtBQUNBOzs7Ozs7O0FBT0Q7QUFDSTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0M7O0FBRUQ7O0FBRUE7QUFDQztBQUNVO0FBQ0Y7QUFDRztBQUNHO0FBQ047O0FBRVQ7QUFDQTtBQUNBO0FBQ0g7QUFDRDs7O0FBR0E7QUFDSTtBQUNDO0FBQ0Q7QUFDQTtBQUNEO0FBQ047QUFDSTtBQUNEOzs7Ozs7O0FBT0E7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUVIOztBQUVEOzs7Ozs7O0FBT0E7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNIOztBQUVEOzs7Ozs7O0FBT0E7QUFDSTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQztBQUNEO0FBQ0c7QUFDRjtBQUNNO0FBQ047O0FBRUQ7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNJO0FBQ0g7QUFDSjs7QUFFRDs7O0FBR0E7QUFDSTtBQUNBO0FBQ0g7QUF2TEk7Ozs7Ozs7Ozs7QUNBVDtBQUNJOztBQUVBO0FBQ0c7QUFDQztBQUNBO0FBSFE7O0FBZ0JaO0FBQ0E7QUFHQTs7O0FBR0E7QUFDQztBQUNHO0FBQ0M7QUFDRDtBQUNBO0FBQ0Q7QUFDQTtBQUNGO0FBQ0Q7O0FBR0s7QUFDRDtBQUNBO0FBQ0E7QUFDRDtBQUNFOztBQUVEOztBQUVBO0FBQ0M7QUFDVTtBQUNGO0FBQ0c7QUFDRztBQUNOO0FBQ1I7QUFDRDtBQUNBO0FBRUg7O0FBMURJOzs7Ozs7Ozs7O0FDQVQ7QUFDQTtBQUNJOztBQUVBO0FBQ1E7QUFDSztBQUZEOztBQWVaO0FBQ0E7O0FBRUk7QUFDQztBQUdKO0FBQ0Q7QUFDRztBQUNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDRTtBQUNGO0FBQ0Q7QUFDRjtBQUNEO0FBQ0M7QUFFSjtBQUNBOzs7QUFHRDtBQUNDO0FBQ0E7QUFwREk7Ozs7Ozs7Ozs7QUNEVDtBQUNBO0FBQ0E7QUFDQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBRkU7QUFWRTs7QUFnQlo7QUFDQTtBQUNJO0FBQ1A7QUFDTTs7QUFFQztBQUNJO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQWZSO0FBa0JIOztBQUVEOzs7QUFHQTtBQUNJO0FBQ0M7QUFDQTtBQUVKOztBQUVEOzs7QUFHQTtBQUNJO0FBQ0U7QUFDRjtBQUNIOztBQUVEOzs7QUFHQTtBQUNHO0FBQ0M7QUFDQTtBQUNDO0FBQ0E7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDRjtBQUdEO0FBQ0Q7QUFDRztBQUNBO0FBQ0k7QUFDSDtBQUNBO0FBQ0k7QUFDQTtBQUNDO0FBQ0E7QUFDSTtBQUNBO0FBQ0o7QUFDSztBQUNMO0FBQ0Q7QUFDQTtBQUNHO0FBQ0E7QUFDSDtBQWRKO0FBb0JBO0FBQ0g7QUFDRDtBQUNHO0FBQ0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNIOztBQUdEO0FBQ0k7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNIO0FBQ0w7QUFDUTtBQUNBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUc7QUFDSDtBQUNEOzs7QUFHQTs7QUFFSTtBQUNBO0FBQ0E7QUFDQTs7QUFFTDtBQUNFOztBQUVEO0FBQ0k7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0g7O0FBRUQ7OztBQUdBO0FBQ0k7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUQ7QUFDRjs7QUFFRDtBQUNJOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNIOztBQUVEOzs7QUFHQTtBQUNJOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVKO0FBQ0M7O0FBRUQ7QUFDSTs7QUFFQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBRUQ7QUFDSTtBQUNIOztBQTNQSTs7Ozs7Ozs7OztBQ0hUO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZROztBQWFaO0FBQ0E7QUFHQTtBQUNPO0FBQ0M7QUFDSTtBQUFTO0FBQ0w7QUFDSTtBQUNEO0FBQ0E7QUFDQTs7QUFFRDtBQUNFO0FBQ0E7QUFFQTtBQUNKO0FBQ0g7QUFDQTtBQUFTO0FBQ0w7QUFDQztBQUNDO0FBQ0E7QUFDQTtBQUNHO0FBQ0E7QUFDRjtBQUNKO0FBQ0g7QUFDQTtBQUFTO0FBQ047QUFDSDtBQUNBO0FBQVM7QUFDTjtBQUNIO0FBL0JMO0FBa0NQO0FBQ0Q7QUFDQTs7QUFFQTtBQTVESzs7Ozs7Ozs7OztBQ0FUO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUZRO0FBRko7O0FBa0JaO0FBQ0E7QUFHQTtBQUNJO0FBRUg7QUE1Qkk7Ozs7Ozs7Ozs7QUNBVDtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUZROztBQWVaO0FBQ0E7QUFHQTtBQUNJO0FBQ0E7QUFDRTtBQUNEO0FBQ0c7QUFDQTtBQUNBO0FBQ0g7QUFFSjtBQUNEO0FBQ0k7QUFDQTtBQUVIO0FBQ0w7QUFDUTtBQUNFO0FBRUw7QUExQ0k7Ozs7Ozs7Ozs7QUNBVDtBQUNJOztBQUVBO0FBQ0c7QUFDRDtBQUNBO0FBRlM7QUFJWDtBQUNJO0FBTlE7O0FBbUJaO0FBQ0E7QUFDSjtBQUNRO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDQztBQUNEO0FBQ0M7QUFDRDtBQUNBOztBQUVBOztBQUVBO0FBQ0Q7QUFDQztBQUNJO0FBQ0M7QUFDRDtBQUNIO0FBQ0E7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQztBQUNDO0FBQ0E7QUFDRjtBQUNBO0FBQ0Q7QUFDRDtBQUNDO0FBQ0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQXJEQTtBQXVEUjtBQUNEO0FBQ0k7QUFDQTtBQUNDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQXpGSTs7Ozs7Ozs7OztBQ0FUO0FBQ0k7O0FBRUE7QUFDSTtBQURROztBQWNaO0FBQ0E7QUFHRDtBQUNJO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBM0JLOzs7Ozs7Ozs7O0FDQVQ7QUFDSTs7QUFFQTtBQUNJO0FBRFE7O0FBY1o7QUFDQTtBQUdBO0FBQ0k7QUFFSDtBQUNGOztBQUtDO0FBQ0E7O0FBRUE7QUFqQ0s7Ozs7Ozs7Ozs7QUNBVDtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZROztBQWFaO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNJO0FBQ0g7O0FBRUQ7QUFDQTtBQUNJO0FBQ0o7QUFDZ0I7O0FBRUk7QUFDQTtBQUVIO0FBQ0o7QUFFWjtBQUNHO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7QUFFSjtBQUNKO0FBQ0Q7QUFDQTs7QUFFQTtBQXZESzs7Ozs7Ozs7OztBQ0RUO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7O0FBRlE7O0FBZ0JaO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTs7QUFFSTtBQUNJO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNHO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0g7QUFDSTtBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0M7QUFDSjs7QUFFRDs7QUFHSDtBQUNKO0FBQ0c7QUFDSDtBQUdKO0FBdERBO0FBeURSO0FBQ0Q7O0FBRUk7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVJO0FBQ0k7QUFDQTtBQUNIO0FBQ0c7QUFFSDtBQUNKO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFSDtBQUNEO0FBQ0k7QUFDSTtBQUVIOztBQUVHO0FBQ0g7QUFFSjtBQXJISTs7Ozs7Ozs7OztBQ0FUO0FBQ0k7O0FBRUE7QUFDSTtBQURROztBQUlaOzs7Ozs7O0FBT0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNJO0FBQ0g7QUFDRDtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNIO0FBbkNJOzs7Ozs7Ozs7O0FDQVQ7QUFDSTs7QUFFQTs7QUFFSTtBQUVJO0FBQ0E7QUFGSjtBQUlBO0FBRUk7QUFDQTtBQUZKO0FBSUE7QUFFSTtBQUNBO0FBRko7QUFJQTtBQUVJO0FBQ0E7QUFGSjtBQUlBO0FBRUk7QUFDQTtBQUZKO0FBdkJROztBQTZCWjtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDSTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTFc7O0FBUWY7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBQ0c7QUFDQTtBQUNIO0FBQ0o7QUFDRztBQUNIO0FBRUo7QUFDRDtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0E7QUFDSjtBQUNJO0FBQ0E7QUFDQTtBQXJDUjtBQXVDSDtBQUNHO0FBQ0g7QUFFSjtBQUNKO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7OztBQVNBOztBQUVBO0FBR0E7QUFHQTs7QUFJQTtBQUdBO0FBR0E7QUFHQTtBQUVIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSTs7QUFFQTtBQUNBO0FBQ0g7QUFDSjs7QUFFRDtBQUNIOztBQUdEO0FBQ0E7Ozs7O0FBS0E7O0FBRUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBcUJBO0FBRUg7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBRUg7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUVIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUVIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUVIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFSDtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUg7QUFqVkk7Ozs7Ozs7Ozs7QUNEVDtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQUNJO0FBQ0E7QUFGSztBQUlUO0FBQ0k7QUFDQTtBQUZFO0FBSU47QUFDSTtBQUNBO0FBRkc7QUFJUDtBQUNJO0FBQ0E7QUFGSztBQUlUO0FBQ0k7QUFDQTtBQUZNO0FBSVY7QUFDSTtBQUNBO0FBRks7QUFyQkQ7O0FBMkJaO0FBQ0E7QUFDSTtBQUdIOztBQUVEO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBTkE7QUFRSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFBbUM7QUFBaUM7QUFBZ0I7QUFBaUM7O0FBRXJIO0FBQ0g7QUFFRztBQUNBO0FBQ0E7QUFDSDtBQUVHO0FBQ0E7QUFDSDtBQUNKO0FBQ0c7QUFDSDtBQUVKO0FBQ0Q7QUFDSDtBQUdKO0FBQ0c7QUFDSDtBQUVKO0FBQ0o7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQXhISTs7Ozs7Ozs7OztBQ0RUO0FBQ0k7O0FBRUE7QUFDSTtBQUNJO0FBQ0E7QUFGTTtBQUlWO0FBQ0k7QUFDQTtBQUZFO0FBTEU7QUFhWjtBQUNBOztBQUdJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHSDtBQUNEOztBQUVJO0FBQ0g7QUFDRDtBQUNNO0FBQ0U7QUFDSTtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBQ0o7QUFDQTtBQUNHO0FBQ0k7QUFDSDtBQUNHO0FBQ0g7QUFDSjtBQUVKO0FBRUo7QUFDRDtBQUNBOztBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUM2QjtBQUMxQjtBQUNBO0FBQ0E7QUFDSDtBQUVHO0FBQ0E7QUFDSDtBQUM2QjtBQUMxQjtBQUNBO0FBQ0g7QUFFRztBQUNBO0FBQ0g7QUFDSjtBQUNHO0FBQ0g7QUFHSjtBQUNKO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQTlHSTs7Ozs7Ozs7OztBQ0NUO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0M7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUZTO0FBSWI7QUFDSTtBQUNBO0FBRlM7QUFUTDtBQXdCWjtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0o7QUFDRztBQUNIO0FBSUo7QUE1Q0k7Ozs7Ozs7Ozs7QUNBVDtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUpROztBQWlCWjtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFFSDtBQUNEO0FBQ0k7QUFDSTtBQUF3QjtBQUNwQjs7QUFEb0I7QUFHaEI7O0FBRUE7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFFSDtBQUNEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNIO0FBQ0o7QUFDRDtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUVIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNIO0FBRUo7QUFDRDtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUVIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNIO0FBR0o7QUFDRDtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUVIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNIO0FBR0o7QUFDRDtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUVIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNIO0FBR0o7QUFDRDtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUVIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNIO0FBSUo7QUEvR2U7O0FBRXBCO0FBQXlDO0FBZ0h4QztBQWxIbUI7QUFvSHZCO0FBQ0c7QUFDSDtBQUlKO0FBSUo7QUFDRDtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0U7QUFFTDtBQUdKOztBQUVEO0FBQ0E7O0FBRUE7QUEvS0s7Ozs7Ozs7Ozs7QUNGVDtBQUNJOztBQUVBO0FBQ0k7QUFEUTs7QUFJWjtBQUNBO0FBR0E7QUFDSTtBQUVIO0FBQ0Q7QUFDQTs7QUFFQTtBQWxCSzs7Ozs7Ozs7OztBQ0FUO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZROztBQWFaO0FBQ0E7QUFDUTtBQUNQOztBQW5CSTs7Ozs7Ozs7OztBQ0NUO0FBQ0E7QUFDQTtBQUNJOztBQUVBO0FBQ0k7QUFEUTs7QUFjWjtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7QUFDSjtBQUNKO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQWE7QUFDVDtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQVM7QUFDTDtBQUNBO0FBQ0E7QUFDSDtBQVZMOztBQWNBO0FBQ0E7O0FBRUE7QUFDQTtBQUVIO0FBekVJOzs7Ozs7Ozs7O0FDQ1Q7QUFDQTs7QUFFQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUZROztBQUtaO0FBQ0E7QUFDSTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUFhO0FBQ1Q7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUFTO0FBQ0w7QUFDQTtBQUNBO0FBQ0g7QUFWTDs7QUFjQTtBQUNBOztBQUVBO0FBQ0E7QUFFSDs7QUFFRDs7Ozs7O0FBTUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0c7QUFDSTtBQUNBO0FBQVE7O0FBRUo7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUFRO0FBQ0o7O0FBRUE7QUFDSDs7QUFaTDtBQWVIOztBQUVEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFHSjtBQUNKO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBRUo7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRztBQUVIO0FBSUo7QUFFSjtBQUNEOzs7O0FBSUE7Ozs7Ozs7QUFPQTtBQUNJO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFBVztBQUNQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUlBO0FBQ0g7QUFDRDtBQUNBO0FBQVc7QUFDUDtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQVc7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUFXO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7QUFDSjs7QUFHRDtBQUNIO0FBQ0Q7QUFDQTtBQUFXO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSDtBQUNEO0FBQ0E7QUFBVztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBS0E7QUFDSDtBQWxGTDtBQXFGSDtBQUNHO0FBQ0g7QUFHSjtBQUNEO0FBQW9COztBQUNoQjtBQUNBO0FBQ0k7QUFDSTtBQUVIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUVIO0FBQ0o7QUFDRDtBQUNJOztBQUVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRztBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNBO0FBRUg7QUFDSjs7QUFFRDtBQUNIO0FBQ0c7QUFDSDtBQUdKOztBQW5WSTs7QUE2VlQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7OztBQzNZQTtBQUNBOztBQUVBOzs7O0FBSUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBSUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQURROztBQWNaO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSTs7QUFFQTtBQUNJO0FBRVE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRVE7QUFDQTtBQUNBO0FBSEo7QUFNSTtBQUNBO0FBQ0E7QUFISjtBQU1JO0FBQ0E7QUFDQTtBQUhKO0FBakJSO0FBeUJJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVRO0FBQ0E7QUFDQTtBQUhKO0FBUFI7QUFlSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEo7QUFRSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEo7QUFRSjtBQUVRO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVRO0FBQ0E7QUFDQTtBQUhKO0FBTUk7QUFDQTtBQUNBO0FBSEo7QUFNSTtBQUNBO0FBQ0E7QUFISjtBQWpCUjtBQTBCSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFUTtBQUNBO0FBQ0E7QUFISjtBQVBSO0FBZUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxKO0FBUUk7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxKO0FBdEdLOztBQWdIYjtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUNHO0FBQ0g7O0FBRUQ7QUFDQTtBQUdIOztBQUVEO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTtBQUNJO0FBR0g7QUFDRztBQUNIOztBQUdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0c7QUFDSDs7QUFFRDtBQUNBO0FBR0g7QUFHSjtBQUNKO0FBRUo7QUFDRztBQUNIO0FBSUo7QUFDRDtBQUNJO0FBQ0E7O0FBRUk7O0FBRUE7QUFHSDtBQU1KO0FBQ0Q7Ozs7Ozs7QUFPQTtBQUNJO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFBVztBQUNQO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRztBQUNIOztBQUdEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUdBO0FBQ0g7QUFDRDtBQUNBO0FBQVc7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBSUE7QUFDSDtBQTNDTDtBQThDSDtBQUNHO0FBQ0g7QUFHSjtBQUNEO0FBQ0k7QUFDQTs7QUFFQTtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBQ0c7QUFDSDtBQUdKO0FBRUo7QUFDRDtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7O0FBRUE7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNHO0FBQ0g7QUFFSjtBQUdKO0FBQ0Q7QUFDSTtBQUNBO0FBQ0g7QUFDRDs7O0FBR0E7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUlBO0FBQ0E7OztBQUlIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNHO0FBQ0g7QUFDRDs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUlIO0FBQ0Q7O0FBRUk7QUFDQTtBQUNBO0FBRUg7QUFDRDtBQUNLO0FBRUo7QUFoYWlCOzs7Ozs7Ozs7O0FDMUN0QjtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQURROztBQWNaO0FBQ0E7O0FBRUk7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNBO0FBR0g7QUFDRDtBQUNJO0FBQ0k7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUNHO0FBQ0g7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBRUo7QUFHSjtBQUNKO0FBR0o7QUFDRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVIO0FBN0VJOzs7Ozs7Ozs7O0FDQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFHSTtBQUNJO0FBQ0k7QUFERTtBQUdOO0FBV0E7QUFDSTtBQUFVOztBQUNOO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7O0FBSUQ7QUFDQTtBQUNJO0FBQ0g7QUFDSjtBQUNEO0FBQ0k7QUFDSTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFFSjtBQUNHO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDSDtBQUNKO0FBQ0o7QUFDSjtBQUNEO0FBQXFCOztBQUNqQjtBQUNBO0FBQ0E7QUFDSTtBQUFtQjtBQUFtQjtBQUN6QztBQUNHO0FBQ0k7O0FBRUE7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSDtBQUNKO0FBQ0o7QUFFSjtBQUVEO0FBQVk7O0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0k7QUFBcUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNJO0FBQ0g7QUFFSjtBQUNKOztBQUVEO0FBQ0g7QUFDRDtBQUFpQjs7QUFFYjtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFBYTtBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFnQjtBQUFBO0FBQUE7O0FBQUE7QUFDUjtBQUNBOztBQUNKOztBQUhZO0FBS1I7QUFDSTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDQTtBQUNIO0FBQ0Q7QUFJSDtBQXZCTzs7QUFJWjtBQUE0QztBQXNCM0M7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBL0JZOztBQUFBO0FBaUNmOztBQUVEO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUw7QUFBUztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBR0g7QUE3Rkw7QUErRkE7QUFDSTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFFSDtBQUNEO0FBQ0g7QUFFSjtBQUlKO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTs7QUFKZTtBQU9YO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFDRztBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNEOztBQUVJO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUdKO0FBSUo7QUFoRFU7O0FBTWY7QUFBc0M7QUErQ3JDO0FBRUo7QUFDRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0g7QUFFSjtBQUVKO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUEvUkk7QUFmMEI7QUFpVHZDO0FBRUg7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSDtBQUNKO0FBQ0c7QUFDSDtBQUVKO0FBRUo7QUFDRDtBQUNBO0FBRUg7QUFDRDtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBQ0o7QUFDRDtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBQ0o7QUFDRDs7QUFHSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBSndCO0FBTy9CO0FBQ0Q7OztBQUdBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFHSDtBQUNEO0FBQ0k7QUFFSDtBQUVKO0FBQ0Q7OztBQUdBO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0g7QUFDRztBQUVIO0FBRUo7QUFFSjtBQUNEOzs7QUFHQTs7QUFFSTtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBQ0c7QUFDSDtBQUdKO0FBRUo7QUFDRDtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQUTtBQVNaO0FBQ0k7QUFJSDtBQUNEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFFSDtBQUNEO0FBQ0E7QUFDSTs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBR0g7QUFDRDtBQUNJO0FBRUg7O0FBRUQ7QUFDSTtBQUVIO0FBQ0Q7OztBQUdBO0FBQ0k7QUFDSTtBQUNBO0FBQ0k7QUFDSTtBQUNIO0FBQ0o7QUFDSjtBQUtKO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDSDtBQUNHO0FBQ0E7QUFDSDs7QUFHRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNIOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDSTtBQUNBO0FBRUg7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0g7QUFDRztBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUNIO0FBRUo7QUFDSjtBQU1KO0FBR0o7O0FBRUc7QUFFSDtBQUdKOztBQUVEO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNHO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBQ0c7QUFDSDtBQUVKO0FBQ0o7QUFNSjs7QUFqTGlCOzs7Ozs7Ozs7O0FDMWF0QjtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFWUTs7QUFhWjtBQUNBO0FBR0Q7QUFDSztBQUNEO0FBQ0M7QUFDSDtBQUNBO0FBQ0k7QUFDSjtBQTNCSTs7Ozs7Ozs7OztBQ0FUO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFGTztBQUlYO0FBUFE7QUFtQlI7QUFDSTtBQUNQOztBQUNEO0FBQ0k7QUFDQTtBQUNBOztBQUVBO0FBR0g7QUFDRDtBQUNJO0FBQ0k7QUFDQTtBQUVIO0FBQ0c7QUFDSTtBQUNBO0FBQ0g7QUFDRztBQUNIO0FBRUo7QUFJSjtBQUNMO0FBQ0k7QUFHSDtBQUNEO0FBQ0U7QUFDRDtBQTNEUTs7Ozs7Ozs7OztBQ0RUO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBTFE7O0FBbUJaO0FBQ0E7QUFHQTtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDRTtBQUNDO0FBQ0Y7QUFHSjs7QUFFRDtBQUNBOztBQUVBO0FBM0RLOzs7Ozs7Ozs7O0FDQVQ7QUFDQTtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTs7QUFKUTs7QUFRWjtBQUNBO0FBQ0k7QUFFSDtBQUNEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0k7QUFFSDtBQUNHO0FBQ0E7QUFDSTtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBQ0o7QUFDSjtBQUVKO0FBQ0c7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNHO0FBQ0g7QUFHSjtBQUdKO0FBQ0Q7QUFDSTtBQUNBO0FBRUg7QUFDRDtBQUNJO0FBQ0E7O0FBRUE7QUFDRDtBQUNBO0FBQ0k7QUFDTjs7QUFHRDtBQUNBOztBQUVBO0FBeEVLOzs7Ozs7Ozs7O0FDRlQ7QUFDQTtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUpRO0FBZ0JaO0FBQ0k7QUFFSDtBQUNEO0FBQ0c7QUFDQztBQUVIO0FBQ0Y7QUFDSzs7QUFFSTtBQUNJO0FBQ0E7QUFDRTtBQUNGO0FBQ0Q7QUFDQztBQUVIO0FBQ0c7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUlQO0FBR0E7QUFDTDtBQUNJO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFFQTtBQUNBO0FBQ0g7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0g7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUVEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdIO0FBR0o7QUFDRDtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDSTtBQUNBO0FBQ0s7QUFDWTtBQUNEO0FBQ0c7QUFDSDtBQUNoQjtBQUNDO0FBQ0E7QUFDRDtBQUNBO0FBQ0U7QUFDQTtBQUNGO0FBR0g7QUFDRDtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFBUTtBQUNSO0FBQVE7QUFDUjtBQUFRO0FBQ1I7QUFBUTtBQUNSO0FBQVE7QUFMWjtBQU9BO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFSDtBQUNEO0FBQ0k7QUFDQTs7QUFFQTtBQUNJO0FBQVc7QUFDWDtBQUFhO0FBQ2I7QUFBYztBQUNkO0FBQVk7QUFDWjtBQUFlO0FBTG5CO0FBT0E7QUFJQTtBQUNIOztBQUVEO0FBQ0k7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUVHO0FBQ0E7O0FBRUE7QUFDSTtBQUFRO0FBQ1I7QUFBUTtBQUNSO0FBQVE7QUFDUjtBQUFRO0FBQ1I7QUFBUTtBQUxaO0FBT0E7QUFDQTtBQUNJO0FBQ0k7QUFDQTtBQUZJO0FBSVg7QUFFRztBQUNJO0FBQ0E7QUFGSTtBQUlYO0FBQ0Q7QUFDUTtBQUNIO0FBRUw7QUFDSDtBQUNKO0FBRUc7QUFDQTtBQUNIO0FBRUc7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNEO0FBQ0k7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0k7QUFBbUI7QUFDZjtBQUNKO0FBQXlCO0FBQ3JCO0FBQ0o7QUFBb0I7QUFDaEI7O0FBTlI7QUFTSDtBQUNEOzs7QUFHQTtBQUNJO0FBQ0g7QUFDQTs7QUE3Ukk7Ozs7Ozs7Ozs7QUNGVDtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFKUTs7QUFpQlo7QUFDQTs7QUFyQks7Ozs7Ozs7Ozs7QUNBVDtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFWUTs7QUFhWjtBQUNBO0FBQ1U7QUFFVDtBQUNBO0FBQ1E7QUFFUjtBQUNEO0FBQ087QUFFTjtBQUNEO0FBQ1E7QUFHUDtBQUNBO0FBQ087QUFFUDtBQUNEO0FBQ1U7QUFFVDs7QUF6Q0k7Ozs7Ozs7Ozs7QUNBVDtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWlE7O0FBZVo7QUFDQTs7QUFuQks7Ozs7Ozs7Ozs7QUNDVDtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFWUTtBQVlaO0FBQ0E7QUFDQTtBQUlBO0FBQUE7QUFBQTtBQUFBOztBQUFBO0FBQUE7QUFBQTs7QUFBQTtBQUFBO0FBQ0k7QUFDQTtBQUNBO0FBRUg7QUFDRDtBQUNJO0FBQ0g7QUFDRDtBQUNBOztBQUVBO0FBakNLOzs7Ozs7Ozs7O0FDRFQ7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFGUTs7QUFLWjtBQUNBOztBQUdBO0FBQ0k7QUFDSDs7QUFkSTs7Ozs7Ozs7OztBQ0FUO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7O0FBSFE7O0FBT1o7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFFSjtBQXhCQTtBQTBCUjtBQXZDSTs7Ozs7Ozs7OztBQ0FUO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQztBQUpPOztBQU9aO0FBQ0E7O0FBRU87QUFDQTtBQUNDO0FBQ0E7QUFDSDtBQUNEO0FBQ0M7QUFDRDtBQUNBO0FBRUg7QUFDSjs7O0FBR0c7O0FBR0s7QUFDQTtBQUNBOztBQUVDO0FBQ0w7QUFDRjs7QUFFSztBQUNBO0FBQ0k7QUFDQTtBQUNRO0FBQ1A7QUFDQTs7QUFFRDs7QUFFRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ087QUFDSjtBQUNKO0FBQ0s7O0FBRUo7QUFDSjtBQUNEO0FBQ1E7QUFDQztBQUNEO0FBQ0E7QUFDSjtBQUNRO0FBQ0o7QUFDSjtBQUNBO0FBQ0g7O0FBRUQ7OztBQUdBO0FBQ0k7QUFDQTtBQUVIOztBQUdEO0FBQ0k7QUFDQTtBQUNBO0FBQ0Q7QUFDQztBQUNBO0FBQ0k7QUFDQTtBQUNDO0FBQ0E7QUFDRDtBQUNIO0FBQ0Q7QUFDQTtBQUNIOztBQUlEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0g7O0FBL0dJOzs7Ozs7Ozs7O0FDSFQ7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVlE7O0FBYVo7QUFDQTs7QUFFRztBQUNGOztBQXBCSTs7Ozs7Ozs7OztBQ0FUO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZROztBQWFaO0FBQ0E7QUFDUztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUlIO0FBQ0Q7QUFDSTtBQUNIO0FBQ0Q7QUFDQTs7QUFFQTtBQXBDSzs7Ozs7Ozs7OztBQ0FUO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZROztBQWFaO0FBQ0E7QUFDSDtBQUNJO0FBQ0Q7QUFDTztBQUVOO0FBQ0Q7QUFHQTtBQUdBO0FBR0E7QUFHQzs7QUFwQ0k7Ozs7Ozs7Ozs7QUNBVDtBQUNJOztBQUVBO0FBQ0k7QUFEUTs7QUFjWjtBQUNBO0FBR0E7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNIOztBQUVEO0FBQ0E7O0FBRUE7QUEvQks7Ozs7Ozs7Ozs7QUNBVDtBQUNJOztBQUVBO0FBQ0k7QUFEUTs7QUFjWjtBQUNBO0FBQ0k7QUFDQztBQUNFO0FBQ0M7QUFDQztBQUdSO0FBQ0o7OztBQUdHO0FBQ0k7QUFDRDtBQUNHO0FBQ0w7QUFsQ0k7Ozs7Ozs7Ozs7QUNBVDtBQUNJOztBQUVBO0FBQ0k7QUFDSTtBQUNBO0FBRkk7QUFJUjtBQUNBO0FBTlE7QUFrQlo7QUFDSTtBQUNBO0FBQ0E7QUFDSDs7QUFFRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNKO0FBQ0k7QUFDQTtBQUNBO0FBUlI7O0FBV0E7QUFDQTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUdBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0g7QUFFSjtBQUNKO0FBQ0Q7QUFDSTtBQUNBO0FBRUg7QUFDRDtBQUNLO0FBQ0M7QUFDRjtBQUNBO0FBQ0E7QUFFSDtBQUNEO0FBQ0k7QUFFSDs7QUFFRDtBQUNJOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Q7QUFDRztBQUNGO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNIO0FBRUo7QUFDRDtBQUNIOztBQUVEO0FBQ0k7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0g7O0FBM0xJOzs7Ozs7Ozs7O0FDQVQ7QUFDSTtBQUNBO0FBQ0c7QUFDRDtBQUNBO0FBRlM7QUFJWDtBQUNJO0FBTlE7QUFrQmI7QUFDSztBQUNFO0FBQ0Y7QUFDSDtBQUNEO0FBQ0U7QUFDRTtBQUNRO0FBQ0E7QUFDSTtBQUNIO0FBQ0U7QUFDQztBQUNDO0FBQ0Q7QUFDQztBQUNEO0FBQ0E7O0FBRUE7O0FBRUE7QUFDRDtBQUNDO0FBQ0k7QUFDQztBQUNEO0FBQ0g7QUFDQTtBQUNBO0FBQ0M7QUFDQTtBQUNBO0FBQ0Y7QUFDQTtBQUNIO0FBQ0E7QUFDUjtBQUNKO0FBQ0Q7QUFDSTs7QUFFRjtBQUNBO0FBQ0Y7QUFDQTtBQUNEO0FBQ1E7QUFDTDtBQUNFOztBQUVBO0FBQ0g7QUFDQTtBQUNNOztBQUVIO0FBQ0c7QUFDRjtBQUNIOztBQWhGRzs7Ozs7Ozs7OztBQ0FUO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBRlE7O0FBT1o7QUFDUTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVMO0FBQ1E7QUFDRjtBQUVFO0FBQ0g7QUFDUDs7QUFFRDtBQUNBOztBQTFCSzs7Ozs7Ozs7OztBQ0FUO0FBQ0E7QUFDSTs7QUFFQTtBQUNFO0FBQ0E7QUFGVTs7QUFLWjtBQUNBO0FBQ0k7QUFDRztBQUNBO0FBQ0E7QUFDQTtBQUNHO0FBQ0o7QUFDTTs7QUFFQTtBQUNJO0FBQ0g7QUFDSjtBQUNMO0FBRUg7QUFDRDs7O0FBR0E7QUFDSTtBQUNFO0FBQ0w7O0FBRUQ7QUFDSztBQUNBO0FBQ087QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNaO0FBSUM7O0FBRUQ7QUFDQTs7QUFFQTtBQW5ESzs7Ozs7Ozs7OztBQ0RUO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBSlE7O0FBUVo7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0M7QUFDRDtBQUNRO0FBQ0E7QUFDQztBQUNEO0FBQ0E7QUFHSTtBQUNIO0FBRUc7QUFFSDtBQUVSO0FBR0o7QUFDTDs7O0FBR0k7QUFDSTtBQUNBO0FBRUg7QUFDRDtBQUNJO0FBQ0E7QUFDSTtBQUFRO0FBQ1I7QUFBUTtBQUNSO0FBQVE7QUFIWjtBQUtBO0FBRUE7QUFDQTtBQUNJO0FBQVE7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7QUFDRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFSDtBQUNHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUVKO0FBQ0E7QUFDRDtBQUNKO0FBQVE7QUFDUjtBQUFRO0FBOUJaO0FBZ0NBO0FBQ0g7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ1E7QUFDQTtBQUdQO0FBQ0Q7QUFFSDtBQUNKO0FBQ0c7QUFDUTtBQUdJO0FBQ0E7QUFDQTtBQUNIO0FBQ0o7QUFDUDs7QUFFRTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNROztBQUVBO0FBQ0k7QUFDQTtBQUNIO0FBQ0c7QUFDSDtBQUtSO0FBQ0o7O0FBRUQ7QUFDSTtBQUNBO0FBQ0E7QUFDRTs7QUFLRjtBQUNIO0FBQ0Q7QUFDSTtBQUNQO0FBQ2U7QUFDQTtBQUNDO0FBQ0Q7QUFDQTtBQUdJO0FBQ0g7QUFFRztBQUVIO0FBR1I7QUFDSjtBQUNEOztBQUVJO0FBRUg7O0FBRUQ7QUFDSTtBQUNIOztBQUdEO0FBQ0E7O0FBRUE7QUFoTUs7Ozs7Ozs7Ozs7QUNEVDtBQUNJOztBQUVBO0FBQ0k7QUFEUTs7QUFjWjtBQUNBO0FBQ0Y7QUFDQTtBQUVHOztBQXRCSTs7Ozs7Ozs7OztBQ0FUO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZROztBQWFaO0FBQ0E7QUFHQTtBQUNRO0FBQ0o7QUFDQTs7QUFFQztBQUNHO0FBQ0c7QUFDSTtBQUdkO0FBQ0Q7QUFDQTs7QUFFQTtBQW5DSzs7Ozs7Ozs7OztBQ0FUO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQWJROztBQWdCWjtBQUNBO0FBR0E7QUFDSTtBQUNIOztBQXpCSTs7Ozs7Ozs7OztBQ0FUO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZROztBQWFaO0FBQ0E7QUFHQTtBQUNJO0FBQ0E7QUFDQTtBQUNDO0FBR0o7O0FBM0JJOzs7Ozs7Ozs7Ozs7QUNBVDtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBRlE7QUFjWjtBQUNJO0FBRUg7O0FBRUQ7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEOzs7QUFHQTtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDSDs7QUFFRDtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBQ0o7QUFDRDtBQUNJO0FBQ0k7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDSjtBQUNEO0FBQ0o7QUFDSTtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0o7QUFDQTtBQUNRO0FBQ0k7QUFDQTtBQUNIO0FBQ0o7QUFDRDtBQUNBO0FBQ0o7QUFDSTtBQUNBO0FBQ0E7O0FBN0JSO0FBa0NIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNHO0FBQ0E7QUFDSDtBQUNHO0FBQ0E7QUFDSDtBQUNHO0FBQ0E7QUFDSDtBQUNHO0FBQ0E7QUFDSDtBQUNEO0FBRUE7QUFFSDtBQUNEO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNJO0FBQ0E7QUFDSTtBQUNIO0FBQ0c7QUFDSDs7QUFFRDtBQUNBO0FBQ0g7QUFFSjtBQUNKO0FBRUo7QUFDRDtBQUNJO0FBQ0k7QUFDQTtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBQ0k7QUFDSDtBQUNHO0FBQ0g7QUFDRDtBQUNBO0FBQ0g7QUFFSjtBQUNKO0FBRUo7QUFDRDs7QUFFSTtBQUNJO0FBQ0E7O0FBRUE7QUFDSTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0c7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUVIO0FBQ0o7QUFDRDs7QUFFQTs7QUFFQTs7QUFHSDtBQUNKO0FBR0o7QUFDRDtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBQ0E7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0c7QUFDQztBQUNEO0FBQ0g7QUFFSjtBQUNBO0FBQ0k7QUFFSDtBQUNEO0FBQ0k7QUFFSDs7QUE1Tkc7Ozs7Ozs7Ozs7QUNEVDtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBRlE7O0FBZVo7QUFDQTtBQUNJO0FBQ0g7QUFDRDtBQUNJO0FBRUg7QUFDRDs7QUFJQTtBQUNBOztBQUVBO0FBakNLOzs7Ozs7Ozs7O0FDQVQ7QUFDQTtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxROztBQWtCWjtBQUNBO0FBQ0k7QUFDQTtBQUVIO0FBQ0Q7QUFDSTtBQUNJO0FBRGdDO0FBR2hDO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNIO0FBQ0c7QUFFSDtBQUVKO0FBRUo7QUFDRDtBQUNJO0FBQ0E7QUFDQTtBQUNJO0FBQ0g7QUFDRztBQUNBO0FBQ0k7QUFDSTtBQUNIO0FBQ0c7QUFDSDtBQUNKO0FBRUo7QUFLSjs7QUFHRDtBQUNBOztBQUVBO0FBdkVLOzs7Ozs7Ozs7O0FDRlQ7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVlE7O0FBYVo7QUFDQTtBQUNJO0FBQ0E7QUFDQTs7QUFFSDtBQUNEO0FBQ0k7QUFDSDtBQUNEOzs7QUFHQTtBQUNJO0FBQ0E7QUFDSDtBQWhDSTs7Ozs7Ozs7OztBQ0FUO0FBQ0E7QUFDQTtBQUNBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTFE7O0FBa0JaO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0g7QUFDRDs7QUFFSTtBQUNBO0FBQ0k7QUFDQTtBQUNJO0FBQ0k7QUFDSDtBQUNHO0FBQ0g7QUFHSjtBQUNHO0FBQWtEO0FBQThDO0FBQWdCO0FBQThDO0FBRWpLO0FBRUo7QUFJSjtBQUNEO0FBQ0E7O0FBRUE7QUE3REs7Ozs7Ozs7Ozs7QUNIVDtBQUNJOztBQUVBO0FBQ0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFWUTs7QUFhWjtBQUNBOztBQWpCSzs7Ozs7Ozs7OztBQ0FUO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZROztBQWFaO0FBQ0E7QUFHQTtBQUNJO0FBQ0E7QUFDQTtBQUdIOztBQTFCSTs7Ozs7Ozs7OztBQ0FUOztBQUVBO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBTlE7O0FBVVo7QUFDQTs7QUFFSTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0g7O0FBRUQ7QUFBOEI7O0FBQzFCO0FBQ0k7QUFDSDtBQUNEO0FBQ0k7QUFDSDtBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUM7QUFDRDtBQUNJO0FBQ0E7QUFDSTtBQUVIO0FBQ0w7QUFDQTs7QUF4QjBCO0FBMEJ0QjtBQUNJO0FBQ0k7QUFDSTtBQUNBO0FBQ0E7O0FBRUE7QUFDSTtBQUNJO0FBQ0g7QUFDRDtBQUNBO0FBQ0k7QUFDSTtBQUNBO0FBSUg7QUFHSjtBQUdKO0FBQ0o7QUFDSjtBQUNKO0FBQ0c7QUFDSTtBQUNJO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDSTtBQUNIO0FBQ0Q7QUFDSTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUlIO0FBQ0o7QUFDSjtBQUNKO0FBQ0Q7QUFDSDtBQUNKO0FBQ0o7QUFyRnFCOztBQXlCMUI7QUFBdUM7QUE2RHRDO0FBQ0Q7QUFDSTtBQUNJO0FBQ0g7QUFDSjtBQUNKOztBQUVEOztBQUVJO0FBQ0k7QUFDQTtBQUNJO0FBQ0g7QUFDRztBQUNIO0FBQ0o7QUFFSjs7QUFFRDs7QUFFTTtBQUNFO0FBQ0E7QUFDSTtBQUNIO0FBQ0c7QUFDSDtBQUNKO0FBRUo7O0FBRUQ7QUFDSTtBQUNIOztBQWxKSTs7Ozs7Ozs7OztBQ0ZUO0FBQ0E7QUFDSTs7QUFFQTtBQUNJO0FBQ0E7QUFDQTtBQUNBO0FBSlE7O0FBT1o7QUFDQTtBQUNJO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDSTtBQUNBO0FBQ0k7QUFBUztBQUNMO0FBQ0E7QUFDSDtBQUNEO0FBQVM7QUFDQTtBQUNMO0FBQ0g7QUFDRDtBQUFTO0FBQ0g7QUFDRjtBQUNIO0FBQ0Q7QUFBUztBQUNDO0FBQ047QUFDSDtBQUNEO0FBQVM7QUFDQTtBQUNMO0FBQ0g7QUFDRDtBQUFTO0FBQ0Y7QUFDSDtBQUNIO0FBeEJMO0FBMEJEO0FBRUY7QUFDRDtBQUNJOztBQUVBO0FBQ0k7QUFDSTtBQUFVO0FBR0Y7QUFDQTtBQUNBO0FBQ0E7QUFDSTtBQUNBO0FBQ0E7QUFDQztBQUNBO0FBQ0E7QUFDQTtBQUNEO0FBQ0E7QUFDQTtBQUNIO0FBQ0Q7QUFDQTtBQUNJO0FBQ0E7QUFDSDtBQUNEO0FBdkJFOztBQUVOO0FBQXNDO0FBc0JyQztBQUNKO0FBQ0o7QUFFSjtBQUdKO0FBQ0Q7O0FBS0k7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDSDtBQUNEO0FBQ0k7QUFDSTtBQUNJO0FBQ0g7QUFFSjtBQUVKO0FBQ0Q7QUFDQTs7QUFFQTtBQTdHSzs7Ozs7Ozs7OztBQ0RUO0FBQ0k7O0FBRUE7QUFDSTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVZROztBQWFaO0FBQ0E7QUFDQztBQUVBOztBQXBCSSIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIHRleHQ6IGNjLlJpY2hUZXh0XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogbXNnOiDmmL7npLrnmoTlhoXlrrlcclxuICAgICAqIHN1cmVFdmVudDog56Gu5a6a5oyJ6ZKu5Zue6LCD5Ye95pWw77yM5rKh5pyJ5LygdW5kZWZpbmVk5oiW6ICFbnVsbFxyXG4gICAgICogY2FuY2VsRXZlbnQ6IOi/lOWbnuaMiemSruWbnuiwg+WHveaVsO+8jOayoeacieS8oHVuZGVmaW5lZOaIluiAhW51bGxcclxuICAgICAqIHN1ZXJQYXJhbWV0ZXI6IOehruWumuaMiemSruWbnuiwg+WHveaVsOWPguaVsFxyXG4gICAgICogY2FuY2VsUGFyYW1ldGVyOiDov5Tlm57mjInpkq7lm57osIPlh73mlbDlj4LmlbBcclxuICAgICAqL1xyXG4gICAgaW5pdEFsZXJ0OiBmdW5jdGlvbihtc2csIHN1cmVFdmVudCwgY2FuY2VsRXZlbnQsc3VlclBhcmFtZXRlcixjYW5jZWxQYXJhbWV0ZXIpe1xyXG4gICAgICAgIHRoaXMudGV4dC5zdHJpbmcgPSBtc2c7XHJcbiAgICAgICAgdGhpcy5zdXJlRXZlbnQgPSBzdXJlRXZlbnQ7XHJcbiAgICAgICAgdGhpcy5jYW5jZWxFdmVudCA9IGNhbmNlbEV2ZW50O1xyXG4gICAgICAgIHRoaXMuc3VlclBhcmFtZXRlciA9IHN1ZXJQYXJhbWV0ZXI7XHJcbiAgICAgICAgdGhpcy5jYW5jZWxQYXJhbWV0ZXIgPSBjYW5jZWxQYXJhbWV0ZXI7XHJcbiAgICB9LFxyXG5cclxuICAgIHN1cmVDbGlja0V2ZW50OiBmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmKHRoaXMuc3VyZUV2ZW50KXtcclxuICAgICAgICAgICAgdGhpcy5zdXJlRXZlbnQodGhpcy5zdWVyUGFyYW1ldGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5ub2RlLmRlc3Ryb3koKTtcclxuICAgIH0sXHJcblxyXG4gICAgY2FuY2VsQ2xpY2tFdm5ldDogZnVuY3Rpb24oKXtcclxuICAgICAgICBjYy5sb2coJ2NhbmNlbENsaWNrRXZuZXQnKVxyXG4gICAgICAgIGlmKHRoaXMuY2FuY2VsRXZlbnQpe1xyXG4gICAgICAgICAgICB0aGlzLmNhbmNlbEV2ZW50KHRoaXMuY2FuY2VsUGFyYW1ldGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5ub2RlLmRlc3Ryb3koKTtcclxuICAgIH1cclxufSk7XHJcbiIsImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgLy8gZm9vOiB7XHJcbiAgICAgICAgLy8gICAgZGVmYXVsdDogbnVsbCwgICAgICAvLyBUaGUgZGVmYXVsdCB2YWx1ZSB3aWxsIGJlIHVzZWQgb25seSB3aGVuIHRoZSBjb21wb25lbnQgYXR0YWNoaW5nXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICB0byBhIG5vZGUgZm9yIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgLy8gICAgdXJsOiBjYy5UZXh0dXJlMkQsICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxyXG4gICAgICAgIC8vICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSwgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIHZpc2libGU6IHRydWUsICAgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIGRpc3BsYXlOYW1lOiAnRm9vJywgLy8gb3B0aW9uYWxcclxuICAgICAgICAvLyAgICByZWFkb25seTogZmFsc2UsICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIGZhbHNlXHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICAvLyAuLi5cclxuICAgIH0sXHJcblxyXG4gICAgLy/liqDovb3pkrHluoTlnLrmma9cclxuICAgIGJhY2s6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoJ2JhbmsnKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIG1vbmV5X2xhYmVsOiBjYy5MYWJlbCxcclxuICAgIH0sXHJcblxyXG4gICAgLy8g6L+U5Zue5LiK5LiA5Zy65pmvXHJcbiAgICBiYWNrOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuTGFzdCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyDliqDovb0g6ZO25Lik5Y+W5qy+IOWcuuaZr1xyXG4gICAgbG9hZEdldFNpbHZlclNjZW5lOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbG9hZGluZ1NjZW5lKCdnZXRTaWx2ZXInLCAnYmFuaycpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyDliqDovb0g6ZO25Lik5a2Y5qy+IOWcuuaZr1xyXG4gICAgbG9hZFNhdmVTaWx2ZXJTY2VuZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxvYWRpbmdTY2VuZSgnc2F2ZVNpbHZlcicsICdiYW5rJyk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIOWKoOi9vSDph5HnoJblj5bmrL4g5Zy65pmvXHJcbiAgICBsb2FkR2V0R29sZFNjZW5lOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbG9hZGluZ1NjZW5lKCdnZXRHb2xkJywgJ2JhbmsnKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8g5Yqg6L29IOmHkeegluWtmOasviDlnLrmma9cclxuICAgIGxvYWRTYXZlR29sZFNjZW5lOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbG9hZGluZ1NjZW5lKCdzYXZlR29sZCcsICdiYW5rJyk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIOWKoOi9vSDmsYLotK3ph5HnoJYg5Zy65pmvXHJcbiAgICBsb2FkQnV5R29sZFNjZW5lOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbG9hZGluZ1NjZW5lKCdidXlHb2xkJywgJ2JhbmsnKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8g5Yqg6L29IOWHuuWUrumHkeegliDlnLrmma9cclxuICAgIGxvYWRTZWxsR29sZFNjZW5lOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbG9hZGluZ1NjZW5lKCdzZWxsR29sZCcsICdiYW5rJyk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIOWKoOi9vSDorqLljZXorrDlvZUg5Zy65pmvXHJcbiAgICBsb2FkT3JkZXJzU2NlbmU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsb2FkaW5nU2NlbmUoJ2JhbmtPcmRlcnMnLCAnYmFuaycpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyDliqDovb0g6YeR56CW5YWF5YC8IOWcuuaZr1xyXG4gICAgbG9hZFJlY2hhcmdlR29sZFNjZW5lOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbG9hZGluZ1NjZW5lKCdyZWNoYXJnZUdvbGQnLCAnYmFuaycpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyDliqDovb0g5p+l55yL6YeR5Yi4IOWcuuaZr1xyXG4gICAgbG9hZExvb2tPdmVyR29sZENlcnRpZmljYXRlU2NlbmU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsb2FkaW5nU2NlbmUoJ2xvb2tPdmVyR29sZENlcnRpZmljYXRlJywgJ2JhbmsnKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8g5Yqg6L29IOmHkeWIuOWFheWAvCDlnLrmma9cclxuICAgIGxvYWRSZWNoYXJnZUdvbGRDZXJ0aWZpY2F0ZVNjZW5lOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbG9hZGluZ1NjZW5lKCdyZWNoYXJnZUdvbGRDZXJ0aWZpY2F0ZScsICdiYW5rJyk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIGFqYXhEYXRhKEh4c2dVcmwuYmFua1VybCwgbnVsbCxmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgICAgIHZhciBtb25leSA9IG1zZy5yZXN1bHQ7IC8v5ou/5Yiw6YeR6ZO25pWw5o2uXHJcbiAgICAgICAgICAgIC8v5a2Y5YWl5YWo5bGA5Y+Y6YePXHJcbiAgICAgICAgICAgIEJhbmsuYmFua0dvbGQgPSBtb25leS5tb25leS5qaW47XHJcbiAgICAgICAgICAgIEJhbmsuYmFua1NpbHZlciA9IG1vbmV5Lm1vbmV5LnlpbjtcclxuICAgICAgICAgICAgQmFuay5wbGF5ZXJHb2xkID0gbW9uZXkucm9sZS5qaW47XHJcbiAgICAgICAgICAgIEJhbmsucGxheWVyU2lsdmVyID0gbW9uZXkucm9sZS55aW47XHJcblxyXG4gICAgICAgICAgICBzZWxmLm1vbmV5X2xhYmVsLnN0cmluZyA9IFwi5oKo55uu5YmN5pyJXCIgKyBCYW5rLnBsYXllclNpbHZlciArIFwi5LikXCIgKyBCYW5rLnBsYXllckdvbGQgKyBcIumHkeegllwiO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwidmFyIHNlbGY7XHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgdGl0bGVMYWJlbDogY2MuTGFiZWwsXHJcbiAgICAgICAgbmFtZUxhYmVsOiBjYy5MYWJlbCxcclxuICAgICAgICBsZXZlbExhYmVsOiBjYy5MYWJlbCxcclxuICAgICAgICB4aWFvZ3VvTGFiZWw6IGNjLkxhYmVsLFxyXG4gICAgICAgIGppZXNoYW9MYWJlbDogY2MuTGFiZWwsXHJcbiAgICAgICAgcGhvdG86IGNjLlNwcml0ZVxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2Ugc2VsZiBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgbG9hZENvbW1vbVNjZW5jZSgpO1xyXG4gICAgICAgIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHNlbGYuaW5pdERldGFpbCgpO1xyXG4gICAgICAgIC8vY3VySXRlbURhdGFcclxuICAgICAgICBhamF4RGF0YShIeHNnVXJsLmJhb3NoaUl0ZW1VcmwsIHsnaWQnOiczMTUnfSwgc2VsZi5pbml0RGV0YWlsKTtcclxuICAgIH0sXHJcblxyXG4gICAgaW5pdERldGFpbDogZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgaWYoZGF0YSA9PT0gdW5kZWZpbmVkIHx8IGRhdGEgPT09IG51bGwpe1xyXG4gICAgICAgICAgICBzZWxmLnRpdGxlTGFiZWwuc3RyaW5nID0gJyc7XHJcbiAgICAgICAgICAgIHNlbGYubmFtZUxhYmVsLnN0cmluZyA9ICcnO1xyXG4gICAgICAgICAgICBzZWxmLmxldmVsTGFiZWwuc3RyaW5nID0gJyc7XHJcbiAgICAgICAgICAgIHNlbGYueGlhb2d1b0xhYmVsLnN0cmluZyA9ICcnO1xyXG4gICAgICAgICAgICBzZWxmLmppZXNoYW9MYWJlbC5zdHJpbmcgPSAnJztcclxuICAgICAgICAgICAgc2VsZi5waG90by5zcHJpdGVGcmFtZSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHZhciBtc2cgPSBkYXRhLm1zZztcclxuICAgICAgICAgICAgc2VsZi50aXRsZUxhYmVsLnN0cmluZyA9IG1zZy56d05hbWU7XHJcbiAgICAgICAgICAgIHNlbGYubmFtZUxhYmVsLnN0cmluZyA9IG1zZy56d05hbWU7XHJcbiAgICAgICAgICAgIHNlbGYubGV2ZWxMYWJlbC5zdHJpbmcgPSBtc2cuendMZXZlbDtcclxuICAgICAgICAgICAgc2VsZi54aWFvZ3VvTGFiZWwuc3RyaW5nID0gbXNnLnp3WGlhb0d1bztcclxuICAgICAgICAgICAgc2VsZi5qaWVzaGFvTGFiZWwuc3RyaW5nID0gbXNnLnp3TWlhb1NodTtcclxuICAgICAgICAgICAgaWYobXNnLnp3VXJsKXtcclxuICAgICAgICAgICAgICAgIGNjLmxvYWRlci5sb2FkUmVzKG1zZy56d1VybCwgY2MuU3ByaXRlRnJhbWUsIGZ1bmN0aW9uKGVyciwgdGV4KXtcclxuICAgICAgICAgICAgICAgICAgICBpZighZXJyKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5waG90by5zcHJpdGVGcmFtZSA9IHRleDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vTGFiZWzlm6DkuLrlhoXlrrnkv67mlLloZWlnaHTlj5HnlJ/mlLnlj5jml7bvvIxsYXlvdXTnu4Tku7bkuI3kvJroh6rliqjmm7TmlrDvvIzlj6/kvb/nlKjlr7nnu4Tku7bmiYDlnKjoioLngrloZWlnaHTov5vooYzorr7nva7mv4DmtLtsYXlvdXTnu4Tku7boh6rliqjmm7TmlrBcclxuICAgICAgICAgICAgc2VsZi5uYW1lTGFiZWwubm9kZS5wYXJlbnQuaGVpZ2h0ICs9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBiYWNrRXZlbnQ6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgY3VySXRlbURhdGEgPSBudWxsO1xyXG4gICAgICAgIHJldHVybkxhc3RTY2VuZShIeHNnU2NlbmVzLmJhb3NoaSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgc2VsZiBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgLy8gZm9vOiB7XHJcbiAgICAgICAgLy8gICAgZGVmYXVsdDogbnVsbCwgICAgICAvLyBUaGUgZGVmYXVsdCB2YWx1ZSB3aWxsIGJlIHVzZWQgb25seSB3aGVuIHRoZSBjb21wb25lbnQgYXR0YWNoaW5nXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICB0byBhIG5vZGUgZm9yIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgLy8gICAgdXJsOiBjYy5UZXh0dXJlMkQsICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxyXG4gICAgICAgIC8vICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSwgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIHZpc2libGU6IHRydWUsICAgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIGRpc3BsYXlOYW1lOiAnRm9vJywgLy8gb3B0aW9uYWxcclxuICAgICAgICAvLyAgICByZWFkb25seTogZmFsc2UsICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIGZhbHNlXHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICAvLyAuLi5cclxuICAgIH0sXHJcblxyXG4gICAgLy/liqDovb3pkrHluoTlnLrmma9cclxuICAgIGJhY2s6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoJ2JhbmsnKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIGNoYXRNbmc6IGNjLk5vZGUsXHJcbiAgICAgICAgc3BlYWtQcmVmYWI6IGNjLlByZWZhYlxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY2hhdE1uZyA9IHRoaXMuY2hhdE1uZy5nZXRDb21wb25lbnQoJ0NoYXRNYW5hZ2VyJyk7XHJcbiAgICAgICAgdGhpcy5jYW52YXMgPSBjYy5maW5kKCdDYW52YXMnKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDov5Tlm57kuIrkuIDlnLrmma9cclxuICAgICAqL1xyXG4gICAgYmFja0V2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIC8v6L+U5ZueXHJcbiAgICAgICAgY2MubG9nKCfov5Tlm54nKTtcclxuICAgICAgICByZXR1cm5MYXN0U2NlbmUoSHhzZ1NjZW5lcy5pbmRleGNoYXQpO1xyXG4gICAgfSxcclxuXHJcbiAgICByZWZyZXNoRXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL+WIt+aWsFxyXG4gICAgICAgIGNjLmxvZygn5Yi35pawJyk7XHJcbiAgICAgICAgdGhpcy5jaGF0TW5nLnVwZGF0YU1lc3NhZ2VEYXRhKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNwZWFrRXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZihjdXJDaGFubmVsID09PSAzKSB7XHJcbiAgICAgICAgICAgIGNjLmxvZygn5LiW55WM6aKR6YGT56aB5q2i5Y+R6KiAJyk7XHJcbiAgICAgICAgICAgIHJldHVybjsgICAgLy/kuJbnlYzpopHpgZPnpoHmraLlj5HoqIBcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihjdXJDaGFubmVsID09PSAxKXtcclxuICAgICAgICAgICAgLy9UT0RPOumXqOa0vumqjOivgVxyXG4gICAgICAgICAgICBjYy5sb2coJ+mXqOa0vuezu+e7n+i/mOacquW8gOaUvicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL+WPkeiogFxyXG4gICAgICAgIGNjLmxvZygn5Y+R6KiAJyk7XHJcbiAgICAgICAgdmFyIHNwZWFrID0gY2MuaW5zdGFudGlhdGUodGhpcy5zcGVha1ByZWZhYik7XHJcbiAgICAgICAgc3BlYWsueCA9IDA7XHJcbiAgICAgICAgc3BlYWsueSA9IDA7XHJcbiAgICAgICAgdGhpcy5jYW52YXMuYWRkQ2hpbGQoc3BlYWspO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOi/m+WFpeiBiuWkqeWcuuaZr1xyXG4gICAgICovXHJcbiAgICB2aWV3Q2xpY2tFdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmxvZygn5Yqg6L296IGK5aSp6aG16Z2iJyk7XHJcbiAgICAgICAgbG9hZFNjZW5lKEh4c2dTY2VuZXMuaW5kZXhjaGF0LCBIeHNnU2NlbmVzLmluZGV4KTtcclxuICAgIH0sXHJcblxyXG4gICAgaG90a2V5RXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coJ+W/q+aNt+mUricpO1xyXG4gICAgICAgIC8vVE9ETzrmmL7npLrlv6vmjbfplK7pnaLmnb9cclxuICAgIH1cclxuXHJcbn0pO1xyXG4iLCJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdmlzaWJsZTogZmFsc2VcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gdGhpcy5yaWNoVGV4dCA9IHRoaXMubm9kZS5nZXRDb21wb25lbnQoY2MuUmljaFRleHQpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOiBiuWkqeeql+eCueWHu+Wnk+WQjeeahOeCueWHu+S6i+S7tlxyXG4gICAgICovXHJcbiAgICBjbGlja05hbWVFdmVudDogZnVuY3Rpb24oKXtcclxuICAgICAgICBjYy5sb2coJ2NsaWNrIGlkID0gJyArIHRoaXMuZGF0YSk7XHJcbiAgICAgICAgcm9sZU1zZy5pZD10aGlzLmRhdGEucm9sZWlkO1xyXG4gICBsb2FkaW5nU2NlbmUoSHhzZ1NjZW5lcy5mcmllbmRJbmZvLCBIeHNnU2NlbmVzLmluZGV4KVxyXG5cclxuXHJcblxyXG4gICAgICAgIC8vVE9ETzrngrnlh7vkuovku7ZcclxuICAgIH0sXHJcblxyXG4gICAgc2V0TXNnOiBmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgIHZhciB0aW1lID0gdGhpcy5kYXRlVG9UaW1lKGRhdGEuZGF0YSk7XHJcbiAgICAgICAgdGhpcy5ub2RlLmdldENvbXBvbmVudChjYy5SaWNoVGV4dCkuc3RyaW5nID0gdGhpcy5idWlsZFJpY2hUZXh0KHRpbWUsIGRhdGEucm9sZW5hbWUsIGRhdGEubWVzc2FnZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5p6E6YCgaW1hZ2XnmoTlr4zmlofmnKzlrZfnrKbkuLJcclxuICAgICAqL1xyXG4gICAgcmljaFRleHRJbWFnZTogZnVuY3Rpb24oaW1nKXtcclxuICAgICAgICByZXR1cm4gJzxpbWcgc3JjPVxcXCInK2ltZysnXFxcIi8+JztcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmnoTpgKDlr4zmlofmnKzlhoXlrrlcclxuICAgICAqL1xyXG4gICAgYnVpbGRSaWNoVGV4dDogZnVuY3Rpb24odGltZSwgbmFtZSwgbXNnKXtcclxuICAgICAgICB2YXIgcmljaFRleHQgPSB0aW1lICsgJyA8Y29sb3I9I0ZGRkYwMCBjbGljaz1cImNsaWNrTmFtZUV2ZW50XCI+JyArIG5hbWUgKyAnPC9jPjonICsgbXNnO1xyXG4gICAgICAgIC8vIGNjLmxvZyhuYW1lICsgJ3JpY2hUZXh0ID0gJyArIHJpY2hUZXh0KTtcclxuICAgICAgICByZXR1cm4gcmljaFRleHQ7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5pel5pyf5qC85byP6L2s5o2iLS0+5bCP5pe277ya5YiG6ZKfXHJcbiAgICAgKi9cclxuICAgIGRhdGVUb1RpbWU6IGZ1bmN0aW9uKGRhdGUpe1xyXG4gICAgICAgIC8vcFtpXS5kYXRhXHJcbiAgICAgICAgdmFyIGQ9IG5ldyBEYXRlKGRhdGUpO1xyXG4gICAgICAgIHZhciBoaD1kLmdldEhvdXJzKCk7XHJcbiAgICAgICAgdmFyIG1tPSBkLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICBpZihtbTwxMCl7XHJcbiAgICAgICAgICAgIG1tPVwiMFwiK21tO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihoaDwxMCl7XHJcbiAgICAgICAgICAgIGhoPVwiMFwiK2hoO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdGltZXM9aGgrXCI6XCIrbW07XHJcbiAgICAgICAgcmV0dXJuIHRpbWVzO1xyXG4gICAgfVxyXG59KTtcclxuIiwiLy/lvZPliY3popHpgZPkuIvmoIfvvJow44CB5Yy677ybMeOAgea0vu+8mzLjgIHllYbvvJsz44CB5LiW77yMXHJcbi8v5rOo5oSP77ya5LiObnVt5YC85LiN5ZCM77yM6aKR6YGTY2hhbm5lbOaYr+S7peS4i+aghzDlvIDlp4tcclxud2luZG93LmN1ckNoYW5uZWwgPSAyO1xyXG52YXIgc2VsZjtcclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBjaGF0UHJlYWI6IGNjLlByZWZhYixcclxuICAgICAgICBjb250ZW50OiBjYy5Ob2RlLFxyXG4gICAgICAgIHRpcENvbG9yOiBjYy5Db2xvciwgICAgICAvL+aWsOa2iOaBr+agh+ivhuminOiJsi/lvZPliY3mmL7npLrogYrlpKnpobXpnaLnmoTmoIfpopjog4zmma/popzoibJcclxuICAgICAgICBidG5iZzogY2MuTm9kZSxcclxuICAgICAgICBidG5MaXN0OiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5CdXR0b25cclxuICAgICAgICB9LFxyXG4gICAgICAgIGxhYmVsTGlzdDoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBbXSxcclxuICAgICAgICAgICAgdHlwZTogY2MuTGFiZWxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRoaXNDaGFubmVsOiAtMSwgICAgICAgIC8v5L+d5a2Y5pys5a6e5L6L55qE6aKR6YGT77yM55So5LqO5LiO5YWo5bGA6aKR6YGT5YC85q+U6L6DXHJcbiAgICAgICAgZGF0YUxpc3Q6IFtdLCAgICAgICAgICAgLy/kv53lrZjojrflj5bnmoTogYrlpKnmlbDmja5cclxuICAgICAgICBpdGVtTGlzdDogW10sICAgICAgICAgICAvL+S/neWtmOWKqOaAgeWIm+W7uueahOiBiuWkqWl0ZW1zXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgc2VsZi51cGRhdGFNZXNzYWdlRGF0YSgpO1xyXG4gICAgICAgIFNvY2tldEV2ZW50cy51cGRhdGFDaGF0ID0gc2VsZi51cGRhdGVDaGFubmVsO1xyXG5cclxuICAgICAgICB0aGlzLmVuZW15UG9vbCA9IG5ldyBjYy5Ob2RlUG9vbCgpO1xyXG4gICAgICAgIGxldCBpbml0Q291bnQgPSAyMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluaXRDb3VudDsgKytpKSB7XHJcbiAgICAgICAgICAgIGxldCBlbmVteSA9IGNjLmluc3RhbnRpYXRlKHRoaXMuY2hhdFByZWFiKTsgLy8g5Yib5bu66IqC54K5XHJcbiAgICAgICAgICAgIHRoaXMuZW5lbXlQb29sLnB1dChlbmVteSk7IC8vIOmAmui/hyBwdXRJblBvb2wg5o6l5Y+j5pS+5YWl5a+56LGh5rGgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHZhciBzb2NrZXQgPSBuZXcgU29ja2V0SHhzZygnZGRkJyk7XHJcbiAgICAgICAgLy8gc29ja2V0LmluaXRXUygpO1xyXG4gICAgfSxcclxuXHJcbiAgICBvbkRlc3Ryb3k6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBTb2NrZXRFdmVudHMudXBkYXRhQ2hhdCA9IG51bGw7XHJcbiAgICB9LFxyXG5cclxuICAgIHRlc3Q6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgXCJpZFwiOiAxMTk4LFxyXG4gICAgICAgICAgICBcInJvbGVpZFwiOiAxMDAxLC8v5ri45oiP6KeS6ImySUREXHJcbiAgICAgICAgICAgIFwicm9sZW5hbWVcIjogXCJhd2Rhd2RcIiwvL+inkuiJsuWQjVxyXG4gICAgICAgICAgICBcIm1lc3NhZ2VcIjogXCLkvaDmmK/kuKrlpb3kurrvvIEgPGltZyBzcmM9XFxcImYwMDBcXFwiLz5cIiwvL+S/oeaBr1xyXG4gICAgICAgICAgICBcImRhdGFcIjogXCJPY3QgMTAsIDIwMTYgMjowMDoxMiBQTVwiLy/ml7bpl7RcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVJdGVtKGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5Yv5pu05paw6IGK5aSp5pWw5o2uXHJcbiAgICAgKi9cclxuICAgIHVwZGF0YU1lc3NhZ2VEYXRhOiBmdW5jdGlvbiAoKSB7XHJcblxyXG5cclxuICAgICAgICBhamF4RGF0YShIeHNnVXJsLmNoYXRVcmwsIG51bGwsIGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICAgICAgdmFyIHRvdGFsTXNnID0gbXNnLm1zZztcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b3RhbE1zZy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG51bSA9IHRvdGFsTXNnW2ldWzBdO1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleU1zZyA9IHRvdGFsTXNnW2ldWzFdO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5kYXRhTGlzdFtudW0gLSAxXSA9IGtleU1zZztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDIwOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gY2MuaW5zdGFudGlhdGUoc2VsZi5jaGF0UHJlYWIpO1xyXG4gICAgICAgICAgICAgICAgaXRlbS5uYW1lID0gJ2NoYXRfJyArIGk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmNvbnRlbnQuYWRkQ2hpbGQoaXRlbSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2VsZi5pbml0Q2hhbm5lbCgpO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIC8vICQuYWpheCh7XHJcbiAgICAgICAgLy8gICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgIC8vICAgICAvLyB1cmw6IFwiaHR0cDovLzExOS4yOS4yMzQuMTg0OjgwODAvaHhzZy9jb2NvczJkSW5kZXgvY2hhdE1zZ1wiLC8v5rWL6K+V6ZO+5o6lXHJcbiAgICAgICAgLy8gICAgIHVybDogSHhzZ1VybC5jaGF0VXJsLFxyXG4gICAgICAgIC8vICAgICBkYXRhVHlwZTogJ2pzb25wJyxcclxuICAgICAgICAvLyAgICAganNvbnA6IFwianNvbnBDYWxsYmFja1wiLFxyXG4gICAgICAgIC8vICAgICBzdWNjZXNzOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgLy8gICAgICAgICAvL1RPRE866Kej5p6Q5pWw5o2uXHJcbiAgICAgICAgLy8gICAgICAgICB2YXIgdG90YWxNc2cgPSBtc2cubXNnO1xyXG4gICAgICAgIC8vICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0b3RhbE1zZy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHZhciBudW0gPSB0b3RhbE1zZ1tpXVswXTtcclxuICAgICAgICAvLyAgICAgICAgICAgICB2YXIga2V5TXNnID0gdG90YWxNc2dbaV1bMV07XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgc2VsZi5kYXRhTGlzdFtudW0gLSAxXSA9IGtleU1zZztcclxuICAgICAgICAvLyAgICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gICAgICAgICBzZWxmLmluaXRDaGFubmVsKCk7XHJcbiAgICAgICAgLy8gICAgIH0sXHJcbiAgICAgICAgLy8gICAgIGVycm9yOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gICAgICAgICBjYy5sb2coJ+iOt+WPluiBiuWkqeS/oeaBr+aVsOaNruWksei0pScpO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vLS0tLS0tLS0tLS0tLS0tLS0tLS3ogYrlpKnnlYzpnaLnqpflj6PnrqHnkIZcclxuICAgIC8qKlxyXG4gICAgICog5Yid5aeL5YyWXHJcbiAgICAgKi9cclxuICAgIGluaXRDaGFubmVsOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8x44CB5Yy677ybMuOAgea0vu+8mzPjgIHllYbvvJs044CB5LiWXHJcbiAgICAgICAgLy/pu5jorqTmmL7npLrllYZcclxuICAgICAgIC8vIHRoaXMuY2xlYXJDaGF0KCk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA0OyBpKyspIHtcclxuICAgICAgICAgICAgLy/liqjmgIHnu5Hlrprngrnlh7vkuovku7ZcclxuICAgICAgICAgICAgdGhpcy5jaGFubmVsRXZlbnQoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2hhbmdlQ2hhbm5lbCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOWIh+aNoumikemBk1xyXG4gICAgICovXHJcbiAgICBjaGFuZ2VDaGFubmVsOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy/orr7nva7mlrDnmoTpopHpgZPvvIzog4zmma/np7vliqjliLDmlrDpopHpgZPkuItcclxuICAgICAgICBpZiAodGhpcy50aGlzQ2hhbm5lbCAhPT0gY3VyQ2hhbm5lbCkge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJ0bkJnQ29sb3IoY3VyQ2hhbm5lbCk7XHJcbiAgICAgICAgICAgIHRoaXMudGhpc0NoYW5uZWwgPSBjdXJDaGFubmVsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmNyZWF0ZUl0ZW0oKTtcclxuICAgICAgICAvLyB0aGlzLmNsZWFyQ2hhdCgpO1xyXG5cclxuXHJcblxyXG4gICAgICAgIC8vIHNlbGYuY29udGVudC5hZGRDaGlsZChpdGVtKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmm7TmlrDpopHpgZPog4zmma/popzoibJcclxuICAgICAqIOmikemBk1xyXG4gICAgICog5piv5ZCm5b2T5YmN6aKR6YGTXHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZUJ0bkJnQ29sb3I6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL+enu+WKqOiDjOaZr1xyXG4gICAgICAgIHZhciBzZXEgPSBjYy5zZXF1ZW5jZShjYy5tb3ZlVG8oMC4yLCBjYy5wKHRoaXMuYnRuTGlzdFtjdXJDaGFubmVsXS5ub2RlLngsIDApKS5lYXNpbmcoY2MuZWFzZUN1YmljQWN0aW9uT3V0KDEpKSk7XHJcbiAgICAgICAgdGhpcy5idG5iZy5ydW5BY3Rpb24oc2VxKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmm7TmlrDmi7zliLDmloflrZfpopzoibJcclxuICAgICAqIOmikemBk1xyXG4gICAgICog5piv5ZCm5b2T5YmN6aKR6YGTXHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZUJ0blRleHRDb2xvcjogZnVuY3Rpb24gKGNoYW5uZWwsIGlzQ3VycmVudCkge1xyXG4gICAgICAgIHRoaXMubGFiZWxMaXN0W2NoYW5uZWxdLm5vZGUuY29sb3IgPSBpc0N1cnJlbnQgPyBjYy5Db2xvci5XSElURSA6IHRoaXMudGlwQ29sb3I7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5rOo5YaM5oyJ6ZKu54K55Ye75LqL5Lu2XHJcbiAgICAgKi9cclxuICAgIGNoYW5uZWxFdmVudDogZnVuY3Rpb24gKGkpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5idG5MaXN0W2ldLm5vZGUub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfRU5ELCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgaWYgKGN1ckNoYW5uZWwgPT09IGkpIHJldHVybjtcclxuICAgICAgICAgICAgY3VyQ2hhbm5lbCA9IGk7XHJcbiAgICAgICAgICAgIHNlbGYubGFiZWxMaXN0W2ldLm5vZGUuY29sb3IgPSBjYy5Db2xvci5XSElURTtcclxuICAgICAgICAgICAgc2VsZi5jaGFuZ2VDaGFubmVsKCk7XHJcbiAgICAgICAgICAgIGNjLmxvZygnY2xpY2sgJyArIGN1ckNoYW5uZWwpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICB1cGRhdGVDaGFubmVsOiBmdW5jdGlvbiAoY2hhbm5lbCwga2V5TXNnKSB7XHJcbiAgICAgICAgY2MubG9nKGtleU1zZyk7XHJcbiAgICAgICAgaWYgKGN1ckNoYW5uZWwgPT09IGNoYW5uZWwpIHtcclxuICAgICAgICAgICAgc2VsZi5kYXRhTGlzdFtjaGFubmVsXSA9IGtleU1zZztcclxuICAgICAgICAgICAgc2VsZi5jaGFuZ2VDaGFubmVsKGNoYW5uZWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5kYXRhTGlzdFtjaGFubmVsXSA9IGtleU1zZztcclxuICAgICAgICAgICAgc2VsZi51cGRhdGVCdG5UZXh0Q29sb3IoY2hhbm5lbCwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Yib5bu66IGK5aSpaXRlbVxyXG4gICAgICovXHJcbiAgICBjcmVhdGVJdGVtOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGl0ZW1zID0gc2VsZi5jb250ZW50LmNoaWxkcmVuO1xyXG4gICAgICAgIGNjLmxvZyggc2VsZi5jb250ZW50LmNoaWxkcmVuQ291bnQpIFxyXG4gICAgICAgIHNlbGYuY2xlYXJDaGF0KCk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAyMDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gdGhpcy5kYXRhTGlzdFtjdXJDaGFubmVsXVtpXTtcclxuICAgICAgICAgICAgICAvL2RhdGE9ZXZhbChcIihcIitkYXRhK1wiKVwiKTtcclxuICAgICAgICAgICAgaWYgKGRhdGEgIT0gXCJcIiAmJiBkYXRhICE9IG51bGwgJiYgdHlwZW9mIChkYXRhKSAhPSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBpdGVtc1tpXTtcclxuICAgICAgICAgICAgICAgIC8v6Ieq6YCC5bqU5YiG6L6o546H6K6+572u5a695bqm77yM55WZ5Ye65Lik6L6555qE56m655m9LOW3puWPs+WQhDIwXHJcbiAgICAgICAgICAgICAgICB2YXIgcmljaFRleHQgPSBpdGVtLmdldENvbXBvbmVudChjYy5SaWNoVGV4dCk7XHJcbiAgICAgICAgICAgICAgICByaWNoVGV4dC5tYXhXaWR0aCA9IHNlbGYuY29udGVudC53aWR0aCAtIDQwO1xyXG4gICAgICAgICAgICAgICAgdmFyIGl0ZW1Db21wID0gaXRlbS5nZXRDb21wb25lbnQoJ0NoYXRMYWJlbEV2ZW50Jyk7XHJcbiAgICAgICAgICAgICAgICBpdGVtQ29tcC5zZXRNc2coZGF0YSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgIH1cclxuIFxyXG4gICAgICAgIFxyXG5cclxuICAgICAgICAvLyB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgIC8vIC8vIHZhciBpdGVtID0gY2MuaW5zdGFudGlhdGUoc2VsZi5jaGF0UHJlYWIpO1xyXG4gICAgICAgIC8vIHZhciBpdGVtID0gdGhpcy5lbmVteVBvb2wuZ2V0KCk7XHJcbiAgICAgICAgLy8gaXRlbS5uYW1lID0gJ2NoYXRfJyArIGRhdGEuaWQ7XHJcbiAgICAgICAgLy8gLy/oh6rpgILlupTliIbovqjnjoforr7nva7lrr3luqbvvIznlZnlh7rkuKTovrnnmoTnqbrnmb0s5bem5Y+z5ZCEMjBcclxuICAgICAgICAvLyB2YXIgcmljaFRleHQgPSBpdGVtLmdldENvbXBvbmVudChjYy5SaWNoVGV4dCk7XHJcbiAgICAgICAgLy8gcmljaFRleHQubWF4V2lkdGggPSBzZWxmLmNvbnRlbnQud2lkdGggLSA0MDtcclxuXHJcbiAgICAgICAgLy8gdmFyIGl0ZW1Db21wID0gaXRlbS5nZXRDb21wb25lbnQoJ0NoYXRMYWJlbEV2ZW50Jyk7XHJcbiAgICAgICAgLy8gaXRlbUNvbXAuc2V0TXNnKGRhdGEpO1xyXG5cclxuICAgICAgICAvLyBzZWxmLmNvbnRlbnQuYWRkQ2hpbGQoaXRlbSk7XHJcbiAgICAgICAgLy8gc2VsZi5pdGVtTGlzdC5wdXNoKGl0ZW0pO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqICDmuIXnqbrogYrlpKnliJfooahcclxuICAgICAqL1xyXG4gICAgY2xlYXJDaGF0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8gdGhpcy5jb250ZW50LnJlbW92ZUFsbENoaWxkcmVuKCk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLml0ZW1MaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5lbXlQb29sLnB1dCh0aGlzLml0ZW1MaXN0W2ldKTtcclxuICAgICAgICAgICAgLy8gdGhpcy5pdGVtTGlzdFtpXS5kZXN0cm95KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaXRlbUxpc3QgPSBbXTtcclxuICAgIH1cclxufSk7XHJcbiIsInZhciBlbW9qaXMgPSBbXCJmMDAxXCIsIFwiZjAwMlwiLCBcImYwMDNcIiwgXCJmMDA0XCIsIFwiZjAwNVwiLCBcImYwMDZcIiwgXCJmMDA3XCIsIFwiZjAwOFwiLCBcImYwMDlcIiwgXCJmMDEwXCIsIFwiZjAxMVwiLCBcImYwMTJcIiwgXCJmMDEzXCIsIFwiZjAxNFwiLCBcImYwMTVcIiwgXCJmMDE2XCIsIFwiZjAxN1wiLCBcImYwMThcIiwgXCJmMDE5XCIsIFwiZjAyMFwiLCBcImYwMjFcIiwgXCJmMDIyXCIsIFwiZjAyM1wiXTtcclxuIiwiXHJcbnZhciBzZWxmO1xyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIGNvbnRlbnQ6IGNjLk5vZGUsXHJcbiAgICAgICAgZnVqaWFuZ1ByZWZhYjogY2MuUHJlZmFiLFxyXG4gICAgICAgIGdldEJ0blByZWZhYjogY2MuUHJlZmFiXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgc2VsZi5jbGVhclNjcm9sbHZpZXcoKTtcclxuICAgICAgICBhamF4RGF0YShIeHNnVXJsLmZ1amlhbmdDb25maWdVcmwsIG51bGwsc2VsZi5pbml0RnVqaWFuZ0NvbmZpZyk7XHJcbiAgICB9LFxyXG5cclxuICAgIGluaXRGdWppYW5nQ29uZmlnOiBmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICB2YXIgbXNnID0gZGF0YS5tc2c7XHJcbiAgICAgICAgLy8gdmFyIG1zZyA9IHNlbGYudGVzdEluZm8oKTtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgbXNnLmxlbmd0aDsgaSArKyl7XHJcbiAgICAgICAgICAgIHZhciBpdGVtID0gY2MuaW5zdGFudGlhdGUoc2VsZi5mdWppYW5nUHJlZmFiKTtcclxuICAgICAgICAgICAgaXRlbS5uYW1lID0gJ2Z1amlhbmdQcmVmYWJfJyArIGk7XHJcbiAgICAgICAgICAgIGl0ZW0uZ2V0Q2hpbGRCeU5hbWUoJ2Z1amlhbmdMYWJlbCcpLmdldENvbXBvbmVudCgnRnVqaWFuZ0l0ZW0nKS5pbml0KGksIG1zZ1tpXSk7XHJcbiAgICAgICAgICAgIHNlbGYuY29udGVudC5hZGRDaGlsZChpdGVtKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGdldEJ0biA9IGNjLmluc3RhbnRpYXRlKHNlbGYuZ2V0QnRuUHJlZmFiKTtcclxuICAgICAgICBnZXRCdG4ubmFtZSA9ICdnZXRCdG5QcmVmYWInO1xyXG4gICAgICAgIGdldEJ0bi5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsIHNlbGYuZ2V0QnRuRXZlbnQsIHNlbGYpO1xyXG4gICAgICAgIHNlbGYuY29udGVudC5hZGRDaGlsZChnZXRCdG4pO1xyXG4gICAgICAgIHNlbGYuY29udGVudC5oZWlnaHQgPSAyMCArIHNlbGYuY29udGVudC5oZWlnaHQ7XHJcbiAgICB9LFxyXG5cclxuICAgIGdldEJ0bkV2ZW50OiBmdW5jdGlvbigpe1xyXG4gICAgICAgIGNjLmxvZygn6I635Y+W6IO95a2m5oqA6IO955qE5Y6G5Y+y5Ymv5bCGJyk7XHJcbiAgICB9LFxyXG5cclxuICAgIGJhY2tFdmVudDogZnVuY3Rpb24oKXtcclxuICAgICAgICAvLyBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoSHhzZ1NjZW5lcy5pbmRleCk7XHJcbiAgICAgICAgcmV0dXJuTGFzdFNjZW5lKEh4c2dTY2VuZXMuZnVqaWFuZyk7XHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICBjbGVhclNjcm9sbHZpZXc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNvbnRlbnQucmVtb3ZlQWxsQ2hpbGRyZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyB0ZXN0SW5mbzogZnVuY3Rpb24oKXtcclxuICAgIC8vICAgICB2YXIgbXNnID0ge1xyXG4gICAgLy8gICAgICAgICBcIm1zZ1wiOiBbXHJcbiAgICAvLyAgICAgICAgICAgICB7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgXCJmdUlkXCI6IDEwNTEyLFxyXG4gICAgLy8gICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIigx57qnKeW8oOmCiFwiLFxyXG4gICAgLy8gICAgICAgICAgICAgICAgIFwicm9sZUlkXCI6IDEwMDAsXHJcbiAgICAvLyAgICAgICAgICAgICAgICAgXCJzdGF0dXNcIjogXCLkvJHmga9cIlxyXG4gICAgLy8gICAgICAgICAgICAgfSxcclxuICAgIC8vICAgICAgICAgICAgIHtcclxuICAgIC8vICAgICAgICAgICAgICAgICBcImZ1SWRcIjogMTA1MTMsXHJcbiAgICAvLyAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiKDHnuqcp5ZCV5biDXCIsXHJcbiAgICAvLyAgICAgICAgICAgICAgICAgXCJyb2xlSWRcIjogMTAwMCxcclxuICAgIC8vICAgICAgICAgICAgICAgICBcInN0YXR1c1wiOiBcIuS8keaBr1wiXHJcbiAgICAvLyAgICAgICAgICAgICB9LFxyXG4gICAgLy8gICAgICAgICAgICAge1xyXG4gICAgLy8gICAgICAgICAgICAgICAgIFwiZnVJZFwiOiAxMDYxMCxcclxuICAgIC8vICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCIoMee6pynkuo4g56aBXCIsXHJcbiAgICAvLyAgICAgICAgICAgICAgICAgXCJyb2xlSWRcIjogMTAwMCxcclxuICAgIC8vICAgICAgICAgICAgICAgICBcInN0YXR1c1wiOiBcIuaImOaWl1wiXHJcbiAgICAvLyAgICAgICAgICAgICB9LFxyXG4gICAgLy8gICAgICAgICAgICAge1xyXG4gICAgLy8gICAgICAgICAgICAgICAgIFwiZnVJZFwiOiAxMDM5NyxcclxuICAgIC8vICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCIoNDHnuqcp5ZCV5biDXCIsXHJcbiAgICAvLyAgICAgICAgICAgICAgICAgXCJyb2xlSWRcIjogMTAwMCxcclxuICAgIC8vICAgICAgICAgICAgICAgICBcInN0YXR1c1wiOiBcIuaImOaWl1wiXHJcbiAgICAvLyAgICAgICAgICAgICB9LFxyXG4gICAgLy8gICAgICAgICAgICAge1xyXG4gICAgLy8gICAgICAgICAgICAgICAgIFwiZnVJZFwiOiAxMDQwMixcclxuICAgIC8vICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCIoNDTnuqcp5LqOIOemgVwiLFxyXG4gICAgLy8gICAgICAgICAgICAgICAgIFwicm9sZUlkXCI6IDEwMDAsXHJcbiAgICAvLyAgICAgICAgICAgICAgICAgXCJzdGF0dXNcIjogXCLmiJjmlpdcIlxyXG4gICAgLy8gICAgICAgICAgICAgfSxcclxuICAgIC8vICAgICAgICAgICAgIHtcclxuICAgIC8vICAgICAgICAgICAgICAgICBcImZ1SWRcIjogMTA0MTEsXHJcbiAgICAvLyAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiKDHnuqcp5YiY5rCPXCIsXHJcbiAgICAvLyAgICAgICAgICAgICAgICAgXCJyb2xlSWRcIjogMTAwMCxcclxuICAgIC8vICAgICAgICAgICAgICAgICBcInN0YXR1c1wiOiBcIuaImOaWl1wiXHJcbiAgICAvLyAgICAgICAgICAgICB9LFxyXG4gICAgLy8gICAgICAgICAgICAge1xyXG4gICAgLy8gICAgICAgICAgICAgICAgIFwiZnVJZFwiOiAxMDQxMixcclxuICAgIC8vICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCIoNDjnuqcp5byg6YKIXCIsXHJcbiAgICAvLyAgICAgICAgICAgICAgICAgXCJyb2xlSWRcIjogMTAwMCxcclxuICAgIC8vICAgICAgICAgICAgICAgICBcInN0YXR1c1wiOiBcIuaImOaWl1wiXHJcbiAgICAvLyAgICAgICAgICAgICB9LFxyXG4gICAgLy8gICAgICAgICAgICAge1xyXG4gICAgLy8gICAgICAgICAgICAgICAgIFwiZnVJZFwiOiAxMDY3MCxcclxuICAgIC8vICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCIoMTLnuqcp5r2Y55KLXCIsXHJcbiAgICAvLyAgICAgICAgICAgICAgICAgXCJyb2xlSWRcIjogMTAwMCxcclxuICAgIC8vICAgICAgICAgICAgICAgICBcInN0YXR1c1wiOiBcIuaImOaWl1wiXHJcbiAgICAvLyAgICAgICAgICAgICB9LFxyXG4gICAgLy8gICAgICAgICAgICAge1xyXG4gICAgLy8gICAgICAgICAgICAgICAgIFwiZnVJZFwiOiAxMDY3MSxcclxuICAgIC8vICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCIoMee6pynlj7jpqazmmK1cIixcclxuICAgIC8vICAgICAgICAgICAgICAgICBcInJvbGVJZFwiOiAxMDAwLFxyXG4gICAgLy8gICAgICAgICAgICAgICAgIFwic3RhdHVzXCI6IFwi5oiY5paXXCJcclxuICAgIC8vICAgICAgICAgICAgIH0sXHJcbiAgICAvLyAgICAgICAgICAgICB7XHJcbiAgICAvLyAgICAgICAgICAgICAgICAgXCJmdUlkXCI6IDEwNjcyLFxyXG4gICAgLy8gICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIigx57qnKea9mOeSi1wiLFxyXG4gICAgLy8gICAgICAgICAgICAgICAgIFwicm9sZUlkXCI6IDEwMDAsXHJcbiAgICAvLyAgICAgICAgICAgICAgICAgXCJzdGF0dXNcIjogXCLmiJjmlpdcIlxyXG4gICAgLy8gICAgICAgICAgICAgfSxcclxuICAgIC8vICAgICAgICAgICAgIHtcclxuICAgIC8vICAgICAgICAgICAgICAgICBcImZ1SWRcIjogMTA2NzMsXHJcbiAgICAvLyAgICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiKDHnuqcp5YiY5rCPXCIsXHJcbiAgICAvLyAgICAgICAgICAgICAgICAgXCJyb2xlSWRcIjogMTAwMCxcclxuICAgIC8vICAgICAgICAgICAgICAgICBcInN0YXR1c1wiOiBcIuaImOaWl1wiXHJcbiAgICAvLyAgICAgICAgICAgICB9XHJcbiAgICAvLyAgICAgICAgIF1cclxuICAgIC8vICAgICB9XHJcbiAgICAvLyAgICAgcmV0dXJuIG1zZztcclxuICAgIC8vIH1cclxufSk7XHJcbiIsImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgYmdTcHJpdGU6IGNjLlNwcml0ZSxcclxuICAgICAgICBmdWppYW5nTGFiZWw6IGNjLlJpY2hUZXh0LFxyXG4gICAgICAgIHpoYW5CdG46IGNjLk5vZGUsXHJcbiAgICAgICAgeGl1QnRuOiBjYy5Ob2RlLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgaW5pdDogZnVuY3Rpb24gKGluZGV4LCBkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5zcHJpdGVUb2dnbGUoaW5kZXgpO1xyXG5cclxuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG5cclxuICAgICAgICB2YXIgcmljaFN0cmluZyA9ICc8Y29sb3I9I0ZGRkZGRiBjbGljaz1cInJpY2hUZXh0RXZlbnRcIj4nICsgZGF0YS5uYW1lICsgJzwvY29sb3I+JztcclxuICAgICAgICB0aGlzLmZ1amlhbmdMYWJlbC5zdHJpbmcgPSByaWNoU3RyaW5nO1xyXG4gICAgICAgIHRoaXMuemhhbkJ0bi5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBhamF4VXRpbHMoSHhzZ1VybC5zZXRGalN0YXRlLCB7ICdpZCc6IHRoaXMuZGF0YS5mdUlkIH0sIGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICAgICAgICAgIHNob3dBbGVydChtc2csIGZ1bmN0aW9uICgpIHsgbG9hZGluZ1NjZW5lKEh4c2dTY2VuZXMuZnVqaWFuZywgSHhzZ1NjZW5lcy5pbmRleCkgfSwgZnVuY3Rpb24gKCkgeyBsb2FkaW5nU2NlbmUoSHhzZ1NjZW5lcy5mdWppYW5nLCBIeHNnU2NlbmVzLmluZGV4KSB9KVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LCB0aGlzKVxyXG4gICAgICAgIHRoaXMueGl1QnRuLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGFqYXhVdGlscyhIeHNnVXJsLnNldEZqU3RhdGUsIHsgJ2lkJzogdGhpcy5kYXRhLmZ1SWQgfSwgZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgICAgICAgICAgc2hvd0FsZXJ0KG1zZywgZnVuY3Rpb24gKCkgeyBsb2FkaW5nU2NlbmUoSHhzZ1NjZW5lcy5mdWppYW5nLCBIeHNnU2NlbmVzLmluZGV4KSB9LCBmdW5jdGlvbiAoKSB7IGxvYWRpbmdTY2VuZShIeHNnU2NlbmVzLmZ1amlhbmcsIEh4c2dTY2VuZXMuaW5kZXgpIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIHRoaXMpXHJcblxyXG4gICAgICAgIGlmIChkYXRhLnN0YXR1cyA9PT0gJ+S8keaBrycpIHtcclxuICAgICAgICAgICAgICB0aGlzLnpoYW5CdG4uYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0gZWxzZSBpZiAoZGF0YS5zdGF0dXMgPSAn5oiY5paXJykge1xyXG5cclxuICAgICAgICAgICB0aGlzLnhpdUJ0bi5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBpbmRleOWlh+WBtuaVsOWIpOaWre+8jOWlh+aVsOWFs+mXrXNwcml0Zee7hOS7tu+8jOaYvuekuuiDjOaZr+aYjuaal+ebuOmXtOaViOaenFxyXG4gICAgICovXHJcbiAgICBzcHJpdGVUb2dnbGU6IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIHZhciBpc09kZCA9IGluZGV4ICUgMiA9PT0gMCA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICB0aGlzLmJnU3ByaXRlLmVuYWJsZWQgPSBpc09kZDtcclxuICAgIH0sXHJcblxyXG4gICAgcmljaFRleHRFdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmxvZyh0aGlzLm5vZGUucGFyZW50Lm5hbWUgKyAnIOivpuaDhScpO1xyXG4gICAgICAgIHByb3BDaGVja0lkID0gdGhpcy5kYXRhLmZ1SWQ7XHJcbiAgICAgICAgbG9hZFNjZW5lKEh4c2dTY2VuZXMuZmp4aWFuZ3FpbmcsIEh4c2dTY2VuZXMuZnVqaWFuZyk7XHJcbiAgICB9LFxyXG5cclxuICAgIHpoYW5CdG5FdmVudDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICBjYy5sb2codGhpcy5ub2RlLm5hbWUgKyAnIOWHuuaImCcpO1xyXG4gICAgfSxcclxuXHJcbiAgICB4aXVCdG5FdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmxvZyh0aGlzLm5vZGUucGFyZW50Lm5hbWUgKyAnIOS8keaBrycpO1xyXG4gICAgfVxyXG59KTtcclxuIiwidmFyIHNlbGY7XHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgdGl0bGVMYWJlbDogY2MuTGFiZWwsXHJcbiAgICAgICAgaGVhZFNwcml0ZTogY2MuU3ByaXRlLFxyXG4gICAgICAgIG5hbWVMYWJlbDogY2MuTGFiZWwsXHJcbiAgICAgICAgaWRMYWJlbDogY2MuTGFiZWwsXHJcbiAgICAgICAgLy8gemhhbkJ0bjogY2MuTm9kZSxcclxuICAgICAgICAvLyB4aXVCdG46IGNjLk5vZGUsXHJcbiAgICAgICAgLy8gemhhblNldDoge1xyXG4gICAgICAgIC8vICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIC8vICAgICAgICAgaWYgKHZhbHVlID09PSAn5oiY5paXJykge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHRoaXMuemhhbkJ0bi5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAvLyAgICAgICAgIH1cclxuICAgICAgICAvLyAgICAgICAgIGVsc2UgaWYgKHZhbHVlID09PSAn5LyR5oGvJykge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHRoaXMueGl1QnRuID0gZmFsc2U7XHJcbiAgICAgICAgLy8gICAgICAgICB9XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIHRvdXhpYW5MYWJlbDogY2MuTGFiZWwsXHJcbiAgICAgICAgemhpeWVMYWJlbDogY2MuTGFiZWwsXHJcbiAgICAgICAgc2hlbmdqaUxhYmVsOiBjYy5MYWJlbCxcclxuICAgICAgICBtb3FpTGFiZWw6IGNjLkxhYmVsLFxyXG4gICAgICAgIHpob25nY2hlbmdMYWJlbDogY2MuTGFiZWwsXHJcbiAgICAgICAgc2h1eGluZ2RpYW5MYWJlbDogY2MuTGFiZWwsXHJcbiAgICAgICAgY2hha2FuQnRuOiBjYy5Ob2RlLFxyXG4gICAgICAgIGZlbnBlaUJ0bjogY2MuTm9kZSxcclxuICAgICAgICBxaXh1ZUxhYmVsOiBjYy5MYWJlbCxcclxuICAgICAgICBqaW5nbGlMYWJlbDogY2MuTGFiZWwsXHJcbiAgICAgICAgZ29uZ2ppTGFiZWw6IGNjLkxhYmVsLFxyXG4gICAgICAgIHN1ZHVMYWJlbDogY2MuTGFiZWwsXHJcbiAgICAgICAgZmFuZ3l1TGFiZWw6IGNjLkxhYmVsLFxyXG4gICAgICAgIGppbmVuZ0xhYmVsOiBjYy5SaWNoVGV4dCxcclxuICAgICAgICB0aWFuZnVMYWJlbDogY2MuTGFiZWwsXHJcbiAgICAgICAgLy9oZWFkU3ByaXRlOiBjYy5TcHJpdGUsXHJcbiAgICAgICAgYmFvd3VNbmc6IGNjLk5vZGVcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsb2FkQ29tbW9tU2NlbmNlKCk7XHJcbiAgICAgICAgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGRhdGEgPSB7ICdmdUlkJzogcHJvcENoZWNrSWQgfTtcclxuICAgICAgICB1c2VyV3VQaW4ud3VwaW5JZCA9IHByb3BDaGVja0lkO1xyXG4gICAgICAgIGFqYXhEYXRhKEh4c2dVcmwuZnVqaWFuZ1hpYW5ncWluZ1VybCwgZGF0YSwgc2VsZi5pbml0KTtcclxuICAgIH0sXHJcblxyXG4gICAgaW5pdDogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICB2YXIgbXNnID0gZGF0YS5tc2c7XHJcbiAgICAgICAgc2VsZi5tc2cgPSBtc2c7XHJcbiAgICAgICAgZnVqaWFuZy5mam1zZz1tc2c7XHJcbiAgICAgICAgc2VsZi50aXRsZUxhYmVsLnN0cmluZyA9IG1zZy5uYW1lO1xyXG4gICAgICAgIGNjLmxvZyhtc2cuaW1nVXJsKVxyXG4gICAgICAgIC8v572R57uc5Yqg6L295Zu+54mHXHJcbiAgICAgICAgY2MubG9hZGVyLmxvYWQodHhVcmwgK21zZy5pbWdVcmwsIGZ1bmN0aW9uIChlcnJvciwgdGV4dHVyZSkge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgIHNlbGYuaGVhZFNwcml0ZS5zcHJpdGVGcmFtZSA9IG5ldyBjYy5TcHJpdGVGcmFtZSh0ZXh0dXJlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBzZWxmLm5hbWVMYWJlbC5zdHJpbmcgPSBtc2cubmFtZTtcclxuICAgICAgICBzZWxmLmlkTGFiZWwuc3RyaW5nID0gbXNnLmlkO1xyXG4gICAgICAgIC8vIHNlbGYuemhhblNldCA9IG1zZy5zdGF0ZXM7XHJcbiAgICAgICAgc2VsZi50b3V4aWFuTGFiZWwuc3RyaW5nID0gbXNnLnRvdVhpYW47XHJcbiAgICAgICAgc2VsZi56aGl5ZUxhYmVsLnN0cmluZyA9IG1zZy56aGlZZTtcclxuICAgICAgICBzZWxmLnNoZW5namlMYWJlbC5zdHJpbmcgPSBtc2cuc2hlbmdKaUppbmdZYW47XHJcbiAgICAgICAgc2VsZi5tb3FpTGFiZWwuc3RyaW5nID0gbXNnLm1vUWlEdTtcclxuICAgICAgICBzZWxmLnpob25nY2hlbmdMYWJlbC5zdHJpbmcgPSBtc2cuemhvbmdDaGVuZ0R1O1xyXG4gICAgICAgIHZhciBzaHV4aW5nZGlhbiA9IG1zZy5rZXlvbmdkcztcclxuICAgICAgICBpZiAoc2h1eGluZ2RpYW4gPD0gMCkge1xyXG4gICAgICAgICAgICBzZWxmLmZlbnBlaUJ0bi5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgc2h1eGluZ2RpYW4gPSAwO1xyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5jaGFrYW5CdG4uYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuc2h1eGluZ2RpYW5MYWJlbC5zdHJpbmcgPSBzaHV4aW5nZGlhbjtcclxuICAgICAgICBzZWxmLnFpeHVlTGFiZWwuc3RyaW5nID0gbXNnLnFpWHVlMSArICcvJyArIG1zZy5xaVh1ZTI7XHJcbiAgICAgICAgc2VsZi5qaW5nbGlMYWJlbC5zdHJpbmcgPSBtc2cuamluZ0xpMSArICcvJyArIG1zZy5qaW5nTGkyO1xyXG4gICAgICAgIHNlbGYuZ29uZ2ppTGFiZWwuc3RyaW5nID0gbXNnLmdvbmdKaTtcclxuICAgICAgICBzZWxmLnN1ZHVMYWJlbC5zdHJpbmcgPSBtc2cuc3VEdTtcclxuICAgICAgICAvL3NlbGYuZmFuZ3l1TGFiZWwuc3RyaW5nID0gbXNnLmZhbmdZdTtcclxuICAgICAgIC8vIHNlbGYuamluZW5nTGFiZWwuc3RyaW5nID0gbXNnLmppTmVuZzEgPyBtc2cuamlOZW5nMSA6ICcnO1xyXG4gICAgICAgIHNlbGYuamluZW5nTGFiZWwuc3RyaW5nPVwiXCI7XHJcbiAgICAgICAgaWYodHlwZW9mKG1zZy5qaU5lbmcpIT0ndW5kZWZpbmVkJyl7XHJcbiAgICAgICAgICAgIGxldCBqbm1zZz1cIlwiO1xyXG4gICAgICAgICAgICBmb3IobGV0IGk9MDtpPG1zZy5qaU5lbmcubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgICAgICAvLygx57qnKeawlOWGsuaWl+eJm+eGn+e7g+W6puOAkDEyMDAw44CRICBcclxuICAgICAgICAgICAgIGpubXNnKz1cIihcIittc2cuamlOZW5nW2ldLmxldmVsK1wi57qnXCIrXCIpXCIrIG1zZy5qaU5lbmdbaV0uc2tpbGxuYW1lK1wiIOeGn+e7g+W6pjrjgJBcIittc2cuamlOZW5nW2ldLnNodWxpYW5kdStcIuOAkTxici8+PGJyLz5cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzZWxmLmppbmVuZ0xhYmVsLnN0cmluZz1qbm1zZztcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHpoYW5FdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgLy9cclxuICAgIC8vIH0sXHJcbiAgICAvL1xyXG4gICAgLy8geGl1RXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgIC8vXHJcbiAgICAvLyB9LFxyXG5cclxuICAgIHlhbnFpbmdFdmVudDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgamlhbmdzaGFuZ0V2ZW50OiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuXHJcblxyXG4gICAgY2hha2FuRXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgbG9hZGluZ1NjZW5lKEh4c2dTY2VuZXMucHJvcGVydHlDaGVjaywgSHhzZ1NjZW5lcy5manhpYW5ncWluZyk7XHJcbiAgICB9LFxyXG5cclxuICAgIGZlbnBlaUV2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbG9hZGluZ1NjZW5lKEh4c2dTY2VuZXMucHJvcGVydHlEZWFsLCBIeHNnU2NlbmVzLmZqeGlhbmdxaW5nKTtcclxuICAgIH0sXHJcblxyXG4gICAgbmVuZ2xpRXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIHBlaXlhbmdFdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxvYWRpbmdTY2VuZShIeHNnU2NlbmVzLmNodVpoaVB5LCBIeHNnU2NlbmVzLmZqeGlhbmdxaW5nKVxyXG5cclxuICAgIH0sXHJcblxyXG4gICAgc2hlbmdwaW5nRXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIGppZWd1RXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIG90aGVyRXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIGJhY2tFdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIGNjLmRpcmVjdG9yLmxvYWRTY2VuZShIeHNnU2NlbmVzLmZ1amlhbmcpO1xyXG4gICAgICAgIHJldHVybkxhc3RTY2VuZShIeHNnU2NlbmVzLmZqeGlhbmdxaW5nKTtcclxuICAgIH1cclxufSk7XHJcbiIsImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgdGl0bGU6IGNjLkxhYmVsLFxyXG4gICAgICAgIHRleHQ6IGNjLkxhYmVsLFxyXG4gICAgfSxcclxuXHJcbiAgICAvL+WKoOi9veWFrOWRiuWIl+ihqOWcuuaZr1xyXG4gICAgYmFjazogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybkxhc3QoKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnRpdGxlLnN0cmluZyA9IEdHLnRpdGxlO1xyXG4gICAgICAgIHRoaXMudGV4dC5zdHJpbmcgPSBHRy50ZXh0O1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwidmFyIGl0ZW07XHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgbmV3VGV4dDogY2MuTGFiZWwsXHJcbiAgICAgICAgdGl0bGU6IGNjLkxhYmVsLFxyXG4gICAgfSxcclxuXHJcbiAgICAvL+WIneWni+WMluiuvue9rlxyXG4gICAgaW5pdDogZnVuY3Rpb24gKGdnKSB7XHJcbiAgICAgICAgdGhpcy5pdGVtID0gZ2c7XHJcbiAgICAgICAgdGhpcy50aXRsZS5zdHJpbmcgPSB0aGlzLml0ZW0uY3VzdG9tMTtcclxuICAgIH0sXHJcblxyXG4gICAgLy/liqDovb3lhazlkYror6bmg4XlnLrmma9cclxuICAgIGxvYWRHR0RldGFpbHM6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBHRy50aXRsZSA9IHRoaXMuaXRlbS5jdXN0b20xO1xyXG4gICAgICAgIEdHLnRleHQgPSB0aGlzLml0ZW0ubXNnO1xyXG4gICAgICAgIGxvYWRpbmdTY2VuZSgnZ2dEZXRhaWxzJywgJ2dnTGlzdCcpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcbn0pO1xyXG4iLCJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIGdnSXRlbToge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgICAgIHRvb2x0aXA6IFwi5YWs5ZGK6aKE5Yi26aG5XCIsXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgLy/ov5Tlm57kuIrkuIDlnLrmma9cclxuICAgIGJhY2s6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm5MYXN0KCk7XHJcbiAgICB9LFxyXG5cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICBhamF4RGF0YShIeHNnVXJsLmdnVXJsLCBudWxsLGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICAgICAgdmFyIGFycmF5ID0gbXNnLm1zZzsgLy/mi7/liLDlhazlkYrmlbDnu4RcclxuICAgICAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGkgaW4gYXJyYXkpIHsgLy/pgY3ljobmlbDnu4RcclxuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gY2MuaW5zdGFudGlhdGUoc2VsZi5nZ0l0ZW0pOyAvL+WunuS+i+WMluWFrOWRiumhuemihOWItlxyXG4gICAgICAgICAgICAgICAgaXRlbS5nZXRDb21wb25lbnQoJ0dHSXRlbScpLmluaXQoYXJyYXlbaV0pOyAvL+WIneWni+WMluiuvue9rlxyXG4gICAgICAgICAgICAgICAgaXRlbS55IC09IGkgKiA4MDsgLy/orr7nva7kvY3nva5cclxuICAgICAgICAgICAgICAgIGlmIChpICUgMiA9PSAwKSB7IC8v6Iul5Li65Y+M5pWw77yM5YiZ5pi+56S6c3ByaXRlXHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5nZXRDb21wb25lbnQoJ2NjLlNwcml0ZScpLmVuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHsgLy/oi6XkuLrljZXmlbDvvIzliJnnpoHnlKhzcHJpdGVcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLmdldENvbXBvbmVudCgnY2MuU3ByaXRlJykuZW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGkgPiA1KSB7IC8v5YmNNumhueaYvuekuuKAnOaWsOKAnVxyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uZ2V0Q29tcG9uZW50KCdHR0l0ZW0nKS5uZXdUZXh0LmVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNlbGYubm9kZS5hZGRDaGlsZChpdGVtKTtcclxuICAgICAgICAgICAgICAgIHNlbGYubm9kZS5oZWlnaHQgKz0gODA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG59KTsiLCJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIHBsYXllckdvbGRfbGFiZWw6IGNjLkxhYmVsLFxyXG4gICAgICAgIGJhbmtHb2xkX2xhYmVsOiBjYy5MYWJlbCxcclxuICAgICAgICBnZXRHb2xkX2VkaXRib3g6IGNjLkVkaXRCb3gsXHJcbiAgICB9LFxyXG5cclxuICAgIC8v6L+U5Zue6ZKx5bqE5Zy65pmvXHJcbiAgICBiYWNrOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuTGFzdCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+WPluasvuiusOW9lVxyXG4gICAgZ2V0UmVjb3JkOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvL+ehruiupOWPluasvlxyXG4gICAgZ2V0Q29uZmlybTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICB2YXIgZ2V0RGF0ZSA9IHtcclxuICAgICAgICAgICAgXCJzdGF0dXNcIjogXCJkZWxcIiwvL+ivpeWPguaVsOaciWFkZCjlrZjmrL4pLGRlbCjlj5bmrL4pXHJcbiAgICAgICAgICAgIFwiamluXCI6IHRoaXMuZ2V0R29sZF9lZGl0Ym94LnN0cmluZywvL+WtmOmHkeWwseWhq+ivpeWPguaVsFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgYWpheERhdGEoSHhzZ1VybC5iYW5rU0dVcmwsIGdldERhdGUsIGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICAgICAgc2VsZi5iYWNrKCk7XHJcbiAgICAgICAgICAgIHNob3dBbGVydChtc2cucmVzdWx0KTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnBsYXllckdvbGRfbGFiZWwuc3RyaW5nID0gXCLmgqjnm67liY3mnIlcIiArIEJhbmsucGxheWVyR29sZCArIFwi6YeR56CWXCI7XHJcbiAgICAgICAgdGhpcy5iYW5rR29sZF9sYWJlbC5zdHJpbmcgPSBcIumSseW6hOWtmOasvlwiICsgQmFuay5iYW5rR29sZCArIFwi6YeR56CWXCI7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIHBsYXllclNpbHZlcl9sYWJlbDogY2MuTGFiZWwsXHJcbiAgICAgICAgYmFua1NpbHZlcl9sYWJlbDogY2MuTGFiZWwsXHJcbiAgICAgICAgZ2V0U2lsdmVyX2VkaXRib3g6IGNjLkVkaXRCb3gsXHJcbiAgICB9LFxyXG5cclxuICAgIC8v6L+U5Zue6ZKx5bqE5Zy65pmvXHJcbiAgICBiYWNrOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuTGFzdCgpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvL+WPluasvuiusOW9lVxyXG4gICAgZ2V0UmVjb3JkOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvL+ehruiupOWPluasvlxyXG4gICAgZ2V0Q29uZmlybTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICB2YXIgZ2V0RGF0ZSA9IHtcclxuICAgICAgICAgICAgXCJzdGF0dXNcIjogXCJkZWxcIiwvL+ivpeWPguaVsOaciWFkZCjlrZjmrL4pLGRlbCjlj5bmrL4pXHJcbiAgICAgICAgICAgIFwieWluXCI6IHRoaXMuZ2V0U2lsdmVyX2VkaXRib3guc3RyaW5nLC8v5a2Y6ZO25bCx5aGr6K+l5Y+C5pWwXHJcbiAgICAgICAgfTtcclxuICAgICAgICBhamF4RGF0YShIeHNnVXJsLmJhbmtTR1VybCwgZ2V0RGF0ZSwgZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAgIHNob3dBbGVydChtc2cucmVzdWx0LHNlbGYuYmFjaygpKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnBsYXllclNpbHZlcl9sYWJlbC5zdHJpbmcgPSBcIuaCqOebruWJjeaciVwiICsgQmFuay5wbGF5ZXJTaWx2ZXIgKyBcIuS4pFwiO1xyXG4gICAgICAgIHRoaXMuYmFua1NpbHZlcl9sYWJlbC5zdHJpbmcgPSBcIumSseW6hOWtmOasvlwiICsgQmFuay5iYW5rU2lsdmVyICsgXCLkuKRcIjtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICB6aHVhbmd0YWlFdmVudDogZnVuY3Rpb24oKXtcclxuICAgICAgICBjYy5sb2coJ2dvbmduZW5nIHBhbmVsIOeKtuaAgScpO1xyXG4gICAgICAgICAgIGxvYWRTY2VuZShIeHNnU2NlbmVzLnJvbGUsIEh4c2dTY2VuZXMuaW5kZXgpO1xyXG4gICAgfSxcclxuXHJcbiAgICB3dXBpbkV2ZW50OiBmdW5jdGlvbigpe1xyXG4gICAgICAgIGNjLmxvZygnZ29uZ25lbmcgcGFuZWwg54mp5ZOBJyk7XHJcbiAgICAgICAgdmFyIHNjZW5lID0gY2MuZGlyZWN0b3IuZ2V0U2NlbmUoKS5uYW1lO1xyXG4gICAgICAgIGxvYWRTY2VuZShIeHNnU2NlbmVzLnd1cGluLCBIeHNnU2NlbmVzLmluZGV4KTtcclxuICAgIH0sXHJcblxyXG4gICAgZnVqaWFuZ0V2ZW50OiBmdW5jdGlvbigpe1xyXG4gICAgICAgIGNjLmxvZygnZ29uZ25lbmcgcGFuZWwg5Ymv5bCGJyk7XHJcbiAgICAgICAgbG9hZFNjZW5lKEh4c2dTY2VuZXMuZnVqaWFuZywgSHhzZ1NjZW5lcy5pbmRleCk7XHJcbiAgICB9LFxyXG5cclxuICAgIHp1ZHVpRXZlbnQ6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgY2MubG9nKCdnb25nbmVuZyBwYW5lbCDnu4TpmJ8nKTtcclxuICAgIH0sXHJcblxyXG4gICAgcGFpaGFuZ0V2ZW50OiBmdW5jdGlvbigpe1xyXG4gICAgICAgIGNjLmxvZygnZ29uZ25lbmcgcGFuZWwg5o6S6KGMJyk7XHJcbiAgICB9LFxyXG5cclxuICAgIGhhb3lvdUV2ZW50OiBmdW5jdGlvbigpe1xyXG4gICAgICAgIGNjLmxvZygnZ29uZ25lbmcgcGFuZWwg5aW95Y+LJyk7XHJcbiAgICAgICAgIGxvYWRTY2VuZShIeHNnU2NlbmVzLmZyaWVuZHMsIEh4c2dTY2VuZXMuaW5kZXgpO1xyXG4gICAgfSxcclxuXHJcbiAgICB5b3VqaWFuRXZlbnQ6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgY2MubG9nKCdnb25nbmVuZyBwYW5lbCDpgq7ku7YnKTtcclxuICAgIH0sXHJcblxyXG4gICAgcmVud3VFdmVudDogZnVuY3Rpb24oKXtcclxuICAgICAgICBjYy5sb2coJ2dvbmduZW5nIHBhbmVsIOS7u+WKoScpO1xyXG4gICAgfSxcclxuXHJcbiAgICBsZWl0YWlFdmVudDogZnVuY3Rpb24oKXtcclxuICAgICAgICBjYy5sb2coJ2dvbmduZW5nIHBhbmVsIOaTguWPsCcpO1xyXG4gICAgfSxcclxuXHJcbiAgICBqaWFvcGFpRXZlbnQ6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgY2MubG9nKCdnb25nbmVuZyBwYW5lbCDmlZnmtL4nKTtcclxuICAgIH0sXHJcblxyXG4gICAgeHVubGlhbkV2ZW50OiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgbG9hZGluZ1NjZW5lKEh4c2dTY2VuZXMueHVuTGlhbiwgSHhzZ1NjZW5lcy5pbmRleCk7XHJcbiAgICAgICAgY2MubG9nKCdnb25nbmVuZyBwYW5lbCDorq3nu4MnKTtcclxuICAgIH0sXHJcblxyXG4gICAgYmFva3VFdmVudDogZnVuY3Rpb24oKXtcclxuICAgICAgICBjYy5sb2coJ2dvbmduZW5nIHBhbmVsIOWuneW6kycpO1xyXG4gICAgfSxcclxuXHJcbiAgICBnb25nZ2FvRXZlbnQ6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgY2MubG9nKCdnb25nbmVuZyBwYW5lbCDlhazlkYonKTtcclxuICAgICAgICAgIGxvYWRTY2VuZShIeHNnU2NlbmVzLmdnTGlzdCwgSHhzZ1NjZW5lcy5pbmRleCk7XHJcbiAgICAgICAgXHJcbiAgICB9LFxyXG5cclxuICAgIGdvbmdsdWVFdmVudDogZnVuY3Rpb24oKXtcclxuICAgICAgICBjYy5sb2coJ2dvbmduZW5nIHBhbmVsIOaUu+eVpScpO1xyXG4gICAgfSxcclxuXHJcbiAgICBkZW5nY2h1RXZlbnQ6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgY2MubG9nKCdnb25nbmVuZyBwYW5lbCDnmbvlh7onKTtcclxuICAgIH1cclxufSk7XHJcbiIsImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgbXNnOiBjYy5MYWJlbFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMubXNnLnN0cmluZyA9ICcnO1xyXG4gICAgfSxcclxuXHJcbiAgICBzZXRNc2c6IGZ1bmN0aW9uKG1zZ1N0cil7XHJcbiAgICAgICAgdGhpcy5tc2cuc3RyaW5nID0gbXNnU3RyO1xyXG4gICAgfVxyXG5cclxufSk7XHJcbiIsImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgaXRlbVByZWZhYjogY2MuUHJlZmFiLFxyXG4gICAgICAgIGNvbnRlbnQ6IGNjLk5vZGUsXHJcbiAgICAgICAgbGVmdENvbnRlbnQ6IGNjLk5vZGUsXHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICBhamF4RGF0YShIeHNnVXJsLmhpc3RvcnlVcmwsbnVsbCxmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdmFyIHAgPSBtc2cubXNnO1xyXG4gICAgICAgICAgICAgICAgLy9hbGVydChwKTtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vcyArPSBcIiA8cCBjbGFzcz1cXFwieWFvcGluZ1xcXCIgc3R5bGU9J2NvbG9yOiNGRkYzQUUnPuesrFwiICsgcFtpXS5pZCArIFwi5pyf77yM5byA5Ye6XCIgKyBwW2ldLm51bTEgKyBcIixcIiArIHBbaV0ubnVtMiArIFwiLFwiICsgcFtpXS5udW0zICsgXCImbmJzcDsmbmJzcDtcIiArIHBbaV0ucmVzdWx0ICsgXCI8L3A+XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBjYy5pbnN0YW50aWF0ZShzZWxmLml0ZW1QcmVmYWIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYubGVmdENvbnRlbnQuYWRkQ2hpbGQoaXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS54ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLnkgPSAtMSAqIGkgKiBpdGVtLmhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLm5hbWUgPSAnaGlzdG9yeScgKyBpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29udGVudC5oZWlnaHQgPSAoaSArIDEpICogaXRlbS5oZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0gPSBpdGVtLmdldENvbXBvbmVudCgnSGlzdG9yeUl0ZW0nKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGFiZWxTdHIgPSBcIuesrFwiICsgcFtpXS5pZCArIFwi5pyf77yM5byA5Ye6XCIgKyBwW2ldLm51bTEgKyBcIixcIiArIHBbaV0ubnVtMiArIFwiLFwiICsgcFtpXS5udW0zICsgXCJcXHRcXHRcIiArIHBbaV0ucmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uc2V0TXNnKGxhYmVsU3RyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgIC8qKlxyXG4gICAgICog54K55Ye75LqL5Lu2LS0+6L+U5ZueXHJcbiAgICAgKi9cclxuICAgIGJhY2tFdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8v6LCD55So6YCa55So55qE6L+U5Zue5LiK5LiA5Zy65pmv5pa55rOVXHJcbiAgICAgICAgIHJldHVybkxhc3QoKVxyXG4gICAgfSxcclxuICAgIFxyXG59KTtcclxuIiwiY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBzcGVha1ByZWZhYjogY2MuUHJlZmFiXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jYW52YXMgPSBjYy5maW5kKCdDYW52YXMnKTtcclxuICAgIH0sXHJcblxyXG4gICAgaGFveW91RXZlbnQ6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgY2MubG9nKCdpbmRleCBob3RrZXkg5aW95Y+LJyk7XHJcbiAgICB9LFxyXG5cclxuICAgIHd1cGluRXZlbnQ6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgY2MubG9nKCdpbmRleCBob3RrZXkg54mp5ZOBJyk7XHJcbiAgICB9LFxyXG5cclxuICAgIHhpYW94aUV2ZW50OiBmdW5jdGlvbigpe1xyXG4gICAgICAgIGNjLmxvZygnaW5kZXggaG90a2V5IOa2iOaBrycpO1xyXG4gICAgfSxcclxuXHJcbiAgICBwYWloYW5nRXZlbnQ6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgY2MubG9nKCdpbmRleCBob3RrZXkg5o6S6KGMJyk7XHJcbiAgICB9LFxyXG5cclxuICAgIHJlbnd1RXZlbnQ6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgY2MubG9nKCdpbmRleCBob3RrZXkg5Lu75YqhJyk7XHJcbiAgICB9LFxyXG5cclxuICAgIGZ1amlhbmdFdmVudDogZnVuY3Rpb24oKXtcclxuICAgICAgICBjYy5sb2coJ2luZGV4IGhvdGtleSDlia/lsIYnKTtcclxuICAgIH0sXHJcblxyXG4gICAgeW91amlhbkV2ZW50OiBmdW5jdGlvbigpe1xyXG4gICAgICAgIGNjLmxvZygnaW5kZXggaG90a2V5IOmCruS7ticpO1xyXG4gICAgfSxcclxuXHJcbiAgICBiYW9rdUV2ZW50OiBmdW5jdGlvbigpe1xyXG4gICAgICAgIGNjLmxvZygnaW5kZXggaG90a2V5IOWuneW6kycpO1xyXG4gICAgfSxcclxuXHJcbiAgICB3YW5qaWFFdmVudDogZnVuY3Rpb24oKXtcclxuICAgICAgICBjYy5sb2coJ2luZGV4IGhvdGtleSDnjqnlrrYnKTtcclxuICAgIH0sXHJcblxyXG4gICAgZ2VuZ2R1b0V2ZW50OiBmdW5jdGlvbigpe1xyXG4gICAgICAgIGNjLmxvZygnaW5kZXggaG90a2V5IOabtOWkmicpO1xyXG4gICAgfSxcclxuXHJcbiAgICBwaW5kYW9FdmVudDogZnVuY3Rpb24oKXtcclxuICAgICAgICBjYy5sb2coJ2luZGV4IGhvdGtleSDpopHpgZMnKTtcclxuICAgIH0sXHJcblxyXG4gICAgZmF5YW5FdmVudDogZnVuY3Rpb24oKXtcclxuICAgICAgICBjYy5sb2coJ2luZGV4IGhvdGtleSDlj5HoqIAnKTtcclxuXHJcbiAgICAgICAgaWYoY3VyQ2hhbm5lbCA9PT0gMykge1xyXG4gICAgICAgICAgICBjYy5sb2coJ+S4lueVjOmikemBk+emgeatouWPkeiogCcpO1xyXG4gICAgICAgICAgICByZXR1cm47ICAgIC8v5LiW55WM6aKR6YGT56aB5q2i5Y+R6KiAXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoY3VyQ2hhbm5lbCA9PT0gMSl7XHJcbiAgICAgICAgICAgIC8vVE9ETzrpl6jmtL7pqozor4FcclxuICAgICAgICAgICAgY2MubG9nKCfpl6jmtL7ns7vnu5/ov5jmnKrlvIDmlL4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/lj5HoqIBcclxuICAgICAgICBjYy5sb2coJ+WPkeiogCcpO1xyXG4gICAgICAgIHZhciBzcGVhayA9IGNjLmluc3RhbnRpYXRlKHRoaXMuc3BlYWtQcmVmYWIpO1xyXG4gICAgICAgIHNwZWFrLnggPSAwO1xyXG4gICAgICAgIHNwZWFrLnkgPSAwO1xyXG4gICAgICAgIHRoaXMuY2FudmFzLmFkZENoaWxkKHNwZWFrKTtcclxuICAgIH0sXHJcblxyXG4gICAgYmFja0V2ZW50OiBmdW5jdGlvbigpe1xyXG4gICAgICAgIGNjLmxvZygnaW5kZXggaG90a2V5IOi/lOWbnicpO1xyXG4gICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgIH1cclxufSk7XHJcbiIsImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5oZWFkID0gdGhpcy5ub2RlLmdldENvbXBvbmVudChjYy5TcHJpdGUpO1xyXG4gICAgICAgIHRoaXMuaGVhZC5zcHJpdGVGcmFtZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pZCA9IC0xO1xyXG4gICAgfSxcclxuXHJcbiAgICBjbGlja0V2ZW50OiBmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmKHRoaXMuaWQgPCAwKSByZXR1cm47XHJcbiAgICAgICAgLy9UT0RPOueCueWHu+S6i+S7tlxyXG4gICAgfSxcclxuXHJcbiAgICBzZXRIZWFkOiBmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICB0aGlzLmlkID0gZGF0YS5pZDtcclxuICAgICAgICB2YXIgaGVhZFVybCA9IGRhdGEudG91eGlhbmc7XHJcbiAgICAgICAgaGVhZFVybCA9IGhlYWROYW1lLnN1YnN0cmluZyhoZWFkTmFtZS5sYXN0SW5kZXhPZignLycpICsgMSwgaGVhZE5hbWUubGFzdEluZGV4T2YoJy4nKSk7XHJcbiAgICAgICAgdGhpcy5oZWFkVXJsID0gJ3RvdXhpYW5nLycgKyBoZWFkTmFtZTtcclxuICAgICAgICBjYy5sb2FkZXIubG9hZFJlcyh0aGlzLmhlYWRVcmwsIGNjLlNwcml0ZUZyYW1lLCBmdW5jdGlvbihlcnIsIHNwcml0ZUZyYW1lKXtcclxuICAgICAgICAgICAgaWYoIWVycil7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhlYWQuc3ByaXRlRnJhbWUgPSBzcHJpdGVGcmFtZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KTtcclxuIiwidmFyIHNlbGY7XHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgcGxheWVyU3RhdHVzOiBjYy5Ob2RlLFxyXG4gICAgICAgIG5lYXJieVBsYXllcjogY2MuTm9kZSxcclxuICAgICAgICBjaGF0TW5nOiBjYy5Ob2RlLFxyXG4gICAgICAgIGhvdGtleUJvYXJkOiBjYy5Ob2RlXHJcbiAgICAgICAgLy9tZW51UGFuZWw6IGNjLk5vZGUsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgc2VsZi5wbGF5ZXJTdGF0dXMgPSBzZWxmLnBsYXllclN0YXR1cy5nZXRDb21wb25lbnQoJ1BsYXllclN0YXR1cycpO1xyXG4gICAgICAgIC8v57yT5a2Y5Zyo5pys5ZywXHJcbiAgICAgICAgaWYgKGluZGV4aGdSb2xlTXNnLmlkID09IDApIHtcclxuICAgICAgICAgICAgaWYgKGluZGV4SGcuaW5kZXhyb2xlTXNnVXJsICE9IG51bGwgJiYgaW5kZXhIZy5pbmRleHJvbGVNc2dVcmwgIT0gXCJcIiAmJiB0eXBlb2YgKGluZGV4SGcuaW5kZXhyb2xlTXNnVXJsKSAhPSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5pbml0SW5kZXhyb2xlTXNnVXJsKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhamF4RGF0YShIeHNnVXJsLmluZGV4cm9sZU1zZ1VybCwgbnVsbCwgZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4SGcuaW5kZXhyb2xlTXNnVXJsID0gbXNnO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaW5pdEluZGV4cm9sZU1zZ1VybCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIFNvY2tldEV2ZW50cy51cGRhdGVSb2xlTXNnRXZlbnQoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2VsZi5wbGF5ZXJTdGF0dXMuaW5pdFBsYXllcihpbmRleGhnUm9sZU1zZy5yb2xlTXNnKTtcclxuICAgICAgICAgICAgc2VsZi5zdGFydFdlYnNvY2tldChyb2xlLmlkKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgaW5pdEluZGV4cm9sZU1zZ1VybDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmxvZygncm9sZS0tLS0tJyArIGluZGV4SGcuaW5kZXhyb2xlTXNnVXJsKTtcclxuICAgICAgICBsZXQgbXNnID0gaW5kZXhIZy5pbmRleHJvbGVNc2dVcmw7XHJcbiAgICAgICAgdmFyIHJvbGUgPSBtc2cucm9sZU1zZztcclxuICAgICAgICBzZWxmLnBsYXllclN0YXR1cy5pbml0UGxheWVyKHJvbGUpO1xyXG4gICAgICAgIHNlbGYuc3RhcnRXZWJzb2NrZXQocm9sZS5pZCk7XHJcbiAgICAgICAgcGsucm9sZUlEID0gcm9sZS5pZDtcclxuICAgIH0sXHJcbiAgICBzdGFydFdlYnNvY2tldDogZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgLy8gdXJsID0gXCJ3czovLzExOS4yOS4yMzQuMTg0OjgwODAvaHhzZy9jaGF0XCIsXHJcbiAgICAgICAgdGhpcy5pZCA9IGlkICsgJyc7XHJcbiAgICAgICAgLy8gIHZhciAgZGF0YT0gSlNPTi5zdHJpbmdpZnkoeyAnaWQnOiB0aGlzLmlkIH0pO1xyXG4gICAgICAgIFNvY2tldEV2ZW50cy5kYXRhID0geyAnaWQnOiB0aGlzLmlkIH07XHJcbiAgICAgICAgdmFyIGxvZ2luID0gSlNPTi5zdHJpbmdpZnkoeyAna2V5JzogdXVpZEtleSwgJ3R5cGUnOiBcImxvZ2luXCIsICdyb2xlJzogU29ja2V0RXZlbnRzLmRhdGEgfSk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2luaXRXUyBsb2dpbiA9ICcgKyBsb2dpbik7XHJcbiAgICAgICAgd3Muc2VuZChsb2dpbik7XHJcbiAgICAgICAgY2MubG9nKEh4c2dVcmwuc29ja2V0VXJsKVxyXG5cclxuXHJcbiAgICB9LFxyXG5cclxuICAgIGhvdGtleUV2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MubG9nKCdpbmRleCDlv6vmjbfplK4nKTtcclxuICAgICAgICB0aGlzLmhvdGtleUJvYXJkLmFjdGl2ZSA9IHRydWU7XHJcbiAgICB9LFxyXG5cclxuICAgIGZ1amlhbmdFdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxvYWRTY2VuZShIeHNnU2NlbmVzLmZ1amlhbmcsIEh4c2dTY2VuZXMuaW5kZXgpO1xyXG4gICAgfSxcclxuXHJcbiAgICByb2xlRXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsb2FkU2NlbmUoSHhzZ1NjZW5lcy5yb2xlLCBIeHNnU2NlbmVzLmluZGV4KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwidmFyIHNlbGY7XHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgcGFnZToge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBbXSxcclxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2VsZWN0ZWRGcmFtZToge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBbXSxcclxuICAgICAgICAgICAgdHlwZTogY2MuU3ByaXRlRnJhbWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIHVuc2VsZWN0ZWRGcmFtZToge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBbXSxcclxuICAgICAgICAgICAgdHlwZTogY2MuU3ByaXRlRnJhbWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIG1lbnU6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogW10sXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLlNwcml0ZVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgLy8w44CB5Lq654mp77yMMeOAgeiuvuaWve+8jDLjgIHnp7vliqjvvIwz44CB5Yqf6IO9XHJcbiAgICAgICAgICAgIFNvY2tldEV2ZW50cy51cGRhdGVSb2xlTXNnRXZlbnQgPSB0aGlzLnlpZG9uZ0V2ZW50O1xyXG4gICAgICAgICAgICB0aGlzLnlpZG9uZ0V2ZW50KCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjYy5sb2coZSlcclxuICAgICAgICB9XHJcblxyXG4gICAgfSxcclxuXHJcblxyXG4gICAgcmVud3VFdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNjLmxvZygn5Lq654mpJyk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1ck1lbnUgPT09IDApIHJldHVybjtcclxuICAgICAgICAgICAgdGhpcy5zd2l0Y2hNZW51KDApO1xyXG5cclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNjLmxvZyhlKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9LFxyXG5cclxuICAgIHNoZXNoaUV2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY2MubG9nKCforr7mlr0nKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1ck1lbnUgPT09IDEpIHJldHVybjtcclxuICAgICAgICAgICAgdGhpcy5zd2l0Y2hNZW51KDEpO1xyXG5cclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNjLmxvZyhlKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9LFxyXG5cclxuICAgIHlpZG9uZ0V2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY2MubG9nKCfnp7vliqgnKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmN1ck1lbnUgPT09IDIpIHJldHVybjtcclxuICAgICAgICAgICAgdmFyIHAgPSBjYy5maW5kKFwiQ2FudmFzL21lbnVQYW5lbC95aWRvbmdcIik7XHJcbiAgICAgICAgICAgIGlmIChwLmNoaWxkcmVuQ291bnQgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgY2MubG9nKCdhamF4UmV0dXJuRGF0YS5vYmpldHMnICsgYWpheFJldHVybkRhdGEub2JqZXRzKVxyXG4gICAgICAgICAgICAgICAgc2VsZi5pbml0TWFwKGluZGV4SGcuaW5kZXhyb2xlTXNnVXJsKVxyXG4gICAgICAgICAgICAgICAgLy9hamF4RGF0YShIeHNnVXJsLmluZGV4cm9sZU1zZ1VybCwgbnVsbCwgc2VsZi5pbml0TWFwKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy/ngrnlh7vmjInpkq7lj5jmjaJcclxuICAgICAgICAgICAgdGhpcy5zd2l0Y2hNZW51KDIpO1xyXG5cclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNjLmxvZyhlKVxyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgIH0sXHJcbiAgICBpbml0TWFwOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuXHJcbiAgICAgICAgICAgIGFqYXhSZXR1cm5EYXRhLnRvcENpdHkgPSBtc2cucm9sZU1zZy56dW9iaWFvO1xyXG4gICAgICAgICAgICBjYy5sb2coYWpheFJldHVybkRhdGEudG9wQ2l0eSk7XHJcbiAgICAgICAgICAgIGlmIChway5tb3ZlTXNnICE9IG51bGwgJiYgcGsubW92ZU1zZyAhPSBcIlwiICYmIHR5cGVvZiAocGsubW92ZU1zZykgIT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuaW5pdE1vdmUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGFqYXhEYXRhKEh4c2dVcmwubW92ZUNpdHksIHsgXCJjZW50ZXJDaXR5XCI6IG1zZy5yb2xlTXNnLnp1b2JpYW8gfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBway5tb3ZlTXNnID0gZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmluaXRNb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBhamF4RGF0YShIeHNnVXJsLm1vdmVDaXR5LCB7IFwiY2VudGVyQ2l0eVwiOiBtc2cucm9sZU1zZy56dW9iaWFvIH0sIHNlbGYuaW5pdE1vdmUpO1xyXG5cclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNjLmxvZyhlKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9LFxyXG5cclxuICAgIGdvbmduZW5nOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY2MubG9nKCflip/og70nKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuY3VyTWVudSA9PT0gMykgcmV0dXJuO1xyXG4gICAgICAgICAgICB0aGlzLnN3aXRjaE1lbnUoMyk7XHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY2MubG9nKGUpXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBzd2l0Y2hNZW51OiBmdW5jdGlvbiAoY3VyTWVudSkge1xyXG4gICAgICAgIHZhciBieiA9IGZhbHNlO1xyXG4gICAgICAgIGZvciAodmFyIGtleSBpbiBzZWxmLnBhZ2UpIHtcclxuXHJcbiAgICAgICAgICAgIGlmIChrZXkgPT0gY3VyTWVudSkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5tZW51W2tleV0uc3ByaXRlRnJhbWUgPSBzZWxmLnNlbGVjdGVkRnJhbWVba2V5XTtcclxuICAgICAgICAgICAgICAgIHNlbGYucGFnZVtrZXldLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWpheFJldHVybkRhdGEudG9wQ2l0eS5pbmRleE9mKCflrp3nn7Pnn7/mtJ4nKSA+PSAwICYmIGtleSA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnogPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBjYy5maW5kKCdDYW52YXMvbWVudVBhbmVsL3NoZXNoaTInKS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmZpbmQoJ0NhbnZhcy9tZW51UGFuZWwvc2hlc2hpJykuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5tZW51W2tleV0uc3ByaXRlRnJhbWUgPSBzZWxmLnVuc2VsZWN0ZWRGcmFtZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5wYWdlW2tleV0uYWN0aXZlID0gZmFsc2U7XHJcblxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYWpheFJldHVybkRhdGEudG9wQ2l0eS5pbmRleE9mKCflrp3nn7Pnn7/mtJ4nKSA+PSAwICYmIGN1ck1lbnUgIT0gMSkge1xyXG5cclxuICAgICAgICAgICAgY2MuZmluZCgnQ2FudmFzL21lbnVQYW5lbC9zaGVzaGkyJykuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0sXHJcbiAgICBjbGlja0NpdHk6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhciBub2RlID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgICAgICAgICBhamF4RGF0YShIeHNnVXJsLm1vdmVDaXR5LCB7IFwiY2VudGVyQ2l0eVwiOiBub2RlLmlkIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBway5tb3ZlTXNnID0gZGF0YTtcclxuICAgICAgICAgICAgICAgIHNlbGYuaW5pdE1vdmUoKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNjLmxvZyhlKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9LFxyXG4gICAgaW5pdE1vdmU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBsZXQgbXNnID0gcGsubW92ZU1zZztcclxuICAgICAgICAgICAgdmFyIHAgPSBjYy5maW5kKFwiQ2FudmFzL21lbnVQYW5lbC95aWRvbmdcIik7XHJcbiAgICAgICAgICAgIHAucmVtb3ZlQWxsQ2hpbGRyZW4oKTtcclxuICAgICAgICAgICAgdmFyIHJ3ID0gY2MuZmluZChcIkNhbnZhcy9tZW51UGFuZWwvcmVud3VcIik7XHJcbiAgICAgICAgICAgIHJ3LnJlbW92ZUFsbENoaWxkcmVuKCk7XHJcbiAgICAgICAgICAgIHZhciBoZCA9IGNjLmZpbmQoXCJDYW52YXMvbmVhcmJ5UGxheWVyL2hlYWRcIik7XHJcbiAgICAgICAgICAgIGhkLnJlbW92ZUFsbENoaWxkcmVuKCk7XHJcbiAgICAgICAgICAgIHZhciBtID0gbXNnLm1hcDtcclxuICAgICAgICAgICAgdmFyIGcgPSBtc2cuZ3VhaTtcclxuICAgICAgICAgICAgdmFyIG4gPSBtc2cubmVhcjtcclxuICAgICAgICAgICAgY2MuZmluZChcIkNhbnZhcy9uZWFyYnlQbGF5ZXIvbGFiZWxcIikuZ2V0Q29tcG9uZW50KFwiY2MuTGFiZWxcIikuc3RyaW5nID0gJ+abtOWkmignICsgbi5sZW5ndGggKyAnKSc7XHJcbiAgICAgICAgICAgIGFqYXhSZXR1cm5EYXRhLm5lYXJSb2xlID0gbjtcclxuICAgICAgICAgICAgLy8gIHNlbGYuYWRkTW92ZVByZWZhYih7J251bSc6JzAnLCduYW1lJzptLm5DaXR5fSk7IFxyXG4gICAgICAgICAgICBjYy5sb2FkZXIubG9hZFJlcygncHJlZmFicy9tb3ZlJywgY2MuUHJlZmFiLCBmdW5jdGlvbiAoZXJyLCBwcmVmYWIpIHtcclxuICAgICAgICAgICAgICAgIGlmICghZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/lvZPliY3miYDlnKjlnLBcclxuICAgICAgICAgICAgICAgICAgICBpZiAobS5jZW50ZXJDaXR5ICE9ICcnICYmIHR5cGVvZiAobS5jZW50ZXJDaXR5KSAhPSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGNpdHkgaW4gbWFwQXJyYXlzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobS5jZW50ZXJDaXR5ID09IG1hcEFycmF5c1tjaXR5XSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYy5maW5kKCdDYW52YXMvbWVudS9zaGVzaGknKS5nZXRDb21wb25lbnQoXCJjYy5CdXR0b25cIikuaW50ZXJhY3RhYmxlID0gcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy/kuIpcclxuICAgICAgICAgICAgICAgICAgICBpZiAobS5uQ2l0eSAhPSAnJyAmJiB0eXBlb2YgKG0ubkNpdHkpICE9ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtb3ZlUHJlZmFiID0gY2MuaW5zdGFudGlhdGUocHJlZmFiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vdmVKcyA9IG1vdmVQcmVmYWIuZ2V0Q29tcG9uZW50KCdtb3ZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVQcmVmYWIub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfU1RBUlQsIHNlbGYuY2xpY2tDaXR5LCBzZWxmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZVByZWZhYi5pZCA9IG0ubkNpdHk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHAuYWRkQ2hpbGQobW92ZVByZWZhYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVKcy5pbml0KHsgJ251bSc6ICcwJywgJ25hbWUnOiBtLm5DaXR5IH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy/kuItcclxuICAgICAgICAgICAgICAgICAgICBpZiAobS5zQ2l0eSAhPSAnJyAmJiB0eXBlb2YgKG0uc0NpdHkpICE9ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtb3ZlUHJlZmFiMiA9IGNjLmluc3RhbnRpYXRlKHByZWZhYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVQcmVmYWIyLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULCBzZWxmLmNsaWNrQ2l0eSwgc2VsZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVQcmVmYWIyLmlkID0gbS5zQ2l0eTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vdmVKczIgPSBtb3ZlUHJlZmFiMi5nZXRDb21wb25lbnQoJ21vdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZUpzMi5pbml0KHsgJ251bSc6ICcxJywgJ25hbWUnOiBtLnNDaXR5IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwLmFkZENoaWxkKG1vdmVQcmVmYWIyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8v5bemXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG0ud0NpdHkgIT0gJycgJiYgdHlwZW9mIChtLndDaXR5KSAhPSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW92ZVByZWZhYjMgPSBjYy5pbnN0YW50aWF0ZShwcmVmYWIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW92ZUpzMyA9IG1vdmVQcmVmYWIzLmdldENvbXBvbmVudCgnbW92ZScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZVByZWZhYjMub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfU1RBUlQsIHNlbGYuY2xpY2tDaXR5LCBzZWxmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZVByZWZhYjMuaWQgPSBtLndDaXR5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZlSnMzLmluaXQoeyAnbnVtJzogJzInLCAnbmFtZSc6IG0ud0NpdHkgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHAuYWRkQ2hpbGQobW92ZVByZWZhYjMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8v5Y+zXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG0uZUNpdHkgIT0gJycgJiYgdHlwZW9mIChtLmVDaXR5KSAhPSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW92ZVByZWZhYjQgPSBjYy5pbnN0YW50aWF0ZShwcmVmYWIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtb3ZlSnM0ID0gbW92ZVByZWZhYjQuZ2V0Q29tcG9uZW50KCdtb3ZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVQcmVmYWI0Lm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULCBzZWxmLmNsaWNrQ2l0eSwgc2VsZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVQcmVmYWI0LmlkID0gbS5lQ2l0eTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZUpzNC5pbml0KHsgJ251bSc6ICczJywgJ25hbWUnOiBtLmVDaXR5IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwLmFkZENoaWxkKG1vdmVQcmVmYWI0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8v5Lit5b+DXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG0ucXV5dSAhPSAnJyAmJiB0eXBlb2YgKG0ucXV5dSkgIT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vdmVQcmVmYWI1ID0gY2MuaW5zdGFudGlhdGUocHJlZmFiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW92ZUpzNSA9IG1vdmVQcmVmYWI1LmdldENvbXBvbmVudCgnbW92ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZlUHJlZmFiNS5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9TVEFSVCwgc2VsZi5jbGlja0NpdHksIHNlbGYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY2VudGVyQ2l0eU5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobS5xdXl1KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICflvpDlt54nOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlckNpdHlOYW1lID0gJ+S4i+mCsyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICfmt67ljZcnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlckNpdHlOYW1lID0gJ+Wvv+aYpSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICfosavlt54nOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlckNpdHlOYW1lID0gJ+iuuOaYjCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICfljZfom64nOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlckNpdHlOYW1lID0gJ+S4ieaxn+Wfjic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICfnm4rlt54nOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlckNpdHlOYW1lID0gJ+aIkOmDvSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICfmiazlt54nOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlckNpdHlOYW1lID0gJ+WQtOWfjic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICflj7jpmrYnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlckNpdHlOYW1lID0gJ+a0m+mYsyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICflhZblt54nOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlckNpdHlOYW1lID0gJ+mZiOeVmSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICfojYblt54nOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlckNpdHlOYW1lID0gJ+axn+mZtSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICfojYbljJcnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlckNpdHlOYW1lID0gJ+aWsOmHjic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXJDaXR5TmFtZSA9ICfmlrDmiYvmnZEnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVQcmVmYWI1LmlkID0gY2VudGVyQ2l0eU5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVKczUuaW5pdCh7ICdudW0nOiAnNCcsICduYW1lJzogJ+i/lOWbnicgKyBjZW50ZXJDaXR5TmFtZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcC5hZGRDaGlsZChtb3ZlUHJlZmFiNSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mKGcpICE9ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAvL+S6uueJqemihOWItlxyXG4gICAgICAgICAgICAgICAgY2MubG9hZGVyLmxvYWRSZXMoJ3ByZWZhYnMvcm9sZVByZWZhYnMnLCBjYy5QcmVmYWIsIGZ1bmN0aW9uIChlcnIsIHByZWZhYikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjLmZpbmQoJ0NhbnZhcy9tZW51L3Jlbnd1JykuZ2V0Q29tcG9uZW50KFwiY2MuQnV0dG9uXCIpLmVuYWJsZUF1dG9HcmF5RWZmZWN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/mgKoxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnLmd1YWlpZDEgIT0gJycgJiYgdHlwZW9mIChnLmd1YWlpZDEpICE9ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYy5maW5kKCdDYW52YXMvbWVudS9yZW53dScpLmdldENvbXBvbmVudChcImNjLkJ1dHRvblwiKS5pbnRlcmFjdGFibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdkMSA9IGNjLmluc3RhbnRpYXRlKHByZWZhYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm9sZVByZWZhYnNKczEgPSBnZDEuZ2V0Q29tcG9uZW50KCdyb2xlUHJlZmFicycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9nZDEub24oY2MuTm9kZS5FdmVudFR5cGUuVE9VQ0hfU1RBUlQsIHNlbGYuY2xpY2tDaXR5LCBzZWxmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGVQcmVmYWJzSnMxLmlkID0gZy5ndWFpaWQxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcncuYWRkQ2hpbGQoZ2QxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGVQcmVmYWJzSnMxLmluaXQoeyAnbnVtJzogZy5zdGF0dXMsICdyb2xlTmFtZSc6IGcuZ3VhaWlkMSwgJ2xldmVsJzogZy5sZXZlbCB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+ihqOekuuayoeacieS6uueJqe+8jOaJgOS7peabv+aNouS6uueJqeaMiemSrueahOWbvuagh++8jOW5tuemgeatoueCueWHu+S6uueJqWludGVyYWN0YWJsZT1mYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYy5maW5kKCdDYW52YXMvbWVudS9yZW53dScpLmdldENvbXBvbmVudChcImNjLkJ1dHRvblwiKS5pbnRlcmFjdGFibGUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/mgKoyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnLmd1YWlpZDIgIT0gJycgJiYgdHlwZW9mIChnLmd1YWlpZDIpICE9ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2QyID0gY2MuaW5zdGFudGlhdGUocHJlZmFiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByb2xlUHJlZmFic0pzMiA9IGdkMi5nZXRDb21wb25lbnQoJ3JvbGVQcmVmYWJzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2dkMi5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9TVEFSVCwgc2VsZi5jbGlja0NpdHksIHNlbGYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sZVByZWZhYnNKczIuaWQgPSBnLmd1YWlpZDI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydy5hZGRDaGlsZChnZDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sZVByZWZhYnNKczIuaW5pdCh7ICdudW0nOiBnLnN0YXR1cywgJ3JvbGVOYW1lJzogZy5ndWFpaWQyLCAnbGV2ZWwnOiBnLmxldmVsIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v5oCqM1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZy5ndWFpaWQzICE9ICcnICYmIHR5cGVvZiAoZy5ndWFpaWQzKSAhPSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGdkMyA9IGNjLmluc3RhbnRpYXRlKHByZWZhYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm9sZVByZWZhYnNKczMgPSBnZDMuZ2V0Q29tcG9uZW50KCdyb2xlUHJlZmFicycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ2QzLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULCBzZWxmLmNsaWNrQ2l0eSwgc2VsZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlUHJlZmFic0pzMy5pZCA9IGcuZ3VhaWlkMztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ3LmFkZENoaWxkKGdkMyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlUHJlZmFic0pzMy5pbml0KHsgJ251bSc6IGcuc3RhdHVzLCAncm9sZU5hbWUnOiBnLmd1YWlpZDMsICdsZXZlbCc6IGcubGV2ZWwgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/mgKo0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnLmd1YWlpZDQgIT0gJycgJiYgdHlwZW9mIChnLmd1YWlpZDQpICE9ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZ2Q0ID0gY2MuaW5zdGFudGlhdGUocHJlZmFiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByb2xlUHJlZmFic0pzNCA9IGdkNC5nZXRDb21wb25lbnQoJ3JvbGVQcmVmYWJzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2dkNC5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9TVEFSVCwgc2VsZi5jbGlja0NpdHksIHNlbGYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sZVByZWZhYnNKczQuaWQgPSBnLmd1YWlpZDQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBydy5hZGRDaGlsZChnZDQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sZVByZWZhYnNKczQuaW5pdCh7ICdudW0nOiBnLnN0YXR1cywgJ3JvbGVOYW1lJzogZy5ndWFpaWQ0LCAnbGV2ZWwnOiBnLmxldmVsIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy/lpLTpg6jliqjnlLvosIPnlKhcclxuICAgICAgICAgICAgdmFyIHRvcCA9IGNjLmZpbmQoXCJDYW52YXMvdG9wXCIpO1xyXG4gICAgICAgICAgICAvL3RvcC5nZXRDb21wb25lbnQoXCJjYy5MYWJlbFwiKS5zdHJpbmc9bS5jZW50ZXJDaXR5O1xyXG4gICAgICAgICAgICB2YXIgVG9wTWFuYWdlckpzID0gdG9wLmdldENvbXBvbmVudCgnVG9wTWFuYWdlcicpO1xyXG4gICAgICAgICAgICBUb3BNYW5hZ2VySnMuc2V0TGFiZWwobS5jZW50ZXJDaXR5KTtcclxuICAgICAgICAgICAgYWpheFJldHVybkRhdGEudG9wQ2l0eSA9IG0uY2VudGVyQ2l0eTtcclxuICAgICAgICAgICAgVG9wTWFuYWdlckpzLnBsYXk7XHJcbiAgICAgICAgICAgIHNlbGYuc3dpdGNoTWVudSgwKTtcclxuICAgICAgICAgICAgLy/pmYTov5HnmoTnjqnlrrZcclxuICAgICAgICAgICAgY2MubG9hZGVyLmxvYWRSZXMoJ3ByZWZhYnMvaGVhZEl0ZW0nLCBjYy5QcmVmYWIsIGZ1bmN0aW9uIChlcnIsIHByZWZhYikge1xyXG4gICAgICAgICAgICAgICAgY2MubG9nKCfpmYTov5HnmoTnjqnlrrYnICsgZXJyKVxyXG4gICAgICAgICAgICAgICAgaWYgKCFlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG4ubGVuZ3RoIDwgNiAmJiBuLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGUgPSBuLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG4ubGVuZ3RoID4gNikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZSA9IDY7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGU7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaGVhZEl0ZW1zID0gY2MuaW5zdGFudGlhdGUocHJlZmFiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhlYWRJdGVtSnMgPSBoZWFkSXRlbXMuZ2V0Q29tcG9uZW50KFwiaGVhZEl0ZW1cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRJdGVtcy5pZCA9IG5baV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRJdGVtcy5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9TVEFSVCwgc2VsZi5jbGlja0hlYWQsIHNlbGYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZC5hZGRDaGlsZChoZWFkSXRlbXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbnVtID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2MubG9nKG5baV0uemhpeWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjLmxvZyhuW2ldLmxldmVsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG5baV0uemhpeWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ+atpuWjqyc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5baV0ubGV2ZWwgPiAwICYmIG5baV0ubGV2ZWwgPD0gNTApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5baV0uc2V4ID09ICflpbMnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW0gPSAzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobltpXS5sZXZlbCA+IDUwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuW2ldLnNleCA9PSAn5aWzJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtID0gNDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICflvILkuronOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuW2ldLmxldmVsID4gMCAmJiBuW2ldLmxldmVsIDw9IDUwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuW2ldLnNleCA9PSAn5aWzJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtID0gOVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtID0gNjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5baV0ubGV2ZWwgPiA1MCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobltpXS5zZXggPT0gJ+WlsycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bSA9IDEwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtID0gNztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ+aWh+S6uic6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5baV0ubGV2ZWwgPiAwICYmIG5baV0ubGV2ZWwgPD0gNTApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5baV0uc2V4ID09ICflpbMnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW0gPSAxNVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtID0gMTI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuW2ldLmxldmVsID4gNTApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5baV0uc2V4ID09ICflpbMnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW0gPSAxNjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bSA9IDEzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjLmxvZygnICAgaGVhZEl0ZW1Kcy5pbml0KG51bSktLS0nICsgbnVtKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkSXRlbUpzLmluaXQobnVtKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChnLmd1YWlpZDEgPT0gJycgfHwgdHlwZW9mIChnLmd1YWlpZDEpID09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnN3aXRjaE1lbnUoMik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNjLmxvZyhlKVxyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgIH0sXHJcbiAgICByb2xlRGV0YWlsOiBmdW5jdGlvbiAobXNnKSB7XHJcblxyXG4gICAgICAgIGxvYWRpbmdTY2VuZShIeHNnU2NlbmVzLmZyaWVuZEluZm8sIEh4c2dTY2VuZXMuaW5kZXgpO1xyXG5cclxuICAgIH0sXHJcbiAgICBjbGlja0hlYWQ6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHZhciBub2RlID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgICAgIHZhciBtID0gbm9kZS5pZDtcclxuICAgICAgICB2YXIgbWVzc2FnZSA9IFwi546p5a6277yaXCIgKyBtLmxldmVsICsgbS56aGl5ZSArIFwiICAgICBcIiArIFwi44CQXCIgKyBtLnJvbGVuYW1lICsgXCLjgJFcIjtcclxuICAgICAgICBteUZyaWVuZHMuZnJpZW5kaWQgPSBtLmlkO1xyXG4gICAgICAgIHNob3dBbGVydChtZXNzYWdlLCBzZWxmLnJvbGVEZXRhaWwpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBhZGRNb3ZlUHJlZmFiOmZ1bmN0aW9uKG1zZyl7XHJcbiAgICAvLyAgICAgY2MubG9hZGVyLmxvYWRSZXMoJ3ByZWZhYnMvbW92ZScsIGNjLlByZWZhYiwgZnVuY3Rpb24gKGVyciwgcHJlZmFiKSB7XHJcbiAgICAvLyAgICAgICAgIGNjLmxvZyhlcnIpXHJcbiAgICAvLyAgICAvLyBpZiAoIWVycikge1xyXG4gICAgLy8gICAgICAgICBjYy5maW5kKFwiQ2FudmFzL21lbnVQYW5lbC95aWRvbmdcIikucmVtb3ZlQWxsQ2hpbGRyZW4oKTtcclxuICAgIC8vICAgICAgICAgdmFyIG1vdmVQcmVmYWI9Y2MuaW5zdGFudGlhdGUocHJlZmFiKVxyXG4gICAgLy8gICAgICAgICAgdmFyIG1vdmVKcyA9IG1vdmVQcmVmYWIuZ2V0Q29tcG9uZW50KCdtb3ZlJyk7XHJcbiAgICAvLyAgICAgICAgICBtb3ZlSnMuaW5pdChtc2cpO1xyXG4gICAgLy8gICAgICAgICBjYy5maW5kKFwiQ2FudmFzL21lbnVQYW5lbC95aWRvbmdcIikuYWRkQ2hpbGQobW92ZVByZWZhYik7XHJcbiAgICAvLyAgICAvLyB9XHJcbiAgICAvLyAgICAgICAgfSk7XHJcbiAgICAvLyB9XHJcbn0pO1xyXG4iLCJ2YXIgc2VsZjtcclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBqdWVzZW5hbWU6IGNjLkxhYmVsLFxyXG4gICAgICAgIEhQOiBjYy5Qcm9ncmVzc0JhcixcclxuICAgICAgICBNUDogY2MuUHJvZ3Jlc3NCYXIsXHJcbiAgICAgICAgaGVhZDogY2MuU3ByaXRlLFxyXG4gICAgICAgIGZ1amlhbmcxOiBjYy5Ob2RlLFxyXG4gICAgICAgIGZ1amlhbmcyOiBjYy5Ob2RlLFxyXG4gICAgICAgIGZ1amlhbmczOiBjYy5Ob2RlLFxyXG4gICAgICAgIHpoaXllOiBjYy5MYWJlbCxcclxuICAgICAgICB5aW4gOiBjYy5MYWJlbCxcclxuICAgICAgICBqaW46IGNjLkxhYmVsLFxyXG4gICAgICAgIGppbmd5YW46IGNjLkxhYmVsLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGY9dGhpcztcclxuICAgICAgICB0aGlzLmZ1amlhbmcxID0gdGhpcy5mdWppYW5nMS5nZXRDb21wb25lbnQoJ0luZGV4RnVqaWFuZ0J1dHRvbicpO1xyXG4gICAgICAgIHRoaXMuZnVqaWFuZzIgPSB0aGlzLmZ1amlhbmcyLmdldENvbXBvbmVudCgnSW5kZXhGdWppYW5nQnV0dG9uJyk7XHJcbiAgICAgICAgdGhpcy5mdWppYW5nMyA9IHRoaXMuZnVqaWFuZzMuZ2V0Q29tcG9uZW50KCdJbmRleEZ1amlhbmdCdXR0b24nKTtcclxuICAgIH0sXHJcblxyXG4gICAgaW5pdFBsYXllcjogZnVuY3Rpb24ocm9sZSl7XHJcbiAgICAgICAgLy/op5LoibLlkI1cclxuICAgICAgICB0aGlzLmp1ZXNlbmFtZS5zdHJpbmcgPSByb2xlLnJvbGVuYW1lID8gcm9sZS5yb2xlbmFtZSA6ICcnO1xyXG4gICAgICAgIC8v5aS05YOPXHJcbiAgICAgICAgdmFyIGhlYWROYW1lID0gcm9sZS5pbWc7XHJcbiAgICAgICAgaGVhZE5hbWUgPSBoZWFkTmFtZS5zdWJzdHJpbmcoaGVhZE5hbWUubGFzdEluZGV4T2YoJy8nKSArIDEsIGhlYWROYW1lLmxhc3RJbmRleE9mKCcuJykpO1xyXG4gICAgICAgIHRoaXMuaGVhZFVybCA9ICd0b3V4aWFuZy8nICsgaGVhZE5hbWU7XHJcbiAgICAgICAgY2MubG9hZGVyLmxvYWRSZXModGhpcy5oZWFkVXJsLCBjYy5TcHJpdGVGcmFtZSwgZnVuY3Rpb24oZXJyLCBzcHJpdGVGcmFtZSl7XHJcbiAgICAgICAgICAgIGlmKCFlcnIpe1xyXG4gICAgICAgICAgICAgICAgc2VsZi5oZWFkLnNwcml0ZUZyYW1lID0gc3ByaXRlRnJhbWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvL+awlOihgFxyXG4gICAgICAgIHZhciBxaXh1ZTEgPSByb2xlLnRvdGFseHVlMSA/IHJvbGUudG90YWx4dWUxIDogMDtcclxuICAgICAgICB2YXIgcWl4dWUyID0gcm9sZS50b3RhbHh1ZTIgPyByb2xlLnRvdGFseHVlMiA6IDA7XHJcbiAgICAgICAgdGhpcy5IUC5wcm9ncmVzcyA9IHFpeHVlMiA9PT0gMCA/IDAgOiBxaXh1ZTEgLyBxaXh1ZTI7XHJcbiAgICAgICAgLy/nsr7liptcclxuICAgICAgICB2YXIgamluZ2xpMSA9IHJvbGUudG90YWxqaW5nMSA/IHJvbGUudG90YWxqaW5nMSA6IDA7XHJcbiAgICAgICAgdmFyIGppbmdsaTIgPSByb2xlLnRvdGFsamluZzIgPyByb2xlLnRvdGFsamluZzIgOiAwO1xyXG4gICAgICAgIHRoaXMuTVAucHJvZ3Jlc3MgPSBqaW5nbGkyID09PSAwID8gMCA6IGppbmdsaTEgLyBqaW5nbGkyO1xyXG4gICAgICAgIC8v562J57qnXHJcbiAgICAgICAgdGhpcy5kZW5namkgPSAocm9sZS5sZXZlbCA/IHJvbGUubGV2ZWwgOiAnJykgKyAn57qnJztcclxuICAgICAgICAgICByb2xlTXNnLnJvbGVJZD1yb2xlLmxldmVsO1xyXG4gXHJcbiAgICAgICAgLy/ogYzkuJpcclxuICAgICAgICB0aGlzLnpoaXllLnN0cmluZyA9IHRoaXMuZGVuZ2ppICsgKHJvbGUuemhpeWUgPyByb2xlLnpoaXllIDogJycpO1xyXG4gICAgICAgIC8vIC8v56ew5Y+3XHJcbiAgICAgICAgLy8gdGhpcy56aGl5ZS5zdHJpbmcgPSByb2xlLmNoZW5naGFvID8gcm9sZS5jaGVuZ2hhbyA6ICcnO1xyXG4gICAgICAgIC8v6ZKxXHJcbiAgICAgICAgdGhpcy5qaW4uc3RyaW5nID0gcm9sZS5qaW4gPyByb2xlLmppbiA6IDA7XHJcbiAgICAgICAgdGhpcy55aW4uc3RyaW5nID0gcm9sZS55aW4gPyByb2xlLnlpbiA6IDA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy/ljYfnuqfmiYDpnIDnu4/pqoxcclxuICAgICAgICB0aGlzLmppbmd5YW4uc3RyaW5nID0gcm9sZS5qaW5neWFuID8gcm9sZS5qaW5neWFuIDogMDtcclxuXHJcbiAgICAgICAgLy/lia/lsIZcclxuICAgICAgICAvL1RPRE86XHJcbiAgICAgICAgLy8gaWYocm9sZS5mdWppYW5nKXtcclxuICAgICAgICAvLyAgICAgZnVqaWFuZzEuc2V0SGVhZChyb2xlLmZ1amlhbmcpO1xyXG4gICAgICAgIC8vIH1cclxuICAgIH0sXHJcblxyXG59KTtcclxuIiwiLyoqXHJcbiAqICDmsJTooYA95oiQ6ZW/Kuetiee6pyrvvIjkvZPotKjngrkr5rCU6KGA5Yid5YC8KjAuOO+8iVxyXG4gKiAg57K+5YqbPeaIkOmVvyrnrYnnuqfvvIjmmbrlipvngrkr57K+5Yqb5Yid5YC8KjAuOO+8iVxyXG4gKiAg5pS75Ye7PSjnrYnnuqcq5oiQ6ZW/KuaUu+WHu+WIneWAvCkvNyvmlLvlh7vliJ3lgLwq5oiQ6ZW/KjAuNSvnrYnnuqcq5oiQ6ZW/KuWKm+mHj+eCuSowLjJcclxuICogIOmAn+W6pj3miJDplb8q77yI6YCf5bqm5Yid5YC8K+aVj+aNt+eCue+8iVxyXG4gKlxyXG4gKiAg54K55pWw5YiG5Li644CC44CC5L2T6LSo77yM5pWP5o2377yM5pm65Yqb77yM5Yqb6YePXHJcbiAqICDliqDngrnnmoTor53vvIzlj6rmlLnlj5jpgJ/luqbvvIzmsJTooYDvvIznsr7lipvvvIzmlLvlh7tcclxuICpcclxuICovXHJcblxyXG52YXIgc2VsZjtcclxudmFyIFByb3BlcnR5VHlwZSA9IGNjLkVudW0oe1xyXG4gICAgVGlaaGk6IDEsICAgICAgIC8v5L2T6LSoXHJcbiAgICBaaGlMaTogMiwgICAgICAgLy/mmbrliptcclxuICAgIExpTGlhbmc6IDMsICAgICAvL+WKm+mHj1xyXG4gICAgTWluSmllOiA0ICAgICAgIC8v5pWP5o23XHJcbiAgICAvLyDkvZPotKg6IDEsXHJcbiAgICAvLyDmmbrlips6IDIsXHJcbiAgICAvLyDlipvph486IDMsXHJcbiAgICAvLyDmlY/mjbc6IDQsXHJcbn0pO1xyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICB0b3RhbFBvaW50c0xhYmVsOiBjYy5MYWJlbCxcclxuICAgICAgICBmYW5neXVWYWx1ZUxhYmVsOiBjYy5MYWJlbCxcclxuXHJcbiAgICAgICAgdGl6aGlNbmc6IGNjLk5vZGUsXHJcbiAgICAgICAgemhpbGlNbmc6IGNjLk5vZGUsXHJcbiAgICAgICAgbGlsaWFuZ01uZzogY2MuTm9kZSxcclxuICAgICAgICBtaW5qaWVNbmc6IGNjLk5vZGVcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsb2FkQ29tbW9tU2NlbmNlKCk7XHJcbiAgICAgICAgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgc2VsZi50aXpoaU1uZyA9IHNlbGYudGl6aGlNbmcuZ2V0Q29tcG9uZW50KCdQcm9wZXJ0eVBvaW50cycpO1xyXG4gICAgICAgIHNlbGYuemhpbGlNbmcgPSBzZWxmLnpoaWxpTW5nLmdldENvbXBvbmVudCgnUHJvcGVydHlQb2ludHMnKTtcclxuICAgICAgICBzZWxmLmxpbGlhbmdNbmcgPSBzZWxmLmxpbGlhbmdNbmcuZ2V0Q29tcG9uZW50KCdQcm9wZXJ0eVBvaW50cycpO1xyXG4gICAgICAgIHNlbGYubWluamllTW5nID0gc2VsZi5taW5qaWVNbmcuZ2V0Q29tcG9uZW50KCdQcm9wZXJ0eVBvaW50cycpO1xyXG4gICAgICAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgICAgIC8vdmFyIGRhdGEgPSB7ICdpZCc6IHByb3BDaGVja0lkIH07XHJcbiAgICAgICAvLyBhamF4RGF0YShIeHNnVXJsLnByb3BlcnR5VXJsLCBkYXRhLCBzZWxmLmFqYXhDYWxsYmFjayk7XHJcbiAgICB9LFxyXG5cclxuIFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5qC55o2u5pWw5o2u5Yid5aeL5YyW5Zy65pmv6aG16Z2iXHJcbiAgICAgKiBAcGFyYW0gbXNnXHJcbiAgICAgKi9cclxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL+aVsOaNrui1i+WAvFxyXG4gICAgICAgIGxldCBtc2c9ZnVqaWFuZy5mam1zZ1xyXG4gICAgICAgIHNlbGYubXNnPSBtc2c7XHJcbiAgICAgICAgc2VsZi50b3RhbFBvaW50cyA9IG1zZy5rZXlvbmdkcztcclxuICAgICAgICBzZWxmLnJlbWFpblBvaW50cyA9IHNlbGYudG90YWxQb2ludHM7XHJcbiAgICAgICAgc2VsZi5jaGVuZ3poYW5nID0gbXNnLmNoZW5nemhhbmc7XHJcbiAgICAgICAgc2VsZi5MdiA9IG1zZy5sZXZlbDsgICAgICAgICAgICAgICAgICAgICAgICAgLy/nrYnnuqdcclxuICAgICAgICBzZWxmLmZhbmd5dSA9IG1zZy5jaHVmYW5nOyAgICAgICAgLy/pmLLlvqHlgLxcclxuICAgICAgICBzZWxmLnFpeHVlSW5pdFZhbHVlID0gbXNnLmNodXh1ZTtcclxuICAgICAgICBzZWxmLmppbmdsaUluaXRWYWx1ZSA9IG1zZy5jaHVqaW5nO1xyXG4gICAgICAgIHNlbGYuZ29uZ2ppSW5pdFZhbHVlID0gbXNnLmNodWdvbmc7XHJcbiAgICAgICAgc2VsZi5zdWR1SW5pdFZhbHVlID0gbXNnLmNodXN1O1xyXG5cclxuICAgICAgICAvL0xhYmVs6LWL5YC8XHJcbiAgICAgICAgc2VsZi50b3RhbFBvaW50c0xhYmVsLnN0cmluZyA9IHNlbGYudG90YWxQb2ludHM7XHJcbiAgICAgICAgc2VsZi5mYW5neXVWYWx1ZUxhYmVsLnN0cmluZyA9MDtcclxuICAgICAgICBzZWxmLnRpemhpTW5nLmluaXREYXRhKG1zZy5xaVh1ZTIsIG1zZy5xaXh1ZWRzKTtcclxuICAgICAgICBzZWxmLnpoaWxpTW5nLmluaXREYXRhKG1zZy5qaW5nTGkyLCBtc2cuamluZ2xpZHMpO1xyXG4gICAgICAgIHNlbGYubGlsaWFuZ01uZy5pbml0RGF0YShtc2cuZ29uZ0ppLCBtc2cuZ29uZ0ppZHMpO1xyXG4gICAgICAgIHNlbGYubWluamllTW5nLmluaXREYXRhKG1zZy5zdUR1LCBtc2cuc3VkdWRzKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDph43nva7lnLrmma/pobXpnaJcclxuICAgICAqL1xyXG4gICAgcmVzZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmLmluaXQoc2VsZi5tc2cpO1xyXG5cclxuICAgICAgICAvL+mHjee9ruWQhOS4quWxnuaAp1xyXG4gICAgICAgIHNlbGYudGl6aGlNbmcucmVzZXRQcm9wKCk7XHJcbiAgICAgICAgc2VsZi56aGlsaU1uZy5yZXNldFByb3AoKTtcclxuICAgICAgICBzZWxmLmxpbGlhbmdNbmcucmVzZXRQcm9wKCk7XHJcbiAgICAgICAgc2VsZi5taW5qaWVNbmcucmVzZXRQcm9wKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5o+Q5Lqk5pu05pS5XHJcbiAgICAgKi9cclxuICAgIHVwZGF0ZVBvaW50czogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNob3dBbGVydCgn56Gu6K6k5o+Q5Lqk5b2T5YmN5bGe5oCn54K55YiG6YWN5ZCX77yfJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIGlkOiBzZWxmLm1zZy5pZCxcclxuICAgICAgICAgICAgICAgIGtleW9uZ2RzOiBzZWxmLnJlbWFpblBvaW50cyxcclxuICAgICAgICAgICAgICAgIHFpWHVlMjogc2VsZi50aXpoaU1uZy5wcm9wVmFsdWUsXHJcbiAgICAgICAgICAgICAgICBxaXh1ZWRzOiBzZWxmLnRpemhpTW5nLnByb3BUb3RhbCxcclxuICAgICAgICAgICAgICAgIGppbmdMaTI6IHNlbGYuemhpbGlNbmcucHJvcFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgamluZ2xpZHM6IHNlbGYuemhpbGlNbmcucHJvcFRvdGFsLFxyXG4gICAgICAgICAgICAgICAgZ29uZ0ppOiBzZWxmLmxpbGlhbmdNbmcucHJvcFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgZ29uZ0ppZHM6IHNlbGYubGlsaWFuZ01uZy5wcm9wVG90YWwsXHJcbiAgICAgICAgICAgICAgICBzdUR1OiBzZWxmLm1pbmppZU1uZy5wcm9wVmFsdWUsXHJcbiAgICAgICAgICAgICAgICBzdWR1ZHM6IHNlbGYubWluamllTW5nLnByb3BUb3RhbFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNjLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICBhamF4VXRpbHMoSHhzZ1VybC5wcm9wZXJ0eVVwZGF0ZVVybCwgZGF0YSlcclxuICAgICAgICB9LCBudWxsKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmjInpkq7ngrnlh7vlkI7lgZrlsZ7mgKfngrnmo4Dmn6VcclxuICAgICAqL1xyXG4gICAgb25CdXR0b25FdmVudDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICBzZWxmLnRpemhpTW5nLmJ1dHRvbkludGVyYWN0aW9uKCk7XHJcbiAgICAgICAgc2VsZi56aGlsaU1uZy5idXR0b25JbnRlcmFjdGlvbigpO1xyXG4gICAgICAgIHNlbGYubGlsaWFuZ01uZy5idXR0b25JbnRlcmFjdGlvbigpO1xyXG4gICAgICAgIHNlbGYubWluamllTW5nLmJ1dHRvbkludGVyYWN0aW9uKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6h566X5pON5L2c5ZCO55qE5Ymp5L2Z5bGe5oCn54K555qE5YC8XHJcbiAgICAgKiBAcGFyYW0gY291bnRcclxuICAgICAqL1xyXG4gICAgY2hhbmdlUmVtYWluUG9pbnRzOiBmdW5jdGlvbiAoY291bnQpIHtcclxuICAgICAgICB0aGlzLnJlbWFpblBvaW50cyAtPSBjb3VudDtcclxuICAgICAgICBpZiAodGhpcy5yZW1haW5Qb2ludHMgPCAwKSB0aGlzLnJlbWFpblBvaW50cyA9IDA7XHJcbiAgICAgICAgdGhpcy50b3RhbFBvaW50c0xhYmVsLnN0cmluZyA9IHRoaXMucmVtYWluUG9pbnRzO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOiuoeeul+WQhOS4quWxnuaAp+eahOWxnuaAp+WAvFxyXG4gICAgICogQHJldHVybnMge051bWJlcn1cclxuICAgICAqL1xyXG4gICAgZ2V0UWl4dWU6IGZ1bmN0aW9uICh0aXpoaVBvaW50cykge1xyXG4gICAgICAgIHJldHVybiBwYXJzZUludChzZWxmLmNoZW5nemhhbmcgKiBzZWxmLkx2ICogKHRpemhpUG9pbnRzICsgc2VsZi5xaXh1ZUluaXRWYWx1ZSAqIDAuOCkpO1xyXG4gICAgfSxcclxuICAgIGdldEppbmdsaTogZnVuY3Rpb24gKHpoaWxpUG9pbnRzKSB7XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlSW50KHNlbGYuY2hlbmd6aGFuZyAqIHNlbGYuTHYgKiAoemhpbGlQb2ludHMgKyBzZWxmLmppbmdsaUluaXRWYWx1ZSAqIDAuOCkpO1xyXG4gICAgfSxcclxuICAgIGdldEdvbmdqaTogZnVuY3Rpb24gKGxpbGlhbmdQb2ludHMpIHtcclxuICAgICAgICByZXR1cm4gcGFyc2VJbnQoKHNlbGYuTHYgKiBzZWxmLmNoZW5nemhhbmcgKiBzZWxmLmdvbmdqaUluaXRWYWx1ZSkgLyA3ICsgc2VsZi5nb25namlJbml0VmFsdWUgKiBzZWxmLmNoZW5nemhhbmcgKiAwLjUgKyBzZWxmLkx2ICogc2VsZi5jaGVuZ3poYW5nICogbGlsaWFuZ1BvaW50cyAqIDAuMik7XHJcbiAgICB9LFxyXG4gICAgZ2V0U3VkdTogZnVuY3Rpb24gKG1pbmppZVBvaW50cykge1xyXG4gICAgICAgIHJldHVybiBwYXJzZUludChzZWxmLmNoZW5nemhhbmcgKiAoc2VsZi5zdWR1SW5pdFZhbHVlICsgbWluamllUG9pbnRzKSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5qC55o2u5bGe5oCn54K56K6h566X5bGe5oCn55qE5bGe5oCn5YC8XHJcbiAgICAgKiBAcGFyYW0gcHJvcFR5cGVcclxuICAgICAqIEBwYXJhbSBwcm9wUG9pbnRzXHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgZ2V0UHJvcFZhbHVlOiBmdW5jdGlvbiAocHJvcFR5cGUsIHByb3BQb2ludHMpIHtcclxuICAgICAgICB2YXIgcHJvcFZhbHVlID0gMDtcclxuICAgICAgICBzd2l0Y2ggKHByb3BUeXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgUHJvcGVydHlUeXBlLlRpWmhpOlxyXG4gICAgICAgICAgICAgICAgcHJvcFZhbHVlID0gdGhpcy5nZXRRaXh1ZShwcm9wUG9pbnRzKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFByb3BlcnR5VHlwZS5aaGlMaTpcclxuICAgICAgICAgICAgICAgIHByb3BWYWx1ZSA9IHRoaXMuZ2V0SmluZ2xpKHByb3BQb2ludHMpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgUHJvcGVydHlUeXBlLkxpTGlhbmc6XHJcbiAgICAgICAgICAgICAgICBwcm9wVmFsdWUgPSB0aGlzLmdldEdvbmdqaShwcm9wUG9pbnRzKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFByb3BlcnR5VHlwZS5NaW5KaWU6XHJcbiAgICAgICAgICAgICAgICBwcm9wVmFsdWUgPSB0aGlzLmdldFN1ZHUocHJvcFBvaW50cyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcHJvcFZhbHVlO1xyXG4gICAgfSxcclxuXHJcbiAgICBiYWNrRXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm5MYXN0U2NlbmUoSHhzZ1NjZW5lcy5wcm9wZXJ0eURlYWwpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIHRvdGFsUG9pbnRzTGFiZWw6IGNjLkxhYmVsLFxyXG4gICAgICAgIGZhbmd5dVZhbHVlTGFiZWw6IGNjLkxhYmVsLFxyXG4gICAgICAgIHFpeHVlTGFiZWw6IGNjLkxhYmVsLFxyXG4gICAgICAgIHRpemhpTGFiZWw6IGNjLkxhYmVsLFxyXG4gICAgICAgIGppbmdsaUxhYmVsOiBjYy5MYWJlbCxcclxuICAgICAgICB6aGlsaUxhYmVsOiBjYy5MYWJlbCxcclxuICAgICAgICBnb25namlMYWJlbDogY2MuTGFiZWwsXHJcbiAgICAgICAgbGlsaWFuZ0xhYmVsOiBjYy5MYWJlbCxcclxuICAgICAgICBzdWR1TGFiZWw6IGNjLkxhYmVsLFxyXG4gICAgICAgIG1pbmppZUxhYmVsOiBjYy5MYWJlbFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxvYWRDb21tb21TY2VuY2UoKTtcclxuICAgICAgICBzZWxmID0gdGhpcztcclxuICAgICAgICB0aGlzLmluaXQoKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmnI3liqHlmajor7fmsYLlm57mjonlh73mlbBcclxuICAgICAqIEBwYXJhbSBtc2dcclxuICAgICAqL1xyXG4gICAgYWpheENhbGxiYWNrOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgc2VsZi5pbml0KCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5qC55o2u5pWw5o2u5Yid5aeL5YyW5Zy65pmv6aG16Z2iXHJcbiAgICAgKiBAcGFyYW0gbXNnXHJcbiAgICAgKi9cclxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsZXQgbXNnPWZ1amlhbmcuZmptc2dcclxuICAgICAgICAvL0xhYmVs6LWL5YC8XHJcbiAgICAgICAgc2VsZi50b3RhbFBvaW50c0xhYmVsLnN0cmluZyA9IG1zZy5rZXlvbmdkcztcclxuICAgICAgICBzZWxmLmZhbmd5dVZhbHVlTGFiZWwuc3RyaW5nID0gMDtcclxuICAgICAgICBzZWxmLnFpeHVlTGFiZWwuc3RyaW5nID0gbXNnLnFpWHVlMjtcclxuICAgICAgICBzZWxmLnRpemhpTGFiZWwuc3RyaW5nID0gbXNnLnFpeHVlZHM7XHJcbiAgICAgICAgc2VsZi5qaW5nbGlMYWJlbC5zdHJpbmcgPSBtc2cuamluZ0xpMjtcclxuICAgICAgICBzZWxmLnpoaWxpTGFiZWwuc3RyaW5nID0gbXNnLmppbmdsaWRzO1xyXG4gICAgICAgIHNlbGYuZ29uZ2ppTGFiZWwuc3RyaW5nID0gbXNnLmdvbmdKaTtcclxuICAgICAgICBzZWxmLmxpbGlhbmdMYWJlbC5zdHJpbmcgPSBtc2cuZ29uZ0ppZHM7XHJcbiAgICAgICAgc2VsZi5zdWR1TGFiZWwuc3RyaW5nID0gbXNnLnN1RHU7XHJcbiAgICAgICAgc2VsZi5taW5qaWVMYWJlbC5zdHJpbmcgPSBtc2cuc3VkdWRzO1xyXG4gICAgICAgXHJcbiAgICB9LFxyXG5cclxuICAgIGJhY2tFdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybkxhc3RTY2VuZShIeHNnU2NlbmVzLnByb3BlcnR5Q2hlY2spO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJ2YXIgUHJvcGVydHlUeXBlID0gY2MuRW51bSh7XHJcbiAgICBUaVpoaTogMSwgICAgICAgLy/kvZPotKhcclxuICAgIFpoaUxpOiAyLCAgICAgICAvL+aZuuWKm1xyXG4gICAgTGlMaWFuZzogMywgICAgIC8v5Yqb6YePXHJcbiAgICBNaW5KaWU6IDQgICAgICAgLy/mlY/mjbdcclxuICAgIC8vIOS9k+i0qDogMSwgICAgICAgLy/kvZPotKhcclxuICAgIC8vIOaZuuWKmzogMiwgICAgICAgLy/mmbrliptcclxuICAgIC8vIOWKm+mHjzogMywgICAgIC8v5Yqb6YePXHJcbiAgICAvLyDmlY/mjbc6IDQgICAgICAgLy/mlY/mjbdcclxufSk7XHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgcHJvcE1uZzogY2MuTm9kZSxcclxuICAgICAgICBwcm9wVHlwZToge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBQcm9wZXJ0eVR5cGUuTm9uZSxcclxuICAgICAgICAgICAgdHlwZTogUHJvcGVydHlUeXBlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwcm9wVmFsdWVMYWJlbDogY2MuTGFiZWwsXHJcbiAgICAgICAgcHJvcFBvaW50TGFiZWw6IGNjLkxhYmVsLFxyXG4gICAgICAgIGRlYWxBbGxCdG46IGNjLkJ1dHRvbixcclxuICAgICAgICBhZGQxQnRuOiBjYy5CdXR0b24sXHJcbiAgICAgICAgYWRkM0J0bjogY2MuQnV0dG9uLFxyXG4gICAgICAgIGN1dDFCdG46IGNjLkJ1dHRvbixcclxuICAgICAgICBjdXQzQnRuOiBjYy5CdXR0b25cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnByb3BNbmcgPSB0aGlzLnByb3BNbmcuZ2V0Q29tcG9uZW50KCdQb3JwZXJ0eU1hbmFnZXInKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliJ3lp4vljJZcclxuICAgICAqIEBwYXJhbSBwcm9wVmFsdWVJbml0ICAgICDlsZ7mgKflgLxcclxuICAgICAqIEBwYXJhbSBwcm9wUG9pbnQgICAgIOWxnuaAp+eCuVxyXG4gICAgICovXHJcbiAgICBpbml0RGF0YTogZnVuY3Rpb24ocHJvcFZhbHVlSW5pdCwgcHJvcFBvaW50KXtcclxuICAgICAgICB0aGlzLnByb3BJbml0ID0gcHJvcFBvaW50OyAgICAgICAgICAgICAgICAgICAgICAvL+WIneWni+WxnuaAp+eCuVxyXG4gICAgICAgIHRoaXMucHJvcEFkZGVkID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5paw5YiG6YWN55qE5bGe5oCn54K5XHJcbiAgICAgICAgdGhpcy5wcm9wVG90YWwgPSB0aGlzLnByb3BJbml0ICsgdGhpcy5wcm9wQWRkZWQ7ICAgICAvL+ivpeWxnuaAp+aAu+WxnuaAp+eCuSA9IHByb3BJbml0ICsgcHJvcEFkZGVkXHJcbiAgICAgICAgdGhpcy5wcm9wVmFsdWVJbml0ID0gcHJvcFZhbHVlSW5pdDsgICAgICAgICAgICAgLy/liJ3lp4vlsZ7mgKflgLxcclxuXHJcbiAgICAgICAgdGhpcy5wcm9wVmFsdWUgPSBwcm9wVmFsdWVJbml0O1xyXG4gICAgICAgIHRoaXMucHJvcFZhbHVlTGFiZWwuc3RyaW5nID0gcHJvcFZhbHVlSW5pdDtcclxuICAgICAgICB0aGlzLnByb3BQb2ludExhYmVsLnN0cmluZyA9IHByb3BQb2ludDtcclxuXHJcbiAgICAgICAgdGhpcy5idXR0b25JbnRlcmFjdGlvbigpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOmHjee9ruiHqui6q++8jOWTjeW6lOeItue6p+mHjeaWsOWIhumFjeaMiemSrlxyXG4gICAgICovXHJcbiAgICByZXNldFByb3A6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdGhpcy5pbml0RGF0YSh0aGlzLnByb3BWYWx1ZUluaXQsIHRoaXMucHJvcEluaXQpO1xyXG4gICAgICAgIHRoaXMuYnV0dG9uSW50ZXJhY3Rpb24oKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnm5HlkKzmk43kvZznu5PmnpzvvIzpooTliKTmlq3orr7nva7mjInpkq7kuqTkupLnirbmgIFcclxuICAgICAqL1xyXG4gICAgYnV0dG9uSW50ZXJhY3Rpb246IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgLy/liqBcclxuICAgICAgICBpZih0aGlzLnByb3BNbmcucmVtYWluUG9pbnRzIDwgMCkgdGhpcy5wcm9wTW5nLnJlbWFpblBvaW50cyA9IDA7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnByb3BNbmcucmVtYWluUG9pbnRzKXtcclxuICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWFsQWxsQnRuLmludGVyYWN0YWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGQxQnRuLmludGVyYWN0YWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGQzQnRuLmludGVyYWN0YWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWFsQWxsQnRuLmludGVyYWN0YWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZDFCdG4uaW50ZXJhY3RhYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkM0J0bi5pbnRlcmFjdGFibGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWFsQWxsQnRuLmludGVyYWN0YWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFkZDFCdG4uaW50ZXJhY3RhYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWRkM0J0bi5pbnRlcmFjdGFibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v5YePXHJcbiAgICAgICAgaWYodGhpcy5wcm9wQWRkZWQgPCAwKSB0aGlzLnByb3BBZGRlZCA9IDA7XHJcbiAgICAgICAgc3dpdGNoKHRoaXMucHJvcEFkZGVkKXtcclxuICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXQxQnRuLmludGVyYWN0YWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXQzQnRuLmludGVyYWN0YWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgY2FzZSAyOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXQxQnRuLmludGVyYWN0YWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmN1dDNCdG4uaW50ZXJhY3RhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHRoaXMuY3V0MUJ0bi5pbnRlcmFjdGFibGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXQzQnRuLmludGVyYWN0YWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5piv5ZCm5Y+v5Lul6L+b6KGM5pON5L2cXHJcbiAgICAgKiBAcGFyYW0gY291bnRcclxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gICAgICovXHJcbiAgICBjYW5EbzogZnVuY3Rpb24oY291bnQpe1xyXG4gICAgICAgIGlmKGNvdW50ID4gMCkgcmV0dXJuIHRoaXMucHJvcE1uZy5yZW1haW5Qb2ludHMgPj0gY291bnQgO1xyXG4gICAgICAgIGVsc2UgaWYoY291bnQgPCAwKSB7XHJcbiAgICAgICAgICAgIGNvdW50ID0gTWF0aC5hYnMoY291bnQpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9wQWRkZWQgPj0gY291bnQ7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBkZWFsQWxsOiBmdW5jdGlvbigpe1xyXG4gICAgICAgIHRoaXMucHJvcFZhbHVlQ2FsY3VsYXRlKHRoaXMucHJvcE1uZy5yZW1haW5Qb2ludHMpO1xyXG4gICAgfSxcclxuXHJcbiAgICBhZGQxUG9pbnQ6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdGhpcy5wcm9wVmFsdWVDYWxjdWxhdGUoMSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGFkZDNQb2ludDogZnVuY3Rpb24oKXtcclxuICAgICAgICB0aGlzLnByb3BWYWx1ZUNhbGN1bGF0ZSgzKTtcclxuICAgIH0sXHJcblxyXG4gICAgY3V0MVBvaW50OiBmdW5jdGlvbigpe1xyXG4gICAgICAgIHRoaXMucHJvcFZhbHVlQ2FsY3VsYXRlKC0xKTtcclxuICAgIH0sXHJcblxyXG4gICAgY3V0M1BvaW50OiBmdW5jdGlvbigpe1xyXG4gICAgICAgIHRoaXMucHJvcFZhbHVlQ2FsY3VsYXRlKC0zKTtcclxuICAgIH0sXHJcblxyXG4gICAgcHJvcFZhbHVlQ2FsY3VsYXRlOiBmdW5jdGlvbihjb3VudCl7XHJcbiAgICAgICAgaWYodGhpcy5jYW5Ebyhjb3VudCkpe1xyXG4gICAgICAgICAgICAvL+iuoeeul+WxnuaAp+eCuVxyXG4gICAgICAgICAgICB0aGlzLnByb3BBZGRlZCArPSBjb3VudDtcclxuICAgICAgICAgICAgdGhpcy5wcm9wVG90YWwgPSB0aGlzLnByb3BJbml0ICsgdGhpcy5wcm9wQWRkZWQ7XHJcbiAgICAgICAgICAgIHRoaXMucHJvcE1uZy5jaGFuZ2VSZW1haW5Qb2ludHMoY291bnQpO1xyXG4gICAgICAgICAgICAvL+iuoeeul+WxnuaAp+eCueaUueWPmOWQjueahOWxnuaAp+WAvFxyXG4gICAgICAgICAgICB0aGlzLnByb3BWYWx1ZSA9IHRoaXMucHJvcE1uZy5nZXRQcm9wVmFsdWUodGhpcy5wcm9wVHlwZSwgdGhpcy5wcm9wVG90YWwpO1xyXG4gICAgICAgICAgICAvL0xhYmVs5Yi35pawXHJcbiAgICAgICAgICAgIHRoaXMucHJvcFZhbHVlTGFiZWwuc3RyaW5nID0gdGhpcy5wcm9wVmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMucHJvcFBvaW50TGFiZWwuc3RyaW5nID0gdGhpcy5wcm9wVG90YWw7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnByb3BNbmcub25CdXR0b25FdmVudCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSk7XHJcbiIsImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgLy8gZm9vOiB7XHJcbiAgICAgICAgLy8gICAgZGVmYXVsdDogbnVsbCwgICAgICAvLyBUaGUgZGVmYXVsdCB2YWx1ZSB3aWxsIGJlIHVzZWQgb25seSB3aGVuIHRoZSBjb21wb25lbnQgYXR0YWNoaW5nXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICB0byBhIG5vZGUgZm9yIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgLy8gICAgdXJsOiBjYy5UZXh0dXJlMkQsICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxyXG4gICAgICAgIC8vICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSwgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIHZpc2libGU6IHRydWUsICAgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIGRpc3BsYXlOYW1lOiAnRm9vJywgLy8gb3B0aW9uYWxcclxuICAgICAgICAvLyAgICByZWFkb25seTogZmFsc2UsICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIGZhbHNlXHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICAvLyAuLi5cclxuICAgIH0sXHJcblxyXG4gICAgLy/liqDovb3pkrHluoTlnLrmma9cclxuICAgIGJhY2s6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoJ2JhbmsnKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIC8vIGZvbzoge1xyXG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub2RlIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcclxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICB2aXNpYmxlOiB0cnVlLCAgICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXHJcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gLi4uXHJcbiAgICB9LFxyXG5cclxuICAgIC8v5Yqg6L296ZKx5bqE5Zy65pmvXHJcbiAgICBiYWNrOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKCdiYW5rJyk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiIHZhciBzZWxmO1xyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIGNvbnRlbnQ6IGNjLk5vZGUsXHJcbiAgICAgICAgbGVmdENvbnRlbnQ6IGNjLk5vZGUsXHJcbiAgICAgICAgdG91eGlhbmc6IGNjLlNwcml0ZSxcclxuICAgICAgICBqdWVzZW5hbWU6IGNjLkxhYmVsLFxyXG4gICAgICAgIG5hbWVCdG46IGNjLkJ1dHRvbixcclxuICAgICAgICB6aGl5ZTogY2MuTGFiZWwsXHJcbiAgICAgICAgY2hlbmdoYW86IGNjLkxhYmVsLFxyXG4gICAgICAgIGppbmd5YW46IGNjLkxhYmVsLFxyXG4gICAgICAgIHRvdXhpYW5nQnRuOiBjYy5CdXR0b24sXHJcbiAgICAgICAgc2p4aWFvbHY6IGNjLkxhYmVsLFxyXG4gICAgICAgIHZpcDogY2MuTGFiZWwsXHJcbiAgICAgICAgdGlsaXpoaTogY2MuTGFiZWwsXHJcbiAgICAgICAgcWlhbjogY2MuTGFiZWwsXHJcbiAgICAgICAgYmluZHFpYW46IGNjLkxhYmVsLFxyXG4gICAgICAgIGh1b2xpemhpOiBjYy5MYWJlbCxcclxuICAgICAgICBzdWNjZXNzQnRuOiBjYy5CdXR0b24sXHJcbiAgICAgICAgdGFud2VpOiBjYy5MYWJlbCxcclxuICAgICAgICBqdXpodWRpOiBjYy5MYWJlbCxcclxuICAgICAgICBob3VzZTogY2MuTGFiZWwsXHJcbiAgICAgICAgamlhb3BhaTogY2MuTGFiZWwsXHJcbiAgICAgICAgcGVpb3U6IGNjLkxhYmVsLFxyXG4gICAgICAgIHNraWxsQnRuOiBjYy5CdXR0b24sXHJcbiAgICAgICAgc2h1eGluZzogY2MuTGFiZWwsXHJcbiAgICAgICAgZmVucGVpQnRuOiBjYy5CdXR0b24sXHJcbiAgICAgICAgY2hha2FuQnRuOiBjYy5CdXR0b24sXHJcbiAgICAgICAgcWl4dWU6IGNjLkxhYmVsLFxyXG4gICAgICAgIGppbmdsaTogY2MuTGFiZWwsXHJcbiAgICAgICAgZ29uZ2ppOiBjYy5MYWJlbCxcclxuICAgICAgICBzdWR1OiBjYy5MYWJlbCxcclxuICAgICAgICBmYW5neXU6IGNjLkxhYmVsLFxyXG4gICAgICAgIGZ1emhvbmc6IGNjLkxhYmVsLFxyXG4gICAgICAgIGluZm86IGNjLkxhYmVsLFxyXG4gICAgICAgIGluZm9CdG46IGNjLkJ1dHRvbixcclxuICAgICAgICBmaWdodGluZ0J0bjogY2MuQnV0dG9uLFxyXG4gICAgICAgIGFsbExpZmVCdG46IGNjLkJ1dHRvbixcclxuICAgICAgICB4aW5nZ2VCdG46IGNjLkJ1dHRvbixcclxuICAgICAgICB6dW9xaTogY2MuTGFiZWwsXHJcbiAgICAgICAgenVvcWlCdG46IGNjLkJ1dHRvbixcclxuICAgICAgICBmdWppYW5nOiBjYy5MYWJlbCxcclxuICAgICAgICB0aWFuZnU6IGNjLkxhYmVsLFxyXG4gICAgICAgIHZpZGVvQnRuOiBjYy5CdXR0b24sXHJcbiAgICAgICAgdmlkZW9Ub2dnbGVCdG46IGNjLkJ1dHRvbixcclxuICAgICAgICBsYWJlbENvdW50OiAyMixcclxuICAgICAgICBidG5Db3VudDogOSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgIGFqYXhEYXRhKEh4c2dVcmwucm9sZU1zZ1VybCwgbnVsbCwgZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgICAgICBzZWxmLmluaXRSb2xlRGV0YWlscyhtc2cpO1xyXG4gICAgICAgIH0pXHJcbiAgICB9LFxyXG5cclxuICAgIGFkZENoaWxkVGVzdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuanVlc2VuYW1lLm5vZGUucGFyZW50LnJlbW92ZUZyb21QYXJlbnQoKTtcclxuICAgICAgICB0aGlzLm5hbWVCdG4ubm9kZS5yZW1vdmVGcm9tUGFyZW50KCk7XHJcblxyXG4gICAgICAgIHRoaXMubGVmdENvbnRlbnQuYWRkQ2hpbGQodGhpcy5qdWVzZW5hbWUubm9kZS5wYXJlbnQpO1xyXG4gICAgICAgIHRoaXMubGVmdENvbnRlbnQuYWRkQ2hpbGQodGhpcy5uYW1lQnRuLm5vZGUpO1xyXG5cclxuICAgICAgICB0aGlzLmp1ZXNlbmFtZS5ub2RlLnBhcmVudC5zZXRTaWJsaW5nSW5kZXgodGhpcy50b3V4aWFuZ0J0bi5ub2RlLmdldFNpYmxpbmdJbmRleCgpICsgMSk7XHJcbiAgICAgICAgdGhpcy5uYW1lQnRuLm5vZGUuc2V0U2libGluZ0luZGV4KHRoaXMudG91eGlhbmdCdG4ubm9kZS5nZXRTaWJsaW5nSW5kZXgoKSArIDIpO1xyXG5cclxuICAgICAgICB0aGlzLmNvbnRlbnQuaGVpZ2h0ID0gdGhpcy5sYWJlbENvdW50ICogNTAgKyB0aGlzLmJ0bkNvdW50ICogNjU7XHJcbiAgICB9LFxyXG5cclxuICAgIGluaXRSb2xlRGV0YWlsczogZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgIGlmIChtc2cucm9sZU1zZyA9PSB1bmRlZmluZWQgfHwgbXNnLnJvbGVNc2cgPT0gbnVsbCkgcmV0dXJuO1xyXG5cclxuICAgICAgICB0aGlzLmNvbnRlbnQuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnJvbGVNc2cgPSBtc2cucm9sZU1zZztcclxuICAgICAgICB2YXIgcm9sZSA9IG1zZy5yb2xlTXNnO1xyXG5cclxuICAgICAgICAvL+WKoOi9veWktOWDj1xyXG4gICAgICAgIC8vIGNjLmxvYWRlci5sb2FkUmVzKClcclxuICAgICAgICAvL+WktOWDj1xyXG4gICAgICAgIHZhciBoZWFkTmFtZSA9IHJvbGUuaW1nO1xyXG4gICAgICAgIGhlYWROYW1lID0gaGVhZE5hbWUuc3Vic3RyaW5nKGhlYWROYW1lLmxhc3RJbmRleE9mKCcvJykgKyAxLCBoZWFkTmFtZS5sYXN0SW5kZXhPZignLicpKTtcclxuICAgICAgICBsZXQgaGVhZFVybCA9ICd0b3V4aWFuZy8nICsgaGVhZE5hbWU7XHJcbiAgICAgICAgY2MubG9hZGVyLmxvYWRSZXMoaGVhZFVybCwgY2MuU3ByaXRlRnJhbWUsIGZ1bmN0aW9uIChlcnIsIHNwcml0ZUZyYW1lKSB7XHJcbiAgICAgICAgICAgIGlmICghZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnRvdXhpYW5nLnNwcml0ZUZyYW1lID0gc3ByaXRlRnJhbWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy/op5LoibLlkI1cclxuICAgICAgICB0aGlzLmp1ZXNlbmFtZS5zdHJpbmcgPSByb2xlLnJvbGVuYW1lO1xyXG4gICAgICAgIC8v6IGM5LiaXHJcbiAgICAgICAgdGhpcy56aGl5ZS5zdHJpbmcgPSByb2xlLnpoaXllO1xyXG4gICAgICAgIC8v562J57qnXHJcbiAgICAgICAgdGhpcy5kZW5namkgPSByb2xlLmxldmVsO1xyXG5cclxuICAgICAgICAvL+ensOWPt1xyXG4gICAgICAgIHRoaXMuY2hlbmdoYW8uc3RyaW5nID0gcm9sZS5jaGVuZ2hhbztcclxuICAgICAgICAvL+WNh+e6p+aJgOmcgOe7j+mqjFxyXG4gICAgICAgIHRoaXMuamluZ3lhbi5zdHJpbmcgPSAn6ZyAJyArIHJvbGUuamluZ3lhbiArICfnu4/pqownO1xyXG4gICAgICAgIC8v5Y2H57qn5pWI546HXHJcbiAgICAgICAgdGhpcy5zanhpYW9sdi5zdHJpbmcgPSByb2xlLnNoZW5naml4aWFvbHY7XHJcbiAgICAgICAgLy9WSVBcclxuICAgICAgICB0aGlzLnZpcC5zdHJpbmcgPSAnJztcclxuICAgICAgICAvL+S9k+WKm+WAvFxyXG4gICAgICAgIHRoaXMudGlsaXpoaS5zdHJpbmcgPSByb2xlLnRpbGl6aGk7XHJcbiAgICAgICAgLy/pkrFcclxuICAgICAgICB2YXIgamluID0gcm9sZS5qaW47XHJcbiAgICAgICAgdmFyIHlpbiA9IHJvbGUueWluO1xyXG4gICAgICAgIHRoaXMucWlhbi5zdHJpbmcgPSBqaW4gKyAn6YeRJyArIHlpbiArICfpk7YnO1xyXG4gICAgICAgIC8v57uR5a6a6ZO2XHJcbiAgICAgICAgdGhpcy5iaW5kcWlhbi5zdHJpbmcgPSAnJztcclxuICAgICAgICAvL+a0u+WKm+WAvFxyXG4gICAgICAgIHRoaXMuaHVvbGl6aGkuc3RyaW5nID0gMTAwO1xyXG4gICAgICAgIC8v5pGK5L2NXHJcbiAgICAgICAgdGhpcy50YW53ZWkuc3RyaW5nID0gXCLml6BcIjtcclxuICAgICAgICAvL+WxheS9j+WcsFxyXG4gICAgICAgIHRoaXMuanV6aHVkaS5zdHJpbmcgPSBcIuaXoFwiO1xyXG4gICAgICAgIC8v5oi/5LqnXHJcbiAgICAgICAgdGhpcy5ob3VzZS5zdHJpbmcgPSBcIuaXoFwiO1xyXG4gICAgICAgIC8v5pWZ5rS+XHJcbiAgICAgICAgdGhpcy5qaWFvcGFpLnN0cmluZyA9IFwi5pegXCI7XHJcbiAgICAgICAgLy/phY3lgbZcclxuICAgICAgICB0aGlzLnBlaW91LnN0cmluZyA9IFwi5pegXCI7XHJcbiAgICAgICAgLy/lsZ7mgKdcclxuICAgICAgICB2YXIgc2h1eGluZ1ZhbHVlID0gcm9sZS5rZXlvbmdkcyA+IDAgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgY2MubG9nKHNodXhpbmdWYWx1ZSlcclxuICAgICAgICB0aGlzLmZlbnBlaUJ0bi5hY3RpdmUgPSBzaHV4aW5nVmFsdWU7XHJcbiAgICAgICAgdGhpcy5jaGFrYW5CdG4uYWN0aXZlID0gIXNodXhpbmdWYWx1ZTtcclxuICAgICAgICB0aGlzLnNodXhpbmcuc3RyaW5nID0gcm9sZS5rZXlvbmdkcztcclxuICAgICAgICAvL+awlOihgFxyXG4gICAgICAgIHZhciBxaXh1ZTEgPSByb2xlLnRvdGFseHVlMTtcclxuICAgICAgICB2YXIgcWl4dWUyID0gcm9sZS50b3RhbHh1ZTI7XHJcbiAgICAgICAgdGhpcy5xaXh1ZS5zdHJpbmcgPSBxaXh1ZTEgKyAnLycgKyBxaXh1ZTI7XHJcbiAgICAgICAgLy/nsr7liptcclxuICAgICAgICB2YXIgamluZ2xpMSA9IHJvbGUudG90YWxqaW5nMTtcclxuICAgICAgICB2YXIgamluZ2xpMiA9IHJvbGUudG90YWxqaW5nMjtcclxuICAgICAgICB0aGlzLmppbmdsaS5zdHJpbmcgPSBqaW5nbGkxICsgJy8nICsgamluZ2xpMjtcclxuICAgICAgICAvL+aUu+WHu1xyXG4gICAgICAgIHRoaXMuZ29uZ2ppLnN0cmluZyA9IHJvbGUudG90YWxnb25nO1xyXG4gICAgICAgIC8v6YCf5bqmXHJcbiAgICAgICAgdGhpcy5zdWR1LnN0cmluZyA9IHJvbGUudG90YWxzdWR1O1xyXG4gICAgICAgIC8v6Ziy5b6hXHJcbiAgICAgICAgdGhpcy5mYW5neXUuc3RyaW5nID0gXCLml6BcIjtcclxuICAgICAgICAvLyAvL+i0n+mHjVxyXG4gICAgICAgIC8vIHRoaXMuZnV6aG9uZy5zdHJpbmcgPSByb2xlLmZ1emhvbmcxICsgJy8nKyByb2xlLmZ1emhvbmcyO1xyXG4gICAgICAgIC8v5Liq5Lq65L+h5oGvXHJcbiAgICAgICAgdGhpcy5pbmZvLnN0cmluZyA9ICcnO1xyXG4gICAgICAgIHRoaXMuaW5mb0J0bi5pbnRlcmFjdGFibGUgPSBmYWxzZTtcclxuICAgICAgICAvL+WdkOmqkVxyXG4gICAgICAgIHRoaXMuenVvcWkuc3RyaW5nID0gcm9sZS56dW9qaSA/IHJvbGUuenVvamkgOiAnJztcclxuICAgICAgICB0aGlzLnp1b3FpQnRuLmludGVyYWN0YWJsZSA9IHJvbGUuenVvamkgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgLy/lia/lsIZcclxuICAgICAgICBsZXQgZmogPSByb2xlLmZ1TGk7XHJcbiAgICAgICAgbGV0IGZqTmFtZSA9IFwiXCI7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmai5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBmak5hbWUgKz0gXCIoXCIgKyBmaltpXS5mdWppYW5nbmFtZSArIFwiKVwiXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZnVqaWFuZy5zdHJpbmcgPSBmak5hbWU7XHJcbiAgICAgICAgLy/lpKnotYtcclxuICAgICAgICB0aGlzLnRpYW5mdS5zdHJpbmcgPSAnJztcclxuICAgIH0sXHJcblxyXG4gICAgbmlja0V2ZW50OiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICBoZWFkRXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIGFjaGlldmVtZW50RXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIHNraWxlRXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIHByb3BlcnR5Q2hlY2tFdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHByb3BDaGVja0lkID0gdGhpcy5yb2xlTXNnLmlkO1xyXG4gICAgICAgIGxvYWRTY2VuZShIeHNnU2NlbmVzLnByb3BlcnR5Q2hlY2ssIEh4c2dTY2VuZXMucm9sZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIHByb3BlcnR5RGVhbEV2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcHJvcENoZWNrSWQgPSB0aGlzLnJvbGVNc2cuaWQ7XHJcbiAgICAgICAgbG9hZFNjZW5lKEh4c2dTY2VuZXMucHJvcGVydHlEZWFsLCBIeHNnU2NlbmVzLnJvbGUpO1xyXG4gICAgfSxcclxuXHJcbiAgICBwZXJzb25JbmZvRXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIGZpZ2h0aW5nRXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIGxpZmVFdmVudDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgY2hhcmFjdGVyRXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIG1vdW50RXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIHZpZGVvRXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIHZpZGVvVG9nZ2xlRXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIGJhY2tFdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybkxhc3RTY2VuZShIeHNnU2NlbmVzLnJvbGUpO1xyXG4gICAgfVxyXG59KTtcclxuIiwiY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBwbGF5ZXJHb2xkX2xhYmVsOiBjYy5MYWJlbCxcclxuICAgICAgICBiYW5rR29sZF9sYWJlbDogY2MuTGFiZWwsXHJcbiAgICAgICAgc2F2ZUdvbGRfZWRpdGJveDogY2MuRWRpdEJveCxcclxuICAgIH0sXHJcblxyXG4gICAgLy/ov5Tlm57pkrHluoTlnLrmma9cclxuICAgIGJhY2s6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm5MYXN0KCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5a2Y5qy+6K6w5b2VXHJcbiAgICBzYXZlUmVjb3JkOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvL+ehruiupOWtmOasvlxyXG4gICAgc2F2ZUNvbmZpcm06IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHNhdmVEYXRlID0ge1xyXG4gICAgICAgICAgICBcInN0YXR1c1wiOiBcImFkZFwiLC8v6K+l5Y+C5pWw5pyJYWRkKOWtmOasviksZGVsKOWPluasvilcclxuICAgICAgICAgICAgXCJqaW5cIjogdGhpcy5zYXZlR29sZF9lZGl0Ym94LnN0cmluZywvL+WtmOmHkeWwseWhq+ivpeWPguaVsFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgYWpheERhdGEoSHhzZ1VybC5iYW5rU0dVcmwsIHNhdmVEYXRlLCBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgICAgIHNlbGYuYmFjaygpO1xyXG4gICAgICAgICAgICBzaG93QWxlcnQobXNnLnJlc3VsdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5wbGF5ZXJHb2xkX2xhYmVsLnN0cmluZyA9IFwi5oKo55uu5YmN5pyJXCIgKyBCYW5rLnBsYXllckdvbGQgKyBcIumHkeegllwiO1xyXG4gICAgICAgIHRoaXMuYmFua0dvbGRfbGFiZWwuc3RyaW5nID0gXCLpkrHluoTlrZjmrL5cIiArIEJhbmsuYmFua0dvbGQgKyBcIumHkeegllwiO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBwbGF5ZXJTaWx2ZXJfbGFiZWw6IGNjLkxhYmVsLFxyXG4gICAgICAgIGJhbmtTaWx2ZXJfbGFiZWw6IGNjLkxhYmVsLFxyXG4gICAgICAgIHNhdmVTaWx2ZXJfZWRpdGJveDogY2MuRWRpdEJveCxcclxuICAgIH0sXHJcblxyXG4gICAgLy/ov5Tlm57pkrHluoTlnLrmma9cclxuICAgIGJhY2s6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm5MYXN0KCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v5a2Y5qy+6K6w5b2VXHJcbiAgICBzYXZlUmVjb3JkOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvL+ehruiupOWtmOasvlxyXG4gICAgc2F2ZUNvbmZpcm06IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHNhdmVEYXRlID0ge1xyXG4gICAgICAgICAgICBcInN0YXR1c1wiOiBcImFkZFwiLC8v6K+l5Y+C5pWw5pyJYWRkKOWtmOasviksZGVsKOWPluasvilcclxuICAgICAgICAgICAgXCJ5aW5cIjogdGhpcy5zYXZlU2lsdmVyX2VkaXRib3guc3RyaW5nLC8v5a2Y6ZO25bCx5aGr6K+l5Y+C5pWwXHJcbiAgICAgICAgfTtcclxuICAgICAgICBhamF4RGF0YShIeHNnVXJsLmJhbmtTR1VybCwgc2F2ZURhdGUsIGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICAgICAgc2VsZi5iYWNrKCk7XHJcbiAgICAgICAgICAgIHNob3dBbGVydChtc2cucmVzdWx0KTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnBsYXllclNpbHZlcl9sYWJlbC5zdHJpbmcgPSBcIuaCqOebruWJjeaciVwiICsgQmFuay5wbGF5ZXJTaWx2ZXIgKyBcIuS4pFwiO1xyXG4gICAgICAgIHRoaXMuYmFua1NpbHZlcl9sYWJlbC5zdHJpbmcgPSBcIumSseW6hOWtmOasvlwiICsgQmFuay5iYW5rU2lsdmVyICsgXCLkuKRcIjtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgLy8gZm9vOiB7XHJcbiAgICAgICAgLy8gICAgZGVmYXVsdDogbnVsbCwgICAgICAvLyBUaGUgZGVmYXVsdCB2YWx1ZSB3aWxsIGJlIHVzZWQgb25seSB3aGVuIHRoZSBjb21wb25lbnQgYXR0YWNoaW5nXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICB0byBhIG5vZGUgZm9yIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgLy8gICAgdXJsOiBjYy5UZXh0dXJlMkQsICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxyXG4gICAgICAgIC8vICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSwgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIHZpc2libGU6IHRydWUsICAgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIGRpc3BsYXlOYW1lOiAnRm9vJywgLy8gb3B0aW9uYWxcclxuICAgICAgICAvLyAgICByZWFkb25seTogZmFsc2UsICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIGZhbHNlXHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICAvLyAuLi5cclxuICAgIH0sXHJcblxyXG4gICAgLy/liqDovb3pkrHluoTlnLrmma9cclxuICAgIGJhY2s6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoJ2JhbmsnKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIHlpZ3VhbkV2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MubG9nKCdzaGVzaGkgcGFuZWwg5Yy76aaGJyk7XHJcbiAgICAgICAgICBsb2FkaW5nU2NlbmUoSHhzZ1NjZW5lcy55aWd1YW4sSHhzZ1NjZW5lcy5pbmRleCk7XHJcbiAgICB9LFxyXG5cclxuICAgIHFpYW56aHVhbmdFdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmxvZygnc2hlc2hpIHBhbmVsIOmSseW6hCcpO1xyXG4gICAgICAgIGxvYWRTY2VuZShIeHNnU2NlbmVzLmJhbmssIEh4c2dTY2VuZXMuaW5kZXgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBndWFueWlFdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgc2hvd0FsZXJ0KFwi5pqC5pyq5byA5pS+XCIpXHJcbiAgICAgICAgY2MubG9nKCdzaGVzaGkgcGFuZWwg6aaG6am/Jyk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNoaWNoYW5nRXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coJ3NoZXNoaSBwYW5lbCDluILlnLonKTtcclxuICAgICAgICBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoJ3NoaUNoYW5nSW5kZXgnKTtcclxuICAgIH0sXHJcblxyXG4gICAgZ3VhbmdjaGFuZ0V2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MubG9nKCdzaGVzaGkgcGFuZWwg5bm/5Zy6Jyk7XHJcbiAgICAgICAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKCdndWFuZ0NoYW5nJyk7XHJcbiAgICB9LFxyXG5cclxuICAgIGd1YW5mdUV2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2hvd0FsZXJ0KFwi5pqC5pyq5byA5pS+XCIpXHJcbiAgICAgICAgY2MubG9nKCdzaGVzaGkgcGFuZWwg5a6Y5bqcJyk7XHJcbiAgICB9LFxyXG5cclxuICAgIHpoYW5jaGFuZ0V2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICBzaG93QWxlcnQoXCLmmoLmnKrlvIDmlL5cIilcclxuICAgICAgICBjYy5sb2coJ3NoZXNoaSBwYW5lbCDmiJjlnLonKTtcclxuICAgIH0sXHJcblxyXG4gICAgZ3VhbmppYUV2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICBzaG93QWxlcnQoXCLmmoLmnKrlvIDmlL5cIilcclxuICAgICAgICBjYy5sb2coJ3NoZXNoaSBwYW5lbCDnrqHlrrYnKTtcclxuICAgIH0sXHJcbiAgICAgd2FiYW9FdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgbG9hZGluZ1NjZW5lKEh4c2dTY2VuZXMud2FiYW8sSHhzZ1NjZW5lcy5pbmRleCk7XHJcbiAgICB9XHJcbiAgICBcclxufSk7XHJcbiIsIlxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIGVkaXQ6IGNjLkVkaXRCb3gsXHJcbiAgICB9LFxyXG5cclxuICAgIHNlbmRFdmVudDogZnVuY3Rpb24oKXtcclxuICAgICAgICBpZihTb2NrZXRFdmVudHMuY29ubmVjdGVkKXtcclxuICAgICAgICAgICAgdmFyIGRhdGFzID0gSlNPTi5zdHJpbmdpZnkoeyAna2V5Jzp1dWlkS2V5LCd0eXBlJzogJ2NoYXQnLCAndHlwZUNoYXQnOiAoY3VyQ2hhbm5lbCsxKS50b1N0cmluZygpLCAncm9sZSc6U29ja2V0RXZlbnRzLmRhdGEsICdjaGF0TXNnJzogdGhpcy5lZGl0LnN0cmluZ30pO1xyXG4gICAgICAgICAgICB3cy5zZW5kKGRhdGFzKTtcclxuICAgICAgICAgICAgY2MubG9nKCd3cy5zZW5kOiAnK2RhdGFzKTtcclxuICAgICAgICAgICAgdGhpcy5ub2RlLmRlc3Ryb3koKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgY2MubG9nKCd3cyDmnKrov57mjqUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICB9LFxyXG5cclxuICAgIGNhbmNlbEV2ZW50OiBmdW5jdGlvbigpe1xyXG4gICAgICAgIHRoaXMubm9kZS5kZXN0cm95KCk7XHJcbiAgICB9XHJcbn0pO1xyXG4iLCJ2YXIgc2VsZjtcclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBsZWZ0OiBjYy5Ob2RlLFxyXG4gICAgICAgIHJpZ2h0OiBjYy5Ob2RlXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZj10aGlzO1xyXG4gICAgICAgIHRoaXMuY2FudmFzID0gY2MuZmluZCgnQ2FudmFzJyk7XHJcbiAgICAgICAgbGV0IHB4ID0gdGhpcy5jYW52YXMud2lkdGggLyAyO1xyXG4gICAgICAgIHRoaXMuYWRkSW1hZ2VBY3Rpb24ocHgpO1xyXG4gICAgfSxcclxuXHJcbiAgICBhZGRJbWFnZUFjdGlvbjogZnVuY3Rpb24ocHgpe1xyXG4gICAgICAgIC8v6I635Y+W6L655qGG5Yiw5Lit5b+D55qE6Led56a777yM5Y2z5b6X5Yiw5Lik6L655qGG55qE5Z2Q5qCH44CC5rOo5oSP77ya5Zug5Li65pe25bqP6Zeu6aKY77yM5b+F6aG76KaBY2FudmFz55qE5a695bqm5p2l6K6h566XXHJcbiAgICAgICAgbGV0IHNlcUxlZnQgPSBjYy5zZXF1ZW5jZShjYy5tb3ZlVG8oMSwgY2MucCgtcHgsIDApKS5lYXNpbmcoY2MuZWFzZUN1YmljQWN0aW9uT3V0KDEpKSk7XHJcbiAgICAgICAgbGV0IHNlcVJpZ2h0ID0gY2Muc2VxdWVuY2UoY2MubW92ZVRvKDEsIGNjLnAocHgsIDApKS5lYXNpbmcoY2MuZWFzZUN1YmljQWN0aW9uT3V0KDEpKSk7XHJcbiAgICAgICAgc2VsZi5sZWZ0LnJ1bkFjdGlvbihzZXFMZWZ0KTtcclxuICAgICAgICBzZWxmLnJpZ2h0LnJ1bkFjdGlvbihzZXFSaWdodCk7XHJcbiAgICB9LFxyXG59KTtcclxuIiwiLyohXG4gKiBWRVJTSU9OOiAxLjE5LjFcbiAqIERBVEU6IDIwMTctMDEtMTdcbiAqIFVQREFURVMgQU5EIERPQ1MgQVQ6IGh0dHA6Ly9ncmVlbnNvY2suY29tXG4gKlxuICogQGxpY2Vuc2UgQ29weXJpZ2h0IChjKSAyMDA4LTIwMTcsIEdyZWVuU29jay4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgd29yayBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBhdCBodHRwOi8vZ3JlZW5zb2NrLmNvbS9zdGFuZGFyZC1saWNlbnNlIG9yIGZvclxuICogQ2x1YiBHcmVlblNvY2sgbWVtYmVycywgdGhlIHNvZnR3YXJlIGFncmVlbWVudCB0aGF0IHdhcyBpc3N1ZWQgd2l0aCB5b3VyIG1lbWJlcnNoaXAuXG4gKiBcbiAqIEBhdXRob3I6IEphY2sgRG95bGUsIGphY2tAZ3JlZW5zb2NrLmNvbVxuICovXG52YXIgX2dzU2NvcGUgPSAodHlwZW9mKG1vZHVsZSkgIT09IFwidW5kZWZpbmVkXCIgJiYgbW9kdWxlLmV4cG9ydHMgJiYgdHlwZW9mKGdsb2JhbCkgIT09IFwidW5kZWZpbmVkXCIpID8gZ2xvYmFsIDogdGhpcyB8fCB3aW5kb3c7IC8vaGVscHMgZW5zdXJlIGNvbXBhdGliaWxpdHkgd2l0aCBBTUQvUmVxdWlyZUpTIGFuZCBDb21tb25KUy9Ob2RlXG4oX2dzU2NvcGUuX2dzUXVldWUgfHwgKF9nc1Njb3BlLl9nc1F1ZXVlID0gW10pKS5wdXNoKCBmdW5jdGlvbigpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblxuXHRfZ3NTY29wZS5fZ3NEZWZpbmUoXCJUaW1lbGluZUxpdGVcIiwgW1wiY29yZS5BbmltYXRpb25cIixcImNvcmUuU2ltcGxlVGltZWxpbmVcIixcIlR3ZWVuTGl0ZVwiXSwgZnVuY3Rpb24oQW5pbWF0aW9uLCBTaW1wbGVUaW1lbGluZSwgVHdlZW5MaXRlKSB7XG5cblx0XHR2YXIgVGltZWxpbmVMaXRlID0gZnVuY3Rpb24odmFycykge1xuXHRcdFx0XHRTaW1wbGVUaW1lbGluZS5jYWxsKHRoaXMsIHZhcnMpO1xuXHRcdFx0XHR0aGlzLl9sYWJlbHMgPSB7fTtcblx0XHRcdFx0dGhpcy5hdXRvUmVtb3ZlQ2hpbGRyZW4gPSAodGhpcy52YXJzLmF1dG9SZW1vdmVDaGlsZHJlbiA9PT0gdHJ1ZSk7XG5cdFx0XHRcdHRoaXMuc21vb3RoQ2hpbGRUaW1pbmcgPSAodGhpcy52YXJzLnNtb290aENoaWxkVGltaW5nID09PSB0cnVlKTtcblx0XHRcdFx0dGhpcy5fc29ydENoaWxkcmVuID0gdHJ1ZTtcblx0XHRcdFx0dGhpcy5fb25VcGRhdGUgPSB0aGlzLnZhcnMub25VcGRhdGU7XG5cdFx0XHRcdHZhciB2ID0gdGhpcy52YXJzLFxuXHRcdFx0XHRcdHZhbCwgcDtcblx0XHRcdFx0Zm9yIChwIGluIHYpIHtcblx0XHRcdFx0XHR2YWwgPSB2W3BdO1xuXHRcdFx0XHRcdGlmIChfaXNBcnJheSh2YWwpKSBpZiAodmFsLmpvaW4oXCJcIikuaW5kZXhPZihcIntzZWxmfVwiKSAhPT0gLTEpIHtcblx0XHRcdFx0XHRcdHZbcF0gPSB0aGlzLl9zd2FwU2VsZkluUGFyYW1zKHZhbCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChfaXNBcnJheSh2LnR3ZWVucykpIHtcblx0XHRcdFx0XHR0aGlzLmFkZCh2LnR3ZWVucywgMCwgdi5hbGlnbiwgdi5zdGFnZ2VyKTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdF90aW55TnVtID0gMC4wMDAwMDAwMDAxLFxuXHRcdFx0VHdlZW5MaXRlSW50ZXJuYWxzID0gVHdlZW5MaXRlLl9pbnRlcm5hbHMsXG5cdFx0XHRfaW50ZXJuYWxzID0gVGltZWxpbmVMaXRlLl9pbnRlcm5hbHMgPSB7fSxcblx0XHRcdF9pc1NlbGVjdG9yID0gVHdlZW5MaXRlSW50ZXJuYWxzLmlzU2VsZWN0b3IsXG5cdFx0XHRfaXNBcnJheSA9IFR3ZWVuTGl0ZUludGVybmFscy5pc0FycmF5LFxuXHRcdFx0X2xhenlUd2VlbnMgPSBUd2VlbkxpdGVJbnRlcm5hbHMubGF6eVR3ZWVucyxcblx0XHRcdF9sYXp5UmVuZGVyID0gVHdlZW5MaXRlSW50ZXJuYWxzLmxhenlSZW5kZXIsXG5cdFx0XHRfZ2xvYmFscyA9IF9nc1Njb3BlLl9nc0RlZmluZS5nbG9iYWxzLFxuXHRcdFx0X2NvcHkgPSBmdW5jdGlvbih2YXJzKSB7XG5cdFx0XHRcdHZhciBjb3B5ID0ge30sIHA7XG5cdFx0XHRcdGZvciAocCBpbiB2YXJzKSB7XG5cdFx0XHRcdFx0Y29weVtwXSA9IHZhcnNbcF07XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGNvcHk7XG5cdFx0XHR9LFxuXHRcdFx0X2FwcGx5Q3ljbGUgPSBmdW5jdGlvbih2YXJzLCB0YXJnZXRzLCBpKSB7XG5cdFx0XHRcdHZhciBhbHQgPSB2YXJzLmN5Y2xlLFxuXHRcdFx0XHRcdHAsIHZhbDtcblx0XHRcdFx0Zm9yIChwIGluIGFsdCkge1xuXHRcdFx0XHRcdHZhbCA9IGFsdFtwXTtcblx0XHRcdFx0XHR2YXJzW3BdID0gKHR5cGVvZih2YWwpID09PSBcImZ1bmN0aW9uXCIpID8gdmFsKGksIHRhcmdldHNbaV0pIDogdmFsW2kgJSB2YWwubGVuZ3RoXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRkZWxldGUgdmFycy5jeWNsZTtcblx0XHRcdH0sXG5cdFx0XHRfcGF1c2VDYWxsYmFjayA9IF9pbnRlcm5hbHMucGF1c2VDYWxsYmFjayA9IGZ1bmN0aW9uKCkge30sXG5cdFx0XHRfc2xpY2UgPSBmdW5jdGlvbihhKSB7IC8vZG9uJ3QgdXNlIFtdLnNsaWNlIGJlY2F1c2UgdGhhdCBkb2Vzbid0IHdvcmsgaW4gSUU4IHdpdGggYSBOb2RlTGlzdCB0aGF0J3MgcmV0dXJuZWQgYnkgcXVlcnlTZWxlY3RvckFsbCgpXG5cdFx0XHRcdHZhciBiID0gW10sXG5cdFx0XHRcdFx0bCA9IGEubGVuZ3RoLFxuXHRcdFx0XHRcdGk7XG5cdFx0XHRcdGZvciAoaSA9IDA7IGkgIT09IGw7IGIucHVzaChhW2krK10pKTtcblx0XHRcdFx0cmV0dXJuIGI7XG5cdFx0XHR9LFxuXHRcdFx0cCA9IFRpbWVsaW5lTGl0ZS5wcm90b3R5cGUgPSBuZXcgU2ltcGxlVGltZWxpbmUoKTtcblxuXHRcdFRpbWVsaW5lTGl0ZS52ZXJzaW9uID0gXCIxLjE5LjFcIjtcblx0XHRwLmNvbnN0cnVjdG9yID0gVGltZWxpbmVMaXRlO1xuXHRcdHAua2lsbCgpLl9nYyA9IHAuX2ZvcmNpbmdQbGF5aGVhZCA9IHAuX2hhc1BhdXNlID0gZmFsc2U7XG5cblx0XHQvKiBtaWdodCB1c2UgbGF0ZXIuLi5cblx0XHQvL3RyYW5zbGF0ZXMgYSBsb2NhbCB0aW1lIGluc2lkZSBhbiBhbmltYXRpb24gdG8gdGhlIGNvcnJlc3BvbmRpbmcgdGltZSBvbiB0aGUgcm9vdC9nbG9iYWwgdGltZWxpbmUsIGZhY3RvcmluZyBpbiBhbGwgbmVzdGluZyBhbmQgdGltZVNjYWxlcy5cblx0XHRmdW5jdGlvbiBsb2NhbFRvR2xvYmFsKHRpbWUsIGFuaW1hdGlvbikge1xuXHRcdFx0d2hpbGUgKGFuaW1hdGlvbikge1xuXHRcdFx0XHR0aW1lID0gKHRpbWUgLyBhbmltYXRpb24uX3RpbWVTY2FsZSkgKyBhbmltYXRpb24uX3N0YXJ0VGltZTtcblx0XHRcdFx0YW5pbWF0aW9uID0gYW5pbWF0aW9uLnRpbWVsaW5lO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRpbWU7XG5cdFx0fVxuXG5cdFx0Ly90cmFuc2xhdGVzIHRoZSBzdXBwbGllZCB0aW1lIG9uIHRoZSByb290L2dsb2JhbCB0aW1lbGluZSBpbnRvIHRoZSBjb3JyZXNwb25kaW5nIGxvY2FsIHRpbWUgaW5zaWRlIGEgcGFydGljdWxhciBhbmltYXRpb24sIGZhY3RvcmluZyBpbiBhbGwgbmVzdGluZyBhbmQgdGltZVNjYWxlc1xuXHRcdGZ1bmN0aW9uIGdsb2JhbFRvTG9jYWwodGltZSwgYW5pbWF0aW9uKSB7XG5cdFx0XHR2YXIgc2NhbGUgPSAxO1xuXHRcdFx0dGltZSAtPSBsb2NhbFRvR2xvYmFsKDAsIGFuaW1hdGlvbik7XG5cdFx0XHR3aGlsZSAoYW5pbWF0aW9uKSB7XG5cdFx0XHRcdHNjYWxlICo9IGFuaW1hdGlvbi5fdGltZVNjYWxlO1xuXHRcdFx0XHRhbmltYXRpb24gPSBhbmltYXRpb24udGltZWxpbmU7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdGltZSAqIHNjYWxlO1xuXHRcdH1cblx0XHQqL1xuXG5cdFx0cC50byA9IGZ1bmN0aW9uKHRhcmdldCwgZHVyYXRpb24sIHZhcnMsIHBvc2l0aW9uKSB7XG5cdFx0XHR2YXIgRW5naW5lID0gKHZhcnMucmVwZWF0ICYmIF9nbG9iYWxzLlR3ZWVuTWF4KSB8fCBUd2VlbkxpdGU7XG5cdFx0XHRyZXR1cm4gZHVyYXRpb24gPyB0aGlzLmFkZCggbmV3IEVuZ2luZSh0YXJnZXQsIGR1cmF0aW9uLCB2YXJzKSwgcG9zaXRpb24pIDogdGhpcy5zZXQodGFyZ2V0LCB2YXJzLCBwb3NpdGlvbik7XG5cdFx0fTtcblxuXHRcdHAuZnJvbSA9IGZ1bmN0aW9uKHRhcmdldCwgZHVyYXRpb24sIHZhcnMsIHBvc2l0aW9uKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5hZGQoICgodmFycy5yZXBlYXQgJiYgX2dsb2JhbHMuVHdlZW5NYXgpIHx8IFR3ZWVuTGl0ZSkuZnJvbSh0YXJnZXQsIGR1cmF0aW9uLCB2YXJzKSwgcG9zaXRpb24pO1xuXHRcdH07XG5cblx0XHRwLmZyb21UbyA9IGZ1bmN0aW9uKHRhcmdldCwgZHVyYXRpb24sIGZyb21WYXJzLCB0b1ZhcnMsIHBvc2l0aW9uKSB7XG5cdFx0XHR2YXIgRW5naW5lID0gKHRvVmFycy5yZXBlYXQgJiYgX2dsb2JhbHMuVHdlZW5NYXgpIHx8IFR3ZWVuTGl0ZTtcblx0XHRcdHJldHVybiBkdXJhdGlvbiA/IHRoaXMuYWRkKCBFbmdpbmUuZnJvbVRvKHRhcmdldCwgZHVyYXRpb24sIGZyb21WYXJzLCB0b1ZhcnMpLCBwb3NpdGlvbikgOiB0aGlzLnNldCh0YXJnZXQsIHRvVmFycywgcG9zaXRpb24pO1xuXHRcdH07XG5cblx0XHRwLnN0YWdnZXJUbyA9IGZ1bmN0aW9uKHRhcmdldHMsIGR1cmF0aW9uLCB2YXJzLCBzdGFnZ2VyLCBwb3NpdGlvbiwgb25Db21wbGV0ZUFsbCwgb25Db21wbGV0ZUFsbFBhcmFtcywgb25Db21wbGV0ZUFsbFNjb3BlKSB7XG5cdFx0XHR2YXIgdGwgPSBuZXcgVGltZWxpbmVMaXRlKHtvbkNvbXBsZXRlOm9uQ29tcGxldGVBbGwsIG9uQ29tcGxldGVQYXJhbXM6b25Db21wbGV0ZUFsbFBhcmFtcywgY2FsbGJhY2tTY29wZTpvbkNvbXBsZXRlQWxsU2NvcGUsIHNtb290aENoaWxkVGltaW5nOnRoaXMuc21vb3RoQ2hpbGRUaW1pbmd9KSxcblx0XHRcdFx0Y3ljbGUgPSB2YXJzLmN5Y2xlLFxuXHRcdFx0XHRjb3B5LCBpO1xuXHRcdFx0aWYgKHR5cGVvZih0YXJnZXRzKSA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0XHR0YXJnZXRzID0gVHdlZW5MaXRlLnNlbGVjdG9yKHRhcmdldHMpIHx8IHRhcmdldHM7XG5cdFx0XHR9XG5cdFx0XHR0YXJnZXRzID0gdGFyZ2V0cyB8fCBbXTtcblx0XHRcdGlmIChfaXNTZWxlY3Rvcih0YXJnZXRzKSkgeyAvL3NlbnNlcyBpZiB0aGUgdGFyZ2V0cyBvYmplY3QgaXMgYSBzZWxlY3Rvci4gSWYgaXQgaXMsIHdlIHNob3VsZCB0cmFuc2xhdGUgaXQgaW50byBhbiBhcnJheS5cblx0XHRcdFx0dGFyZ2V0cyA9IF9zbGljZSh0YXJnZXRzKTtcblx0XHRcdH1cblx0XHRcdHN0YWdnZXIgPSBzdGFnZ2VyIHx8IDA7XG5cdFx0XHRpZiAoc3RhZ2dlciA8IDApIHtcblx0XHRcdFx0dGFyZ2V0cyA9IF9zbGljZSh0YXJnZXRzKTtcblx0XHRcdFx0dGFyZ2V0cy5yZXZlcnNlKCk7XG5cdFx0XHRcdHN0YWdnZXIgKj0gLTE7XG5cdFx0XHR9XG5cdFx0XHRmb3IgKGkgPSAwOyBpIDwgdGFyZ2V0cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRjb3B5ID0gX2NvcHkodmFycyk7XG5cdFx0XHRcdGlmIChjb3B5LnN0YXJ0QXQpIHtcblx0XHRcdFx0XHRjb3B5LnN0YXJ0QXQgPSBfY29weShjb3B5LnN0YXJ0QXQpO1xuXHRcdFx0XHRcdGlmIChjb3B5LnN0YXJ0QXQuY3ljbGUpIHtcblx0XHRcdFx0XHRcdF9hcHBseUN5Y2xlKGNvcHkuc3RhcnRBdCwgdGFyZ2V0cywgaSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChjeWNsZSkge1xuXHRcdFx0XHRcdF9hcHBseUN5Y2xlKGNvcHksIHRhcmdldHMsIGkpO1xuXHRcdFx0XHRcdGlmIChjb3B5LmR1cmF0aW9uICE9IG51bGwpIHtcblx0XHRcdFx0XHRcdGR1cmF0aW9uID0gY29weS5kdXJhdGlvbjtcblx0XHRcdFx0XHRcdGRlbGV0ZSBjb3B5LmR1cmF0aW9uO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHR0bC50byh0YXJnZXRzW2ldLCBkdXJhdGlvbiwgY29weSwgaSAqIHN0YWdnZXIpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXMuYWRkKHRsLCBwb3NpdGlvbik7XG5cdFx0fTtcblxuXHRcdHAuc3RhZ2dlckZyb20gPSBmdW5jdGlvbih0YXJnZXRzLCBkdXJhdGlvbiwgdmFycywgc3RhZ2dlciwgcG9zaXRpb24sIG9uQ29tcGxldGVBbGwsIG9uQ29tcGxldGVBbGxQYXJhbXMsIG9uQ29tcGxldGVBbGxTY29wZSkge1xuXHRcdFx0dmFycy5pbW1lZGlhdGVSZW5kZXIgPSAodmFycy5pbW1lZGlhdGVSZW5kZXIgIT0gZmFsc2UpO1xuXHRcdFx0dmFycy5ydW5CYWNrd2FyZHMgPSB0cnVlO1xuXHRcdFx0cmV0dXJuIHRoaXMuc3RhZ2dlclRvKHRhcmdldHMsIGR1cmF0aW9uLCB2YXJzLCBzdGFnZ2VyLCBwb3NpdGlvbiwgb25Db21wbGV0ZUFsbCwgb25Db21wbGV0ZUFsbFBhcmFtcywgb25Db21wbGV0ZUFsbFNjb3BlKTtcblx0XHR9O1xuXG5cdFx0cC5zdGFnZ2VyRnJvbVRvID0gZnVuY3Rpb24odGFyZ2V0cywgZHVyYXRpb24sIGZyb21WYXJzLCB0b1ZhcnMsIHN0YWdnZXIsIHBvc2l0aW9uLCBvbkNvbXBsZXRlQWxsLCBvbkNvbXBsZXRlQWxsUGFyYW1zLCBvbkNvbXBsZXRlQWxsU2NvcGUpIHtcblx0XHRcdHRvVmFycy5zdGFydEF0ID0gZnJvbVZhcnM7XG5cdFx0XHR0b1ZhcnMuaW1tZWRpYXRlUmVuZGVyID0gKHRvVmFycy5pbW1lZGlhdGVSZW5kZXIgIT0gZmFsc2UgJiYgZnJvbVZhcnMuaW1tZWRpYXRlUmVuZGVyICE9IGZhbHNlKTtcblx0XHRcdHJldHVybiB0aGlzLnN0YWdnZXJUbyh0YXJnZXRzLCBkdXJhdGlvbiwgdG9WYXJzLCBzdGFnZ2VyLCBwb3NpdGlvbiwgb25Db21wbGV0ZUFsbCwgb25Db21wbGV0ZUFsbFBhcmFtcywgb25Db21wbGV0ZUFsbFNjb3BlKTtcblx0XHR9O1xuXG5cdFx0cC5jYWxsID0gZnVuY3Rpb24oY2FsbGJhY2ssIHBhcmFtcywgc2NvcGUsIHBvc2l0aW9uKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5hZGQoIFR3ZWVuTGl0ZS5kZWxheWVkQ2FsbCgwLCBjYWxsYmFjaywgcGFyYW1zLCBzY29wZSksIHBvc2l0aW9uKTtcblx0XHR9O1xuXG5cdFx0cC5zZXQgPSBmdW5jdGlvbih0YXJnZXQsIHZhcnMsIHBvc2l0aW9uKSB7XG5cdFx0XHRwb3NpdGlvbiA9IHRoaXMuX3BhcnNlVGltZU9yTGFiZWwocG9zaXRpb24sIDAsIHRydWUpO1xuXHRcdFx0aWYgKHZhcnMuaW1tZWRpYXRlUmVuZGVyID09IG51bGwpIHtcblx0XHRcdFx0dmFycy5pbW1lZGlhdGVSZW5kZXIgPSAocG9zaXRpb24gPT09IHRoaXMuX3RpbWUgJiYgIXRoaXMuX3BhdXNlZCk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdGhpcy5hZGQoIG5ldyBUd2VlbkxpdGUodGFyZ2V0LCAwLCB2YXJzKSwgcG9zaXRpb24pO1xuXHRcdH07XG5cblx0XHRUaW1lbGluZUxpdGUuZXhwb3J0Um9vdCA9IGZ1bmN0aW9uKHZhcnMsIGlnbm9yZURlbGF5ZWRDYWxscykge1xuXHRcdFx0dmFycyA9IHZhcnMgfHwge307XG5cdFx0XHRpZiAodmFycy5zbW9vdGhDaGlsZFRpbWluZyA9PSBudWxsKSB7XG5cdFx0XHRcdHZhcnMuc21vb3RoQ2hpbGRUaW1pbmcgPSB0cnVlO1xuXHRcdFx0fVxuXHRcdFx0dmFyIHRsID0gbmV3IFRpbWVsaW5lTGl0ZSh2YXJzKSxcblx0XHRcdFx0cm9vdCA9IHRsLl90aW1lbGluZSxcblx0XHRcdFx0dHdlZW4sIG5leHQ7XG5cdFx0XHRpZiAoaWdub3JlRGVsYXllZENhbGxzID09IG51bGwpIHtcblx0XHRcdFx0aWdub3JlRGVsYXllZENhbGxzID0gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdHJvb3QuX3JlbW92ZSh0bCwgdHJ1ZSk7XG5cdFx0XHR0bC5fc3RhcnRUaW1lID0gMDtcblx0XHRcdHRsLl9yYXdQcmV2VGltZSA9IHRsLl90aW1lID0gdGwuX3RvdGFsVGltZSA9IHJvb3QuX3RpbWU7XG5cdFx0XHR0d2VlbiA9IHJvb3QuX2ZpcnN0O1xuXHRcdFx0d2hpbGUgKHR3ZWVuKSB7XG5cdFx0XHRcdG5leHQgPSB0d2Vlbi5fbmV4dDtcblx0XHRcdFx0aWYgKCFpZ25vcmVEZWxheWVkQ2FsbHMgfHwgISh0d2VlbiBpbnN0YW5jZW9mIFR3ZWVuTGl0ZSAmJiB0d2Vlbi50YXJnZXQgPT09IHR3ZWVuLnZhcnMub25Db21wbGV0ZSkpIHtcblx0XHRcdFx0XHR0bC5hZGQodHdlZW4sIHR3ZWVuLl9zdGFydFRpbWUgLSB0d2Vlbi5fZGVsYXkpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHR3ZWVuID0gbmV4dDtcblx0XHRcdH1cblx0XHRcdHJvb3QuYWRkKHRsLCAwKTtcblx0XHRcdHJldHVybiB0bDtcblx0XHR9O1xuXG5cdFx0cC5hZGQgPSBmdW5jdGlvbih2YWx1ZSwgcG9zaXRpb24sIGFsaWduLCBzdGFnZ2VyKSB7XG5cdFx0XHR2YXIgY3VyVGltZSwgbCwgaSwgY2hpbGQsIHRsLCBiZWZvcmVSYXdUaW1lO1xuXHRcdFx0aWYgKHR5cGVvZihwb3NpdGlvbikgIT09IFwibnVtYmVyXCIpIHtcblx0XHRcdFx0cG9zaXRpb24gPSB0aGlzLl9wYXJzZVRpbWVPckxhYmVsKHBvc2l0aW9uLCAwLCB0cnVlLCB2YWx1ZSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoISh2YWx1ZSBpbnN0YW5jZW9mIEFuaW1hdGlvbikpIHtcblx0XHRcdFx0aWYgKCh2YWx1ZSBpbnN0YW5jZW9mIEFycmF5KSB8fCAodmFsdWUgJiYgdmFsdWUucHVzaCAmJiBfaXNBcnJheSh2YWx1ZSkpKSB7XG5cdFx0XHRcdFx0YWxpZ24gPSBhbGlnbiB8fCBcIm5vcm1hbFwiO1xuXHRcdFx0XHRcdHN0YWdnZXIgPSBzdGFnZ2VyIHx8IDA7XG5cdFx0XHRcdFx0Y3VyVGltZSA9IHBvc2l0aW9uO1xuXHRcdFx0XHRcdGwgPSB2YWx1ZS5sZW5ndGg7XG5cdFx0XHRcdFx0Zm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuXHRcdFx0XHRcdFx0aWYgKF9pc0FycmF5KGNoaWxkID0gdmFsdWVbaV0pKSB7XG5cdFx0XHRcdFx0XHRcdGNoaWxkID0gbmV3IFRpbWVsaW5lTGl0ZSh7dHdlZW5zOmNoaWxkfSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR0aGlzLmFkZChjaGlsZCwgY3VyVGltZSk7XG5cdFx0XHRcdFx0XHRpZiAodHlwZW9mKGNoaWxkKSAhPT0gXCJzdHJpbmdcIiAmJiB0eXBlb2YoY2hpbGQpICE9PSBcImZ1bmN0aW9uXCIpIHtcblx0XHRcdFx0XHRcdFx0aWYgKGFsaWduID09PSBcInNlcXVlbmNlXCIpIHtcblx0XHRcdFx0XHRcdFx0XHRjdXJUaW1lID0gY2hpbGQuX3N0YXJ0VGltZSArIChjaGlsZC50b3RhbER1cmF0aW9uKCkgLyBjaGlsZC5fdGltZVNjYWxlKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChhbGlnbiA9PT0gXCJzdGFydFwiKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y2hpbGQuX3N0YXJ0VGltZSAtPSBjaGlsZC5kZWxheSgpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRjdXJUaW1lICs9IHN0YWdnZXI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzLl91bmNhY2hlKHRydWUpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHR5cGVvZih2YWx1ZSkgPT09IFwic3RyaW5nXCIpIHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5hZGRMYWJlbCh2YWx1ZSwgcG9zaXRpb24pO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHR5cGVvZih2YWx1ZSkgPT09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0XHRcdHZhbHVlID0gVHdlZW5MaXRlLmRlbGF5ZWRDYWxsKDAsIHZhbHVlKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aHJvdyhcIkNhbm5vdCBhZGQgXCIgKyB2YWx1ZSArIFwiIGludG8gdGhlIHRpbWVsaW5lOyBpdCBpcyBub3QgYSB0d2VlbiwgdGltZWxpbmUsIGZ1bmN0aW9uLCBvciBzdHJpbmcuXCIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdFNpbXBsZVRpbWVsaW5lLnByb3RvdHlwZS5hZGQuY2FsbCh0aGlzLCB2YWx1ZSwgcG9zaXRpb24pO1xuXG5cdFx0XHQvL2lmIHRoZSB0aW1lbGluZSBoYXMgYWxyZWFkeSBlbmRlZCBidXQgdGhlIGluc2VydGVkIHR3ZWVuL3RpbWVsaW5lIGV4dGVuZHMgdGhlIGR1cmF0aW9uLCB3ZSBzaG91bGQgZW5hYmxlIHRoaXMgdGltZWxpbmUgYWdhaW4gc28gdGhhdCBpdCByZW5kZXJzIHByb3Blcmx5LiBXZSBzaG91bGQgYWxzbyBhbGlnbiB0aGUgcGxheWhlYWQgd2l0aCB0aGUgcGFyZW50IHRpbWVsaW5lJ3Mgd2hlbiBhcHByb3ByaWF0ZS5cblx0XHRcdGlmICh0aGlzLl9nYyB8fCB0aGlzLl90aW1lID09PSB0aGlzLl9kdXJhdGlvbikgaWYgKCF0aGlzLl9wYXVzZWQpIGlmICh0aGlzLl9kdXJhdGlvbiA8IHRoaXMuZHVyYXRpb24oKSkge1xuXHRcdFx0XHQvL2luIGNhc2UgYW55IG9mIHRoZSBhbmNlc3RvcnMgaGFkIGNvbXBsZXRlZCBidXQgc2hvdWxkIG5vdyBiZSBlbmFibGVkLi4uXG5cdFx0XHRcdHRsID0gdGhpcztcblx0XHRcdFx0YmVmb3JlUmF3VGltZSA9ICh0bC5yYXdUaW1lKCkgPiB2YWx1ZS5fc3RhcnRUaW1lKTsgLy9pZiB0aGUgdHdlZW4gaXMgcGxhY2VkIG9uIHRoZSB0aW1lbGluZSBzbyB0aGF0IGl0IHN0YXJ0cyBCRUZPUkUgdGhlIGN1cnJlbnQgcmF3VGltZSwgd2Ugc2hvdWxkIGFsaWduIHRoZSBwbGF5aGVhZCAobW92ZSB0aGUgdGltZWxpbmUpLiBUaGlzIGlzIGJlY2F1c2Ugc29tZXRpbWVzIHVzZXJzIHdpbGwgY3JlYXRlIGEgdGltZWxpbmUsIGxldCBpdCBmaW5pc2gsIGFuZCBtdWNoIGxhdGVyIGFwcGVuZCBhIHR3ZWVuIGFuZCBleHBlY3QgaXQgdG8gcnVuIGluc3RlYWQgb2YganVtcGluZyB0byBpdHMgZW5kIHN0YXRlLiBXaGlsZSB0ZWNobmljYWxseSBvbmUgY291bGQgYXJndWUgdGhhdCBpdCBzaG91bGQganVtcCB0byBpdHMgZW5kIHN0YXRlLCB0aGF0J3Mgbm90IHdoYXQgdXNlcnMgaW50dWl0aXZlbHkgZXhwZWN0LlxuXHRcdFx0XHR3aGlsZSAodGwuX3RpbWVsaW5lKSB7XG5cdFx0XHRcdFx0aWYgKGJlZm9yZVJhd1RpbWUgJiYgdGwuX3RpbWVsaW5lLnNtb290aENoaWxkVGltaW5nKSB7XG5cdFx0XHRcdFx0XHR0bC50b3RhbFRpbWUodGwuX3RvdGFsVGltZSwgdHJ1ZSk7IC8vbW92ZXMgdGhlIHRpbWVsaW5lIChzaGlmdHMgaXRzIHN0YXJ0VGltZSkgaWYgbmVjZXNzYXJ5LCBhbmQgYWxzbyBlbmFibGVzIGl0LlxuXHRcdFx0XHRcdH0gZWxzZSBpZiAodGwuX2djKSB7XG5cdFx0XHRcdFx0XHR0bC5fZW5hYmxlZCh0cnVlLCBmYWxzZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRsID0gdGwuX3RpbWVsaW5lO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH07XG5cblx0XHRwLnJlbW92ZSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XHRpZiAodmFsdWUgaW5zdGFuY2VvZiBBbmltYXRpb24pIHtcblx0XHRcdFx0dGhpcy5fcmVtb3ZlKHZhbHVlLCBmYWxzZSk7XG5cdFx0XHRcdHZhciB0bCA9IHZhbHVlLl90aW1lbGluZSA9IHZhbHVlLnZhcnMudXNlRnJhbWVzID8gQW5pbWF0aW9uLl9yb290RnJhbWVzVGltZWxpbmUgOiBBbmltYXRpb24uX3Jvb3RUaW1lbGluZTsgLy9ub3cgdGhhdCBpdCdzIHJlbW92ZWQsIGRlZmF1bHQgaXQgdG8gdGhlIHJvb3QgdGltZWxpbmUgc28gdGhhdCBpZiBpdCBnZXRzIHBsYXllZCBhZ2FpbiwgaXQgZG9lc24ndCBqdW1wIGJhY2sgaW50byB0aGlzIHRpbWVsaW5lLlxuXHRcdFx0XHR2YWx1ZS5fc3RhcnRUaW1lID0gKHZhbHVlLl9wYXVzZWQgPyB2YWx1ZS5fcGF1c2VUaW1lIDogdGwuX3RpbWUpIC0gKCghdmFsdWUuX3JldmVyc2VkID8gdmFsdWUuX3RvdGFsVGltZSA6IHZhbHVlLnRvdGFsRHVyYXRpb24oKSAtIHZhbHVlLl90b3RhbFRpbWUpIC8gdmFsdWUuX3RpbWVTY2FsZSk7IC8vZW5zdXJlIHRoYXQgaWYgaXQgZ2V0cyBwbGF5ZWQgYWdhaW4sIHRoZSB0aW1pbmcgaXMgY29ycmVjdC5cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9IGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXkgfHwgKHZhbHVlICYmIHZhbHVlLnB1c2ggJiYgX2lzQXJyYXkodmFsdWUpKSkge1xuXHRcdFx0XHR2YXIgaSA9IHZhbHVlLmxlbmd0aDtcblx0XHRcdFx0d2hpbGUgKC0taSA+IC0xKSB7XG5cdFx0XHRcdFx0dGhpcy5yZW1vdmUodmFsdWVbaV0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSBlbHNlIGlmICh0eXBlb2YodmFsdWUpID09PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLnJlbW92ZUxhYmVsKHZhbHVlKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0aGlzLmtpbGwobnVsbCwgdmFsdWUpO1xuXHRcdH07XG5cblx0XHRwLl9yZW1vdmUgPSBmdW5jdGlvbih0d2Vlbiwgc2tpcERpc2FibGUpIHtcblx0XHRcdFNpbXBsZVRpbWVsaW5lLnByb3RvdHlwZS5fcmVtb3ZlLmNhbGwodGhpcywgdHdlZW4sIHNraXBEaXNhYmxlKTtcblx0XHRcdHZhciBsYXN0ID0gdGhpcy5fbGFzdDtcblx0XHRcdGlmICghbGFzdCkge1xuXHRcdFx0XHR0aGlzLl90aW1lID0gdGhpcy5fdG90YWxUaW1lID0gdGhpcy5fZHVyYXRpb24gPSB0aGlzLl90b3RhbER1cmF0aW9uID0gMDtcblx0XHRcdH0gZWxzZSBpZiAodGhpcy5fdGltZSA+IHRoaXMuZHVyYXRpb24oKSkge1xuXHRcdFx0XHR0aGlzLl90aW1lID0gdGhpcy5fZHVyYXRpb247XG5cdFx0XHRcdHRoaXMuX3RvdGFsVGltZSA9IHRoaXMuX3RvdGFsRHVyYXRpb247XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9O1xuXG5cdFx0cC5hcHBlbmQgPSBmdW5jdGlvbih2YWx1ZSwgb2Zmc2V0T3JMYWJlbCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuYWRkKHZhbHVlLCB0aGlzLl9wYXJzZVRpbWVPckxhYmVsKG51bGwsIG9mZnNldE9yTGFiZWwsIHRydWUsIHZhbHVlKSk7XG5cdFx0fTtcblxuXHRcdHAuaW5zZXJ0ID0gcC5pbnNlcnRNdWx0aXBsZSA9IGZ1bmN0aW9uKHZhbHVlLCBwb3NpdGlvbiwgYWxpZ24sIHN0YWdnZXIpIHtcblx0XHRcdHJldHVybiB0aGlzLmFkZCh2YWx1ZSwgcG9zaXRpb24gfHwgMCwgYWxpZ24sIHN0YWdnZXIpO1xuXHRcdH07XG5cblx0XHRwLmFwcGVuZE11bHRpcGxlID0gZnVuY3Rpb24odHdlZW5zLCBvZmZzZXRPckxhYmVsLCBhbGlnbiwgc3RhZ2dlcikge1xuXHRcdFx0cmV0dXJuIHRoaXMuYWRkKHR3ZWVucywgdGhpcy5fcGFyc2VUaW1lT3JMYWJlbChudWxsLCBvZmZzZXRPckxhYmVsLCB0cnVlLCB0d2VlbnMpLCBhbGlnbiwgc3RhZ2dlcik7XG5cdFx0fTtcblxuXHRcdHAuYWRkTGFiZWwgPSBmdW5jdGlvbihsYWJlbCwgcG9zaXRpb24pIHtcblx0XHRcdHRoaXMuX2xhYmVsc1tsYWJlbF0gPSB0aGlzLl9wYXJzZVRpbWVPckxhYmVsKHBvc2l0aW9uKTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH07XG5cblx0XHRwLmFkZFBhdXNlID0gZnVuY3Rpb24ocG9zaXRpb24sIGNhbGxiYWNrLCBwYXJhbXMsIHNjb3BlKSB7XG5cdFx0XHR2YXIgdCA9IFR3ZWVuTGl0ZS5kZWxheWVkQ2FsbCgwLCBfcGF1c2VDYWxsYmFjaywgcGFyYW1zLCBzY29wZSB8fCB0aGlzKTtcblx0XHRcdHQudmFycy5vbkNvbXBsZXRlID0gdC52YXJzLm9uUmV2ZXJzZUNvbXBsZXRlID0gY2FsbGJhY2s7XG5cdFx0XHR0LmRhdGEgPSBcImlzUGF1c2VcIjtcblx0XHRcdHRoaXMuX2hhc1BhdXNlID0gdHJ1ZTtcblx0XHRcdHJldHVybiB0aGlzLmFkZCh0LCBwb3NpdGlvbik7XG5cdFx0fTtcblxuXHRcdHAucmVtb3ZlTGFiZWwgPSBmdW5jdGlvbihsYWJlbCkge1xuXHRcdFx0ZGVsZXRlIHRoaXMuX2xhYmVsc1tsYWJlbF07XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9O1xuXG5cdFx0cC5nZXRMYWJlbFRpbWUgPSBmdW5jdGlvbihsYWJlbCkge1xuXHRcdFx0cmV0dXJuICh0aGlzLl9sYWJlbHNbbGFiZWxdICE9IG51bGwpID8gdGhpcy5fbGFiZWxzW2xhYmVsXSA6IC0xO1xuXHRcdH07XG5cblx0XHRwLl9wYXJzZVRpbWVPckxhYmVsID0gZnVuY3Rpb24odGltZU9yTGFiZWwsIG9mZnNldE9yTGFiZWwsIGFwcGVuZElmQWJzZW50LCBpZ25vcmUpIHtcblx0XHRcdHZhciBpO1xuXHRcdFx0Ly9pZiB3ZSdyZSBhYm91dCB0byBhZGQgYSB0d2Vlbi90aW1lbGluZSAob3IgYW4gYXJyYXkgb2YgdGhlbSkgdGhhdCdzIGFscmVhZHkgYSBjaGlsZCBvZiB0aGlzIHRpbWVsaW5lLCB3ZSBzaG91bGQgcmVtb3ZlIGl0IGZpcnN0IHNvIHRoYXQgaXQgZG9lc24ndCBjb250YW1pbmF0ZSB0aGUgZHVyYXRpb24oKS5cblx0XHRcdGlmIChpZ25vcmUgaW5zdGFuY2VvZiBBbmltYXRpb24gJiYgaWdub3JlLnRpbWVsaW5lID09PSB0aGlzKSB7XG5cdFx0XHRcdHRoaXMucmVtb3ZlKGlnbm9yZSk7XG5cdFx0XHR9IGVsc2UgaWYgKGlnbm9yZSAmJiAoKGlnbm9yZSBpbnN0YW5jZW9mIEFycmF5KSB8fCAoaWdub3JlLnB1c2ggJiYgX2lzQXJyYXkoaWdub3JlKSkpKSB7XG5cdFx0XHRcdGkgPSBpZ25vcmUubGVuZ3RoO1xuXHRcdFx0XHR3aGlsZSAoLS1pID4gLTEpIHtcblx0XHRcdFx0XHRpZiAoaWdub3JlW2ldIGluc3RhbmNlb2YgQW5pbWF0aW9uICYmIGlnbm9yZVtpXS50aW1lbGluZSA9PT0gdGhpcykge1xuXHRcdFx0XHRcdFx0dGhpcy5yZW1vdmUoaWdub3JlW2ldKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmICh0eXBlb2Yob2Zmc2V0T3JMYWJlbCkgPT09IFwic3RyaW5nXCIpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuX3BhcnNlVGltZU9yTGFiZWwob2Zmc2V0T3JMYWJlbCwgKGFwcGVuZElmQWJzZW50ICYmIHR5cGVvZih0aW1lT3JMYWJlbCkgPT09IFwibnVtYmVyXCIgJiYgdGhpcy5fbGFiZWxzW29mZnNldE9yTGFiZWxdID09IG51bGwpID8gdGltZU9yTGFiZWwgLSB0aGlzLmR1cmF0aW9uKCkgOiAwLCBhcHBlbmRJZkFic2VudCk7XG5cdFx0XHR9XG5cdFx0XHRvZmZzZXRPckxhYmVsID0gb2Zmc2V0T3JMYWJlbCB8fCAwO1xuXHRcdFx0aWYgKHR5cGVvZih0aW1lT3JMYWJlbCkgPT09IFwic3RyaW5nXCIgJiYgKGlzTmFOKHRpbWVPckxhYmVsKSB8fCB0aGlzLl9sYWJlbHNbdGltZU9yTGFiZWxdICE9IG51bGwpKSB7IC8vaWYgdGhlIHN0cmluZyBpcyBhIG51bWJlciBsaWtlIFwiMVwiLCBjaGVjayB0byBzZWUgaWYgdGhlcmUncyBhIGxhYmVsIHdpdGggdGhhdCBuYW1lLCBvdGhlcndpc2UgaW50ZXJwcmV0IGl0IGFzIGEgbnVtYmVyIChhYnNvbHV0ZSB2YWx1ZSkuXG5cdFx0XHRcdGkgPSB0aW1lT3JMYWJlbC5pbmRleE9mKFwiPVwiKTtcblx0XHRcdFx0aWYgKGkgPT09IC0xKSB7XG5cdFx0XHRcdFx0aWYgKHRoaXMuX2xhYmVsc1t0aW1lT3JMYWJlbF0gPT0gbnVsbCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGFwcGVuZElmQWJzZW50ID8gKHRoaXMuX2xhYmVsc1t0aW1lT3JMYWJlbF0gPSB0aGlzLmR1cmF0aW9uKCkgKyBvZmZzZXRPckxhYmVsKSA6IG9mZnNldE9yTGFiZWw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzLl9sYWJlbHNbdGltZU9yTGFiZWxdICsgb2Zmc2V0T3JMYWJlbDtcblx0XHRcdFx0fVxuXHRcdFx0XHRvZmZzZXRPckxhYmVsID0gcGFyc2VJbnQodGltZU9yTGFiZWwuY2hhckF0KGktMSkgKyBcIjFcIiwgMTApICogTnVtYmVyKHRpbWVPckxhYmVsLnN1YnN0cihpKzEpKTtcblx0XHRcdFx0dGltZU9yTGFiZWwgPSAoaSA+IDEpID8gdGhpcy5fcGFyc2VUaW1lT3JMYWJlbCh0aW1lT3JMYWJlbC5zdWJzdHIoMCwgaS0xKSwgMCwgYXBwZW5kSWZBYnNlbnQpIDogdGhpcy5kdXJhdGlvbigpO1xuXHRcdFx0fSBlbHNlIGlmICh0aW1lT3JMYWJlbCA9PSBudWxsKSB7XG5cdFx0XHRcdHRpbWVPckxhYmVsID0gdGhpcy5kdXJhdGlvbigpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIE51bWJlcih0aW1lT3JMYWJlbCkgKyBvZmZzZXRPckxhYmVsO1xuXHRcdH07XG5cblx0XHRwLnNlZWsgPSBmdW5jdGlvbihwb3NpdGlvbiwgc3VwcHJlc3NFdmVudHMpIHtcblx0XHRcdHJldHVybiB0aGlzLnRvdGFsVGltZSgodHlwZW9mKHBvc2l0aW9uKSA9PT0gXCJudW1iZXJcIikgPyBwb3NpdGlvbiA6IHRoaXMuX3BhcnNlVGltZU9yTGFiZWwocG9zaXRpb24pLCAoc3VwcHJlc3NFdmVudHMgIT09IGZhbHNlKSk7XG5cdFx0fTtcblxuXHRcdHAuc3RvcCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMucGF1c2VkKHRydWUpO1xuXHRcdH07XG5cblx0XHRwLmdvdG9BbmRQbGF5ID0gZnVuY3Rpb24ocG9zaXRpb24sIHN1cHByZXNzRXZlbnRzKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5wbGF5KHBvc2l0aW9uLCBzdXBwcmVzc0V2ZW50cyk7XG5cdFx0fTtcblxuXHRcdHAuZ290b0FuZFN0b3AgPSBmdW5jdGlvbihwb3NpdGlvbiwgc3VwcHJlc3NFdmVudHMpIHtcblx0XHRcdHJldHVybiB0aGlzLnBhdXNlKHBvc2l0aW9uLCBzdXBwcmVzc0V2ZW50cyk7XG5cdFx0fTtcblxuXHRcdHAucmVuZGVyID0gZnVuY3Rpb24odGltZSwgc3VwcHJlc3NFdmVudHMsIGZvcmNlKSB7XG5cdFx0XHRpZiAodGhpcy5fZ2MpIHtcblx0XHRcdFx0dGhpcy5fZW5hYmxlZCh0cnVlLCBmYWxzZSk7XG5cdFx0XHR9XG5cdFx0XHR2YXIgdG90YWxEdXIgPSAoIXRoaXMuX2RpcnR5KSA/IHRoaXMuX3RvdGFsRHVyYXRpb24gOiB0aGlzLnRvdGFsRHVyYXRpb24oKSxcblx0XHRcdFx0cHJldlRpbWUgPSB0aGlzLl90aW1lLFxuXHRcdFx0XHRwcmV2U3RhcnQgPSB0aGlzLl9zdGFydFRpbWUsXG5cdFx0XHRcdHByZXZUaW1lU2NhbGUgPSB0aGlzLl90aW1lU2NhbGUsXG5cdFx0XHRcdHByZXZQYXVzZWQgPSB0aGlzLl9wYXVzZWQsXG5cdFx0XHRcdHR3ZWVuLCBpc0NvbXBsZXRlLCBuZXh0LCBjYWxsYmFjaywgaW50ZXJuYWxGb3JjZSwgcGF1c2VUd2VlbiwgY3VyVGltZTtcblx0XHRcdGlmICh0aW1lID49IHRvdGFsRHVyIC0gMC4wMDAwMDAxICYmIHRpbWUgPj0gMCkgeyAvL3RvIHdvcmsgYXJvdW5kIG9jY2FzaW9uYWwgZmxvYXRpbmcgcG9pbnQgbWF0aCBhcnRpZmFjdHMuXG5cdFx0XHRcdHRoaXMuX3RvdGFsVGltZSA9IHRoaXMuX3RpbWUgPSB0b3RhbER1cjtcblx0XHRcdFx0aWYgKCF0aGlzLl9yZXZlcnNlZCkgaWYgKCF0aGlzLl9oYXNQYXVzZWRDaGlsZCgpKSB7XG5cdFx0XHRcdFx0aXNDb21wbGV0ZSA9IHRydWU7XG5cdFx0XHRcdFx0Y2FsbGJhY2sgPSBcIm9uQ29tcGxldGVcIjtcblx0XHRcdFx0XHRpbnRlcm5hbEZvcmNlID0gISF0aGlzLl90aW1lbGluZS5hdXRvUmVtb3ZlQ2hpbGRyZW47IC8vb3RoZXJ3aXNlLCBpZiB0aGUgYW5pbWF0aW9uIGlzIHVucGF1c2VkL2FjdGl2YXRlZCBhZnRlciBpdCdzIGFscmVhZHkgZmluaXNoZWQsIGl0IGRvZXNuJ3QgZ2V0IHJlbW92ZWQgZnJvbSB0aGUgcGFyZW50IHRpbWVsaW5lLlxuXHRcdFx0XHRcdGlmICh0aGlzLl9kdXJhdGlvbiA9PT0gMCkgaWYgKCh0aW1lIDw9IDAgJiYgdGltZSA+PSAtMC4wMDAwMDAxKSB8fCB0aGlzLl9yYXdQcmV2VGltZSA8IDAgfHwgdGhpcy5fcmF3UHJldlRpbWUgPT09IF90aW55TnVtKSBpZiAodGhpcy5fcmF3UHJldlRpbWUgIT09IHRpbWUgJiYgdGhpcy5fZmlyc3QpIHtcblx0XHRcdFx0XHRcdGludGVybmFsRm9yY2UgPSB0cnVlO1xuXHRcdFx0XHRcdFx0aWYgKHRoaXMuX3Jhd1ByZXZUaW1lID4gX3RpbnlOdW0pIHtcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2sgPSBcIm9uUmV2ZXJzZUNvbXBsZXRlXCI7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHRoaXMuX3Jhd1ByZXZUaW1lID0gKHRoaXMuX2R1cmF0aW9uIHx8ICFzdXBwcmVzc0V2ZW50cyB8fCB0aW1lIHx8IHRoaXMuX3Jhd1ByZXZUaW1lID09PSB0aW1lKSA/IHRpbWUgOiBfdGlueU51bTsgLy93aGVuIHRoZSBwbGF5aGVhZCBhcnJpdmVzIGF0IEVYQUNUTFkgdGltZSAwIChyaWdodCBvbiB0b3ApIG9mIGEgemVyby1kdXJhdGlvbiB0aW1lbGluZSBvciB0d2Vlbiwgd2UgbmVlZCB0byBkaXNjZXJuIGlmIGV2ZW50cyBhcmUgc3VwcHJlc3NlZCBzbyB0aGF0IHdoZW4gdGhlIHBsYXloZWFkIG1vdmVzIGFnYWluIChuZXh0IHRpbWUpLCBpdCdsbCB0cmlnZ2VyIHRoZSBjYWxsYmFjay4gSWYgZXZlbnRzIGFyZSBOT1Qgc3VwcHJlc3NlZCwgb2J2aW91c2x5IHRoZSBjYWxsYmFjayB3b3VsZCBiZSB0cmlnZ2VyZWQgaW4gdGhpcyByZW5kZXIuIEJhc2ljYWxseSwgdGhlIGNhbGxiYWNrIHNob3VsZCBmaXJlIGVpdGhlciB3aGVuIHRoZSBwbGF5aGVhZCBBUlJJVkVTIG9yIExFQVZFUyB0aGlzIGV4YWN0IHNwb3QsIG5vdCBib3RoLiBJbWFnaW5lIGRvaW5nIGEgdGltZWxpbmUuc2VlaygwKSBhbmQgdGhlcmUncyBhIGNhbGxiYWNrIHRoYXQgc2l0cyBhdCAwLiBTaW5jZSBldmVudHMgYXJlIHN1cHByZXNzZWQgb24gdGhhdCBzZWVrKCkgYnkgZGVmYXVsdCwgbm90aGluZyB3aWxsIGZpcmUsIGJ1dCB3aGVuIHRoZSBwbGF5aGVhZCBtb3ZlcyBvZmYgb2YgdGhhdCBwb3NpdGlvbiwgdGhlIGNhbGxiYWNrIHNob3VsZCBmaXJlLiBUaGlzIGJlaGF2aW9yIGlzIHdoYXQgcGVvcGxlIGludHVpdGl2ZWx5IGV4cGVjdC4gV2Ugc2V0IHRoZSBfcmF3UHJldlRpbWUgdG8gYmUgYSBwcmVjaXNlIHRpbnkgbnVtYmVyIHRvIGluZGljYXRlIHRoaXMgc2NlbmFyaW8gcmF0aGVyIHRoYW4gdXNpbmcgYW5vdGhlciBwcm9wZXJ0eS92YXJpYWJsZSB3aGljaCB3b3VsZCBpbmNyZWFzZSBtZW1vcnkgdXNhZ2UuIFRoaXMgdGVjaG5pcXVlIGlzIGxlc3MgcmVhZGFibGUsIGJ1dCBtb3JlIGVmZmljaWVudC5cblx0XHRcdFx0dGltZSA9IHRvdGFsRHVyICsgMC4wMDAxOyAvL3RvIGF2b2lkIG9jY2FzaW9uYWwgZmxvYXRpbmcgcG9pbnQgcm91bmRpbmcgZXJyb3JzIC0gc29tZXRpbWVzIGNoaWxkIHR3ZWVucy90aW1lbGluZXMgd2VyZSBub3QgYmVpbmcgZnVsbHkgY29tcGxldGVkICh0aGVpciBwcm9ncmVzcyBtaWdodCBiZSAwLjk5OTk5OTk5OTk5OTk5OCBpbnN0ZWFkIG9mIDEgYmVjYXVzZSB3aGVuIF90aW1lIC0gdHdlZW4uX3N0YXJ0VGltZSBpcyBwZXJmb3JtZWQsIGZsb2F0aW5nIHBvaW50IGVycm9ycyB3b3VsZCByZXR1cm4gYSB2YWx1ZSB0aGF0IHdhcyBTTElHSFRMWSBvZmYpLiBUcnkgKDk5OTk5OTk5OTk5OS43IC0gOTk5OTk5OTk5OTk5KSAqIDEgPSAwLjY5OTk1MTE3MTg3NSBpbnN0ZWFkIG9mIDAuNy5cblxuXHRcdFx0fSBlbHNlIGlmICh0aW1lIDwgMC4wMDAwMDAxKSB7IC8vdG8gd29yayBhcm91bmQgb2NjYXNpb25hbCBmbG9hdGluZyBwb2ludCBtYXRoIGFydGlmYWN0cywgcm91bmQgc3VwZXIgc21hbGwgdmFsdWVzIHRvIDAuXG5cdFx0XHRcdHRoaXMuX3RvdGFsVGltZSA9IHRoaXMuX3RpbWUgPSAwO1xuXHRcdFx0XHRpZiAocHJldlRpbWUgIT09IDAgfHwgKHRoaXMuX2R1cmF0aW9uID09PSAwICYmIHRoaXMuX3Jhd1ByZXZUaW1lICE9PSBfdGlueU51bSAmJiAodGhpcy5fcmF3UHJldlRpbWUgPiAwIHx8ICh0aW1lIDwgMCAmJiB0aGlzLl9yYXdQcmV2VGltZSA+PSAwKSkpKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2sgPSBcIm9uUmV2ZXJzZUNvbXBsZXRlXCI7XG5cdFx0XHRcdFx0aXNDb21wbGV0ZSA9IHRoaXMuX3JldmVyc2VkO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICh0aW1lIDwgMCkge1xuXHRcdFx0XHRcdHRoaXMuX2FjdGl2ZSA9IGZhbHNlO1xuXHRcdFx0XHRcdGlmICh0aGlzLl90aW1lbGluZS5hdXRvUmVtb3ZlQ2hpbGRyZW4gJiYgdGhpcy5fcmV2ZXJzZWQpIHsgLy9lbnN1cmVzIHByb3BlciBHQyBpZiBhIHRpbWVsaW5lIGlzIHJlc3VtZWQgYWZ0ZXIgaXQncyBmaW5pc2hlZCByZXZlcnNpbmcuXG5cdFx0XHRcdFx0XHRpbnRlcm5hbEZvcmNlID0gaXNDb21wbGV0ZSA9IHRydWU7XG5cdFx0XHRcdFx0XHRjYWxsYmFjayA9IFwib25SZXZlcnNlQ29tcGxldGVcIjtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKHRoaXMuX3Jhd1ByZXZUaW1lID49IDAgJiYgdGhpcy5fZmlyc3QpIHsgLy93aGVuIGdvaW5nIGJhY2sgYmV5b25kIHRoZSBzdGFydCwgZm9yY2UgYSByZW5kZXIgc28gdGhhdCB6ZXJvLWR1cmF0aW9uIHR3ZWVucyB0aGF0IHNpdCBhdCB0aGUgdmVyeSBiZWdpbm5pbmcgcmVuZGVyIHRoZWlyIHN0YXJ0IHZhbHVlcyBwcm9wZXJseS4gT3RoZXJ3aXNlLCBpZiB0aGUgcGFyZW50IHRpbWVsaW5lJ3MgcGxheWhlYWQgbGFuZHMgZXhhY3RseSBhdCB0aGlzIHRpbWVsaW5lJ3Mgc3RhcnRUaW1lLCBhbmQgdGhlbiBtb3ZlcyBiYWNrd2FyZHMsIHRoZSB6ZXJvLWR1cmF0aW9uIHR3ZWVucyBhdCB0aGUgYmVnaW5uaW5nIHdvdWxkIHN0aWxsIGJlIGF0IHRoZWlyIGVuZCBzdGF0ZS5cblx0XHRcdFx0XHRcdGludGVybmFsRm9yY2UgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aGlzLl9yYXdQcmV2VGltZSA9IHRpbWU7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhpcy5fcmF3UHJldlRpbWUgPSAodGhpcy5fZHVyYXRpb24gfHwgIXN1cHByZXNzRXZlbnRzIHx8IHRpbWUgfHwgdGhpcy5fcmF3UHJldlRpbWUgPT09IHRpbWUpID8gdGltZSA6IF90aW55TnVtOyAvL3doZW4gdGhlIHBsYXloZWFkIGFycml2ZXMgYXQgRVhBQ1RMWSB0aW1lIDAgKHJpZ2h0IG9uIHRvcCkgb2YgYSB6ZXJvLWR1cmF0aW9uIHRpbWVsaW5lIG9yIHR3ZWVuLCB3ZSBuZWVkIHRvIGRpc2Nlcm4gaWYgZXZlbnRzIGFyZSBzdXBwcmVzc2VkIHNvIHRoYXQgd2hlbiB0aGUgcGxheWhlYWQgbW92ZXMgYWdhaW4gKG5leHQgdGltZSksIGl0J2xsIHRyaWdnZXIgdGhlIGNhbGxiYWNrLiBJZiBldmVudHMgYXJlIE5PVCBzdXBwcmVzc2VkLCBvYnZpb3VzbHkgdGhlIGNhbGxiYWNrIHdvdWxkIGJlIHRyaWdnZXJlZCBpbiB0aGlzIHJlbmRlci4gQmFzaWNhbGx5LCB0aGUgY2FsbGJhY2sgc2hvdWxkIGZpcmUgZWl0aGVyIHdoZW4gdGhlIHBsYXloZWFkIEFSUklWRVMgb3IgTEVBVkVTIHRoaXMgZXhhY3Qgc3BvdCwgbm90IGJvdGguIEltYWdpbmUgZG9pbmcgYSB0aW1lbGluZS5zZWVrKDApIGFuZCB0aGVyZSdzIGEgY2FsbGJhY2sgdGhhdCBzaXRzIGF0IDAuIFNpbmNlIGV2ZW50cyBhcmUgc3VwcHJlc3NlZCBvbiB0aGF0IHNlZWsoKSBieSBkZWZhdWx0LCBub3RoaW5nIHdpbGwgZmlyZSwgYnV0IHdoZW4gdGhlIHBsYXloZWFkIG1vdmVzIG9mZiBvZiB0aGF0IHBvc2l0aW9uLCB0aGUgY2FsbGJhY2sgc2hvdWxkIGZpcmUuIFRoaXMgYmVoYXZpb3IgaXMgd2hhdCBwZW9wbGUgaW50dWl0aXZlbHkgZXhwZWN0LiBXZSBzZXQgdGhlIF9yYXdQcmV2VGltZSB0byBiZSBhIHByZWNpc2UgdGlueSBudW1iZXIgdG8gaW5kaWNhdGUgdGhpcyBzY2VuYXJpbyByYXRoZXIgdGhhbiB1c2luZyBhbm90aGVyIHByb3BlcnR5L3ZhcmlhYmxlIHdoaWNoIHdvdWxkIGluY3JlYXNlIG1lbW9yeSB1c2FnZS4gVGhpcyB0ZWNobmlxdWUgaXMgbGVzcyByZWFkYWJsZSwgYnV0IG1vcmUgZWZmaWNpZW50LlxuXHRcdFx0XHRcdGlmICh0aW1lID09PSAwICYmIGlzQ29tcGxldGUpIHsgLy9pZiB0aGVyZSdzIGEgemVyby1kdXJhdGlvbiB0d2VlbiBhdCB0aGUgdmVyeSBiZWdpbm5pbmcgb2YgYSB0aW1lbGluZSBhbmQgdGhlIHBsYXloZWFkIGxhbmRzIEVYQUNUTFkgYXQgdGltZSAwLCB0aGF0IHR3ZWVuIHdpbGwgY29ycmVjdGx5IHJlbmRlciBpdHMgZW5kIHZhbHVlcywgYnV0IHdlIG5lZWQgdG8ga2VlcCB0aGUgdGltZWxpbmUgYWxpdmUgZm9yIG9uZSBtb3JlIHJlbmRlciBzbyB0aGF0IHRoZSBiZWdpbm5pbmcgdmFsdWVzIHJlbmRlciBwcm9wZXJseSBhcyB0aGUgcGFyZW50J3MgcGxheWhlYWQga2VlcHMgbW92aW5nIGJleW9uZCB0aGUgYmVnaW5pbmcuIEltYWdpbmUgb2JqLnggc3RhcnRzIGF0IDAgYW5kIHRoZW4gd2UgZG8gdGwuc2V0KG9iaiwge3g6MTAwfSkudG8ob2JqLCAxLCB7eDoyMDB9KSBhbmQgdGhlbiBsYXRlciB3ZSB0bC5yZXZlcnNlKCkuLi50aGUgZ29hbCBpcyB0byBoYXZlIG9iai54IHJldmVydCB0byAwLiBJZiB0aGUgcGxheWhlYWQgaGFwcGVucyB0byBsYW5kIG9uIGV4YWN0bHkgMCwgd2l0aG91dCB0aGlzIGNodW5rIG9mIGNvZGUsIGl0J2QgY29tcGxldGUgdGhlIHRpbWVsaW5lIGFuZCByZW1vdmUgaXQgZnJvbSB0aGUgcmVuZGVyaW5nIHF1ZXVlIChub3QgZ29vZCkuXG5cdFx0XHRcdFx0XHR0d2VlbiA9IHRoaXMuX2ZpcnN0O1xuXHRcdFx0XHRcdFx0d2hpbGUgKHR3ZWVuICYmIHR3ZWVuLl9zdGFydFRpbWUgPT09IDApIHtcblx0XHRcdFx0XHRcdFx0aWYgKCF0d2Vlbi5fZHVyYXRpb24pIHtcblx0XHRcdFx0XHRcdFx0XHRpc0NvbXBsZXRlID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0dHdlZW4gPSB0d2Vlbi5fbmV4dDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGltZSA9IDA7IC8vdG8gYXZvaWQgb2NjYXNpb25hbCBmbG9hdGluZyBwb2ludCByb3VuZGluZyBlcnJvcnMgKGNvdWxkIGNhdXNlIHByb2JsZW1zIGVzcGVjaWFsbHkgd2l0aCB6ZXJvLWR1cmF0aW9uIHR3ZWVucyBhdCB0aGUgdmVyeSBiZWdpbm5pbmcgb2YgdGhlIHRpbWVsaW5lKVxuXHRcdFx0XHRcdGlmICghdGhpcy5faW5pdHRlZCkge1xuXHRcdFx0XHRcdFx0aW50ZXJuYWxGb3JjZSA9IHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0aWYgKHRoaXMuX2hhc1BhdXNlICYmICF0aGlzLl9mb3JjaW5nUGxheWhlYWQgJiYgIXN1cHByZXNzRXZlbnRzKSB7XG5cdFx0XHRcdFx0aWYgKHRpbWUgPj0gcHJldlRpbWUpIHtcblx0XHRcdFx0XHRcdHR3ZWVuID0gdGhpcy5fZmlyc3Q7XG5cdFx0XHRcdFx0XHR3aGlsZSAodHdlZW4gJiYgdHdlZW4uX3N0YXJ0VGltZSA8PSB0aW1lICYmICFwYXVzZVR3ZWVuKSB7XG5cdFx0XHRcdFx0XHRcdGlmICghdHdlZW4uX2R1cmF0aW9uKSBpZiAodHdlZW4uZGF0YSA9PT0gXCJpc1BhdXNlXCIgJiYgIXR3ZWVuLnJhdGlvICYmICEodHdlZW4uX3N0YXJ0VGltZSA9PT0gMCAmJiB0aGlzLl9yYXdQcmV2VGltZSA9PT0gMCkpIHtcblx0XHRcdFx0XHRcdFx0XHRwYXVzZVR3ZWVuID0gdHdlZW47XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0dHdlZW4gPSB0d2Vlbi5fbmV4dDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dHdlZW4gPSB0aGlzLl9sYXN0O1xuXHRcdFx0XHRcdFx0d2hpbGUgKHR3ZWVuICYmIHR3ZWVuLl9zdGFydFRpbWUgPj0gdGltZSAmJiAhcGF1c2VUd2Vlbikge1xuXHRcdFx0XHRcdFx0XHRpZiAoIXR3ZWVuLl9kdXJhdGlvbikgaWYgKHR3ZWVuLmRhdGEgPT09IFwiaXNQYXVzZVwiICYmIHR3ZWVuLl9yYXdQcmV2VGltZSA+IDApIHtcblx0XHRcdFx0XHRcdFx0XHRwYXVzZVR3ZWVuID0gdHdlZW47XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0dHdlZW4gPSB0d2Vlbi5fcHJldjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKHBhdXNlVHdlZW4pIHtcblx0XHRcdFx0XHRcdHRoaXMuX3RpbWUgPSB0aW1lID0gcGF1c2VUd2Vlbi5fc3RhcnRUaW1lO1xuXHRcdFx0XHRcdFx0dGhpcy5fdG90YWxUaW1lID0gdGltZSArICh0aGlzLl9jeWNsZSAqICh0aGlzLl90b3RhbER1cmF0aW9uICsgdGhpcy5fcmVwZWF0RGVsYXkpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR0aGlzLl90b3RhbFRpbWUgPSB0aGlzLl90aW1lID0gdGhpcy5fcmF3UHJldlRpbWUgPSB0aW1lO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCh0aGlzLl90aW1lID09PSBwcmV2VGltZSB8fCAhdGhpcy5fZmlyc3QpICYmICFmb3JjZSAmJiAhaW50ZXJuYWxGb3JjZSAmJiAhcGF1c2VUd2Vlbikge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9IGVsc2UgaWYgKCF0aGlzLl9pbml0dGVkKSB7XG5cdFx0XHRcdHRoaXMuX2luaXR0ZWQgPSB0cnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIXRoaXMuX2FjdGl2ZSkgaWYgKCF0aGlzLl9wYXVzZWQgJiYgdGhpcy5fdGltZSAhPT0gcHJldlRpbWUgJiYgdGltZSA+IDApIHtcblx0XHRcdFx0dGhpcy5fYWN0aXZlID0gdHJ1ZTsgIC8vc28gdGhhdCBpZiB0aGUgdXNlciByZW5kZXJzIHRoZSB0aW1lbGluZSAoYXMgb3Bwb3NlZCB0byB0aGUgcGFyZW50IHRpbWVsaW5lIHJlbmRlcmluZyBpdCksIGl0IGlzIGZvcmNlZCB0byByZS1yZW5kZXIgYW5kIGFsaWduIGl0IHdpdGggdGhlIHByb3BlciB0aW1lL2ZyYW1lIG9uIHRoZSBuZXh0IHJlbmRlcmluZyBjeWNsZS4gTWF5YmUgdGhlIHRpbWVsaW5lIGFscmVhZHkgZmluaXNoZWQgYnV0IHRoZSB1c2VyIG1hbnVhbGx5IHJlLXJlbmRlcnMgaXQgYXMgaGFsZndheSBkb25lLCBmb3IgZXhhbXBsZS5cblx0XHRcdH1cblxuXHRcdFx0aWYgKHByZXZUaW1lID09PSAwKSBpZiAodGhpcy52YXJzLm9uU3RhcnQpIGlmICh0aGlzLl90aW1lICE9PSAwIHx8ICF0aGlzLl9kdXJhdGlvbikgaWYgKCFzdXBwcmVzc0V2ZW50cykge1xuXHRcdFx0XHR0aGlzLl9jYWxsYmFjayhcIm9uU3RhcnRcIik7XG5cdFx0XHR9XG5cblx0XHRcdGN1clRpbWUgPSB0aGlzLl90aW1lO1xuXHRcdFx0aWYgKGN1clRpbWUgPj0gcHJldlRpbWUpIHtcblx0XHRcdFx0dHdlZW4gPSB0aGlzLl9maXJzdDtcblx0XHRcdFx0d2hpbGUgKHR3ZWVuKSB7XG5cdFx0XHRcdFx0bmV4dCA9IHR3ZWVuLl9uZXh0OyAvL3JlY29yZCBpdCBoZXJlIGJlY2F1c2UgdGhlIHZhbHVlIGNvdWxkIGNoYW5nZSBhZnRlciByZW5kZXJpbmcuLi5cblx0XHRcdFx0XHRpZiAoY3VyVGltZSAhPT0gdGhpcy5fdGltZSB8fCAodGhpcy5fcGF1c2VkICYmICFwcmV2UGF1c2VkKSkgeyAvL2luIGNhc2UgYSB0d2VlbiBwYXVzZXMgb3Igc2Vla3MgdGhlIHRpbWVsaW5lIHdoZW4gcmVuZGVyaW5nLCBsaWtlIGluc2lkZSBvZiBhbiBvblVwZGF0ZS9vbkNvbXBsZXRlXG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9IGVsc2UgaWYgKHR3ZWVuLl9hY3RpdmUgfHwgKHR3ZWVuLl9zdGFydFRpbWUgPD0gY3VyVGltZSAmJiAhdHdlZW4uX3BhdXNlZCAmJiAhdHdlZW4uX2djKSkge1xuXHRcdFx0XHRcdFx0aWYgKHBhdXNlVHdlZW4gPT09IHR3ZWVuKSB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGF1c2UoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmICghdHdlZW4uX3JldmVyc2VkKSB7XG5cdFx0XHRcdFx0XHRcdHR3ZWVuLnJlbmRlcigodGltZSAtIHR3ZWVuLl9zdGFydFRpbWUpICogdHdlZW4uX3RpbWVTY2FsZSwgc3VwcHJlc3NFdmVudHMsIGZvcmNlKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHR3ZWVuLnJlbmRlcigoKCF0d2Vlbi5fZGlydHkpID8gdHdlZW4uX3RvdGFsRHVyYXRpb24gOiB0d2Vlbi50b3RhbER1cmF0aW9uKCkpIC0gKCh0aW1lIC0gdHdlZW4uX3N0YXJ0VGltZSkgKiB0d2Vlbi5fdGltZVNjYWxlKSwgc3VwcHJlc3NFdmVudHMsIGZvcmNlKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dHdlZW4gPSBuZXh0O1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0d2VlbiA9IHRoaXMuX2xhc3Q7XG5cdFx0XHRcdHdoaWxlICh0d2Vlbikge1xuXHRcdFx0XHRcdG5leHQgPSB0d2Vlbi5fcHJldjsgLy9yZWNvcmQgaXQgaGVyZSBiZWNhdXNlIHRoZSB2YWx1ZSBjb3VsZCBjaGFuZ2UgYWZ0ZXIgcmVuZGVyaW5nLi4uXG5cdFx0XHRcdFx0aWYgKGN1clRpbWUgIT09IHRoaXMuX3RpbWUgfHwgKHRoaXMuX3BhdXNlZCAmJiAhcHJldlBhdXNlZCkpIHsgLy9pbiBjYXNlIGEgdHdlZW4gcGF1c2VzIG9yIHNlZWtzIHRoZSB0aW1lbGluZSB3aGVuIHJlbmRlcmluZywgbGlrZSBpbnNpZGUgb2YgYW4gb25VcGRhdGUvb25Db21wbGV0ZVxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fSBlbHNlIGlmICh0d2Vlbi5fYWN0aXZlIHx8ICh0d2Vlbi5fc3RhcnRUaW1lIDw9IHByZXZUaW1lICYmICF0d2Vlbi5fcGF1c2VkICYmICF0d2Vlbi5fZ2MpKSB7XG5cdFx0XHRcdFx0XHRpZiAocGF1c2VUd2VlbiA9PT0gdHdlZW4pIHtcblx0XHRcdFx0XHRcdFx0cGF1c2VUd2VlbiA9IHR3ZWVuLl9wcmV2OyAvL3RoZSBsaW5rZWQgbGlzdCBpcyBvcmdhbml6ZWQgYnkgX3N0YXJ0VGltZSwgdGh1cyBpdCdzIHBvc3NpYmxlIHRoYXQgYSB0d2VlbiBjb3VsZCBzdGFydCBCRUZPUkUgdGhlIHBhdXNlIGFuZCBlbmQgYWZ0ZXIgaXQsIGluIHdoaWNoIGNhc2UgaXQgd291bGQgYmUgcG9zaXRpb25lZCBiZWZvcmUgdGhlIHBhdXNlIHR3ZWVuIGluIHRoZSBsaW5rZWQgbGlzdCwgYnV0IHdlIHNob3VsZCByZW5kZXIgaXQgYmVmb3JlIHdlIHBhdXNlKCkgdGhlIHRpbWVsaW5lIGFuZCBjZWFzZSByZW5kZXJpbmcuIFRoaXMgaXMgb25seSBhIGNvbmNlcm4gd2hlbiBnb2luZyBpbiByZXZlcnNlLlxuXHRcdFx0XHRcdFx0XHR3aGlsZSAocGF1c2VUd2VlbiAmJiBwYXVzZVR3ZWVuLmVuZFRpbWUoKSA+IHRoaXMuX3RpbWUpIHtcblx0XHRcdFx0XHRcdFx0XHRwYXVzZVR3ZWVuLnJlbmRlciggKHBhdXNlVHdlZW4uX3JldmVyc2VkID8gcGF1c2VUd2Vlbi50b3RhbER1cmF0aW9uKCkgLSAoKHRpbWUgLSBwYXVzZVR3ZWVuLl9zdGFydFRpbWUpICogcGF1c2VUd2Vlbi5fdGltZVNjYWxlKSA6ICh0aW1lIC0gcGF1c2VUd2Vlbi5fc3RhcnRUaW1lKSAqIHBhdXNlVHdlZW4uX3RpbWVTY2FsZSksIHN1cHByZXNzRXZlbnRzLCBmb3JjZSk7XG5cdFx0XHRcdFx0XHRcdFx0cGF1c2VUd2VlbiA9IHBhdXNlVHdlZW4uX3ByZXY7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0cGF1c2VUd2VlbiA9IG51bGw7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGF1c2UoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmICghdHdlZW4uX3JldmVyc2VkKSB7XG5cdFx0XHRcdFx0XHRcdHR3ZWVuLnJlbmRlcigodGltZSAtIHR3ZWVuLl9zdGFydFRpbWUpICogdHdlZW4uX3RpbWVTY2FsZSwgc3VwcHJlc3NFdmVudHMsIGZvcmNlKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHR3ZWVuLnJlbmRlcigoKCF0d2Vlbi5fZGlydHkpID8gdHdlZW4uX3RvdGFsRHVyYXRpb24gOiB0d2Vlbi50b3RhbER1cmF0aW9uKCkpIC0gKCh0aW1lIC0gdHdlZW4uX3N0YXJ0VGltZSkgKiB0d2Vlbi5fdGltZVNjYWxlKSwgc3VwcHJlc3NFdmVudHMsIGZvcmNlKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dHdlZW4gPSBuZXh0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICh0aGlzLl9vblVwZGF0ZSkgaWYgKCFzdXBwcmVzc0V2ZW50cykge1xuXHRcdFx0XHRpZiAoX2xhenlUd2VlbnMubGVuZ3RoKSB7IC8vaW4gY2FzZSByZW5kZXJpbmcgY2F1c2VkIGFueSB0d2VlbnMgdG8gbGF6eS1pbml0LCB3ZSBzaG91bGQgcmVuZGVyIHRoZW0gYmVjYXVzZSB0eXBpY2FsbHkgd2hlbiBhIHRpbWVsaW5lIGZpbmlzaGVzLCB1c2VycyBleHBlY3QgdGhpbmdzIHRvIGhhdmUgcmVuZGVyZWQgZnVsbHkuIEltYWdpbmUgYW4gb25VcGRhdGUgb24gYSB0aW1lbGluZSB0aGF0IHJlcG9ydHMvY2hlY2tzIHR3ZWVuZWQgdmFsdWVzLlxuXHRcdFx0XHRcdF9sYXp5UmVuZGVyKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhpcy5fY2FsbGJhY2soXCJvblVwZGF0ZVwiKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGNhbGxiYWNrKSBpZiAoIXRoaXMuX2djKSBpZiAocHJldlN0YXJ0ID09PSB0aGlzLl9zdGFydFRpbWUgfHwgcHJldlRpbWVTY2FsZSAhPT0gdGhpcy5fdGltZVNjYWxlKSBpZiAodGhpcy5fdGltZSA9PT0gMCB8fCB0b3RhbER1ciA+PSB0aGlzLnRvdGFsRHVyYXRpb24oKSkgeyAvL2lmIG9uZSBvZiB0aGUgdHdlZW5zIHRoYXQgd2FzIHJlbmRlcmVkIGFsdGVyZWQgdGhpcyB0aW1lbGluZSdzIHN0YXJ0VGltZSAobGlrZSBpZiBhbiBvbkNvbXBsZXRlIHJldmVyc2VkIHRoZSB0aW1lbGluZSksIGl0IHByb2JhYmx5IGlzbid0IGNvbXBsZXRlLiBJZiBpdCBpcywgZG9uJ3Qgd29ycnksIGJlY2F1c2Ugd2hhdGV2ZXIgY2FsbCBhbHRlcmVkIHRoZSBzdGFydFRpbWUgd291bGQgY29tcGxldGUgaWYgaXQgd2FzIG5lY2Vzc2FyeSBhdCB0aGUgbmV3IHRpbWUuIFRoZSBvbmx5IGV4Y2VwdGlvbiBpcyB0aGUgdGltZVNjYWxlIHByb3BlcnR5LiBBbHNvIGNoZWNrIF9nYyBiZWNhdXNlIHRoZXJlJ3MgYSBjaGFuY2UgdGhhdCBraWxsKCkgY291bGQgYmUgY2FsbGVkIGluIGFuIG9uVXBkYXRlXG5cdFx0XHRcdGlmIChpc0NvbXBsZXRlKSB7XG5cdFx0XHRcdFx0aWYgKF9sYXp5VHdlZW5zLmxlbmd0aCkgeyAvL2luIGNhc2UgcmVuZGVyaW5nIGNhdXNlZCBhbnkgdHdlZW5zIHRvIGxhenktaW5pdCwgd2Ugc2hvdWxkIHJlbmRlciB0aGVtIGJlY2F1c2UgdHlwaWNhbGx5IHdoZW4gYSB0aW1lbGluZSBmaW5pc2hlcywgdXNlcnMgZXhwZWN0IHRoaW5ncyB0byBoYXZlIHJlbmRlcmVkIGZ1bGx5LiBJbWFnaW5lIGFuIG9uQ29tcGxldGUgb24gYSB0aW1lbGluZSB0aGF0IHJlcG9ydHMvY2hlY2tzIHR3ZWVuZWQgdmFsdWVzLlxuXHRcdFx0XHRcdFx0X2xhenlSZW5kZXIoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKHRoaXMuX3RpbWVsaW5lLmF1dG9SZW1vdmVDaGlsZHJlbikge1xuXHRcdFx0XHRcdFx0dGhpcy5fZW5hYmxlZChmYWxzZSwgZmFsc2UpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aGlzLl9hY3RpdmUgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIXN1cHByZXNzRXZlbnRzICYmIHRoaXMudmFyc1tjYWxsYmFja10pIHtcblx0XHRcdFx0XHR0aGlzLl9jYWxsYmFjayhjYWxsYmFjayk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0cC5faGFzUGF1c2VkQ2hpbGQgPSBmdW5jdGlvbigpIHtcblx0XHRcdHZhciB0d2VlbiA9IHRoaXMuX2ZpcnN0O1xuXHRcdFx0d2hpbGUgKHR3ZWVuKSB7XG5cdFx0XHRcdGlmICh0d2Vlbi5fcGF1c2VkIHx8ICgodHdlZW4gaW5zdGFuY2VvZiBUaW1lbGluZUxpdGUpICYmIHR3ZWVuLl9oYXNQYXVzZWRDaGlsZCgpKSkge1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHR3ZWVuID0gdHdlZW4uX25leHQ7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fTtcblxuXHRcdHAuZ2V0Q2hpbGRyZW4gPSBmdW5jdGlvbihuZXN0ZWQsIHR3ZWVucywgdGltZWxpbmVzLCBpZ25vcmVCZWZvcmVUaW1lKSB7XG5cdFx0XHRpZ25vcmVCZWZvcmVUaW1lID0gaWdub3JlQmVmb3JlVGltZSB8fCAtOTk5OTk5OTk5OTtcblx0XHRcdHZhciBhID0gW10sXG5cdFx0XHRcdHR3ZWVuID0gdGhpcy5fZmlyc3QsXG5cdFx0XHRcdGNudCA9IDA7XG5cdFx0XHR3aGlsZSAodHdlZW4pIHtcblx0XHRcdFx0aWYgKHR3ZWVuLl9zdGFydFRpbWUgPCBpZ25vcmVCZWZvcmVUaW1lKSB7XG5cdFx0XHRcdFx0Ly9kbyBub3RoaW5nXG5cdFx0XHRcdH0gZWxzZSBpZiAodHdlZW4gaW5zdGFuY2VvZiBUd2VlbkxpdGUpIHtcblx0XHRcdFx0XHRpZiAodHdlZW5zICE9PSBmYWxzZSkge1xuXHRcdFx0XHRcdFx0YVtjbnQrK10gPSB0d2Vlbjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aWYgKHRpbWVsaW5lcyAhPT0gZmFsc2UpIHtcblx0XHRcdFx0XHRcdGFbY250KytdID0gdHdlZW47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChuZXN0ZWQgIT09IGZhbHNlKSB7XG5cdFx0XHRcdFx0XHRhID0gYS5jb25jYXQodHdlZW4uZ2V0Q2hpbGRyZW4odHJ1ZSwgdHdlZW5zLCB0aW1lbGluZXMpKTtcblx0XHRcdFx0XHRcdGNudCA9IGEubGVuZ3RoO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHR0d2VlbiA9IHR3ZWVuLl9uZXh0O1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGE7XG5cdFx0fTtcblxuXHRcdHAuZ2V0VHdlZW5zT2YgPSBmdW5jdGlvbih0YXJnZXQsIG5lc3RlZCkge1xuXHRcdFx0dmFyIGRpc2FibGVkID0gdGhpcy5fZ2MsXG5cdFx0XHRcdGEgPSBbXSxcblx0XHRcdFx0Y250ID0gMCxcblx0XHRcdFx0dHdlZW5zLCBpO1xuXHRcdFx0aWYgKGRpc2FibGVkKSB7XG5cdFx0XHRcdHRoaXMuX2VuYWJsZWQodHJ1ZSwgdHJ1ZSk7IC8vZ2V0VHdlZW5zT2YoKSBmaWx0ZXJzIG91dCBkaXNhYmxlZCB0d2VlbnMsIGFuZCB3ZSBoYXZlIHRvIG1hcmsgdGhlbSBhcyBfZ2MgPSB0cnVlIHdoZW4gdGhlIHRpbWVsaW5lIGNvbXBsZXRlcyBpbiBvcmRlciB0byBhbGxvdyBjbGVhbiBnYXJiYWdlIGNvbGxlY3Rpb24sIHNvIHRlbXBvcmFyaWx5IHJlLWVuYWJsZSB0aGUgdGltZWxpbmUgaGVyZS5cblx0XHRcdH1cblx0XHRcdHR3ZWVucyA9IFR3ZWVuTGl0ZS5nZXRUd2VlbnNPZih0YXJnZXQpO1xuXHRcdFx0aSA9IHR3ZWVucy5sZW5ndGg7XG5cdFx0XHR3aGlsZSAoLS1pID4gLTEpIHtcblx0XHRcdFx0aWYgKHR3ZWVuc1tpXS50aW1lbGluZSA9PT0gdGhpcyB8fCAobmVzdGVkICYmIHRoaXMuX2NvbnRhaW5zKHR3ZWVuc1tpXSkpKSB7XG5cdFx0XHRcdFx0YVtjbnQrK10gPSB0d2VlbnNbaV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmIChkaXNhYmxlZCkge1xuXHRcdFx0XHR0aGlzLl9lbmFibGVkKGZhbHNlLCB0cnVlKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBhO1xuXHRcdH07XG5cblx0XHRwLnJlY2VudCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIHRoaXMuX3JlY2VudDtcblx0XHR9O1xuXG5cdFx0cC5fY29udGFpbnMgPSBmdW5jdGlvbih0d2Vlbikge1xuXHRcdFx0dmFyIHRsID0gdHdlZW4udGltZWxpbmU7XG5cdFx0XHR3aGlsZSAodGwpIHtcblx0XHRcdFx0aWYgKHRsID09PSB0aGlzKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0dGwgPSB0bC50aW1lbGluZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9O1xuXG5cdFx0cC5zaGlmdENoaWxkcmVuID0gZnVuY3Rpb24oYW1vdW50LCBhZGp1c3RMYWJlbHMsIGlnbm9yZUJlZm9yZVRpbWUpIHtcblx0XHRcdGlnbm9yZUJlZm9yZVRpbWUgPSBpZ25vcmVCZWZvcmVUaW1lIHx8IDA7XG5cdFx0XHR2YXIgdHdlZW4gPSB0aGlzLl9maXJzdCxcblx0XHRcdFx0bGFiZWxzID0gdGhpcy5fbGFiZWxzLFxuXHRcdFx0XHRwO1xuXHRcdFx0d2hpbGUgKHR3ZWVuKSB7XG5cdFx0XHRcdGlmICh0d2Vlbi5fc3RhcnRUaW1lID49IGlnbm9yZUJlZm9yZVRpbWUpIHtcblx0XHRcdFx0XHR0d2Vlbi5fc3RhcnRUaW1lICs9IGFtb3VudDtcblx0XHRcdFx0fVxuXHRcdFx0XHR0d2VlbiA9IHR3ZWVuLl9uZXh0O1xuXHRcdFx0fVxuXHRcdFx0aWYgKGFkanVzdExhYmVscykge1xuXHRcdFx0XHRmb3IgKHAgaW4gbGFiZWxzKSB7XG5cdFx0XHRcdFx0aWYgKGxhYmVsc1twXSA+PSBpZ25vcmVCZWZvcmVUaW1lKSB7XG5cdFx0XHRcdFx0XHRsYWJlbHNbcF0gKz0gYW1vdW50O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXMuX3VuY2FjaGUodHJ1ZSk7XG5cdFx0fTtcblxuXHRcdHAuX2tpbGwgPSBmdW5jdGlvbih2YXJzLCB0YXJnZXQpIHtcblx0XHRcdGlmICghdmFycyAmJiAhdGFyZ2V0KSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLl9lbmFibGVkKGZhbHNlLCBmYWxzZSk7XG5cdFx0XHR9XG5cdFx0XHR2YXIgdHdlZW5zID0gKCF0YXJnZXQpID8gdGhpcy5nZXRDaGlsZHJlbih0cnVlLCB0cnVlLCBmYWxzZSkgOiB0aGlzLmdldFR3ZWVuc09mKHRhcmdldCksXG5cdFx0XHRcdGkgPSB0d2VlbnMubGVuZ3RoLFxuXHRcdFx0XHRjaGFuZ2VkID0gZmFsc2U7XG5cdFx0XHR3aGlsZSAoLS1pID4gLTEpIHtcblx0XHRcdFx0aWYgKHR3ZWVuc1tpXS5fa2lsbCh2YXJzLCB0YXJnZXQpKSB7XG5cdFx0XHRcdFx0Y2hhbmdlZCA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBjaGFuZ2VkO1xuXHRcdH07XG5cblx0XHRwLmNsZWFyID0gZnVuY3Rpb24obGFiZWxzKSB7XG5cdFx0XHR2YXIgdHdlZW5zID0gdGhpcy5nZXRDaGlsZHJlbihmYWxzZSwgdHJ1ZSwgdHJ1ZSksXG5cdFx0XHRcdGkgPSB0d2VlbnMubGVuZ3RoO1xuXHRcdFx0dGhpcy5fdGltZSA9IHRoaXMuX3RvdGFsVGltZSA9IDA7XG5cdFx0XHR3aGlsZSAoLS1pID4gLTEpIHtcblx0XHRcdFx0dHdlZW5zW2ldLl9lbmFibGVkKGZhbHNlLCBmYWxzZSk7XG5cdFx0XHR9XG5cdFx0XHRpZiAobGFiZWxzICE9PSBmYWxzZSkge1xuXHRcdFx0XHR0aGlzLl9sYWJlbHMgPSB7fTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0aGlzLl91bmNhY2hlKHRydWUpO1xuXHRcdH07XG5cblx0XHRwLmludmFsaWRhdGUgPSBmdW5jdGlvbigpIHtcblx0XHRcdHZhciB0d2VlbiA9IHRoaXMuX2ZpcnN0O1xuXHRcdFx0d2hpbGUgKHR3ZWVuKSB7XG5cdFx0XHRcdHR3ZWVuLmludmFsaWRhdGUoKTtcblx0XHRcdFx0dHdlZW4gPSB0d2Vlbi5fbmV4dDtcblx0XHRcdH1cblx0XHRcdHJldHVybiBBbmltYXRpb24ucHJvdG90eXBlLmludmFsaWRhdGUuY2FsbCh0aGlzKTs7XG5cdFx0fTtcblxuXHRcdHAuX2VuYWJsZWQgPSBmdW5jdGlvbihlbmFibGVkLCBpZ25vcmVUaW1lbGluZSkge1xuXHRcdFx0aWYgKGVuYWJsZWQgPT09IHRoaXMuX2djKSB7XG5cdFx0XHRcdHZhciB0d2VlbiA9IHRoaXMuX2ZpcnN0O1xuXHRcdFx0XHR3aGlsZSAodHdlZW4pIHtcblx0XHRcdFx0XHR0d2Vlbi5fZW5hYmxlZChlbmFibGVkLCB0cnVlKTtcblx0XHRcdFx0XHR0d2VlbiA9IHR3ZWVuLl9uZXh0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gU2ltcGxlVGltZWxpbmUucHJvdG90eXBlLl9lbmFibGVkLmNhbGwodGhpcywgZW5hYmxlZCwgaWdub3JlVGltZWxpbmUpO1xuXHRcdH07XG5cblx0XHRwLnRvdGFsVGltZSA9IGZ1bmN0aW9uKHRpbWUsIHN1cHByZXNzRXZlbnRzLCB1bmNhcHBlZCkge1xuXHRcdFx0dGhpcy5fZm9yY2luZ1BsYXloZWFkID0gdHJ1ZTtcblx0XHRcdHZhciB2YWwgPSBBbmltYXRpb24ucHJvdG90eXBlLnRvdGFsVGltZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdFx0dGhpcy5fZm9yY2luZ1BsYXloZWFkID0gZmFsc2U7XG5cdFx0XHRyZXR1cm4gdmFsO1xuXHRcdH07XG5cblx0XHRwLmR1cmF0aW9uID0gZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuXHRcdFx0XHRpZiAodGhpcy5fZGlydHkpIHtcblx0XHRcdFx0XHR0aGlzLnRvdGFsRHVyYXRpb24oKTsgLy9qdXN0IHRyaWdnZXJzIHJlY2FsY3VsYXRpb25cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcy5fZHVyYXRpb247XG5cdFx0XHR9XG5cdFx0XHRpZiAodGhpcy5kdXJhdGlvbigpICE9PSAwICYmIHZhbHVlICE9PSAwKSB7XG5cdFx0XHRcdHRoaXMudGltZVNjYWxlKHRoaXMuX2R1cmF0aW9uIC8gdmFsdWUpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fTtcblxuXHRcdHAudG90YWxEdXJhdGlvbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XHRpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHtcblx0XHRcdFx0aWYgKHRoaXMuX2RpcnR5KSB7XG5cdFx0XHRcdFx0dmFyIG1heCA9IDAsXG5cdFx0XHRcdFx0XHR0d2VlbiA9IHRoaXMuX2xhc3QsXG5cdFx0XHRcdFx0XHRwcmV2U3RhcnQgPSA5OTk5OTk5OTk5OTksXG5cdFx0XHRcdFx0XHRwcmV2LCBlbmQ7XG5cdFx0XHRcdFx0d2hpbGUgKHR3ZWVuKSB7XG5cdFx0XHRcdFx0XHRwcmV2ID0gdHdlZW4uX3ByZXY7IC8vcmVjb3JkIGl0IGhlcmUgaW4gY2FzZSB0aGUgdHdlZW4gY2hhbmdlcyBwb3NpdGlvbiBpbiB0aGUgc2VxdWVuY2UuLi5cblx0XHRcdFx0XHRcdGlmICh0d2Vlbi5fZGlydHkpIHtcblx0XHRcdFx0XHRcdFx0dHdlZW4udG90YWxEdXJhdGlvbigpOyAvL2NvdWxkIGNoYW5nZSB0aGUgdHdlZW4uX3N0YXJ0VGltZSwgc28gbWFrZSBzdXJlIHRoZSB0d2VlbidzIGNhY2hlIGlzIGNsZWFuIGJlZm9yZSBhbmFseXppbmcgaXQuXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAodHdlZW4uX3N0YXJ0VGltZSA+IHByZXZTdGFydCAmJiB0aGlzLl9zb3J0Q2hpbGRyZW4gJiYgIXR3ZWVuLl9wYXVzZWQpIHsgLy9pbiBjYXNlIG9uZSBvZiB0aGUgdHdlZW5zIHNoaWZ0ZWQgb3V0IG9mIG9yZGVyLCBpdCBuZWVkcyB0byBiZSByZS1pbnNlcnRlZCBpbnRvIHRoZSBjb3JyZWN0IHBvc2l0aW9uIGluIHRoZSBzZXF1ZW5jZVxuXHRcdFx0XHRcdFx0XHR0aGlzLmFkZCh0d2VlbiwgdHdlZW4uX3N0YXJ0VGltZSAtIHR3ZWVuLl9kZWxheSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRwcmV2U3RhcnQgPSB0d2Vlbi5fc3RhcnRUaW1lO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKHR3ZWVuLl9zdGFydFRpbWUgPCAwICYmICF0d2Vlbi5fcGF1c2VkKSB7IC8vY2hpbGRyZW4gYXJlbid0IGFsbG93ZWQgdG8gaGF2ZSBuZWdhdGl2ZSBzdGFydFRpbWVzIHVubGVzcyBzbW9vdGhDaGlsZFRpbWluZyBpcyB0cnVlLCBzbyBhZGp1c3QgaGVyZSBpZiBvbmUgaXMgZm91bmQuXG5cdFx0XHRcdFx0XHRcdG1heCAtPSB0d2Vlbi5fc3RhcnRUaW1lO1xuXHRcdFx0XHRcdFx0XHRpZiAodGhpcy5fdGltZWxpbmUuc21vb3RoQ2hpbGRUaW1pbmcpIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLl9zdGFydFRpbWUgKz0gdHdlZW4uX3N0YXJ0VGltZSAvIHRoaXMuX3RpbWVTY2FsZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR0aGlzLnNoaWZ0Q2hpbGRyZW4oLXR3ZWVuLl9zdGFydFRpbWUsIGZhbHNlLCAtOTk5OTk5OTk5OSk7XG5cdFx0XHRcdFx0XHRcdHByZXZTdGFydCA9IDA7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbmQgPSB0d2Vlbi5fc3RhcnRUaW1lICsgKHR3ZWVuLl90b3RhbER1cmF0aW9uIC8gdHdlZW4uX3RpbWVTY2FsZSk7XG5cdFx0XHRcdFx0XHRpZiAoZW5kID4gbWF4KSB7XG5cdFx0XHRcdFx0XHRcdG1heCA9IGVuZDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHR3ZWVuID0gcHJldjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGhpcy5fZHVyYXRpb24gPSB0aGlzLl90b3RhbER1cmF0aW9uID0gbWF4O1xuXHRcdFx0XHRcdHRoaXMuX2RpcnR5ID0gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXMuX3RvdGFsRHVyYXRpb247XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gKHZhbHVlICYmIHRoaXMudG90YWxEdXJhdGlvbigpKSA/IHRoaXMudGltZVNjYWxlKHRoaXMuX3RvdGFsRHVyYXRpb24gLyB2YWx1ZSkgOiB0aGlzO1xuXHRcdH07XG5cblx0XHRwLnBhdXNlZCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XHRpZiAoIXZhbHVlKSB7IC8vaWYgdGhlcmUncyBhIHBhdXNlIGRpcmVjdGx5IGF0IHRoZSBzcG90IGZyb20gd2hlcmUgd2UncmUgdW5wYXVzaW5nLCBza2lwIGl0LlxuXHRcdFx0XHR2YXIgdHdlZW4gPSB0aGlzLl9maXJzdCxcblx0XHRcdFx0XHR0aW1lID0gdGhpcy5fdGltZTtcblx0XHRcdFx0d2hpbGUgKHR3ZWVuKSB7XG5cdFx0XHRcdFx0aWYgKHR3ZWVuLl9zdGFydFRpbWUgPT09IHRpbWUgJiYgdHdlZW4uZGF0YSA9PT0gXCJpc1BhdXNlXCIpIHtcblx0XHRcdFx0XHRcdHR3ZWVuLl9yYXdQcmV2VGltZSA9IDA7IC8vcmVtZW1iZXIsIF9yYXdQcmV2VGltZSBpcyBob3cgemVyby1kdXJhdGlvbiB0d2VlbnMvY2FsbGJhY2tzIHNlbnNlIGRpcmVjdGlvbmFsaXR5IGFuZCBkZXRlcm1pbmUgd2hldGhlciBvciBub3QgdG8gZmlyZS4gSWYgX3Jhd1ByZXZUaW1lIGlzIHRoZSBzYW1lIGFzIF9zdGFydFRpbWUgb24gdGhlIG5leHQgcmVuZGVyLCBpdCB3b24ndCBmaXJlLlxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0d2VlbiA9IHR3ZWVuLl9uZXh0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gQW5pbWF0aW9uLnByb3RvdHlwZS5wYXVzZWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0XHR9O1xuXG5cdFx0cC51c2VzRnJhbWVzID0gZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgdGwgPSB0aGlzLl90aW1lbGluZTtcblx0XHRcdHdoaWxlICh0bC5fdGltZWxpbmUpIHtcblx0XHRcdFx0dGwgPSB0bC5fdGltZWxpbmU7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gKHRsID09PSBBbmltYXRpb24uX3Jvb3RGcmFtZXNUaW1lbGluZSk7XG5cdFx0fTtcblxuXHRcdHAucmF3VGltZSA9IGZ1bmN0aW9uKHdyYXBSZXBlYXRzKSB7XG5cdFx0XHRyZXR1cm4gKHdyYXBSZXBlYXRzICYmICh0aGlzLl9wYXVzZWQgfHwgKHRoaXMuX3JlcGVhdCAmJiB0aGlzLnRpbWUoKSA+IDAgJiYgdGhpcy50b3RhbFByb2dyZXNzKCkgPCAxKSkpID8gdGhpcy5fdG90YWxUaW1lICUgKHRoaXMuX2R1cmF0aW9uICsgdGhpcy5fcmVwZWF0RGVsYXkpIDogdGhpcy5fcGF1c2VkID8gdGhpcy5fdG90YWxUaW1lIDogKHRoaXMuX3RpbWVsaW5lLnJhd1RpbWUod3JhcFJlcGVhdHMpIC0gdGhpcy5fc3RhcnRUaW1lKSAqIHRoaXMuX3RpbWVTY2FsZTtcblx0XHR9O1xuXG5cdFx0cmV0dXJuIFRpbWVsaW5lTGl0ZTtcblxuXHR9LCB0cnVlKTtcblxuXG59KTsgaWYgKF9nc1Njb3BlLl9nc0RlZmluZSkgeyBfZ3NTY29wZS5fZ3NRdWV1ZS5wb3AoKSgpOyB9XG5cbi8vZXhwb3J0IHRvIEFNRC9SZXF1aXJlSlMgYW5kIENvbW1vbkpTL05vZGUgKHByZWN1cnNvciB0byBmdWxsIG1vZHVsYXIgYnVpbGQgc3lzdGVtIGNvbWluZyBhdCBhIGxhdGVyIGRhdGUpXG4oZnVuY3Rpb24obmFtZSkge1xuXHRcInVzZSBzdHJpY3RcIjtcblx0dmFyIGdldEdsb2JhbCA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiAoX2dzU2NvcGUuR3JlZW5Tb2NrR2xvYmFscyB8fCBfZ3NTY29wZSlbbmFtZV07XG5cdH07XG5cdGlmICh0eXBlb2YoZGVmaW5lKSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHsgLy9BTURcblx0XHRkZWZpbmUoW1wiVHdlZW5MaXRlXCJdLCBnZXRHbG9iYWwpO1xuXHR9IGVsc2UgaWYgKHR5cGVvZihtb2R1bGUpICE9PSBcInVuZGVmaW5lZFwiICYmIG1vZHVsZS5leHBvcnRzKSB7IC8vbm9kZVxuXHRcdHJlcXVpcmUoXCIuL1R3ZWVuTGl0ZS5qc1wiKTsgLy9kZXBlbmRlbmN5XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBnZXRHbG9iYWwoKTtcblx0fVxufShcIlRpbWVsaW5lTGl0ZVwiKSk7XG4iLCJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIGltYWdlOiBjYy5TcHJpdGUsXHJcbiAgICAgICAgbGFiZWw6IGNjLkxhYmVsLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8v5qOA6aqM5piv5ZCm5a2Y5ZyocGtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbGV0IHNjZW5OYW1lID0gY2MuZGlyZWN0b3IuZ2V0U2NlbmUoKS5uYW1lO1xyXG4gICAgICAgICAgICBpZiAoc2Nlbk5hbWUgIT0gXCJwa1dhaXRcIikge1xyXG4gICAgICAgICAgICAgICAgYWpheFV0aWxzKEh4c2dVcmwucXVlcnlQaywgbnVsbCwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YSA9PSBcIjIwMDFcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93QWxlcnQoXCLkvaDmraPlpITlnKjmiJjmlpfkuK3vvIzor7fnq4vljbPmiJjmlpdcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKEh4c2dTY2VuZXMucGtXYWl0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNjLmRpcmVjdG9yLmxvYWRTY2VuZShIeHNnU2NlbmVzLnBrV2FpdClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIDEwKTtcclxuICAgICAgICB0aGlzLnNldExhYmVsKGFqYXhSZXR1cm5EYXRhLnRvcENpdHkpO1xyXG4gICAgICAgIHRoaXMuYWRkSW1hZ2VBY3Rpb24oKTtcclxuICAgICAgICB2YXIgYW5pbSA9IHRoaXMuZ2V0Q29tcG9uZW50KGNjLkFuaW1hdGlvbik7XHJcblxyXG4gICAgICAgIC8vIOWmguaenOayoeacieaMh+WumuaSreaUvuWTquS4quWKqOeUu++8jOW5tuS4lOacieiuvue9riBkZWZhdWx0Q2xpcCDnmoTor53vvIzliJnkvJrmkq3mlL4gZGVmYXVsdENsaXAg5Yqo55S7XHJcbiAgICAgICAgLy9hbmltLnBsYXkoKTtcclxuXHJcblxyXG4gICAgfSxcclxuXHJcbiAgICBhZGRJbWFnZUFjdGlvbjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICB2YXIgc2VxID0gY2Muc2VxdWVuY2UoY2MubW92ZVRvKDEsIGNjLnAoLTM2MCwgMCkpLmVhc2luZyhjYy5lYXNlQ3ViaWNBY3Rpb25PdXQoMSkpKTtcclxuICAgICAgICB0aGlzLmltYWdlLm5vZGUucnVuQWN0aW9uKHNlcSk7XHJcbiAgICB9LFxyXG4gICAgcGxheTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuYWRkSW1hZ2VBY3Rpb24oKTtcclxuICAgICAgICB2YXIgYW5pbSA9IHRoaXMuZ2V0Q29tcG9uZW50KGNjLkFuaW1hdGlvbik7XHJcbiAgICAgICAgLy8g5aaC5p6c5rKh5pyJ5oyH5a6a5pKt5pS+5ZOq5Liq5Yqo55S777yM5bm25LiU5pyJ6K6+572uIGRlZmF1bHRDbGlwIOeahOivne+8jOWImeS8muaSreaUviBkZWZhdWx0Q2xpcCDliqjnlLtcclxuXHJcbiAgICB9LFxyXG4gICAgc2V0TGFiZWw6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICB0aGlzLmxhYmVsLnN0cmluZyA9IG1zZztcclxuXHJcbiAgICB9XHJcbn0pO1xyXG4iLCIvKiFcbiAqIFZFUlNJT046IDEuMTkuMVxuICogREFURTogMjAxNy0wMS0xN1xuICogVVBEQVRFUyBBTkQgRE9DUyBBVDogaHR0cDovL2dyZWVuc29jay5jb21cbiAqXG4gKiBAbGljZW5zZSBDb3B5cmlnaHQgKGMpIDIwMDgtMjAxNywgR3JlZW5Tb2NrLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyB3b3JrIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIGF0IGh0dHA6Ly9ncmVlbnNvY2suY29tL3N0YW5kYXJkLWxpY2Vuc2Ugb3IgZm9yXG4gKiBDbHViIEdyZWVuU29jayBtZW1iZXJzLCB0aGUgc29mdHdhcmUgYWdyZWVtZW50IHRoYXQgd2FzIGlzc3VlZCB3aXRoIHlvdXIgbWVtYmVyc2hpcC5cbiAqIFxuICogQGF1dGhvcjogSmFjayBEb3lsZSwgamFja0BncmVlbnNvY2suY29tXG4gKi9cbihmdW5jdGlvbih3aW5kb3csIG1vZHVsZU5hbWUpIHtcblxuXHRcdFwidXNlIHN0cmljdFwiO1xuXHRcdHZhciBfZXhwb3J0cyA9IHt9LFxuXHRcdFx0X2RvYyA9IHdpbmRvdy5kb2N1bWVudCxcblx0XHRcdF9nbG9iYWxzID0gd2luZG93LkdyZWVuU29ja0dsb2JhbHMgPSB3aW5kb3cuR3JlZW5Tb2NrR2xvYmFscyB8fCB3aW5kb3c7XG5cdFx0aWYgKF9nbG9iYWxzLlR3ZWVuTGl0ZSkge1xuXHRcdFx0cmV0dXJuOyAvL2luIGNhc2UgdGhlIGNvcmUgc2V0IG9mIGNsYXNzZXMgaXMgYWxyZWFkeSBsb2FkZWQsIGRvbid0IGluc3RhbnRpYXRlIHR3aWNlLlxuXHRcdH1cblx0XHR2YXIgX25hbWVzcGFjZSA9IGZ1bmN0aW9uKG5zKSB7XG5cdFx0XHRcdHZhciBhID0gbnMuc3BsaXQoXCIuXCIpLFxuXHRcdFx0XHRcdHAgPSBfZ2xvYmFscywgaTtcblx0XHRcdFx0Zm9yIChpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRwW2FbaV1dID0gcCA9IHBbYVtpXV0gfHwge307XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHA7XG5cdFx0XHR9LFxuXHRcdFx0Z3MgPSBfbmFtZXNwYWNlKFwiY29tLmdyZWVuc29ja1wiKSxcblx0XHRcdF90aW55TnVtID0gMC4wMDAwMDAwMDAxLFxuXHRcdFx0X3NsaWNlID0gZnVuY3Rpb24oYSkgeyAvL2Rvbid0IHVzZSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0YXJnZXQsIDApIGJlY2F1c2UgdGhhdCBkb2Vzbid0IHdvcmsgaW4gSUU4IHdpdGggYSBOb2RlTGlzdCB0aGF0J3MgcmV0dXJuZWQgYnkgcXVlcnlTZWxlY3RvckFsbCgpXG5cdFx0XHRcdHZhciBiID0gW10sXG5cdFx0XHRcdFx0bCA9IGEubGVuZ3RoLFxuXHRcdFx0XHRcdGk7XG5cdFx0XHRcdGZvciAoaSA9IDA7IGkgIT09IGw7IGIucHVzaChhW2krK10pKSB7fVxuXHRcdFx0XHRyZXR1cm4gYjtcblx0XHRcdH0sXG5cdFx0XHRfZW1wdHlGdW5jID0gZnVuY3Rpb24oKSB7fSxcblx0XHRcdF9pc0FycmF5ID0gKGZ1bmN0aW9uKCkgeyAvL3dvcmtzIGFyb3VuZCBpc3N1ZXMgaW4gaWZyYW1lIGVudmlyb25tZW50cyB3aGVyZSB0aGUgQXJyYXkgZ2xvYmFsIGlzbid0IHNoYXJlZCwgdGh1cyBpZiB0aGUgb2JqZWN0IG9yaWdpbmF0ZXMgaW4gYSBkaWZmZXJlbnQgd2luZG93L2lmcmFtZSwgXCIob2JqIGluc3RhbmNlb2YgQXJyYXkpXCIgd2lsbCBldmFsdWF0ZSBmYWxzZS4gV2UgYWRkZWQgc29tZSBzcGVlZCBvcHRpbWl6YXRpb25zIHRvIGF2b2lkIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCgpIHVubGVzcyBpdCdzIGFic29sdXRlbHkgbmVjZXNzYXJ5IGJlY2F1c2UgaXQncyBWRVJZIHNsb3cgKGxpa2UgMjB4IHNsb3dlcilcblx0XHRcdFx0dmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyxcblx0XHRcdFx0XHRhcnJheSA9IHRvU3RyaW5nLmNhbGwoW10pO1xuXHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG9iaiAhPSBudWxsICYmIChvYmogaW5zdGFuY2VvZiBBcnJheSB8fCAodHlwZW9mKG9iaikgPT09IFwib2JqZWN0XCIgJiYgISFvYmoucHVzaCAmJiB0b1N0cmluZy5jYWxsKG9iaikgPT09IGFycmF5KSk7XG5cdFx0XHRcdH07XG5cdFx0XHR9KCkpLFxuXHRcdFx0YSwgaSwgcCwgX3RpY2tlciwgX3RpY2tlckFjdGl2ZSxcblx0XHRcdF9kZWZMb29rdXAgPSB7fSxcblxuXHRcdFx0LyoqXG5cdFx0XHQgKiBAY29uc3RydWN0b3Jcblx0XHRcdCAqIERlZmluZXMgYSBHcmVlblNvY2sgY2xhc3MsIG9wdGlvbmFsbHkgd2l0aCBhbiBhcnJheSBvZiBkZXBlbmRlbmNpZXMgdGhhdCBtdXN0IGJlIGluc3RhbnRpYXRlZCBmaXJzdCBhbmQgcGFzc2VkIGludG8gdGhlIGRlZmluaXRpb24uXG5cdFx0XHQgKiBUaGlzIGFsbG93cyB1c2VycyB0byBsb2FkIEdyZWVuU29jayBKUyBmaWxlcyBpbiBhbnkgb3JkZXIgZXZlbiBpZiB0aGV5IGhhdmUgaW50ZXJkZXBlbmRlbmNpZXMgKGxpa2UgQ1NTUGx1Z2luIGV4dGVuZHMgVHdlZW5QbHVnaW4gd2hpY2ggaXNcblx0XHRcdCAqIGluc2lkZSBUd2VlbkxpdGUuanMsIGJ1dCBpZiBDU1NQbHVnaW4gaXMgbG9hZGVkIGZpcnN0LCBpdCBzaG91bGQgd2FpdCB0byBydW4gaXRzIGNvZGUgdW50aWwgVHdlZW5MaXRlLmpzIGxvYWRzIGFuZCBpbnN0YW50aWF0ZXMgVHdlZW5QbHVnaW5cblx0XHRcdCAqIGFuZCB0aGVuIHBhc3MgVHdlZW5QbHVnaW4gdG8gQ1NTUGx1Z2luJ3MgZGVmaW5pdGlvbikuIFRoaXMgaXMgYWxsIGRvbmUgYXV0b21hdGljYWxseSBhbmQgaW50ZXJuYWxseS5cblx0XHRcdCAqXG5cdFx0XHQgKiBFdmVyeSBkZWZpbml0aW9uIHdpbGwgYmUgYWRkZWQgdG8gYSBcImNvbS5ncmVlbnNvY2tcIiBnbG9iYWwgb2JqZWN0ICh0eXBpY2FsbHkgd2luZG93LCBidXQgaWYgYSB3aW5kb3cuR3JlZW5Tb2NrR2xvYmFscyBvYmplY3QgaXMgZm91bmQsXG5cdFx0XHQgKiBpdCB3aWxsIGdvIHRoZXJlIGFzIG9mIHYxLjcpLiBGb3IgZXhhbXBsZSwgVHdlZW5MaXRlIHdpbGwgYmUgZm91bmQgYXQgd2luZG93LmNvbS5ncmVlbnNvY2suVHdlZW5MaXRlIGFuZCBzaW5jZSBpdCdzIGEgZ2xvYmFsIGNsYXNzIHRoYXQgc2hvdWxkIGJlIGF2YWlsYWJsZSBhbnl3aGVyZSxcblx0XHRcdCAqIGl0IGlzIEFMU08gcmVmZXJlbmNlZCBhdCB3aW5kb3cuVHdlZW5MaXRlLiBIb3dldmVyIHNvbWUgY2xhc3NlcyBhcmVuJ3QgY29uc2lkZXJlZCBnbG9iYWwsIGxpa2UgdGhlIGJhc2UgY29tLmdyZWVuc29jay5jb3JlLkFuaW1hdGlvbiBjbGFzcywgc29cblx0XHRcdCAqIHRob3NlIHdpbGwgb25seSBiZSBhdCB0aGUgcGFja2FnZSBsaWtlIHdpbmRvdy5jb20uZ3JlZW5zb2NrLmNvcmUuQW5pbWF0aW9uLiBBZ2FpbiwgaWYgeW91IGRlZmluZSBhIEdyZWVuU29ja0dsb2JhbHMgb2JqZWN0IG9uIHRoZSB3aW5kb3csIGV2ZXJ5dGhpbmdcblx0XHRcdCAqIGdldHMgdHVja2VkIG5lYXRseSBpbnNpZGUgdGhlcmUgaW5zdGVhZCBvZiBvbiB0aGUgd2luZG93IGRpcmVjdGx5LiBUaGlzIGFsbG93cyB5b3UgdG8gZG8gYWR2YW5jZWQgdGhpbmdzIGxpa2UgbG9hZCBtdWx0aXBsZSB2ZXJzaW9ucyBvZiBHcmVlblNvY2tcblx0XHRcdCAqIGZpbGVzIGFuZCBwdXQgdGhlbSBpbnRvIGRpc3RpbmN0IG9iamVjdHMgKGltYWdpbmUgYSBiYW5uZXIgYWQgdXNlcyBhIG5ld2VyIHZlcnNpb24gYnV0IHRoZSBtYWluIHNpdGUgdXNlcyBhbiBvbGRlciBvbmUpLiBJbiB0aGF0IGNhc2UsIHlvdSBjb3VsZFxuXHRcdFx0ICogc2FuZGJveCB0aGUgYmFubmVyIG9uZSBsaWtlOlxuXHRcdFx0ICpcblx0XHRcdCAqIDxzY3JpcHQ+XG5cdFx0XHQgKiAgICAgdmFyIGdzID0gd2luZG93LkdyZWVuU29ja0dsb2JhbHMgPSB7fTsgLy90aGUgbmV3ZXIgdmVyc2lvbiB3ZSdyZSBhYm91dCB0byBsb2FkIGNvdWxkIG5vdyBiZSByZWZlcmVuY2VkIGluIGEgXCJnc1wiIG9iamVjdCwgbGlrZSBncy5Ud2VlbkxpdGUudG8oLi4uKS4gVXNlIHdoYXRldmVyIGFsaWFzIHlvdSB3YW50IGFzIGxvbmcgYXMgaXQncyB1bmlxdWUsIFwiZ3NcIiBvciBcImJhbm5lclwiIG9yIHdoYXRldmVyLlxuXHRcdFx0ICogPC9zY3JpcHQ+XG5cdFx0XHQgKiA8c2NyaXB0IHNyYz1cImpzL2dyZWVuc29jay92MS43L1R3ZWVuTWF4LmpzXCI+PC9zY3JpcHQ+XG5cdFx0XHQgKiA8c2NyaXB0PlxuXHRcdFx0ICogICAgIHdpbmRvdy5HcmVlblNvY2tHbG9iYWxzID0gd2luZG93Ll9nc1F1ZXVlID0gd2luZG93Ll9nc0RlZmluZSA9IG51bGw7IC8vcmVzZXQgaXQgYmFjayB0byBudWxsIChhbG9uZyB3aXRoIHRoZSBzcGVjaWFsIF9nc1F1ZXVlIHZhcmlhYmxlKSBzbyB0aGF0IHRoZSBuZXh0IGxvYWQgb2YgVHdlZW5NYXggYWZmZWN0cyB0aGUgd2luZG93IGFuZCB3ZSBjYW4gcmVmZXJlbmNlIHRoaW5ncyBkaXJlY3RseSBsaWtlIFR3ZWVuTGl0ZS50byguLi4pXG5cdFx0XHQgKiA8L3NjcmlwdD5cblx0XHRcdCAqIDxzY3JpcHQgc3JjPVwianMvZ3JlZW5zb2NrL3YxLjYvVHdlZW5NYXguanNcIj48L3NjcmlwdD5cblx0XHRcdCAqIDxzY3JpcHQ+XG5cdFx0XHQgKiAgICAgZ3MuVHdlZW5MaXRlLnRvKC4uLik7IC8vd291bGQgdXNlIHYxLjdcblx0XHRcdCAqICAgICBUd2VlbkxpdGUudG8oLi4uKTsgLy93b3VsZCB1c2UgdjEuNlxuXHRcdFx0ICogPC9zY3JpcHQ+XG5cdFx0XHQgKlxuXHRcdFx0ICogQHBhcmFtIHshc3RyaW5nfSBucyBUaGUgbmFtZXNwYWNlIG9mIHRoZSBjbGFzcyBkZWZpbml0aW9uLCBsZWF2aW5nIG9mZiBcImNvbS5ncmVlbnNvY2suXCIgYXMgdGhhdCdzIGFzc3VtZWQuIEZvciBleGFtcGxlLCBcIlR3ZWVuTGl0ZVwiIG9yIFwicGx1Z2lucy5DU1NQbHVnaW5cIiBvciBcImVhc2luZy5CYWNrXCIuXG5cdFx0XHQgKiBAcGFyYW0geyFBcnJheS48c3RyaW5nPn0gZGVwZW5kZW5jaWVzIEFuIGFycmF5IG9mIGRlcGVuZGVuY2llcyAoZGVzY3JpYmVkIGFzIHRoZWlyIG5hbWVzcGFjZXMgbWludXMgXCJjb20uZ3JlZW5zb2NrLlwiIHByZWZpeCkuIEZvciBleGFtcGxlIFtcIlR3ZWVuTGl0ZVwiLFwicGx1Z2lucy5Ud2VlblBsdWdpblwiLFwiY29yZS5BbmltYXRpb25cIl1cblx0XHRcdCAqIEBwYXJhbSB7IWZ1bmN0aW9uKCk6T2JqZWN0fSBmdW5jIFRoZSBmdW5jdGlvbiB0aGF0IHNob3VsZCBiZSBjYWxsZWQgYW5kIHBhc3NlZCB0aGUgcmVzb2x2ZWQgZGVwZW5kZW5jaWVzIHdoaWNoIHdpbGwgcmV0dXJuIHRoZSBhY3R1YWwgY2xhc3MgZm9yIHRoaXMgZGVmaW5pdGlvbi5cblx0XHRcdCAqIEBwYXJhbSB7Ym9vbGVhbj19IGdsb2JhbCBJZiB0cnVlLCB0aGUgY2xhc3Mgd2lsbCBiZSBhZGRlZCB0byB0aGUgZ2xvYmFsIHNjb3BlICh0eXBpY2FsbHkgd2luZG93IHVubGVzcyB5b3UgZGVmaW5lIGEgd2luZG93LkdyZWVuU29ja0dsb2JhbHMgb2JqZWN0KVxuXHRcdFx0ICovXG5cdFx0XHREZWZpbml0aW9uID0gZnVuY3Rpb24obnMsIGRlcGVuZGVuY2llcywgZnVuYywgZ2xvYmFsKSB7XG5cdFx0XHRcdHRoaXMuc2MgPSAoX2RlZkxvb2t1cFtuc10pID8gX2RlZkxvb2t1cFtuc10uc2MgOiBbXTsgLy9zdWJjbGFzc2VzXG5cdFx0XHRcdF9kZWZMb29rdXBbbnNdID0gdGhpcztcblx0XHRcdFx0dGhpcy5nc0NsYXNzID0gbnVsbDtcblx0XHRcdFx0dGhpcy5mdW5jID0gZnVuYztcblx0XHRcdFx0dmFyIF9jbGFzc2VzID0gW107XG5cdFx0XHRcdHRoaXMuY2hlY2sgPSBmdW5jdGlvbihpbml0KSB7XG5cdFx0XHRcdFx0dmFyIGkgPSBkZXBlbmRlbmNpZXMubGVuZ3RoLFxuXHRcdFx0XHRcdFx0bWlzc2luZyA9IGksXG5cdFx0XHRcdFx0XHRjdXIsIGEsIG4sIGNsLCBoYXNNb2R1bGU7XG5cdFx0XHRcdFx0d2hpbGUgKC0taSA+IC0xKSB7XG5cdFx0XHRcdFx0XHRpZiAoKGN1ciA9IF9kZWZMb29rdXBbZGVwZW5kZW5jaWVzW2ldXSB8fCBuZXcgRGVmaW5pdGlvbihkZXBlbmRlbmNpZXNbaV0sIFtdKSkuZ3NDbGFzcykge1xuXHRcdFx0XHRcdFx0XHRfY2xhc3Nlc1tpXSA9IGN1ci5nc0NsYXNzO1xuXHRcdFx0XHRcdFx0XHRtaXNzaW5nLS07XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGluaXQpIHtcblx0XHRcdFx0XHRcdFx0Y3VyLnNjLnB1c2godGhpcyk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChtaXNzaW5nID09PSAwICYmIGZ1bmMpIHtcblx0XHRcdFx0XHRcdGEgPSAoXCJjb20uZ3JlZW5zb2NrLlwiICsgbnMpLnNwbGl0KFwiLlwiKTtcblx0XHRcdFx0XHRcdG4gPSBhLnBvcCgpO1xuXHRcdFx0XHRcdFx0Y2wgPSBfbmFtZXNwYWNlKGEuam9pbihcIi5cIikpW25dID0gdGhpcy5nc0NsYXNzID0gZnVuYy5hcHBseShmdW5jLCBfY2xhc3Nlcyk7XG5cblx0XHRcdFx0XHRcdC8vZXhwb3J0cyB0byBtdWx0aXBsZSBlbnZpcm9ubWVudHNcblx0XHRcdFx0XHRcdGlmIChnbG9iYWwpIHtcblx0XHRcdFx0XHRcdFx0X2dsb2JhbHNbbl0gPSBfZXhwb3J0c1tuXSA9IGNsOyAvL3Byb3ZpZGVzIGEgd2F5IHRvIGF2b2lkIGdsb2JhbCBuYW1lc3BhY2UgcG9sbHV0aW9uLiBCeSBkZWZhdWx0LCB0aGUgbWFpbiBjbGFzc2VzIGxpa2UgVHdlZW5MaXRlLCBQb3dlcjEsIFN0cm9uZywgZXRjLiBhcmUgYWRkZWQgdG8gd2luZG93IHVubGVzcyBhIEdyZWVuU29ja0dsb2JhbHMgaXMgZGVmaW5lZC4gU28gaWYgeW91IHdhbnQgdG8gaGF2ZSB0aGluZ3MgYWRkZWQgdG8gYSBjdXN0b20gb2JqZWN0IGluc3RlYWQsIGp1c3QgZG8gc29tZXRoaW5nIGxpa2Ugd2luZG93LkdyZWVuU29ja0dsb2JhbHMgPSB7fSBiZWZvcmUgbG9hZGluZyBhbnkgR3JlZW5Tb2NrIGZpbGVzLiBZb3UgY2FuIGV2ZW4gc2V0IHVwIGFuIGFsaWFzIGxpa2Ugd2luZG93LkdyZWVuU29ja0dsb2JhbHMgPSB3aW5kb3dzLmdzID0ge30gc28gdGhhdCB5b3UgY2FuIGFjY2VzcyBldmVyeXRoaW5nIGxpa2UgZ3MuVHdlZW5MaXRlLiBBbHNvIHJlbWVtYmVyIHRoYXQgQUxMIGNsYXNzZXMgYXJlIGFkZGVkIHRvIHRoZSB3aW5kb3cuY29tLmdyZWVuc29jayBvYmplY3QgKGluIHRoZWlyIHJlc3BlY3RpdmUgcGFja2FnZXMsIGxpa2UgY29tLmdyZWVuc29jay5lYXNpbmcuUG93ZXIxLCBjb20uZ3JlZW5zb2NrLlR3ZWVuTGl0ZSwgZXRjLilcblx0XHRcdFx0XHRcdFx0aGFzTW9kdWxlID0gKHR5cGVvZihtb2R1bGUpICE9PSBcInVuZGVmaW5lZFwiICYmIG1vZHVsZS5leHBvcnRzKTtcblx0XHRcdFx0XHRcdFx0aWYgKCFoYXNNb2R1bGUgJiYgdHlwZW9mKGRlZmluZSkgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKXsgLy9BTURcblx0XHRcdFx0XHRcdFx0XHRkZWZpbmUoKHdpbmRvdy5HcmVlblNvY2tBTURQYXRoID8gd2luZG93LkdyZWVuU29ja0FNRFBhdGggKyBcIi9cIiA6IFwiXCIpICsgbnMuc3BsaXQoXCIuXCIpLnBvcCgpLCBbXSwgZnVuY3Rpb24oKSB7IHJldHVybiBjbDsgfSk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoaGFzTW9kdWxlKXsgLy9ub2RlXG5cdFx0XHRcdFx0XHRcdFx0aWYgKG5zID09PSBtb2R1bGVOYW1lKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRtb2R1bGUuZXhwb3J0cyA9IF9leHBvcnRzW21vZHVsZU5hbWVdID0gY2w7XG5cdFx0XHRcdFx0XHRcdFx0XHRmb3IgKGkgaW4gX2V4cG9ydHMpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xbaV0gPSBfZXhwb3J0c1tpXTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKF9leHBvcnRzW21vZHVsZU5hbWVdKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRfZXhwb3J0c1ttb2R1bGVOYW1lXVtuXSA9IGNsO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Zm9yIChpID0gMDsgaSA8IHRoaXMuc2MubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5zY1tpXS5jaGVjaygpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHRcdFx0dGhpcy5jaGVjayh0cnVlKTtcblx0XHRcdH0sXG5cblx0XHRcdC8vdXNlZCB0byBjcmVhdGUgRGVmaW5pdGlvbiBpbnN0YW5jZXMgKHdoaWNoIGJhc2ljYWxseSByZWdpc3RlcnMgYSBjbGFzcyB0aGF0IGhhcyBkZXBlbmRlbmNpZXMpLlxuXHRcdFx0X2dzRGVmaW5lID0gd2luZG93Ll9nc0RlZmluZSA9IGZ1bmN0aW9uKG5zLCBkZXBlbmRlbmNpZXMsIGZ1bmMsIGdsb2JhbCkge1xuXHRcdFx0XHRyZXR1cm4gbmV3IERlZmluaXRpb24obnMsIGRlcGVuZGVuY2llcywgZnVuYywgZ2xvYmFsKTtcblx0XHRcdH0sXG5cblx0XHRcdC8vYSBxdWljayB3YXkgdG8gY3JlYXRlIGEgY2xhc3MgdGhhdCBkb2Vzbid0IGhhdmUgYW55IGRlcGVuZGVuY2llcy4gUmV0dXJucyB0aGUgY2xhc3MsIGJ1dCBmaXJzdCByZWdpc3RlcnMgaXQgaW4gdGhlIEdyZWVuU29jayBuYW1lc3BhY2Ugc28gdGhhdCBvdGhlciBjbGFzc2VzIGNhbiBncmFiIGl0IChvdGhlciBjbGFzc2VzIG1pZ2h0IGJlIGRlcGVuZGVudCBvbiB0aGUgY2xhc3MpLlxuXHRcdFx0X2NsYXNzID0gZ3MuX2NsYXNzID0gZnVuY3Rpb24obnMsIGZ1bmMsIGdsb2JhbCkge1xuXHRcdFx0XHRmdW5jID0gZnVuYyB8fCBmdW5jdGlvbigpIHt9O1xuXHRcdFx0XHRfZ3NEZWZpbmUobnMsIFtdLCBmdW5jdGlvbigpeyByZXR1cm4gZnVuYzsgfSwgZ2xvYmFsKTtcblx0XHRcdFx0cmV0dXJuIGZ1bmM7XG5cdFx0XHR9O1xuXG5cdFx0X2dzRGVmaW5lLmdsb2JhbHMgPSBfZ2xvYmFscztcblxuXG5cbi8qXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBFYXNlXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKi9cblx0XHR2YXIgX2Jhc2VQYXJhbXMgPSBbMCwgMCwgMSwgMV0sXG5cdFx0XHRfYmxhbmtBcnJheSA9IFtdLFxuXHRcdFx0RWFzZSA9IF9jbGFzcyhcImVhc2luZy5FYXNlXCIsIGZ1bmN0aW9uKGZ1bmMsIGV4dHJhUGFyYW1zLCB0eXBlLCBwb3dlcikge1xuXHRcdFx0XHR0aGlzLl9mdW5jID0gZnVuYztcblx0XHRcdFx0dGhpcy5fdHlwZSA9IHR5cGUgfHwgMDtcblx0XHRcdFx0dGhpcy5fcG93ZXIgPSBwb3dlciB8fCAwO1xuXHRcdFx0XHR0aGlzLl9wYXJhbXMgPSBleHRyYVBhcmFtcyA/IF9iYXNlUGFyYW1zLmNvbmNhdChleHRyYVBhcmFtcykgOiBfYmFzZVBhcmFtcztcblx0XHRcdH0sIHRydWUpLFxuXHRcdFx0X2Vhc2VNYXAgPSBFYXNlLm1hcCA9IHt9LFxuXHRcdFx0X2Vhc2VSZWcgPSBFYXNlLnJlZ2lzdGVyID0gZnVuY3Rpb24oZWFzZSwgbmFtZXMsIHR5cGVzLCBjcmVhdGUpIHtcblx0XHRcdFx0dmFyIG5hID0gbmFtZXMuc3BsaXQoXCIsXCIpLFxuXHRcdFx0XHRcdGkgPSBuYS5sZW5ndGgsXG5cdFx0XHRcdFx0dGEgPSAodHlwZXMgfHwgXCJlYXNlSW4sZWFzZU91dCxlYXNlSW5PdXRcIikuc3BsaXQoXCIsXCIpLFxuXHRcdFx0XHRcdGUsIG5hbWUsIGosIHR5cGU7XG5cdFx0XHRcdHdoaWxlICgtLWkgPiAtMSkge1xuXHRcdFx0XHRcdG5hbWUgPSBuYVtpXTtcblx0XHRcdFx0XHRlID0gY3JlYXRlID8gX2NsYXNzKFwiZWFzaW5nLlwiK25hbWUsIG51bGwsIHRydWUpIDogZ3MuZWFzaW5nW25hbWVdIHx8IHt9O1xuXHRcdFx0XHRcdGogPSB0YS5sZW5ndGg7XG5cdFx0XHRcdFx0d2hpbGUgKC0taiA+IC0xKSB7XG5cdFx0XHRcdFx0XHR0eXBlID0gdGFbal07XG5cdFx0XHRcdFx0XHRfZWFzZU1hcFtuYW1lICsgXCIuXCIgKyB0eXBlXSA9IF9lYXNlTWFwW3R5cGUgKyBuYW1lXSA9IGVbdHlwZV0gPSBlYXNlLmdldFJhdGlvID8gZWFzZSA6IGVhc2VbdHlwZV0gfHwgbmV3IGVhc2UoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHRwID0gRWFzZS5wcm90b3R5cGU7XG5cdFx0cC5fY2FsY0VuZCA9IGZhbHNlO1xuXHRcdHAuZ2V0UmF0aW8gPSBmdW5jdGlvbihwKSB7XG5cdFx0XHRpZiAodGhpcy5fZnVuYykge1xuXHRcdFx0XHR0aGlzLl9wYXJhbXNbMF0gPSBwO1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5fZnVuYy5hcHBseShudWxsLCB0aGlzLl9wYXJhbXMpO1xuXHRcdFx0fVxuXHRcdFx0dmFyIHQgPSB0aGlzLl90eXBlLFxuXHRcdFx0XHRwdyA9IHRoaXMuX3Bvd2VyLFxuXHRcdFx0XHRyID0gKHQgPT09IDEpID8gMSAtIHAgOiAodCA9PT0gMikgPyBwIDogKHAgPCAwLjUpID8gcCAqIDIgOiAoMSAtIHApICogMjtcblx0XHRcdGlmIChwdyA9PT0gMSkge1xuXHRcdFx0XHRyICo9IHI7XG5cdFx0XHR9IGVsc2UgaWYgKHB3ID09PSAyKSB7XG5cdFx0XHRcdHIgKj0gciAqIHI7XG5cdFx0XHR9IGVsc2UgaWYgKHB3ID09PSAzKSB7XG5cdFx0XHRcdHIgKj0gciAqIHIgKiByO1xuXHRcdFx0fSBlbHNlIGlmIChwdyA9PT0gNCkge1xuXHRcdFx0XHRyICo9IHIgKiByICogciAqIHI7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gKHQgPT09IDEpID8gMSAtIHIgOiAodCA9PT0gMikgPyByIDogKHAgPCAwLjUpID8gciAvIDIgOiAxIC0gKHIgLyAyKTtcblx0XHR9O1xuXG5cdFx0Ly9jcmVhdGUgYWxsIHRoZSBzdGFuZGFyZCBlYXNlcyBsaWtlIExpbmVhciwgUXVhZCwgQ3ViaWMsIFF1YXJ0LCBRdWludCwgU3Ryb25nLCBQb3dlcjAsIFBvd2VyMSwgUG93ZXIyLCBQb3dlcjMsIGFuZCBQb3dlcjQgKGVhY2ggd2l0aCBlYXNlSW4sIGVhc2VPdXQsIGFuZCBlYXNlSW5PdXQpXG5cdFx0YSA9IFtcIkxpbmVhclwiLFwiUXVhZFwiLFwiQ3ViaWNcIixcIlF1YXJ0XCIsXCJRdWludCxTdHJvbmdcIl07XG5cdFx0aSA9IGEubGVuZ3RoO1xuXHRcdHdoaWxlICgtLWkgPiAtMSkge1xuXHRcdFx0cCA9IGFbaV0rXCIsUG93ZXJcIitpO1xuXHRcdFx0X2Vhc2VSZWcobmV3IEVhc2UobnVsbCxudWxsLDEsaSksIHAsIFwiZWFzZU91dFwiLCB0cnVlKTtcblx0XHRcdF9lYXNlUmVnKG5ldyBFYXNlKG51bGwsbnVsbCwyLGkpLCBwLCBcImVhc2VJblwiICsgKChpID09PSAwKSA/IFwiLGVhc2VOb25lXCIgOiBcIlwiKSk7XG5cdFx0XHRfZWFzZVJlZyhuZXcgRWFzZShudWxsLG51bGwsMyxpKSwgcCwgXCJlYXNlSW5PdXRcIik7XG5cdFx0fVxuXHRcdF9lYXNlTWFwLmxpbmVhciA9IGdzLmVhc2luZy5MaW5lYXIuZWFzZUluO1xuXHRcdF9lYXNlTWFwLnN3aW5nID0gZ3MuZWFzaW5nLlF1YWQuZWFzZUluT3V0OyAvL2ZvciBqUXVlcnkgZm9sa3NcblxuXG4vKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogRXZlbnREaXNwYXRjaGVyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKi9cblx0XHR2YXIgRXZlbnREaXNwYXRjaGVyID0gX2NsYXNzKFwiZXZlbnRzLkV2ZW50RGlzcGF0Y2hlclwiLCBmdW5jdGlvbih0YXJnZXQpIHtcblx0XHRcdHRoaXMuX2xpc3RlbmVycyA9IHt9O1xuXHRcdFx0dGhpcy5fZXZlbnRUYXJnZXQgPSB0YXJnZXQgfHwgdGhpcztcblx0XHR9KTtcblx0XHRwID0gRXZlbnREaXNwYXRjaGVyLnByb3RvdHlwZTtcblxuXHRcdHAuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uKHR5cGUsIGNhbGxiYWNrLCBzY29wZSwgdXNlUGFyYW0sIHByaW9yaXR5KSB7XG5cdFx0XHRwcmlvcml0eSA9IHByaW9yaXR5IHx8IDA7XG5cdFx0XHR2YXIgbGlzdCA9IHRoaXMuX2xpc3RlbmVyc1t0eXBlXSxcblx0XHRcdFx0aW5kZXggPSAwLFxuXHRcdFx0XHRsaXN0ZW5lciwgaTtcblx0XHRcdGlmICh0aGlzID09PSBfdGlja2VyICYmICFfdGlja2VyQWN0aXZlKSB7XG5cdFx0XHRcdF90aWNrZXIud2FrZSgpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKGxpc3QgPT0gbnVsbCkge1xuXHRcdFx0XHR0aGlzLl9saXN0ZW5lcnNbdHlwZV0gPSBsaXN0ID0gW107XG5cdFx0XHR9XG5cdFx0XHRpID0gbGlzdC5sZW5ndGg7XG5cdFx0XHR3aGlsZSAoLS1pID4gLTEpIHtcblx0XHRcdFx0bGlzdGVuZXIgPSBsaXN0W2ldO1xuXHRcdFx0XHRpZiAobGlzdGVuZXIuYyA9PT0gY2FsbGJhY2sgJiYgbGlzdGVuZXIucyA9PT0gc2NvcGUpIHtcblx0XHRcdFx0XHRsaXN0LnNwbGljZShpLCAxKTtcblx0XHRcdFx0fSBlbHNlIGlmIChpbmRleCA9PT0gMCAmJiBsaXN0ZW5lci5wciA8IHByaW9yaXR5KSB7XG5cdFx0XHRcdFx0aW5kZXggPSBpICsgMTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0bGlzdC5zcGxpY2UoaW5kZXgsIDAsIHtjOmNhbGxiYWNrLCBzOnNjb3BlLCB1cDp1c2VQYXJhbSwgcHI6cHJpb3JpdHl9KTtcblx0XHR9O1xuXG5cdFx0cC5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24odHlwZSwgY2FsbGJhY2spIHtcblx0XHRcdHZhciBsaXN0ID0gdGhpcy5fbGlzdGVuZXJzW3R5cGVdLCBpO1xuXHRcdFx0aWYgKGxpc3QpIHtcblx0XHRcdFx0aSA9IGxpc3QubGVuZ3RoO1xuXHRcdFx0XHR3aGlsZSAoLS1pID4gLTEpIHtcblx0XHRcdFx0XHRpZiAobGlzdFtpXS5jID09PSBjYWxsYmFjaykge1xuXHRcdFx0XHRcdFx0bGlzdC5zcGxpY2UoaSwgMSk7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdHAuZGlzcGF0Y2hFdmVudCA9IGZ1bmN0aW9uKHR5cGUpIHtcblx0XHRcdHZhciBsaXN0ID0gdGhpcy5fbGlzdGVuZXJzW3R5cGVdLFxuXHRcdFx0XHRpLCB0LCBsaXN0ZW5lcjtcblx0XHRcdGlmIChsaXN0KSB7XG5cdFx0XHRcdGkgPSBsaXN0Lmxlbmd0aDtcblx0XHRcdFx0aWYgKGkgPiAxKSB7IFxuXHRcdFx0XHRcdGxpc3QgPSBsaXN0LnNsaWNlKDApOyAvL2luIGNhc2UgYWRkRXZlbnRMaXN0ZW5lcigpIGlzIGNhbGxlZCBmcm9tIHdpdGhpbiBhIGxpc3RlbmVyL2NhbGxiYWNrIChvdGhlcndpc2UgdGhlIGluZGV4IGNvdWxkIGNoYW5nZSwgcmVzdWx0aW5nIGluIGEgc2tpcClcblx0XHRcdFx0fVxuXHRcdFx0XHR0ID0gdGhpcy5fZXZlbnRUYXJnZXQ7XG5cdFx0XHRcdHdoaWxlICgtLWkgPiAtMSkge1xuXHRcdFx0XHRcdGxpc3RlbmVyID0gbGlzdFtpXTtcblx0XHRcdFx0XHRpZiAobGlzdGVuZXIpIHtcblx0XHRcdFx0XHRcdGlmIChsaXN0ZW5lci51cCkge1xuXHRcdFx0XHRcdFx0XHRsaXN0ZW5lci5jLmNhbGwobGlzdGVuZXIucyB8fCB0LCB7dHlwZTp0eXBlLCB0YXJnZXQ6dH0pO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0bGlzdGVuZXIuYy5jYWxsKGxpc3RlbmVyLnMgfHwgdCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblxuXG4vKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogVGlja2VyXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKi9cbiBcdFx0dmFyIF9yZXFBbmltRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lLFxuXHRcdFx0X2NhbmNlbEFuaW1GcmFtZSA9IHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSxcblx0XHRcdF9nZXRUaW1lID0gRGF0ZS5ub3cgfHwgZnVuY3Rpb24oKSB7cmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO30sXG5cdFx0XHRfbGFzdFVwZGF0ZSA9IF9nZXRUaW1lKCk7XG5cblx0XHQvL25vdyB0cnkgdG8gZGV0ZXJtaW5lIHRoZSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgYW5kIGNhbmNlbEFuaW1hdGlvbkZyYW1lIGZ1bmN0aW9ucyBhbmQgaWYgbm9uZSBhcmUgZm91bmQsIHdlJ2xsIHVzZSBhIHNldFRpbWVvdXQoKS9jbGVhclRpbWVvdXQoKSBwb2x5ZmlsbC5cblx0XHRhID0gW1wibXNcIixcIm1velwiLFwid2Via2l0XCIsXCJvXCJdO1xuXHRcdGkgPSBhLmxlbmd0aDtcblx0XHR3aGlsZSAoLS1pID4gLTEgJiYgIV9yZXFBbmltRnJhbWUpIHtcblx0XHRcdF9yZXFBbmltRnJhbWUgPSB3aW5kb3dbYVtpXSArIFwiUmVxdWVzdEFuaW1hdGlvbkZyYW1lXCJdO1xuXHRcdFx0X2NhbmNlbEFuaW1GcmFtZSA9IHdpbmRvd1thW2ldICsgXCJDYW5jZWxBbmltYXRpb25GcmFtZVwiXSB8fCB3aW5kb3dbYVtpXSArIFwiQ2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lXCJdO1xuXHRcdH1cblxuXHRcdF9jbGFzcyhcIlRpY2tlclwiLCBmdW5jdGlvbihmcHMsIHVzZVJBRikge1xuXHRcdFx0dmFyIF9zZWxmID0gdGhpcyxcblx0XHRcdFx0X3N0YXJ0VGltZSA9IF9nZXRUaW1lKCksXG5cdFx0XHRcdF91c2VSQUYgPSAodXNlUkFGICE9PSBmYWxzZSAmJiBfcmVxQW5pbUZyYW1lKSA/IFwiYXV0b1wiIDogZmFsc2UsXG5cdFx0XHRcdF9sYWdUaHJlc2hvbGQgPSA1MDAsXG5cdFx0XHRcdF9hZGp1c3RlZExhZyA9IDMzLFxuXHRcdFx0XHRfdGlja1dvcmQgPSBcInRpY2tcIiwgLy9oZWxwcyByZWR1Y2UgZ2MgYnVyZGVuXG5cdFx0XHRcdF9mcHMsIF9yZXEsIF9pZCwgX2dhcCwgX25leHRUaW1lLFxuXHRcdFx0XHRfdGljayA9IGZ1bmN0aW9uKG1hbnVhbCkge1xuXHRcdFx0XHRcdHZhciBlbGFwc2VkID0gX2dldFRpbWUoKSAtIF9sYXN0VXBkYXRlLFxuXHRcdFx0XHRcdFx0b3ZlcmxhcCwgZGlzcGF0Y2g7XG5cdFx0XHRcdFx0aWYgKGVsYXBzZWQgPiBfbGFnVGhyZXNob2xkKSB7XG5cdFx0XHRcdFx0XHRfc3RhcnRUaW1lICs9IGVsYXBzZWQgLSBfYWRqdXN0ZWRMYWc7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdF9sYXN0VXBkYXRlICs9IGVsYXBzZWQ7XG5cdFx0XHRcdFx0X3NlbGYudGltZSA9IChfbGFzdFVwZGF0ZSAtIF9zdGFydFRpbWUpIC8gMTAwMDtcblx0XHRcdFx0XHRvdmVybGFwID0gX3NlbGYudGltZSAtIF9uZXh0VGltZTtcblx0XHRcdFx0XHRpZiAoIV9mcHMgfHwgb3ZlcmxhcCA+IDAgfHwgbWFudWFsID09PSB0cnVlKSB7XG5cdFx0XHRcdFx0XHRfc2VsZi5mcmFtZSsrO1xuXHRcdFx0XHRcdFx0X25leHRUaW1lICs9IG92ZXJsYXAgKyAob3ZlcmxhcCA+PSBfZ2FwID8gMC4wMDQgOiBfZ2FwIC0gb3ZlcmxhcCk7XG5cdFx0XHRcdFx0XHRkaXNwYXRjaCA9IHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChtYW51YWwgIT09IHRydWUpIHsgLy9tYWtlIHN1cmUgdGhlIHJlcXVlc3QgaXMgbWFkZSBiZWZvcmUgd2UgZGlzcGF0Y2ggdGhlIFwidGlja1wiIGV2ZW50IHNvIHRoYXQgdGltaW5nIGlzIG1haW50YWluZWQuIE90aGVyd2lzZSwgaWYgcHJvY2Vzc2luZyB0aGUgXCJ0aWNrXCIgcmVxdWlyZXMgYSBidW5jaCBvZiB0aW1lIChsaWtlIDE1bXMpIGFuZCB3ZSdyZSB1c2luZyBhIHNldFRpbWVvdXQoKSB0aGF0J3MgYmFzZWQgb24gMTYuN21zLCBpdCdkIHRlY2huaWNhbGx5IHRha2UgMzEuN21zIGJldHdlZW4gZnJhbWVzIG90aGVyd2lzZS5cblx0XHRcdFx0XHRcdF9pZCA9IF9yZXEoX3RpY2spO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoZGlzcGF0Y2gpIHtcblx0XHRcdFx0XHRcdF9zZWxmLmRpc3BhdGNoRXZlbnQoX3RpY2tXb3JkKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cblx0XHRcdEV2ZW50RGlzcGF0Y2hlci5jYWxsKF9zZWxmKTtcblx0XHRcdF9zZWxmLnRpbWUgPSBfc2VsZi5mcmFtZSA9IDA7XG5cdFx0XHRfc2VsZi50aWNrID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdF90aWNrKHRydWUpO1xuXHRcdFx0fTtcblxuXHRcdFx0X3NlbGYubGFnU21vb3RoaW5nID0gZnVuY3Rpb24odGhyZXNob2xkLCBhZGp1c3RlZExhZykge1xuXHRcdFx0XHRfbGFnVGhyZXNob2xkID0gdGhyZXNob2xkIHx8ICgxIC8gX3RpbnlOdW0pOyAvL3plcm8gc2hvdWxkIGJlIGludGVycHJldGVkIGFzIGJhc2ljYWxseSB1bmxpbWl0ZWRcblx0XHRcdFx0X2FkanVzdGVkTGFnID0gTWF0aC5taW4oYWRqdXN0ZWRMYWcsIF9sYWdUaHJlc2hvbGQsIDApO1xuXHRcdFx0fTtcblxuXHRcdFx0X3NlbGYuc2xlZXAgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKF9pZCA9PSBudWxsKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICghX3VzZVJBRiB8fCAhX2NhbmNlbEFuaW1GcmFtZSkge1xuXHRcdFx0XHRcdGNsZWFyVGltZW91dChfaWQpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdF9jYW5jZWxBbmltRnJhbWUoX2lkKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRfcmVxID0gX2VtcHR5RnVuYztcblx0XHRcdFx0X2lkID0gbnVsbDtcblx0XHRcdFx0aWYgKF9zZWxmID09PSBfdGlja2VyKSB7XG5cdFx0XHRcdFx0X3RpY2tlckFjdGl2ZSA9IGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHRfc2VsZi53YWtlID0gZnVuY3Rpb24oc2VhbWxlc3MpIHtcblx0XHRcdFx0aWYgKF9pZCAhPT0gbnVsbCkge1xuXHRcdFx0XHRcdF9zZWxmLnNsZWVwKCk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoc2VhbWxlc3MpIHtcblx0XHRcdFx0XHRfc3RhcnRUaW1lICs9IC1fbGFzdFVwZGF0ZSArIChfbGFzdFVwZGF0ZSA9IF9nZXRUaW1lKCkpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKF9zZWxmLmZyYW1lID4gMTApIHsgLy9kb24ndCB0cmlnZ2VyIGxhZ1Ntb290aGluZyBpZiB3ZSdyZSBqdXN0IHdha2luZyB1cCwgYW5kIG1ha2Ugc3VyZSB0aGF0IGF0IGxlYXN0IDEwIGZyYW1lcyBoYXZlIGVsYXBzZWQgYmVjYXVzZSBvZiB0aGUgaU9TIGJ1ZyB0aGF0IHdlIHdvcmsgYXJvdW5kIGJlbG93IHdpdGggdGhlIDEuNS1zZWNvbmQgc2V0VGltb3V0KCkuXG5cdFx0XHRcdFx0X2xhc3RVcGRhdGUgPSBfZ2V0VGltZSgpIC0gX2xhZ1RocmVzaG9sZCArIDU7XG5cdFx0XHRcdH1cblx0XHRcdFx0X3JlcSA9IChfZnBzID09PSAwKSA/IF9lbXB0eUZ1bmMgOiAoIV91c2VSQUYgfHwgIV9yZXFBbmltRnJhbWUpID8gZnVuY3Rpb24oZikgeyByZXR1cm4gc2V0VGltZW91dChmLCAoKF9uZXh0VGltZSAtIF9zZWxmLnRpbWUpICogMTAwMCArIDEpIHwgMCk7IH0gOiBfcmVxQW5pbUZyYW1lO1xuXHRcdFx0XHRpZiAoX3NlbGYgPT09IF90aWNrZXIpIHtcblx0XHRcdFx0XHRfdGlja2VyQWN0aXZlID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRfdGljaygyKTtcblx0XHRcdH07XG5cblx0XHRcdF9zZWxmLmZwcyA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XHRcdGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuXHRcdFx0XHRcdHJldHVybiBfZnBzO1xuXHRcdFx0XHR9XG5cdFx0XHRcdF9mcHMgPSB2YWx1ZTtcblx0XHRcdFx0X2dhcCA9IDEgLyAoX2ZwcyB8fCA2MCk7XG5cdFx0XHRcdF9uZXh0VGltZSA9IHRoaXMudGltZSArIF9nYXA7XG5cdFx0XHRcdF9zZWxmLndha2UoKTtcblx0XHRcdH07XG5cblx0XHRcdF9zZWxmLnVzZVJBRiA9IGZ1bmN0aW9uKHZhbHVlKSB7XG5cdFx0XHRcdGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuXHRcdFx0XHRcdHJldHVybiBfdXNlUkFGO1xuXHRcdFx0XHR9XG5cdFx0XHRcdF9zZWxmLnNsZWVwKCk7XG5cdFx0XHRcdF91c2VSQUYgPSB2YWx1ZTtcblx0XHRcdFx0X3NlbGYuZnBzKF9mcHMpO1xuXHRcdFx0fTtcblx0XHRcdF9zZWxmLmZwcyhmcHMpO1xuXG5cdFx0XHQvL2EgYnVnIGluIGlPUyA2IFNhZmFyaSBvY2Nhc2lvbmFsbHkgcHJldmVudHMgdGhlIHJlcXVlc3RBbmltYXRpb25GcmFtZSBmcm9tIHdvcmtpbmcgaW5pdGlhbGx5LCBzbyB3ZSB1c2UgYSAxLjUtc2Vjb25kIHRpbWVvdXQgdGhhdCBhdXRvbWF0aWNhbGx5IGZhbGxzIGJhY2sgdG8gc2V0VGltZW91dCgpIGlmIGl0IHNlbnNlcyB0aGlzIGNvbmRpdGlvbi5cblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmIChfdXNlUkFGID09PSBcImF1dG9cIiAmJiBfc2VsZi5mcmFtZSA8IDUgJiYgX2RvYy52aXNpYmlsaXR5U3RhdGUgIT09IFwiaGlkZGVuXCIpIHtcblx0XHRcdFx0XHRfc2VsZi51c2VSQUYoZmFsc2UpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LCAxNTAwKTtcblx0XHR9KTtcblxuXHRcdHAgPSBncy5UaWNrZXIucHJvdG90eXBlID0gbmV3IGdzLmV2ZW50cy5FdmVudERpc3BhdGNoZXIoKTtcblx0XHRwLmNvbnN0cnVjdG9yID0gZ3MuVGlja2VyO1xuXG5cbi8qXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBBbmltYXRpb25cbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqL1xuXHRcdHZhciBBbmltYXRpb24gPSBfY2xhc3MoXCJjb3JlLkFuaW1hdGlvblwiLCBmdW5jdGlvbihkdXJhdGlvbiwgdmFycykge1xuXHRcdFx0XHR0aGlzLnZhcnMgPSB2YXJzID0gdmFycyB8fCB7fTtcblx0XHRcdFx0dGhpcy5fZHVyYXRpb24gPSB0aGlzLl90b3RhbER1cmF0aW9uID0gZHVyYXRpb24gfHwgMDtcblx0XHRcdFx0dGhpcy5fZGVsYXkgPSBOdW1iZXIodmFycy5kZWxheSkgfHwgMDtcblx0XHRcdFx0dGhpcy5fdGltZVNjYWxlID0gMTtcblx0XHRcdFx0dGhpcy5fYWN0aXZlID0gKHZhcnMuaW1tZWRpYXRlUmVuZGVyID09PSB0cnVlKTtcblx0XHRcdFx0dGhpcy5kYXRhID0gdmFycy5kYXRhO1xuXHRcdFx0XHR0aGlzLl9yZXZlcnNlZCA9ICh2YXJzLnJldmVyc2VkID09PSB0cnVlKTtcblxuXHRcdFx0XHRpZiAoIV9yb290VGltZWxpbmUpIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCFfdGlja2VyQWN0aXZlKSB7IC8vc29tZSBicm93c2VycyAobGlrZSBpT1MgNiBTYWZhcmkpIHNodXQgZG93biBKYXZhU2NyaXB0IGV4ZWN1dGlvbiB3aGVuIHRoZSB0YWIgaXMgZGlzYWJsZWQgYW5kIHRoZXkgW29jY2FzaW9uYWxseV0gbmVnbGVjdCB0byBzdGFydCB1cCByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgYWdhaW4gd2hlbiByZXR1cm5pbmcgLSB0aGlzIGNvZGUgZW5zdXJlcyB0aGF0IHRoZSBlbmdpbmUgc3RhcnRzIHVwIGFnYWluIHByb3Blcmx5LlxuXHRcdFx0XHRcdF90aWNrZXIud2FrZSgpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dmFyIHRsID0gdGhpcy52YXJzLnVzZUZyYW1lcyA/IF9yb290RnJhbWVzVGltZWxpbmUgOiBfcm9vdFRpbWVsaW5lO1xuXHRcdFx0XHR0bC5hZGQodGhpcywgdGwuX3RpbWUpO1xuXG5cdFx0XHRcdGlmICh0aGlzLnZhcnMucGF1c2VkKSB7XG5cdFx0XHRcdFx0dGhpcy5wYXVzZWQodHJ1ZSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0X3RpY2tlciA9IEFuaW1hdGlvbi50aWNrZXIgPSBuZXcgZ3MuVGlja2VyKCk7XG5cdFx0cCA9IEFuaW1hdGlvbi5wcm90b3R5cGU7XG5cdFx0cC5fZGlydHkgPSBwLl9nYyA9IHAuX2luaXR0ZWQgPSBwLl9wYXVzZWQgPSBmYWxzZTtcblx0XHRwLl90b3RhbFRpbWUgPSBwLl90aW1lID0gMDtcblx0XHRwLl9yYXdQcmV2VGltZSA9IC0xO1xuXHRcdHAuX25leHQgPSBwLl9sYXN0ID0gcC5fb25VcGRhdGUgPSBwLl90aW1lbGluZSA9IHAudGltZWxpbmUgPSBudWxsO1xuXHRcdHAuX3BhdXNlZCA9IGZhbHNlO1xuXG5cblx0XHQvL3NvbWUgYnJvd3NlcnMgKGxpa2UgaU9TKSBvY2Nhc2lvbmFsbHkgZHJvcCB0aGUgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIGV2ZW50IHdoZW4gdGhlIHVzZXIgc3dpdGNoZXMgdG8gYSBkaWZmZXJlbnQgdGFiIGFuZCB0aGVuIGNvbWVzIGJhY2sgYWdhaW4sIHNvIHdlIHVzZSBhIDItc2Vjb25kIHNldFRpbWVvdXQoKSB0byBzZW5zZSBpZi93aGVuIHRoYXQgY29uZGl0aW9uIG9jY3VycyBhbmQgdGhlbiB3YWtlKCkgdGhlIHRpY2tlci5cblx0XHR2YXIgX2NoZWNrVGltZW91dCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoX3RpY2tlckFjdGl2ZSAmJiBfZ2V0VGltZSgpIC0gX2xhc3RVcGRhdGUgPiAyMDAwKSB7XG5cdFx0XHRcdFx0X3RpY2tlci53YWtlKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0c2V0VGltZW91dChfY2hlY2tUaW1lb3V0LCAyMDAwKTtcblx0XHRcdH07XG5cdFx0X2NoZWNrVGltZW91dCgpO1xuXG5cblx0XHRwLnBsYXkgPSBmdW5jdGlvbihmcm9tLCBzdXBwcmVzc0V2ZW50cykge1xuXHRcdFx0aWYgKGZyb20gIT0gbnVsbCkge1xuXHRcdFx0XHR0aGlzLnNlZWsoZnJvbSwgc3VwcHJlc3NFdmVudHMpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXMucmV2ZXJzZWQoZmFsc2UpLnBhdXNlZChmYWxzZSk7XG5cdFx0fTtcblxuXHRcdHAucGF1c2UgPSBmdW5jdGlvbihhdFRpbWUsIHN1cHByZXNzRXZlbnRzKSB7XG5cdFx0XHRpZiAoYXRUaW1lICE9IG51bGwpIHtcblx0XHRcdFx0dGhpcy5zZWVrKGF0VGltZSwgc3VwcHJlc3NFdmVudHMpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXMucGF1c2VkKHRydWUpO1xuXHRcdH07XG5cblx0XHRwLnJlc3VtZSA9IGZ1bmN0aW9uKGZyb20sIHN1cHByZXNzRXZlbnRzKSB7XG5cdFx0XHRpZiAoZnJvbSAhPSBudWxsKSB7XG5cdFx0XHRcdHRoaXMuc2Vlayhmcm9tLCBzdXBwcmVzc0V2ZW50cyk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdGhpcy5wYXVzZWQoZmFsc2UpO1xuXHRcdH07XG5cblx0XHRwLnNlZWsgPSBmdW5jdGlvbih0aW1lLCBzdXBwcmVzc0V2ZW50cykge1xuXHRcdFx0cmV0dXJuIHRoaXMudG90YWxUaW1lKE51bWJlcih0aW1lKSwgc3VwcHJlc3NFdmVudHMgIT09IGZhbHNlKTtcblx0XHR9O1xuXG5cdFx0cC5yZXN0YXJ0ID0gZnVuY3Rpb24oaW5jbHVkZURlbGF5LCBzdXBwcmVzc0V2ZW50cykge1xuXHRcdFx0cmV0dXJuIHRoaXMucmV2ZXJzZWQoZmFsc2UpLnBhdXNlZChmYWxzZSkudG90YWxUaW1lKGluY2x1ZGVEZWxheSA/IC10aGlzLl9kZWxheSA6IDAsIChzdXBwcmVzc0V2ZW50cyAhPT0gZmFsc2UpLCB0cnVlKTtcblx0XHR9O1xuXG5cdFx0cC5yZXZlcnNlID0gZnVuY3Rpb24oZnJvbSwgc3VwcHJlc3NFdmVudHMpIHtcblx0XHRcdGlmIChmcm9tICE9IG51bGwpIHtcblx0XHRcdFx0dGhpcy5zZWVrKChmcm9tIHx8IHRoaXMudG90YWxEdXJhdGlvbigpKSwgc3VwcHJlc3NFdmVudHMpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXMucmV2ZXJzZWQodHJ1ZSkucGF1c2VkKGZhbHNlKTtcblx0XHR9O1xuXG5cdFx0cC5yZW5kZXIgPSBmdW5jdGlvbih0aW1lLCBzdXBwcmVzc0V2ZW50cywgZm9yY2UpIHtcblx0XHRcdC8vc3R1YiAtIHdlIG92ZXJyaWRlIHRoaXMgbWV0aG9kIGluIHN1YmNsYXNzZXMuXG5cdFx0fTtcblxuXHRcdHAuaW52YWxpZGF0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0dGhpcy5fdGltZSA9IHRoaXMuX3RvdGFsVGltZSA9IDA7XG5cdFx0XHR0aGlzLl9pbml0dGVkID0gdGhpcy5fZ2MgPSBmYWxzZTtcblx0XHRcdHRoaXMuX3Jhd1ByZXZUaW1lID0gLTE7XG5cdFx0XHRpZiAodGhpcy5fZ2MgfHwgIXRoaXMudGltZWxpbmUpIHtcblx0XHRcdFx0dGhpcy5fZW5hYmxlZCh0cnVlKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH07XG5cblx0XHRwLmlzQWN0aXZlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgdGwgPSB0aGlzLl90aW1lbGluZSwgLy90aGUgMiByb290IHRpbWVsaW5lcyB3b24ndCBoYXZlIGEgX3RpbWVsaW5lOyB0aGV5J3JlIGFsd2F5cyBhY3RpdmUuXG5cdFx0XHRcdHN0YXJ0VGltZSA9IHRoaXMuX3N0YXJ0VGltZSxcblx0XHRcdFx0cmF3VGltZTtcblx0XHRcdHJldHVybiAoIXRsIHx8ICghdGhpcy5fZ2MgJiYgIXRoaXMuX3BhdXNlZCAmJiB0bC5pc0FjdGl2ZSgpICYmIChyYXdUaW1lID0gdGwucmF3VGltZSh0cnVlKSkgPj0gc3RhcnRUaW1lICYmIHJhd1RpbWUgPCBzdGFydFRpbWUgKyB0aGlzLnRvdGFsRHVyYXRpb24oKSAvIHRoaXMuX3RpbWVTY2FsZSkpO1xuXHRcdH07XG5cblx0XHRwLl9lbmFibGVkID0gZnVuY3Rpb24gKGVuYWJsZWQsIGlnbm9yZVRpbWVsaW5lKSB7XG5cdFx0XHRpZiAoIV90aWNrZXJBY3RpdmUpIHtcblx0XHRcdFx0X3RpY2tlci53YWtlKCk7XG5cdFx0XHR9XG5cdFx0XHR0aGlzLl9nYyA9ICFlbmFibGVkO1xuXHRcdFx0dGhpcy5fYWN0aXZlID0gdGhpcy5pc0FjdGl2ZSgpO1xuXHRcdFx0aWYgKGlnbm9yZVRpbWVsaW5lICE9PSB0cnVlKSB7XG5cdFx0XHRcdGlmIChlbmFibGVkICYmICF0aGlzLnRpbWVsaW5lKSB7XG5cdFx0XHRcdFx0dGhpcy5fdGltZWxpbmUuYWRkKHRoaXMsIHRoaXMuX3N0YXJ0VGltZSAtIHRoaXMuX2RlbGF5KTtcblx0XHRcdFx0fSBlbHNlIGlmICghZW5hYmxlZCAmJiB0aGlzLnRpbWVsaW5lKSB7XG5cdFx0XHRcdFx0dGhpcy5fdGltZWxpbmUuX3JlbW92ZSh0aGlzLCB0cnVlKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH07XG5cblxuXHRcdHAuX2tpbGwgPSBmdW5jdGlvbih2YXJzLCB0YXJnZXQpIHtcblx0XHRcdHJldHVybiB0aGlzLl9lbmFibGVkKGZhbHNlLCBmYWxzZSk7XG5cdFx0fTtcblxuXHRcdHAua2lsbCA9IGZ1bmN0aW9uKHZhcnMsIHRhcmdldCkge1xuXHRcdFx0dGhpcy5fa2lsbCh2YXJzLCB0YXJnZXQpO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fTtcblxuXHRcdHAuX3VuY2FjaGUgPSBmdW5jdGlvbihpbmNsdWRlU2VsZikge1xuXHRcdFx0dmFyIHR3ZWVuID0gaW5jbHVkZVNlbGYgPyB0aGlzIDogdGhpcy50aW1lbGluZTtcblx0XHRcdHdoaWxlICh0d2Vlbikge1xuXHRcdFx0XHR0d2Vlbi5fZGlydHkgPSB0cnVlO1xuXHRcdFx0XHR0d2VlbiA9IHR3ZWVuLnRpbWVsaW5lO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fTtcblxuXHRcdHAuX3N3YXBTZWxmSW5QYXJhbXMgPSBmdW5jdGlvbihwYXJhbXMpIHtcblx0XHRcdHZhciBpID0gcGFyYW1zLmxlbmd0aCxcblx0XHRcdFx0Y29weSA9IHBhcmFtcy5jb25jYXQoKTtcblx0XHRcdHdoaWxlICgtLWkgPiAtMSkge1xuXHRcdFx0XHRpZiAocGFyYW1zW2ldID09PSBcIntzZWxmfVwiKSB7XG5cdFx0XHRcdFx0Y29weVtpXSA9IHRoaXM7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBjb3B5O1xuXHRcdH07XG5cblx0XHRwLl9jYWxsYmFjayA9IGZ1bmN0aW9uKHR5cGUpIHtcblx0XHRcdHZhciB2ID0gdGhpcy52YXJzLFxuXHRcdFx0XHRjYWxsYmFjayA9IHZbdHlwZV0sXG5cdFx0XHRcdHBhcmFtcyA9IHZbdHlwZSArIFwiUGFyYW1zXCJdLFxuXHRcdFx0XHRzY29wZSA9IHZbdHlwZSArIFwiU2NvcGVcIl0gfHwgdi5jYWxsYmFja1Njb3BlIHx8IHRoaXMsXG5cdFx0XHRcdGwgPSBwYXJhbXMgPyBwYXJhbXMubGVuZ3RoIDogMDtcblx0XHRcdHN3aXRjaCAobCkgeyAvL3NwZWVkIG9wdGltaXphdGlvbjsgY2FsbCgpIGlzIGZhc3RlciB0aGFuIGFwcGx5KCkgc28gdXNlIGl0IHdoZW4gdGhlcmUgYXJlIG9ubHkgYSBmZXcgcGFyYW1ldGVycyAod2hpY2ggaXMgYnkgZmFyIG1vc3QgY29tbW9uKS4gUHJldmlvdXNseSB3ZSBzaW1wbHkgZGlkIHZhciB2ID0gdGhpcy52YXJzOyB2W3R5cGVdLmFwcGx5KHZbdHlwZSArIFwiU2NvcGVcIl0gfHwgdi5jYWxsYmFja1Njb3BlIHx8IHRoaXMsIHZbdHlwZSArIFwiUGFyYW1zXCJdIHx8IF9ibGFua0FycmF5KTtcblx0XHRcdFx0Y2FzZSAwOiBjYWxsYmFjay5jYWxsKHNjb3BlKTsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgMTogY2FsbGJhY2suY2FsbChzY29wZSwgcGFyYW1zWzBdKTsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgMjogY2FsbGJhY2suY2FsbChzY29wZSwgcGFyYW1zWzBdLCBwYXJhbXNbMV0pOyBicmVhaztcblx0XHRcdFx0ZGVmYXVsdDogY2FsbGJhY2suYXBwbHkoc2NvcGUsIHBhcmFtcyk7XG5cdFx0XHR9XG5cdFx0fTtcblxuLy8tLS0tQW5pbWF0aW9uIGdldHRlcnMvc2V0dGVycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdFx0cC5ldmVudENhbGxiYWNrID0gZnVuY3Rpb24odHlwZSwgY2FsbGJhY2ssIHBhcmFtcywgc2NvcGUpIHtcblx0XHRcdGlmICgodHlwZSB8fCBcIlwiKS5zdWJzdHIoMCwyKSA9PT0gXCJvblwiKSB7XG5cdFx0XHRcdHZhciB2ID0gdGhpcy52YXJzO1xuXHRcdFx0XHRpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuXHRcdFx0XHRcdHJldHVybiB2W3R5cGVdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChjYWxsYmFjayA9PSBudWxsKSB7XG5cdFx0XHRcdFx0ZGVsZXRlIHZbdHlwZV07XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dlt0eXBlXSA9IGNhbGxiYWNrO1xuXHRcdFx0XHRcdHZbdHlwZSArIFwiUGFyYW1zXCJdID0gKF9pc0FycmF5KHBhcmFtcykgJiYgcGFyYW1zLmpvaW4oXCJcIikuaW5kZXhPZihcIntzZWxmfVwiKSAhPT0gLTEpID8gdGhpcy5fc3dhcFNlbGZJblBhcmFtcyhwYXJhbXMpIDogcGFyYW1zO1xuXHRcdFx0XHRcdHZbdHlwZSArIFwiU2NvcGVcIl0gPSBzY29wZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAodHlwZSA9PT0gXCJvblVwZGF0ZVwiKSB7XG5cdFx0XHRcdFx0dGhpcy5fb25VcGRhdGUgPSBjYWxsYmFjaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fTtcblxuXHRcdHAuZGVsYXkgPSBmdW5jdGlvbih2YWx1ZSkge1xuXHRcdFx0aWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLl9kZWxheTtcblx0XHRcdH1cblx0XHRcdGlmICh0aGlzLl90aW1lbGluZS5zbW9vdGhDaGlsZFRpbWluZykge1xuXHRcdFx0XHR0aGlzLnN0YXJ0VGltZSggdGhpcy5fc3RhcnRUaW1lICsgdmFsdWUgLSB0aGlzLl9kZWxheSApO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5fZGVsYXkgPSB2YWx1ZTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH07XG5cblx0XHRwLmR1cmF0aW9uID0gZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuXHRcdFx0XHR0aGlzLl9kaXJ0eSA9IGZhbHNlO1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5fZHVyYXRpb247XG5cdFx0XHR9XG5cdFx0XHR0aGlzLl9kdXJhdGlvbiA9IHRoaXMuX3RvdGFsRHVyYXRpb24gPSB2YWx1ZTtcblx0XHRcdHRoaXMuX3VuY2FjaGUodHJ1ZSk7IC8vdHJ1ZSBpbiBjYXNlIGl0J3MgYSBUd2Vlbk1heCBvciBUaW1lbGluZU1heCB0aGF0IGhhcyBhIHJlcGVhdCAtIHdlJ2xsIG5lZWQgdG8gcmVmcmVzaCB0aGUgdG90YWxEdXJhdGlvbi5cblx0XHRcdGlmICh0aGlzLl90aW1lbGluZS5zbW9vdGhDaGlsZFRpbWluZykgaWYgKHRoaXMuX3RpbWUgPiAwKSBpZiAodGhpcy5fdGltZSA8IHRoaXMuX2R1cmF0aW9uKSBpZiAodmFsdWUgIT09IDApIHtcblx0XHRcdFx0dGhpcy50b3RhbFRpbWUodGhpcy5fdG90YWxUaW1lICogKHZhbHVlIC8gdGhpcy5fZHVyYXRpb24pLCB0cnVlKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH07XG5cblx0XHRwLnRvdGFsRHVyYXRpb24gPSBmdW5jdGlvbih2YWx1ZSkge1xuXHRcdFx0dGhpcy5fZGlydHkgPSBmYWxzZTtcblx0XHRcdHJldHVybiAoIWFyZ3VtZW50cy5sZW5ndGgpID8gdGhpcy5fdG90YWxEdXJhdGlvbiA6IHRoaXMuZHVyYXRpb24odmFsdWUpO1xuXHRcdH07XG5cblx0XHRwLnRpbWUgPSBmdW5jdGlvbih2YWx1ZSwgc3VwcHJlc3NFdmVudHMpIHtcblx0XHRcdGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5fdGltZTtcblx0XHRcdH1cblx0XHRcdGlmICh0aGlzLl9kaXJ0eSkge1xuXHRcdFx0XHR0aGlzLnRvdGFsRHVyYXRpb24oKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0aGlzLnRvdGFsVGltZSgodmFsdWUgPiB0aGlzLl9kdXJhdGlvbikgPyB0aGlzLl9kdXJhdGlvbiA6IHZhbHVlLCBzdXBwcmVzc0V2ZW50cyk7XG5cdFx0fTtcblxuXHRcdHAudG90YWxUaW1lID0gZnVuY3Rpb24odGltZSwgc3VwcHJlc3NFdmVudHMsIHVuY2FwcGVkKSB7XG5cdFx0XHRpZiAoIV90aWNrZXJBY3RpdmUpIHtcblx0XHRcdFx0X3RpY2tlci53YWtlKCk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuX3RvdGFsVGltZTtcblx0XHRcdH1cblx0XHRcdGlmICh0aGlzLl90aW1lbGluZSkge1xuXHRcdFx0XHRpZiAodGltZSA8IDAgJiYgIXVuY2FwcGVkKSB7XG5cdFx0XHRcdFx0dGltZSArPSB0aGlzLnRvdGFsRHVyYXRpb24oKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAodGhpcy5fdGltZWxpbmUuc21vb3RoQ2hpbGRUaW1pbmcpIHtcblx0XHRcdFx0XHRpZiAodGhpcy5fZGlydHkpIHtcblx0XHRcdFx0XHRcdHRoaXMudG90YWxEdXJhdGlvbigpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR2YXIgdG90YWxEdXJhdGlvbiA9IHRoaXMuX3RvdGFsRHVyYXRpb24sXG5cdFx0XHRcdFx0XHR0bCA9IHRoaXMuX3RpbWVsaW5lO1xuXHRcdFx0XHRcdGlmICh0aW1lID4gdG90YWxEdXJhdGlvbiAmJiAhdW5jYXBwZWQpIHtcblx0XHRcdFx0XHRcdHRpbWUgPSB0b3RhbER1cmF0aW9uO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aGlzLl9zdGFydFRpbWUgPSAodGhpcy5fcGF1c2VkID8gdGhpcy5fcGF1c2VUaW1lIDogdGwuX3RpbWUpIC0gKCghdGhpcy5fcmV2ZXJzZWQgPyB0aW1lIDogdG90YWxEdXJhdGlvbiAtIHRpbWUpIC8gdGhpcy5fdGltZVNjYWxlKTtcblx0XHRcdFx0XHRpZiAoIXRsLl9kaXJ0eSkgeyAvL2ZvciBwZXJmb3JtYW5jZSBpbXByb3ZlbWVudC4gSWYgdGhlIHBhcmVudCdzIGNhY2hlIGlzIGFscmVhZHkgZGlydHksIGl0IGFscmVhZHkgdG9vayBjYXJlIG9mIG1hcmtpbmcgdGhlIGFuY2VzdG9ycyBhcyBkaXJ0eSB0b28sIHNvIHNraXAgdGhlIGZ1bmN0aW9uIGNhbGwgaGVyZS5cblx0XHRcdFx0XHRcdHRoaXMuX3VuY2FjaGUoZmFsc2UpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHQvL2luIGNhc2UgYW55IG9mIHRoZSBhbmNlc3RvciB0aW1lbGluZXMgaGFkIGNvbXBsZXRlZCBidXQgc2hvdWxkIG5vdyBiZSBlbmFibGVkLCB3ZSBzaG91bGQgcmVzZXQgdGhlaXIgdG90YWxUaW1lKCkgd2hpY2ggd2lsbCBhbHNvIGVuc3VyZSB0aGF0IHRoZXkncmUgbGluZWQgdXAgcHJvcGVybHkgYW5kIGVuYWJsZWQuIFNraXAgZm9yIGFuaW1hdGlvbnMgdGhhdCBhcmUgb24gdGhlIHJvb3QgKHdhc3RlZnVsKS4gRXhhbXBsZTogYSBUaW1lbGluZUxpdGUuZXhwb3J0Um9vdCgpIGlzIHBlcmZvcm1lZCB3aGVuIHRoZXJlJ3MgYSBwYXVzZWQgdHdlZW4gb24gdGhlIHJvb3QsIHRoZSBleHBvcnQgd2lsbCBub3QgY29tcGxldGUgdW50aWwgdGhhdCB0d2VlbiBpcyB1bnBhdXNlZCwgYnV0IGltYWdpbmUgYSBjaGlsZCBnZXRzIHJlc3RhcnRlZCBsYXRlciwgYWZ0ZXIgYWxsIFt1bnBhdXNlZF0gdHdlZW5zIGhhdmUgY29tcGxldGVkLiBUaGUgc3RhcnRUaW1lIG9mIHRoYXQgY2hpbGQgd291bGQgZ2V0IHB1c2hlZCBvdXQsIGJ1dCBvbmUgb2YgdGhlIGFuY2VzdG9ycyBtYXkgaGF2ZSBjb21wbGV0ZWQuXG5cdFx0XHRcdFx0aWYgKHRsLl90aW1lbGluZSkge1xuXHRcdFx0XHRcdFx0d2hpbGUgKHRsLl90aW1lbGluZSkge1xuXHRcdFx0XHRcdFx0XHRpZiAodGwuX3RpbWVsaW5lLl90aW1lICE9PSAodGwuX3N0YXJ0VGltZSArIHRsLl90b3RhbFRpbWUpIC8gdGwuX3RpbWVTY2FsZSkge1xuXHRcdFx0XHRcdFx0XHRcdHRsLnRvdGFsVGltZSh0bC5fdG90YWxUaW1lLCB0cnVlKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR0bCA9IHRsLl90aW1lbGluZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHRoaXMuX2djKSB7XG5cdFx0XHRcdFx0dGhpcy5fZW5hYmxlZCh0cnVlLCBmYWxzZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHRoaXMuX3RvdGFsVGltZSAhPT0gdGltZSB8fCB0aGlzLl9kdXJhdGlvbiA9PT0gMCkge1xuXHRcdFx0XHRcdGlmIChfbGF6eVR3ZWVucy5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdF9sYXp5UmVuZGVyKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRoaXMucmVuZGVyKHRpbWUsIHN1cHByZXNzRXZlbnRzLCBmYWxzZSk7XG5cdFx0XHRcdFx0aWYgKF9sYXp5VHdlZW5zLmxlbmd0aCkgeyAvL2luIGNhc2UgcmVuZGVyaW5nIGNhdXNlZCBhbnkgdHdlZW5zIHRvIGxhenktaW5pdCwgd2Ugc2hvdWxkIHJlbmRlciB0aGVtIGJlY2F1c2UgdHlwaWNhbGx5IHdoZW4gc29tZW9uZSBjYWxscyBzZWVrKCkgb3IgdGltZSgpIG9yIHByb2dyZXNzKCksIHRoZXkgZXhwZWN0IGFuIGltbWVkaWF0ZSByZW5kZXIuXG5cdFx0XHRcdFx0XHRfbGF6eVJlbmRlcigpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fTtcblxuXHRcdHAucHJvZ3Jlc3MgPSBwLnRvdGFsUHJvZ3Jlc3MgPSBmdW5jdGlvbih2YWx1ZSwgc3VwcHJlc3NFdmVudHMpIHtcblx0XHRcdHZhciBkdXJhdGlvbiA9IHRoaXMuZHVyYXRpb24oKTtcblx0XHRcdHJldHVybiAoIWFyZ3VtZW50cy5sZW5ndGgpID8gKGR1cmF0aW9uID8gdGhpcy5fdGltZSAvIGR1cmF0aW9uIDogdGhpcy5yYXRpbykgOiB0aGlzLnRvdGFsVGltZShkdXJhdGlvbiAqIHZhbHVlLCBzdXBwcmVzc0V2ZW50cyk7XG5cdFx0fTtcblxuXHRcdHAuc3RhcnRUaW1lID0gZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5fc3RhcnRUaW1lO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHZhbHVlICE9PSB0aGlzLl9zdGFydFRpbWUpIHtcblx0XHRcdFx0dGhpcy5fc3RhcnRUaW1lID0gdmFsdWU7XG5cdFx0XHRcdGlmICh0aGlzLnRpbWVsaW5lKSBpZiAodGhpcy50aW1lbGluZS5fc29ydENoaWxkcmVuKSB7XG5cdFx0XHRcdFx0dGhpcy50aW1lbGluZS5hZGQodGhpcywgdmFsdWUgLSB0aGlzLl9kZWxheSk7IC8vZW5zdXJlcyB0aGF0IGFueSBuZWNlc3NhcnkgcmUtc2VxdWVuY2luZyBvZiBBbmltYXRpb25zIGluIHRoZSB0aW1lbGluZSBvY2N1cnMgdG8gbWFrZSBzdXJlIHRoZSByZW5kZXJpbmcgb3JkZXIgaXMgY29ycmVjdC5cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fTtcblxuXHRcdHAuZW5kVGltZSA9IGZ1bmN0aW9uKGluY2x1ZGVSZXBlYXRzKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5fc3RhcnRUaW1lICsgKChpbmNsdWRlUmVwZWF0cyAhPSBmYWxzZSkgPyB0aGlzLnRvdGFsRHVyYXRpb24oKSA6IHRoaXMuZHVyYXRpb24oKSkgLyB0aGlzLl90aW1lU2NhbGU7XG5cdFx0fTtcblxuXHRcdHAudGltZVNjYWxlID0gZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5fdGltZVNjYWxlO1xuXHRcdFx0fVxuXHRcdFx0dmFsdWUgPSB2YWx1ZSB8fCBfdGlueU51bTsgLy9jYW4ndCBhbGxvdyB6ZXJvIGJlY2F1c2UgaXQnbGwgdGhyb3cgdGhlIG1hdGggb2ZmXG5cdFx0XHRpZiAodGhpcy5fdGltZWxpbmUgJiYgdGhpcy5fdGltZWxpbmUuc21vb3RoQ2hpbGRUaW1pbmcpIHtcblx0XHRcdFx0dmFyIHBhdXNlVGltZSA9IHRoaXMuX3BhdXNlVGltZSxcblx0XHRcdFx0XHR0ID0gKHBhdXNlVGltZSB8fCBwYXVzZVRpbWUgPT09IDApID8gcGF1c2VUaW1lIDogdGhpcy5fdGltZWxpbmUudG90YWxUaW1lKCk7XG5cdFx0XHRcdHRoaXMuX3N0YXJ0VGltZSA9IHQgLSAoKHQgLSB0aGlzLl9zdGFydFRpbWUpICogdGhpcy5fdGltZVNjYWxlIC8gdmFsdWUpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5fdGltZVNjYWxlID0gdmFsdWU7XG5cdFx0XHRyZXR1cm4gdGhpcy5fdW5jYWNoZShmYWxzZSk7XG5cdFx0fTtcblxuXHRcdHAucmV2ZXJzZWQgPSBmdW5jdGlvbih2YWx1ZSkge1xuXHRcdFx0aWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLl9yZXZlcnNlZDtcblx0XHRcdH1cblx0XHRcdGlmICh2YWx1ZSAhPSB0aGlzLl9yZXZlcnNlZCkge1xuXHRcdFx0XHR0aGlzLl9yZXZlcnNlZCA9IHZhbHVlO1xuXHRcdFx0XHR0aGlzLnRvdGFsVGltZSgoKHRoaXMuX3RpbWVsaW5lICYmICF0aGlzLl90aW1lbGluZS5zbW9vdGhDaGlsZFRpbWluZykgPyB0aGlzLnRvdGFsRHVyYXRpb24oKSAtIHRoaXMuX3RvdGFsVGltZSA6IHRoaXMuX3RvdGFsVGltZSksIHRydWUpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fTtcblxuXHRcdHAucGF1c2VkID0gZnVuY3Rpb24odmFsdWUpIHtcblx0XHRcdGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5fcGF1c2VkO1xuXHRcdFx0fVxuXHRcdFx0dmFyIHRsID0gdGhpcy5fdGltZWxpbmUsXG5cdFx0XHRcdHJhdywgZWxhcHNlZDtcblx0XHRcdGlmICh2YWx1ZSAhPSB0aGlzLl9wYXVzZWQpIGlmICh0bCkge1xuXHRcdFx0XHRpZiAoIV90aWNrZXJBY3RpdmUgJiYgIXZhbHVlKSB7XG5cdFx0XHRcdFx0X3RpY2tlci53YWtlKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmF3ID0gdGwucmF3VGltZSgpO1xuXHRcdFx0XHRlbGFwc2VkID0gcmF3IC0gdGhpcy5fcGF1c2VUaW1lO1xuXHRcdFx0XHRpZiAoIXZhbHVlICYmIHRsLnNtb290aENoaWxkVGltaW5nKSB7XG5cdFx0XHRcdFx0dGhpcy5fc3RhcnRUaW1lICs9IGVsYXBzZWQ7XG5cdFx0XHRcdFx0dGhpcy5fdW5jYWNoZShmYWxzZSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0dGhpcy5fcGF1c2VUaW1lID0gdmFsdWUgPyByYXcgOiBudWxsO1xuXHRcdFx0XHR0aGlzLl9wYXVzZWQgPSB2YWx1ZTtcblx0XHRcdFx0dGhpcy5fYWN0aXZlID0gdGhpcy5pc0FjdGl2ZSgpO1xuXHRcdFx0XHRpZiAoIXZhbHVlICYmIGVsYXBzZWQgIT09IDAgJiYgdGhpcy5faW5pdHRlZCAmJiB0aGlzLmR1cmF0aW9uKCkpIHtcblx0XHRcdFx0XHRyYXcgPSB0bC5zbW9vdGhDaGlsZFRpbWluZyA/IHRoaXMuX3RvdGFsVGltZSA6IChyYXcgLSB0aGlzLl9zdGFydFRpbWUpIC8gdGhpcy5fdGltZVNjYWxlO1xuXHRcdFx0XHRcdHRoaXMucmVuZGVyKHJhdywgKHJhdyA9PT0gdGhpcy5fdG90YWxUaW1lKSwgdHJ1ZSk7IC8vaW4gY2FzZSB0aGUgdGFyZ2V0J3MgcHJvcGVydGllcyBjaGFuZ2VkIHZpYSBzb21lIG90aGVyIHR3ZWVuIG9yIG1hbnVhbCB1cGRhdGUgYnkgdGhlIHVzZXIsIHdlIHNob3VsZCBmb3JjZSBhIHJlbmRlci5cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYgKHRoaXMuX2djICYmICF2YWx1ZSkge1xuXHRcdFx0XHR0aGlzLl9lbmFibGVkKHRydWUsIGZhbHNlKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH07XG5cblxuLypcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIFNpbXBsZVRpbWVsaW5lXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKi9cblx0XHR2YXIgU2ltcGxlVGltZWxpbmUgPSBfY2xhc3MoXCJjb3JlLlNpbXBsZVRpbWVsaW5lXCIsIGZ1bmN0aW9uKHZhcnMpIHtcblx0XHRcdEFuaW1hdGlvbi5jYWxsKHRoaXMsIDAsIHZhcnMpO1xuXHRcdFx0dGhpcy5hdXRvUmVtb3ZlQ2hpbGRyZW4gPSB0aGlzLnNtb290aENoaWxkVGltaW5nID0gdHJ1ZTtcblx0XHR9KTtcblxuXHRcdHAgPSBTaW1wbGVUaW1lbGluZS5wcm90b3R5cGUgPSBuZXcgQW5pbWF0aW9uKCk7XG5cdFx0cC5jb25zdHJ1Y3RvciA9IFNpbXBsZVRpbWVsaW5lO1xuXHRcdHAua2lsbCgpLl9nYyA9IGZhbHNlO1xuXHRcdHAuX2ZpcnN0ID0gcC5fbGFzdCA9IHAuX3JlY2VudCA9IG51bGw7XG5cdFx0cC5fc29ydENoaWxkcmVuID0gZmFsc2U7XG5cblx0XHRwLmFkZCA9IHAuaW5zZXJ0ID0gZnVuY3Rpb24oY2hpbGQsIHBvc2l0aW9uLCBhbGlnbiwgc3RhZ2dlcikge1xuXHRcdFx0dmFyIHByZXZUd2Vlbiwgc3Q7XG5cdFx0XHRjaGlsZC5fc3RhcnRUaW1lID0gTnVtYmVyKHBvc2l0aW9uIHx8IDApICsgY2hpbGQuX2RlbGF5O1xuXHRcdFx0aWYgKGNoaWxkLl9wYXVzZWQpIGlmICh0aGlzICE9PSBjaGlsZC5fdGltZWxpbmUpIHsgLy93ZSBvbmx5IGFkanVzdCB0aGUgX3BhdXNlVGltZSBpZiBpdCB3YXNuJ3QgaW4gdGhpcyB0aW1lbGluZSBhbHJlYWR5LiBSZW1lbWJlciwgc29tZXRpbWVzIGEgdHdlZW4gd2lsbCBiZSBpbnNlcnRlZCBhZ2FpbiBpbnRvIHRoZSBzYW1lIHRpbWVsaW5lIHdoZW4gaXRzIHN0YXJ0VGltZSBpcyBjaGFuZ2VkIHNvIHRoYXQgdGhlIHR3ZWVucyBpbiB0aGUgVGltZWxpbmVMaXRlL01heCBhcmUgcmUtb3JkZXJlZCBwcm9wZXJseSBpbiB0aGUgbGlua2VkIGxpc3QgKHNvIGV2ZXJ5dGhpbmcgcmVuZGVycyBpbiB0aGUgcHJvcGVyIG9yZGVyKS5cblx0XHRcdFx0Y2hpbGQuX3BhdXNlVGltZSA9IGNoaWxkLl9zdGFydFRpbWUgKyAoKHRoaXMucmF3VGltZSgpIC0gY2hpbGQuX3N0YXJ0VGltZSkgLyBjaGlsZC5fdGltZVNjYWxlKTtcblx0XHRcdH1cblx0XHRcdGlmIChjaGlsZC50aW1lbGluZSkge1xuXHRcdFx0XHRjaGlsZC50aW1lbGluZS5fcmVtb3ZlKGNoaWxkLCB0cnVlKTsgLy9yZW1vdmVzIGZyb20gZXhpc3RpbmcgdGltZWxpbmUgc28gdGhhdCBpdCBjYW4gYmUgcHJvcGVybHkgYWRkZWQgdG8gdGhpcyBvbmUuXG5cdFx0XHR9XG5cdFx0XHRjaGlsZC50aW1lbGluZSA9IGNoaWxkLl90aW1lbGluZSA9IHRoaXM7XG5cdFx0XHRpZiAoY2hpbGQuX2djKSB7XG5cdFx0XHRcdGNoaWxkLl9lbmFibGVkKHRydWUsIHRydWUpO1xuXHRcdFx0fVxuXHRcdFx0cHJldlR3ZWVuID0gdGhpcy5fbGFzdDtcblx0XHRcdGlmICh0aGlzLl9zb3J0Q2hpbGRyZW4pIHtcblx0XHRcdFx0c3QgPSBjaGlsZC5fc3RhcnRUaW1lO1xuXHRcdFx0XHR3aGlsZSAocHJldlR3ZWVuICYmIHByZXZUd2Vlbi5fc3RhcnRUaW1lID4gc3QpIHtcblx0XHRcdFx0XHRwcmV2VHdlZW4gPSBwcmV2VHdlZW4uX3ByZXY7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmIChwcmV2VHdlZW4pIHtcblx0XHRcdFx0Y2hpbGQuX25leHQgPSBwcmV2VHdlZW4uX25leHQ7XG5cdFx0XHRcdHByZXZUd2Vlbi5fbmV4dCA9IGNoaWxkO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y2hpbGQuX25leHQgPSB0aGlzLl9maXJzdDtcblx0XHRcdFx0dGhpcy5fZmlyc3QgPSBjaGlsZDtcblx0XHRcdH1cblx0XHRcdGlmIChjaGlsZC5fbmV4dCkge1xuXHRcdFx0XHRjaGlsZC5fbmV4dC5fcHJldiA9IGNoaWxkO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5fbGFzdCA9IGNoaWxkO1xuXHRcdFx0fVxuXHRcdFx0Y2hpbGQuX3ByZXYgPSBwcmV2VHdlZW47XG5cdFx0XHR0aGlzLl9yZWNlbnQgPSBjaGlsZDtcblx0XHRcdGlmICh0aGlzLl90aW1lbGluZSkge1xuXHRcdFx0XHR0aGlzLl91bmNhY2hlKHRydWUpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fTtcblxuXHRcdHAuX3JlbW92ZSA9IGZ1bmN0aW9uKHR3ZWVuLCBza2lwRGlzYWJsZSkge1xuXHRcdFx0aWYgKHR3ZWVuLnRpbWVsaW5lID09PSB0aGlzKSB7XG5cdFx0XHRcdGlmICghc2tpcERpc2FibGUpIHtcblx0XHRcdFx0XHR0d2Vlbi5fZW5hYmxlZChmYWxzZSwgdHJ1ZSk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAodHdlZW4uX3ByZXYpIHtcblx0XHRcdFx0XHR0d2Vlbi5fcHJldi5fbmV4dCA9IHR3ZWVuLl9uZXh0O1xuXHRcdFx0XHR9IGVsc2UgaWYgKHRoaXMuX2ZpcnN0ID09PSB0d2Vlbikge1xuXHRcdFx0XHRcdHRoaXMuX2ZpcnN0ID0gdHdlZW4uX25leHQ7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHR3ZWVuLl9uZXh0KSB7XG5cdFx0XHRcdFx0dHdlZW4uX25leHQuX3ByZXYgPSB0d2Vlbi5fcHJldjtcblx0XHRcdFx0fSBlbHNlIGlmICh0aGlzLl9sYXN0ID09PSB0d2Vlbikge1xuXHRcdFx0XHRcdHRoaXMuX2xhc3QgPSB0d2Vlbi5fcHJldjtcblx0XHRcdFx0fVxuXHRcdFx0XHR0d2Vlbi5fbmV4dCA9IHR3ZWVuLl9wcmV2ID0gdHdlZW4udGltZWxpbmUgPSBudWxsO1xuXHRcdFx0XHRpZiAodHdlZW4gPT09IHRoaXMuX3JlY2VudCkge1xuXHRcdFx0XHRcdHRoaXMuX3JlY2VudCA9IHRoaXMuX2xhc3Q7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAodGhpcy5fdGltZWxpbmUpIHtcblx0XHRcdFx0XHR0aGlzLl91bmNhY2hlKHRydWUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9O1xuXG5cdFx0cC5yZW5kZXIgPSBmdW5jdGlvbih0aW1lLCBzdXBwcmVzc0V2ZW50cywgZm9yY2UpIHtcblx0XHRcdHZhciB0d2VlbiA9IHRoaXMuX2ZpcnN0LFxuXHRcdFx0XHRuZXh0O1xuXHRcdFx0dGhpcy5fdG90YWxUaW1lID0gdGhpcy5fdGltZSA9IHRoaXMuX3Jhd1ByZXZUaW1lID0gdGltZTtcblx0XHRcdHdoaWxlICh0d2Vlbikge1xuXHRcdFx0XHRuZXh0ID0gdHdlZW4uX25leHQ7IC8vcmVjb3JkIGl0IGhlcmUgYmVjYXVzZSB0aGUgdmFsdWUgY291bGQgY2hhbmdlIGFmdGVyIHJlbmRlcmluZy4uLlxuXHRcdFx0XHRpZiAodHdlZW4uX2FjdGl2ZSB8fCAodGltZSA+PSB0d2Vlbi5fc3RhcnRUaW1lICYmICF0d2Vlbi5fcGF1c2VkKSkge1xuXHRcdFx0XHRcdGlmICghdHdlZW4uX3JldmVyc2VkKSB7XG5cdFx0XHRcdFx0XHR0d2Vlbi5yZW5kZXIoKHRpbWUgLSB0d2Vlbi5fc3RhcnRUaW1lKSAqIHR3ZWVuLl90aW1lU2NhbGUsIHN1cHByZXNzRXZlbnRzLCBmb3JjZSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHR3ZWVuLnJlbmRlcigoKCF0d2Vlbi5fZGlydHkpID8gdHdlZW4uX3RvdGFsRHVyYXRpb24gOiB0d2Vlbi50b3RhbER1cmF0aW9uKCkpIC0gKCh0aW1lIC0gdHdlZW4uX3N0YXJ0VGltZSkgKiB0d2Vlbi5fdGltZVNjYWxlKSwgc3VwcHJlc3NFdmVudHMsIGZvcmNlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0dHdlZW4gPSBuZXh0O1xuXHRcdFx0fVxuXHRcdH07XG5cblx0XHRwLnJhd1RpbWUgPSBmdW5jdGlvbigpIHtcblx0XHRcdGlmICghX3RpY2tlckFjdGl2ZSkge1xuXHRcdFx0XHRfdGlja2VyLndha2UoKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0aGlzLl90b3RhbFRpbWU7XG5cdFx0fTtcblxuLypcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIFR3ZWVuTGl0ZVxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cdFx0dmFyIFR3ZWVuTGl0ZSA9IF9jbGFzcyhcIlR3ZWVuTGl0ZVwiLCBmdW5jdGlvbih0YXJnZXQsIGR1cmF0aW9uLCB2YXJzKSB7XG5cdFx0XHRcdEFuaW1hdGlvbi5jYWxsKHRoaXMsIGR1cmF0aW9uLCB2YXJzKTtcblx0XHRcdFx0dGhpcy5yZW5kZXIgPSBUd2VlbkxpdGUucHJvdG90eXBlLnJlbmRlcjsgLy9zcGVlZCBvcHRpbWl6YXRpb24gKGF2b2lkIHByb3RvdHlwZSBsb29rdXAgb24gdGhpcyBcImhvdFwiIG1ldGhvZClcblxuXHRcdFx0XHRpZiAodGFyZ2V0ID09IG51bGwpIHtcblx0XHRcdFx0XHR0aHJvdyBcIkNhbm5vdCB0d2VlbiBhIG51bGwgdGFyZ2V0LlwiO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGhpcy50YXJnZXQgPSB0YXJnZXQgPSAodHlwZW9mKHRhcmdldCkgIT09IFwic3RyaW5nXCIpID8gdGFyZ2V0IDogVHdlZW5MaXRlLnNlbGVjdG9yKHRhcmdldCkgfHwgdGFyZ2V0O1xuXG5cdFx0XHRcdHZhciBpc1NlbGVjdG9yID0gKHRhcmdldC5qcXVlcnkgfHwgKHRhcmdldC5sZW5ndGggJiYgdGFyZ2V0ICE9PSB3aW5kb3cgJiYgdGFyZ2V0WzBdICYmICh0YXJnZXRbMF0gPT09IHdpbmRvdyB8fCAodGFyZ2V0WzBdLm5vZGVUeXBlICYmIHRhcmdldFswXS5zdHlsZSAmJiAhdGFyZ2V0Lm5vZGVUeXBlKSkpKSxcblx0XHRcdFx0XHRvdmVyd3JpdGUgPSB0aGlzLnZhcnMub3ZlcndyaXRlLFxuXHRcdFx0XHRcdGksIHRhcmcsIHRhcmdldHM7XG5cblx0XHRcdFx0dGhpcy5fb3ZlcndyaXRlID0gb3ZlcndyaXRlID0gKG92ZXJ3cml0ZSA9PSBudWxsKSA/IF9vdmVyd3JpdGVMb29rdXBbVHdlZW5MaXRlLmRlZmF1bHRPdmVyd3JpdGVdIDogKHR5cGVvZihvdmVyd3JpdGUpID09PSBcIm51bWJlclwiKSA/IG92ZXJ3cml0ZSA+PiAwIDogX292ZXJ3cml0ZUxvb2t1cFtvdmVyd3JpdGVdO1xuXG5cdFx0XHRcdGlmICgoaXNTZWxlY3RvciB8fCB0YXJnZXQgaW5zdGFuY2VvZiBBcnJheSB8fCAodGFyZ2V0LnB1c2ggJiYgX2lzQXJyYXkodGFyZ2V0KSkpICYmIHR5cGVvZih0YXJnZXRbMF0pICE9PSBcIm51bWJlclwiKSB7XG5cdFx0XHRcdFx0dGhpcy5fdGFyZ2V0cyA9IHRhcmdldHMgPSBfc2xpY2UodGFyZ2V0KTsgIC8vZG9uJ3QgdXNlIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRhcmdldCwgMCkgYmVjYXVzZSB0aGF0IGRvZXNuJ3Qgd29yayBpbiBJRTggd2l0aCBhIE5vZGVMaXN0IHRoYXQncyByZXR1cm5lZCBieSBxdWVyeVNlbGVjdG9yQWxsKClcblx0XHRcdFx0XHR0aGlzLl9wcm9wTG9va3VwID0gW107XG5cdFx0XHRcdFx0dGhpcy5fc2libGluZ3MgPSBbXTtcblx0XHRcdFx0XHRmb3IgKGkgPSAwOyBpIDwgdGFyZ2V0cy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0dGFyZyA9IHRhcmdldHNbaV07XG5cdFx0XHRcdFx0XHRpZiAoIXRhcmcpIHtcblx0XHRcdFx0XHRcdFx0dGFyZ2V0cy5zcGxpY2UoaS0tLCAxKTtcblx0XHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKHR5cGVvZih0YXJnKSA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0XHRcdFx0XHR0YXJnID0gdGFyZ2V0c1tpLS1dID0gVHdlZW5MaXRlLnNlbGVjdG9yKHRhcmcpOyAvL2luIGNhc2UgaXQncyBhbiBhcnJheSBvZiBzdHJpbmdzXG5cdFx0XHRcdFx0XHRcdGlmICh0eXBlb2YodGFyZykgPT09IFwic3RyaW5nXCIpIHtcblx0XHRcdFx0XHRcdFx0XHR0YXJnZXRzLnNwbGljZShpKzEsIDEpOyAvL3RvIGF2b2lkIGFuIGVuZGxlc3MgbG9vcCAoY2FuJ3QgaW1hZ2luZSB3aHkgdGhlIHNlbGVjdG9yIHdvdWxkIHJldHVybiBhIHN0cmluZywgYnV0IGp1c3QgaW4gY2FzZSlcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAodGFyZy5sZW5ndGggJiYgdGFyZyAhPT0gd2luZG93ICYmIHRhcmdbMF0gJiYgKHRhcmdbMF0gPT09IHdpbmRvdyB8fCAodGFyZ1swXS5ub2RlVHlwZSAmJiB0YXJnWzBdLnN0eWxlICYmICF0YXJnLm5vZGVUeXBlKSkpIHsgLy9pbiBjYXNlIHRoZSB1c2VyIGlzIHBhc3NpbmcgaW4gYW4gYXJyYXkgb2Ygc2VsZWN0b3Igb2JqZWN0cyAobGlrZSBqUXVlcnkgb2JqZWN0cyksIHdlIG5lZWQgdG8gY2hlY2sgb25lIG1vcmUgbGV2ZWwgYW5kIHB1bGwgdGhpbmdzIG91dCBpZiBuZWNlc3NhcnkuIEFsc28gbm90ZSB0aGF0IDxzZWxlY3Q+IGVsZW1lbnRzIHBhc3MgYWxsIHRoZSBjcml0ZXJpYSByZWdhcmRpbmcgbGVuZ3RoIGFuZCB0aGUgZmlyc3QgY2hpbGQgaGF2aW5nIHN0eWxlLCBzbyB3ZSBtdXN0IGFsc28gY2hlY2sgdG8gZW5zdXJlIHRoZSB0YXJnZXQgaXNuJ3QgYW4gSFRNTCBub2RlIGl0c2VsZi5cblx0XHRcdFx0XHRcdFx0dGFyZ2V0cy5zcGxpY2UoaS0tLCAxKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5fdGFyZ2V0cyA9IHRhcmdldHMgPSB0YXJnZXRzLmNvbmNhdChfc2xpY2UodGFyZykpO1xuXHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHRoaXMuX3NpYmxpbmdzW2ldID0gX3JlZ2lzdGVyKHRhcmcsIHRoaXMsIGZhbHNlKTtcblx0XHRcdFx0XHRcdGlmIChvdmVyd3JpdGUgPT09IDEpIGlmICh0aGlzLl9zaWJsaW5nc1tpXS5sZW5ndGggPiAxKSB7XG5cdFx0XHRcdFx0XHRcdF9hcHBseU92ZXJ3cml0ZSh0YXJnLCB0aGlzLCBudWxsLCAxLCB0aGlzLl9zaWJsaW5nc1tpXSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhpcy5fcHJvcExvb2t1cCA9IHt9O1xuXHRcdFx0XHRcdHRoaXMuX3NpYmxpbmdzID0gX3JlZ2lzdGVyKHRhcmdldCwgdGhpcywgZmFsc2UpO1xuXHRcdFx0XHRcdGlmIChvdmVyd3JpdGUgPT09IDEpIGlmICh0aGlzLl9zaWJsaW5ncy5sZW5ndGggPiAxKSB7XG5cdFx0XHRcdFx0XHRfYXBwbHlPdmVyd3JpdGUodGFyZ2V0LCB0aGlzLCBudWxsLCAxLCB0aGlzLl9zaWJsaW5ncyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICh0aGlzLnZhcnMuaW1tZWRpYXRlUmVuZGVyIHx8IChkdXJhdGlvbiA9PT0gMCAmJiB0aGlzLl9kZWxheSA9PT0gMCAmJiB0aGlzLnZhcnMuaW1tZWRpYXRlUmVuZGVyICE9PSBmYWxzZSkpIHtcblx0XHRcdFx0XHR0aGlzLl90aW1lID0gLV90aW55TnVtOyAvL2ZvcmNlcyBhIHJlbmRlciB3aXRob3V0IGhhdmluZyB0byBzZXQgdGhlIHJlbmRlcigpIFwiZm9yY2VcIiBwYXJhbWV0ZXIgdG8gdHJ1ZSBiZWNhdXNlIHdlIHdhbnQgdG8gYWxsb3cgbGF6eWluZyBieSBkZWZhdWx0ICh1c2luZyB0aGUgXCJmb3JjZVwiIHBhcmFtZXRlciBhbHdheXMgZm9yY2VzIGFuIGltbWVkaWF0ZSBmdWxsIHJlbmRlcilcblx0XHRcdFx0XHR0aGlzLnJlbmRlcihNYXRoLm1pbigwLCAtdGhpcy5fZGVsYXkpKTsgLy9pbiBjYXNlIGRlbGF5IGlzIG5lZ2F0aXZlXG5cdFx0XHRcdH1cblx0XHRcdH0sIHRydWUpLFxuXHRcdFx0X2lzU2VsZWN0b3IgPSBmdW5jdGlvbih2KSB7XG5cdFx0XHRcdHJldHVybiAodiAmJiB2Lmxlbmd0aCAmJiB2ICE9PSB3aW5kb3cgJiYgdlswXSAmJiAodlswXSA9PT0gd2luZG93IHx8ICh2WzBdLm5vZGVUeXBlICYmIHZbMF0uc3R5bGUgJiYgIXYubm9kZVR5cGUpKSk7IC8vd2UgY2Fubm90IGNoZWNrIFwibm9kZVR5cGVcIiBpZiB0aGUgdGFyZ2V0IGlzIHdpbmRvdyBmcm9tIHdpdGhpbiBhbiBpZnJhbWUsIG90aGVyd2lzZSBpdCB3aWxsIHRyaWdnZXIgYSBzZWN1cml0eSBlcnJvciBpbiBzb21lIGJyb3dzZXJzIGxpa2UgRmlyZWZveC5cblx0XHRcdH0sXG5cdFx0XHRfYXV0b0NTUyA9IGZ1bmN0aW9uKHZhcnMsIHRhcmdldCkge1xuXHRcdFx0XHR2YXIgY3NzID0ge30sXG5cdFx0XHRcdFx0cDtcblx0XHRcdFx0Zm9yIChwIGluIHZhcnMpIHtcblx0XHRcdFx0XHRpZiAoIV9yZXNlcnZlZFByb3BzW3BdICYmICghKHAgaW4gdGFyZ2V0KSB8fCBwID09PSBcInRyYW5zZm9ybVwiIHx8IHAgPT09IFwieFwiIHx8IHAgPT09IFwieVwiIHx8IHAgPT09IFwid2lkdGhcIiB8fCBwID09PSBcImhlaWdodFwiIHx8IHAgPT09IFwiY2xhc3NOYW1lXCIgfHwgcCA9PT0gXCJib3JkZXJcIikgJiYgKCFfcGx1Z2luc1twXSB8fCAoX3BsdWdpbnNbcF0gJiYgX3BsdWdpbnNbcF0uX2F1dG9DU1MpKSkgeyAvL25vdGU6IDxpbWc+IGVsZW1lbnRzIGNvbnRhaW4gcmVhZC1vbmx5IFwieFwiIGFuZCBcInlcIiBwcm9wZXJ0aWVzLiBXZSBzaG91bGQgYWxzbyBwcmlvcml0aXplIGVkaXRpbmcgY3NzIHdpZHRoL2hlaWdodCByYXRoZXIgdGhhbiB0aGUgZWxlbWVudCdzIHByb3BlcnRpZXMuXG5cdFx0XHRcdFx0XHRjc3NbcF0gPSB2YXJzW3BdO1xuXHRcdFx0XHRcdFx0ZGVsZXRlIHZhcnNbcF07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHZhcnMuY3NzID0gY3NzO1xuXHRcdFx0fTtcblxuXHRcdHAgPSBUd2VlbkxpdGUucHJvdG90eXBlID0gbmV3IEFuaW1hdGlvbigpO1xuXHRcdHAuY29uc3RydWN0b3IgPSBUd2VlbkxpdGU7XG5cdFx0cC5raWxsKCkuX2djID0gZmFsc2U7XG5cbi8vLS0tLVR3ZWVuTGl0ZSBkZWZhdWx0cywgb3ZlcndyaXRlIG1hbmFnZW1lbnQsIGFuZCByb290IHVwZGF0ZXMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdFx0cC5yYXRpbyA9IDA7XG5cdFx0cC5fZmlyc3RQVCA9IHAuX3RhcmdldHMgPSBwLl9vdmVyd3JpdHRlblByb3BzID0gcC5fc3RhcnRBdCA9IG51bGw7XG5cdFx0cC5fbm90aWZ5UGx1Z2luc09mRW5hYmxlZCA9IHAuX2xhenkgPSBmYWxzZTtcblxuXHRcdFR3ZWVuTGl0ZS52ZXJzaW9uID0gXCIxLjE5LjFcIjtcblx0XHRUd2VlbkxpdGUuZGVmYXVsdEVhc2UgPSBwLl9lYXNlID0gbmV3IEVhc2UobnVsbCwgbnVsbCwgMSwgMSk7XG5cdFx0VHdlZW5MaXRlLmRlZmF1bHRPdmVyd3JpdGUgPSBcImF1dG9cIjtcblx0XHRUd2VlbkxpdGUudGlja2VyID0gX3RpY2tlcjtcblx0XHRUd2VlbkxpdGUuYXV0b1NsZWVwID0gMTIwO1xuXHRcdFR3ZWVuTGl0ZS5sYWdTbW9vdGhpbmcgPSBmdW5jdGlvbih0aHJlc2hvbGQsIGFkanVzdGVkTGFnKSB7XG5cdFx0XHRfdGlja2VyLmxhZ1Ntb290aGluZyh0aHJlc2hvbGQsIGFkanVzdGVkTGFnKTtcblx0XHR9O1xuXG5cdFx0VHdlZW5MaXRlLnNlbGVjdG9yID0gd2luZG93LiQgfHwgd2luZG93LmpRdWVyeSB8fCBmdW5jdGlvbihlKSB7XG5cdFx0XHR2YXIgc2VsZWN0b3IgPSB3aW5kb3cuJCB8fCB3aW5kb3cualF1ZXJ5O1xuXHRcdFx0aWYgKHNlbGVjdG9yKSB7XG5cdFx0XHRcdFR3ZWVuTGl0ZS5zZWxlY3RvciA9IHNlbGVjdG9yO1xuXHRcdFx0XHRyZXR1cm4gc2VsZWN0b3IoZSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gKHR5cGVvZihfZG9jKSA9PT0gXCJ1bmRlZmluZWRcIikgPyBlIDogKF9kb2MucXVlcnlTZWxlY3RvckFsbCA/IF9kb2MucXVlcnlTZWxlY3RvckFsbChlKSA6IF9kb2MuZ2V0RWxlbWVudEJ5SWQoKGUuY2hhckF0KDApID09PSBcIiNcIikgPyBlLnN1YnN0cigxKSA6IGUpKTtcblx0XHR9O1xuXG5cdFx0dmFyIF9sYXp5VHdlZW5zID0gW10sXG5cdFx0XHRfbGF6eUxvb2t1cCA9IHt9LFxuXHRcdFx0X251bWJlcnNFeHAgPSAvKD86KC18LT18XFwrPSk/XFxkKlxcLj9cXGQqKD86ZVtcXC0rXT9cXGQrKT8pWzAtOV0vaWcsXG5cdFx0XHQvL19ub25OdW1iZXJzRXhwID0gLyg/OihbXFwtK10oPyEoXFxkfD0pKSl8W15cXGRcXC0rPWVdfChlKD8hW1xcLStdW1xcZF0pKSkrL2lnLFxuXHRcdFx0X3NldFJhdGlvID0gZnVuY3Rpb24odikge1xuXHRcdFx0XHR2YXIgcHQgPSB0aGlzLl9maXJzdFBULFxuXHRcdFx0XHRcdG1pbiA9IDAuMDAwMDAxLFxuXHRcdFx0XHRcdHZhbDtcblx0XHRcdFx0d2hpbGUgKHB0KSB7XG5cdFx0XHRcdFx0dmFsID0gIXB0LmJsb2IgPyBwdC5jICogdiArIHB0LnMgOiAodiA9PT0gMSkgPyB0aGlzLmVuZCA6IHYgPyB0aGlzLmpvaW4oXCJcIikgOiB0aGlzLnN0YXJ0O1xuXHRcdFx0XHRcdGlmIChwdC5tKSB7XG5cdFx0XHRcdFx0XHR2YWwgPSBwdC5tKHZhbCwgdGhpcy5fdGFyZ2V0IHx8IHB0LnQpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAodmFsIDwgbWluKSBpZiAodmFsID4gLW1pbiAmJiAhcHQuYmxvYikgeyAvL3ByZXZlbnRzIGlzc3VlcyB3aXRoIGNvbnZlcnRpbmcgdmVyeSBzbWFsbCBudW1iZXJzIHRvIHN0cmluZ3MgaW4gdGhlIGJyb3dzZXJcblx0XHRcdFx0XHRcdHZhbCA9IDA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICghcHQuZikge1xuXHRcdFx0XHRcdFx0cHQudFtwdC5wXSA9IHZhbDtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKHB0LmZwKSB7XG5cdFx0XHRcdFx0XHRwdC50W3B0LnBdKHB0LmZwLCB2YWwpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRwdC50W3B0LnBdKHZhbCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHB0ID0gcHQuX25leHQ7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHQvL2NvbXBhcmVzIHR3byBzdHJpbmdzIChzdGFydC9lbmQpLCBmaW5kcyB0aGUgbnVtYmVycyB0aGF0IGFyZSBkaWZmZXJlbnQgYW5kIHNwaXRzIGJhY2sgYW4gYXJyYXkgcmVwcmVzZW50aW5nIHRoZSB3aG9sZSB2YWx1ZSBidXQgd2l0aCB0aGUgY2hhbmdpbmcgdmFsdWVzIGlzb2xhdGVkIGFzIGVsZW1lbnRzLiBGb3IgZXhhbXBsZSwgXCJyZ2IoMCwwLDApXCIgYW5kIFwicmdiKDEwMCw1MCwwKVwiIHdvdWxkIGJlY29tZSBbXCJyZ2IoXCIsIDAsIFwiLFwiLCA1MCwgXCIsMClcIl0uIE5vdGljZSBpdCBtZXJnZXMgdGhlIHBhcnRzIHRoYXQgYXJlIGlkZW50aWNhbCAocGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uKS4gVGhlIGFycmF5IGFsc28gaGFzIGEgbGlua2VkIGxpc3Qgb2YgUHJvcFR3ZWVucyBhdHRhY2hlZCBzdGFydGluZyB3aXRoIF9maXJzdFBUIHRoYXQgY29udGFpbiB0aGUgdHdlZW5pbmcgZGF0YSAodCwgcCwgcywgYywgZiwgZXRjLikuIEl0IGFsc28gc3RvcmVzIHRoZSBzdGFydGluZyB2YWx1ZSBhcyBhIFwic3RhcnRcIiBwcm9wZXJ0eSBzbyB0aGF0IHdlIGNhbiByZXZlcnQgdG8gaXQgaWYvd2hlbiBuZWNlc3NhcnksIGxpa2Ugd2hlbiBhIHR3ZWVuIHJld2luZHMgZnVsbHkuIElmIHRoZSBxdWFudGl0eSBvZiBudW1iZXJzIGRpZmZlcnMgYmV0d2VlbiB0aGUgc3RhcnQgYW5kIGVuZCwgaXQgd2lsbCBhbHdheXMgcHJpb3JpdGl6ZSB0aGUgZW5kIHZhbHVlKHMpLiBUaGUgcHQgcGFyYW1ldGVyIGlzIG9wdGlvbmFsIC0gaXQncyBmb3IgYSBQcm9wVHdlZW4gdGhhdCB3aWxsIGJlIGFwcGVuZGVkIHRvIHRoZSBlbmQgb2YgdGhlIGxpbmtlZCBsaXN0IGFuZCBpcyB0eXBpY2FsbHkgZm9yIGFjdHVhbGx5IHNldHRpbmcgdGhlIHZhbHVlIGFmdGVyIGFsbCBvZiB0aGUgZWxlbWVudHMgaGF2ZSBiZWVuIHVwZGF0ZWQgKHdpdGggYXJyYXkuam9pbihcIlwiKSkuXG5cdFx0XHRfYmxvYkRpZiA9IGZ1bmN0aW9uKHN0YXJ0LCBlbmQsIGZpbHRlciwgcHQpIHtcblx0XHRcdFx0dmFyIGEgPSBbXSxcblx0XHRcdFx0XHRjaGFySW5kZXggPSAwLFxuXHRcdFx0XHRcdHMgPSBcIlwiLFxuXHRcdFx0XHRcdGNvbG9yID0gMCxcblx0XHRcdFx0XHRzdGFydE51bXMsIGVuZE51bXMsIG51bSwgaSwgbCwgbm9uTnVtYmVycywgY3VycmVudE51bTtcblx0XHRcdFx0YS5zdGFydCA9IHN0YXJ0O1xuXHRcdFx0XHRhLmVuZCA9IGVuZDtcblx0XHRcdFx0c3RhcnQgPSBhWzBdID0gc3RhcnQgKyBcIlwiOyAvL2Vuc3VyZSB2YWx1ZXMgYXJlIHN0cmluZ3Ncblx0XHRcdFx0ZW5kID0gYVsxXSA9IGVuZCArIFwiXCI7XG5cdFx0XHRcdGlmIChmaWx0ZXIpIHtcblx0XHRcdFx0XHRmaWx0ZXIoYSk7IC8vcGFzcyBhbiBhcnJheSB3aXRoIHRoZSBzdGFydGluZyBhbmQgZW5kaW5nIHZhbHVlcyBhbmQgbGV0IHRoZSBmaWx0ZXIgZG8gd2hhdGV2ZXIgaXQgbmVlZHMgdG8gdGhlIHZhbHVlcy5cblx0XHRcdFx0XHRzdGFydCA9IGFbMF07XG5cdFx0XHRcdFx0ZW5kID0gYVsxXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRhLmxlbmd0aCA9IDA7XG5cdFx0XHRcdHN0YXJ0TnVtcyA9IHN0YXJ0Lm1hdGNoKF9udW1iZXJzRXhwKSB8fCBbXTtcblx0XHRcdFx0ZW5kTnVtcyA9IGVuZC5tYXRjaChfbnVtYmVyc0V4cCkgfHwgW107XG5cdFx0XHRcdGlmIChwdCkge1xuXHRcdFx0XHRcdHB0Ll9uZXh0ID0gbnVsbDtcblx0XHRcdFx0XHRwdC5ibG9iID0gMTtcblx0XHRcdFx0XHRhLl9maXJzdFBUID0gYS5fYXBwbHlQVCA9IHB0OyAvL2FwcGx5IGxhc3QgaW4gdGhlIGxpbmtlZCBsaXN0ICh3aGljaCBtZWFucyBpbnNlcnRpbmcgaXQgZmlyc3QpXG5cdFx0XHRcdH1cblx0XHRcdFx0bCA9IGVuZE51bXMubGVuZ3RoO1xuXHRcdFx0XHRmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHRcdFx0Y3VycmVudE51bSA9IGVuZE51bXNbaV07XG5cdFx0XHRcdFx0bm9uTnVtYmVycyA9IGVuZC5zdWJzdHIoY2hhckluZGV4LCBlbmQuaW5kZXhPZihjdXJyZW50TnVtLCBjaGFySW5kZXgpLWNoYXJJbmRleCk7XG5cdFx0XHRcdFx0cyArPSAobm9uTnVtYmVycyB8fCAhaSkgPyBub25OdW1iZXJzIDogXCIsXCI7IC8vbm90ZTogU1ZHIHNwZWMgYWxsb3dzIG9taXNzaW9uIG9mIGNvbW1hL3NwYWNlIHdoZW4gYSBuZWdhdGl2ZSBzaWduIGlzIHdlZGdlZCBiZXR3ZWVuIHR3byBudW1iZXJzLCBsaWtlIDIuNS01LjMgaW5zdGVhZCBvZiAyLjUsLTUuMyBidXQgd2hlbiB0d2VlbmluZywgdGhlIG5lZ2F0aXZlIHZhbHVlIG1heSBzd2l0Y2ggdG8gcG9zaXRpdmUsIHNvIHdlIGluc2VydCB0aGUgY29tbWEganVzdCBpbiBjYXNlLlxuXHRcdFx0XHRcdGNoYXJJbmRleCArPSBub25OdW1iZXJzLmxlbmd0aDtcblx0XHRcdFx0XHRpZiAoY29sb3IpIHsgLy9zZW5zZSByZ2JhKCkgdmFsdWVzIGFuZCByb3VuZCB0aGVtLlxuXHRcdFx0XHRcdFx0Y29sb3IgPSAoY29sb3IgKyAxKSAlIDU7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChub25OdW1iZXJzLnN1YnN0cigtNSkgPT09IFwicmdiYShcIikge1xuXHRcdFx0XHRcdFx0Y29sb3IgPSAxO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoY3VycmVudE51bSA9PT0gc3RhcnROdW1zW2ldIHx8IHN0YXJ0TnVtcy5sZW5ndGggPD0gaSkge1xuXHRcdFx0XHRcdFx0cyArPSBjdXJyZW50TnVtO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRpZiAocykge1xuXHRcdFx0XHRcdFx0XHRhLnB1c2gocyk7XG5cdFx0XHRcdFx0XHRcdHMgPSBcIlwiO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0bnVtID0gcGFyc2VGbG9hdChzdGFydE51bXNbaV0pO1xuXHRcdFx0XHRcdFx0YS5wdXNoKG51bSk7XG5cdFx0XHRcdFx0XHRhLl9maXJzdFBUID0ge19uZXh0OiBhLl9maXJzdFBULCB0OmEsIHA6IGEubGVuZ3RoLTEsIHM6bnVtLCBjOigoY3VycmVudE51bS5jaGFyQXQoMSkgPT09IFwiPVwiKSA/IHBhcnNlSW50KGN1cnJlbnROdW0uY2hhckF0KDApICsgXCIxXCIsIDEwKSAqIHBhcnNlRmxvYXQoY3VycmVudE51bS5zdWJzdHIoMikpIDogKHBhcnNlRmxvYXQoY3VycmVudE51bSkgLSBudW0pKSB8fCAwLCBmOjAsIG06KGNvbG9yICYmIGNvbG9yIDwgNCkgPyBNYXRoLnJvdW5kIDogMH07XG5cdFx0XHRcdFx0XHQvL25vdGU6IHdlIGRvbid0IHNldCBfcHJldiBiZWNhdXNlIHdlJ2xsIG5ldmVyIG5lZWQgdG8gcmVtb3ZlIGluZGl2aWR1YWwgUHJvcFR3ZWVucyBmcm9tIHRoaXMgbGlzdC5cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y2hhckluZGV4ICs9IGN1cnJlbnROdW0ubGVuZ3RoO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHMgKz0gZW5kLnN1YnN0cihjaGFySW5kZXgpO1xuXHRcdFx0XHRpZiAocykge1xuXHRcdFx0XHRcdGEucHVzaChzKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRhLnNldFJhdGlvID0gX3NldFJhdGlvO1xuXHRcdFx0XHRyZXR1cm4gYTtcblx0XHRcdH0sXG5cdFx0XHQvL25vdGU6IFwiZnVuY1BhcmFtXCIgaXMgb25seSBuZWNlc3NhcnkgZm9yIGZ1bmN0aW9uLWJhc2VkIGdldHRlcnMvc2V0dGVycyB0aGF0IHJlcXVpcmUgYW4gZXh0cmEgcGFyYW1ldGVyIGxpa2UgZ2V0QXR0cmlidXRlKFwid2lkdGhcIikgYW5kIHNldEF0dHJpYnV0ZShcIndpZHRoXCIsIHZhbHVlKS4gSW4gdGhpcyBleGFtcGxlLCBmdW5jUGFyYW0gd291bGQgYmUgXCJ3aWR0aFwiLiBVc2VkIGJ5IEF0dHJQbHVnaW4gZm9yIGV4YW1wbGUuXG5cdFx0XHRfYWRkUHJvcFR3ZWVuID0gZnVuY3Rpb24odGFyZ2V0LCBwcm9wLCBzdGFydCwgZW5kLCBvdmVyd3JpdGVQcm9wLCBtb2QsIGZ1bmNQYXJhbSwgc3RyaW5nRmlsdGVyLCBpbmRleCkge1xuXHRcdFx0XHRpZiAodHlwZW9mKGVuZCkgPT09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0XHRcdGVuZCA9IGVuZChpbmRleCB8fCAwLCB0YXJnZXQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHZhciB0eXBlID0gdHlwZW9mKHRhcmdldFtwcm9wXSksXG5cdFx0XHRcdFx0Z2V0dGVyTmFtZSA9ICh0eXBlICE9PSBcImZ1bmN0aW9uXCIpID8gXCJcIiA6ICgocHJvcC5pbmRleE9mKFwic2V0XCIpIHx8IHR5cGVvZih0YXJnZXRbXCJnZXRcIiArIHByb3Auc3Vic3RyKDMpXSkgIT09IFwiZnVuY3Rpb25cIikgPyBwcm9wIDogXCJnZXRcIiArIHByb3Auc3Vic3RyKDMpKSxcblx0XHRcdFx0XHRzID0gKHN0YXJ0ICE9PSBcImdldFwiKSA/IHN0YXJ0IDogIWdldHRlck5hbWUgPyB0YXJnZXRbcHJvcF0gOiBmdW5jUGFyYW0gPyB0YXJnZXRbZ2V0dGVyTmFtZV0oZnVuY1BhcmFtKSA6IHRhcmdldFtnZXR0ZXJOYW1lXSgpLFxuXHRcdFx0XHRcdGlzUmVsYXRpdmUgPSAodHlwZW9mKGVuZCkgPT09IFwic3RyaW5nXCIgJiYgZW5kLmNoYXJBdCgxKSA9PT0gXCI9XCIpLFxuXHRcdFx0XHRcdHB0ID0ge3Q6dGFyZ2V0LCBwOnByb3AsIHM6cywgZjoodHlwZSA9PT0gXCJmdW5jdGlvblwiKSwgcGc6MCwgbjpvdmVyd3JpdGVQcm9wIHx8IHByb3AsIG06KCFtb2QgPyAwIDogKHR5cGVvZihtb2QpID09PSBcImZ1bmN0aW9uXCIpID8gbW9kIDogTWF0aC5yb3VuZCksIHByOjAsIGM6aXNSZWxhdGl2ZSA/IHBhcnNlSW50KGVuZC5jaGFyQXQoMCkgKyBcIjFcIiwgMTApICogcGFyc2VGbG9hdChlbmQuc3Vic3RyKDIpKSA6IChwYXJzZUZsb2F0KGVuZCkgLSBzKSB8fCAwfSxcblx0XHRcdFx0XHRibG9iO1xuXG5cdFx0XHRcdGlmICh0eXBlb2YocykgIT09IFwibnVtYmVyXCIgfHwgKHR5cGVvZihlbmQpICE9PSBcIm51bWJlclwiICYmICFpc1JlbGF0aXZlKSkge1xuXHRcdFx0XHRcdGlmIChmdW5jUGFyYW0gfHwgaXNOYU4ocykgfHwgKCFpc1JlbGF0aXZlICYmIGlzTmFOKGVuZCkpIHx8IHR5cGVvZihzKSA9PT0gXCJib29sZWFuXCIgfHwgdHlwZW9mKGVuZCkgPT09IFwiYm9vbGVhblwiKSB7XG5cdFx0XHRcdFx0XHQvL2EgYmxvYiAoc3RyaW5nIHRoYXQgaGFzIG11bHRpcGxlIG51bWJlcnMgaW4gaXQpXG5cdFx0XHRcdFx0XHRwdC5mcCA9IGZ1bmNQYXJhbTtcblx0XHRcdFx0XHRcdGJsb2IgPSBfYmxvYkRpZihzLCAoaXNSZWxhdGl2ZSA/IHB0LnMgKyBwdC5jIDogZW5kKSwgc3RyaW5nRmlsdGVyIHx8IFR3ZWVuTGl0ZS5kZWZhdWx0U3RyaW5nRmlsdGVyLCBwdCk7XG5cdFx0XHRcdFx0XHRwdCA9IHt0OiBibG9iLCBwOiBcInNldFJhdGlvXCIsIHM6IDAsIGM6IDEsIGY6IDIsIHBnOiAwLCBuOiBvdmVyd3JpdGVQcm9wIHx8IHByb3AsIHByOiAwLCBtOiAwfTsgLy9cIjJcIiBpbmRpY2F0ZXMgaXQncyBhIEJsb2IgcHJvcGVydHkgdHdlZW4uIE5lZWRlZCBmb3IgUm91bmRQcm9wc1BsdWdpbiBmb3IgZXhhbXBsZS5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cHQucyA9IHBhcnNlRmxvYXQocyk7XG5cdFx0XHRcdFx0XHRpZiAoIWlzUmVsYXRpdmUpIHtcblx0XHRcdFx0XHRcdFx0cHQuYyA9IChwYXJzZUZsb2F0KGVuZCkgLSBwdC5zKSB8fCAwO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAocHQuYykgeyAvL29ubHkgYWRkIGl0IHRvIHRoZSBsaW5rZWQgbGlzdCBpZiB0aGVyZSdzIGEgY2hhbmdlLlxuXHRcdFx0XHRcdGlmICgocHQuX25leHQgPSB0aGlzLl9maXJzdFBUKSkge1xuXHRcdFx0XHRcdFx0cHQuX25leHQuX3ByZXYgPSBwdDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGhpcy5fZmlyc3RQVCA9IHB0O1xuXHRcdFx0XHRcdHJldHVybiBwdDtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdF9pbnRlcm5hbHMgPSBUd2VlbkxpdGUuX2ludGVybmFscyA9IHtpc0FycmF5Ol9pc0FycmF5LCBpc1NlbGVjdG9yOl9pc1NlbGVjdG9yLCBsYXp5VHdlZW5zOl9sYXp5VHdlZW5zLCBibG9iRGlmOl9ibG9iRGlmfSwgLy9naXZlcyB1cyBhIHdheSB0byBleHBvc2UgY2VydGFpbiBwcml2YXRlIHZhbHVlcyB0byBvdGhlciBHcmVlblNvY2sgY2xhc3NlcyB3aXRob3V0IGNvbnRhbWluYXRpbmcgdGhhIG1haW4gVHdlZW5MaXRlIG9iamVjdC5cblx0XHRcdF9wbHVnaW5zID0gVHdlZW5MaXRlLl9wbHVnaW5zID0ge30sXG5cdFx0XHRfdHdlZW5Mb29rdXAgPSBfaW50ZXJuYWxzLnR3ZWVuTG9va3VwID0ge30sXG5cdFx0XHRfdHdlZW5Mb29rdXBOdW0gPSAwLFxuXHRcdFx0X3Jlc2VydmVkUHJvcHMgPSBfaW50ZXJuYWxzLnJlc2VydmVkUHJvcHMgPSB7ZWFzZToxLCBkZWxheToxLCBvdmVyd3JpdGU6MSwgb25Db21wbGV0ZToxLCBvbkNvbXBsZXRlUGFyYW1zOjEsIG9uQ29tcGxldGVTY29wZToxLCB1c2VGcmFtZXM6MSwgcnVuQmFja3dhcmRzOjEsIHN0YXJ0QXQ6MSwgb25VcGRhdGU6MSwgb25VcGRhdGVQYXJhbXM6MSwgb25VcGRhdGVTY29wZToxLCBvblN0YXJ0OjEsIG9uU3RhcnRQYXJhbXM6MSwgb25TdGFydFNjb3BlOjEsIG9uUmV2ZXJzZUNvbXBsZXRlOjEsIG9uUmV2ZXJzZUNvbXBsZXRlUGFyYW1zOjEsIG9uUmV2ZXJzZUNvbXBsZXRlU2NvcGU6MSwgb25SZXBlYXQ6MSwgb25SZXBlYXRQYXJhbXM6MSwgb25SZXBlYXRTY29wZToxLCBlYXNlUGFyYW1zOjEsIHlveW86MSwgaW1tZWRpYXRlUmVuZGVyOjEsIHJlcGVhdDoxLCByZXBlYXREZWxheToxLCBkYXRhOjEsIHBhdXNlZDoxLCByZXZlcnNlZDoxLCBhdXRvQ1NTOjEsIGxhenk6MSwgb25PdmVyd3JpdGU6MSwgY2FsbGJhY2tTY29wZToxLCBzdHJpbmdGaWx0ZXI6MSwgaWQ6MX0sXG5cdFx0XHRfb3ZlcndyaXRlTG9va3VwID0ge25vbmU6MCwgYWxsOjEsIGF1dG86MiwgY29uY3VycmVudDozLCBhbGxPblN0YXJ0OjQsIHByZWV4aXN0aW5nOjUsIFwidHJ1ZVwiOjEsIFwiZmFsc2VcIjowfSxcblx0XHRcdF9yb290RnJhbWVzVGltZWxpbmUgPSBBbmltYXRpb24uX3Jvb3RGcmFtZXNUaW1lbGluZSA9IG5ldyBTaW1wbGVUaW1lbGluZSgpLFxuXHRcdFx0X3Jvb3RUaW1lbGluZSA9IEFuaW1hdGlvbi5fcm9vdFRpbWVsaW5lID0gbmV3IFNpbXBsZVRpbWVsaW5lKCksXG5cdFx0XHRfbmV4dEdDRnJhbWUgPSAzMCxcblx0XHRcdF9sYXp5UmVuZGVyID0gX2ludGVybmFscy5sYXp5UmVuZGVyID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBpID0gX2xhenlUd2VlbnMubGVuZ3RoLFxuXHRcdFx0XHRcdHR3ZWVuO1xuXHRcdFx0XHRfbGF6eUxvb2t1cCA9IHt9O1xuXHRcdFx0XHR3aGlsZSAoLS1pID4gLTEpIHtcblx0XHRcdFx0XHR0d2VlbiA9IF9sYXp5VHdlZW5zW2ldO1xuXHRcdFx0XHRcdGlmICh0d2VlbiAmJiB0d2Vlbi5fbGF6eSAhPT0gZmFsc2UpIHtcblx0XHRcdFx0XHRcdHR3ZWVuLnJlbmRlcih0d2Vlbi5fbGF6eVswXSwgdHdlZW4uX2xhenlbMV0sIHRydWUpO1xuXHRcdFx0XHRcdFx0dHdlZW4uX2xhenkgPSBmYWxzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0X2xhenlUd2VlbnMubGVuZ3RoID0gMDtcblx0XHRcdH07XG5cblx0XHRfcm9vdFRpbWVsaW5lLl9zdGFydFRpbWUgPSBfdGlja2VyLnRpbWU7XG5cdFx0X3Jvb3RGcmFtZXNUaW1lbGluZS5fc3RhcnRUaW1lID0gX3RpY2tlci5mcmFtZTtcblx0XHRfcm9vdFRpbWVsaW5lLl9hY3RpdmUgPSBfcm9vdEZyYW1lc1RpbWVsaW5lLl9hY3RpdmUgPSB0cnVlO1xuXHRcdHNldFRpbWVvdXQoX2xhenlSZW5kZXIsIDEpOyAvL29uIHNvbWUgbW9iaWxlIGRldmljZXMsIHRoZXJlIGlzbid0IGEgXCJ0aWNrXCIgYmVmb3JlIGNvZGUgcnVucyB3aGljaCBtZWFucyBhbnkgbGF6eSByZW5kZXJzIHdvdWxkbid0IHJ1biBiZWZvcmUgdGhlIG5leHQgb2ZmaWNpYWwgXCJ0aWNrXCIuXG5cblx0XHRBbmltYXRpb24uX3VwZGF0ZVJvb3QgPSBUd2VlbkxpdGUucmVuZGVyID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBpLCBhLCBwO1xuXHRcdFx0XHRpZiAoX2xhenlUd2VlbnMubGVuZ3RoKSB7IC8vaWYgY29kZSBpcyBydW4gb3V0c2lkZSBvZiB0aGUgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIGxvb3AsIHRoZXJlIG1heSBiZSB0d2VlbnMgcXVldWVkIEFGVEVSIHRoZSBlbmdpbmUgcmVmcmVzaGVkLCBzbyB3ZSBuZWVkIHRvIGVuc3VyZSBhbnkgcGVuZGluZyByZW5kZXJzIG9jY3VyIGJlZm9yZSB3ZSByZWZyZXNoIGFnYWluLlxuXHRcdFx0XHRcdF9sYXp5UmVuZGVyKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0X3Jvb3RUaW1lbGluZS5yZW5kZXIoKF90aWNrZXIudGltZSAtIF9yb290VGltZWxpbmUuX3N0YXJ0VGltZSkgKiBfcm9vdFRpbWVsaW5lLl90aW1lU2NhbGUsIGZhbHNlLCBmYWxzZSk7XG5cdFx0XHRcdF9yb290RnJhbWVzVGltZWxpbmUucmVuZGVyKChfdGlja2VyLmZyYW1lIC0gX3Jvb3RGcmFtZXNUaW1lbGluZS5fc3RhcnRUaW1lKSAqIF9yb290RnJhbWVzVGltZWxpbmUuX3RpbWVTY2FsZSwgZmFsc2UsIGZhbHNlKTtcblx0XHRcdFx0aWYgKF9sYXp5VHdlZW5zLmxlbmd0aCkge1xuXHRcdFx0XHRcdF9sYXp5UmVuZGVyKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKF90aWNrZXIuZnJhbWUgPj0gX25leHRHQ0ZyYW1lKSB7IC8vZHVtcCBnYXJiYWdlIGV2ZXJ5IDEyMCBmcmFtZXMgb3Igd2hhdGV2ZXIgdGhlIHVzZXIgc2V0cyBUd2VlbkxpdGUuYXV0b1NsZWVwIHRvXG5cdFx0XHRcdFx0X25leHRHQ0ZyYW1lID0gX3RpY2tlci5mcmFtZSArIChwYXJzZUludChUd2VlbkxpdGUuYXV0b1NsZWVwLCAxMCkgfHwgMTIwKTtcblx0XHRcdFx0XHRmb3IgKHAgaW4gX3R3ZWVuTG9va3VwKSB7XG5cdFx0XHRcdFx0XHRhID0gX3R3ZWVuTG9va3VwW3BdLnR3ZWVucztcblx0XHRcdFx0XHRcdGkgPSBhLmxlbmd0aDtcblx0XHRcdFx0XHRcdHdoaWxlICgtLWkgPiAtMSkge1xuXHRcdFx0XHRcdFx0XHRpZiAoYVtpXS5fZ2MpIHtcblx0XHRcdFx0XHRcdFx0XHRhLnNwbGljZShpLCAxKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKGEubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0XHRcdGRlbGV0ZSBfdHdlZW5Mb29rdXBbcF07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdC8vaWYgdGhlcmUgYXJlIG5vIG1vcmUgdHdlZW5zIGluIHRoZSByb290IHRpbWVsaW5lcywgb3IgaWYgdGhleSdyZSBhbGwgcGF1c2VkLCBtYWtlIHRoZSBfdGltZXIgc2xlZXAgdG8gcmVkdWNlIGxvYWQgb24gdGhlIENQVSBzbGlnaHRseVxuXHRcdFx0XHRcdHAgPSBfcm9vdFRpbWVsaW5lLl9maXJzdDtcblx0XHRcdFx0XHRpZiAoIXAgfHwgcC5fcGF1c2VkKSBpZiAoVHdlZW5MaXRlLmF1dG9TbGVlcCAmJiAhX3Jvb3RGcmFtZXNUaW1lbGluZS5fZmlyc3QgJiYgX3RpY2tlci5fbGlzdGVuZXJzLnRpY2subGVuZ3RoID09PSAxKSB7XG5cdFx0XHRcdFx0XHR3aGlsZSAocCAmJiBwLl9wYXVzZWQpIHtcblx0XHRcdFx0XHRcdFx0cCA9IHAuX25leHQ7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoIXApIHtcblx0XHRcdFx0XHRcdFx0X3RpY2tlci5zbGVlcCgpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdF90aWNrZXIuYWRkRXZlbnRMaXN0ZW5lcihcInRpY2tcIiwgQW5pbWF0aW9uLl91cGRhdGVSb290KTtcblxuXHRcdHZhciBfcmVnaXN0ZXIgPSBmdW5jdGlvbih0YXJnZXQsIHR3ZWVuLCBzY3J1Yikge1xuXHRcdFx0XHR2YXIgaWQgPSB0YXJnZXQuX2dzVHdlZW5JRCwgYSwgaTtcblx0XHRcdFx0aWYgKCFfdHdlZW5Mb29rdXBbaWQgfHwgKHRhcmdldC5fZ3NUd2VlbklEID0gaWQgPSBcInRcIiArIChfdHdlZW5Mb29rdXBOdW0rKykpXSkge1xuXHRcdFx0XHRcdF90d2Vlbkxvb2t1cFtpZF0gPSB7dGFyZ2V0OnRhcmdldCwgdHdlZW5zOltdfTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAodHdlZW4pIHtcblx0XHRcdFx0XHRhID0gX3R3ZWVuTG9va3VwW2lkXS50d2VlbnM7XG5cdFx0XHRcdFx0YVsoaSA9IGEubGVuZ3RoKV0gPSB0d2Vlbjtcblx0XHRcdFx0XHRpZiAoc2NydWIpIHtcblx0XHRcdFx0XHRcdHdoaWxlICgtLWkgPiAtMSkge1xuXHRcdFx0XHRcdFx0XHRpZiAoYVtpXSA9PT0gdHdlZW4pIHtcblx0XHRcdFx0XHRcdFx0XHRhLnNwbGljZShpLCAxKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gX3R3ZWVuTG9va3VwW2lkXS50d2VlbnM7XG5cdFx0XHR9LFxuXHRcdFx0X29uT3ZlcndyaXRlID0gZnVuY3Rpb24ob3ZlcndyaXR0ZW5Ud2Vlbiwgb3ZlcndyaXRpbmdUd2VlbiwgdGFyZ2V0LCBraWxsZWRQcm9wcykge1xuXHRcdFx0XHR2YXIgZnVuYyA9IG92ZXJ3cml0dGVuVHdlZW4udmFycy5vbk92ZXJ3cml0ZSwgcjEsIHIyO1xuXHRcdFx0XHRpZiAoZnVuYykge1xuXHRcdFx0XHRcdHIxID0gZnVuYyhvdmVyd3JpdHRlblR3ZWVuLCBvdmVyd3JpdGluZ1R3ZWVuLCB0YXJnZXQsIGtpbGxlZFByb3BzKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRmdW5jID0gVHdlZW5MaXRlLm9uT3ZlcndyaXRlO1xuXHRcdFx0XHRpZiAoZnVuYykge1xuXHRcdFx0XHRcdHIyID0gZnVuYyhvdmVyd3JpdHRlblR3ZWVuLCBvdmVyd3JpdGluZ1R3ZWVuLCB0YXJnZXQsIGtpbGxlZFByb3BzKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gKHIxICE9PSBmYWxzZSAmJiByMiAhPT0gZmFsc2UpO1xuXHRcdFx0fSxcblx0XHRcdF9hcHBseU92ZXJ3cml0ZSA9IGZ1bmN0aW9uKHRhcmdldCwgdHdlZW4sIHByb3BzLCBtb2RlLCBzaWJsaW5ncykge1xuXHRcdFx0XHR2YXIgaSwgY2hhbmdlZCwgY3VyVHdlZW4sIGw7XG5cdFx0XHRcdGlmIChtb2RlID09PSAxIHx8IG1vZGUgPj0gNCkge1xuXHRcdFx0XHRcdGwgPSBzaWJsaW5ncy5sZW5ndGg7XG5cdFx0XHRcdFx0Zm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuXHRcdFx0XHRcdFx0aWYgKChjdXJUd2VlbiA9IHNpYmxpbmdzW2ldKSAhPT0gdHdlZW4pIHtcblx0XHRcdFx0XHRcdFx0aWYgKCFjdXJUd2Vlbi5fZ2MpIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoY3VyVHdlZW4uX2tpbGwobnVsbCwgdGFyZ2V0LCB0d2VlbikpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNoYW5nZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChtb2RlID09PSA1KSB7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gY2hhbmdlZDtcblx0XHRcdFx0fVxuXHRcdFx0XHQvL05PVEU6IEFkZCAwLjAwMDAwMDAwMDEgdG8gb3ZlcmNvbWUgZmxvYXRpbmcgcG9pbnQgZXJyb3JzIHRoYXQgY2FuIGNhdXNlIHRoZSBzdGFydFRpbWUgdG8gYmUgVkVSWSBzbGlnaHRseSBvZmYgKHdoZW4gYSB0d2VlbidzIHRpbWUoKSBpcyBzZXQgZm9yIGV4YW1wbGUpXG5cdFx0XHRcdHZhciBzdGFydFRpbWUgPSB0d2Vlbi5fc3RhcnRUaW1lICsgX3RpbnlOdW0sXG5cdFx0XHRcdFx0b3ZlcmxhcHMgPSBbXSxcblx0XHRcdFx0XHRvQ291bnQgPSAwLFxuXHRcdFx0XHRcdHplcm9EdXIgPSAodHdlZW4uX2R1cmF0aW9uID09PSAwKSxcblx0XHRcdFx0XHRnbG9iYWxTdGFydDtcblx0XHRcdFx0aSA9IHNpYmxpbmdzLmxlbmd0aDtcblx0XHRcdFx0d2hpbGUgKC0taSA+IC0xKSB7XG5cdFx0XHRcdFx0aWYgKChjdXJUd2VlbiA9IHNpYmxpbmdzW2ldKSA9PT0gdHdlZW4gfHwgY3VyVHdlZW4uX2djIHx8IGN1clR3ZWVuLl9wYXVzZWQpIHtcblx0XHRcdFx0XHRcdC8vaWdub3JlXG5cdFx0XHRcdFx0fSBlbHNlIGlmIChjdXJUd2Vlbi5fdGltZWxpbmUgIT09IHR3ZWVuLl90aW1lbGluZSkge1xuXHRcdFx0XHRcdFx0Z2xvYmFsU3RhcnQgPSBnbG9iYWxTdGFydCB8fCBfY2hlY2tPdmVybGFwKHR3ZWVuLCAwLCB6ZXJvRHVyKTtcblx0XHRcdFx0XHRcdGlmIChfY2hlY2tPdmVybGFwKGN1clR3ZWVuLCBnbG9iYWxTdGFydCwgemVyb0R1cikgPT09IDApIHtcblx0XHRcdFx0XHRcdFx0b3ZlcmxhcHNbb0NvdW50KytdID0gY3VyVHdlZW47XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChjdXJUd2Vlbi5fc3RhcnRUaW1lIDw9IHN0YXJ0VGltZSkgaWYgKGN1clR3ZWVuLl9zdGFydFRpbWUgKyBjdXJUd2Vlbi50b3RhbER1cmF0aW9uKCkgLyBjdXJUd2Vlbi5fdGltZVNjYWxlID4gc3RhcnRUaW1lKSBpZiAoISgoemVyb0R1ciB8fCAhY3VyVHdlZW4uX2luaXR0ZWQpICYmIHN0YXJ0VGltZSAtIGN1clR3ZWVuLl9zdGFydFRpbWUgPD0gMC4wMDAwMDAwMDAyKSkge1xuXHRcdFx0XHRcdFx0b3ZlcmxhcHNbb0NvdW50KytdID0gY3VyVHdlZW47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0aSA9IG9Db3VudDtcblx0XHRcdFx0d2hpbGUgKC0taSA+IC0xKSB7XG5cdFx0XHRcdFx0Y3VyVHdlZW4gPSBvdmVybGFwc1tpXTtcblx0XHRcdFx0XHRpZiAobW9kZSA9PT0gMikgaWYgKGN1clR3ZWVuLl9raWxsKHByb3BzLCB0YXJnZXQsIHR3ZWVuKSkge1xuXHRcdFx0XHRcdFx0Y2hhbmdlZCA9IHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChtb2RlICE9PSAyIHx8ICghY3VyVHdlZW4uX2ZpcnN0UFQgJiYgY3VyVHdlZW4uX2luaXR0ZWQpKSB7XG5cdFx0XHRcdFx0XHRpZiAobW9kZSAhPT0gMiAmJiAhX29uT3ZlcndyaXRlKGN1clR3ZWVuLCB0d2VlbikpIHtcblx0XHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoY3VyVHdlZW4uX2VuYWJsZWQoZmFsc2UsIGZhbHNlKSkgeyAvL2lmIGFsbCBwcm9wZXJ0eSB0d2VlbnMgaGF2ZSBiZWVuIG92ZXJ3cml0dGVuLCBraWxsIHRoZSB0d2Vlbi5cblx0XHRcdFx0XHRcdFx0Y2hhbmdlZCA9IHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBjaGFuZ2VkO1xuXHRcdFx0fSxcblx0XHRcdF9jaGVja092ZXJsYXAgPSBmdW5jdGlvbih0d2VlbiwgcmVmZXJlbmNlLCB6ZXJvRHVyKSB7XG5cdFx0XHRcdHZhciB0bCA9IHR3ZWVuLl90aW1lbGluZSxcblx0XHRcdFx0XHR0cyA9IHRsLl90aW1lU2NhbGUsXG5cdFx0XHRcdFx0dCA9IHR3ZWVuLl9zdGFydFRpbWU7XG5cdFx0XHRcdHdoaWxlICh0bC5fdGltZWxpbmUpIHtcblx0XHRcdFx0XHR0ICs9IHRsLl9zdGFydFRpbWU7XG5cdFx0XHRcdFx0dHMgKj0gdGwuX3RpbWVTY2FsZTtcblx0XHRcdFx0XHRpZiAodGwuX3BhdXNlZCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIC0xMDA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRsID0gdGwuX3RpbWVsaW5lO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHQgLz0gdHM7XG5cdFx0XHRcdHJldHVybiAodCA+IHJlZmVyZW5jZSkgPyB0IC0gcmVmZXJlbmNlIDogKCh6ZXJvRHVyICYmIHQgPT09IHJlZmVyZW5jZSkgfHwgKCF0d2Vlbi5faW5pdHRlZCAmJiB0IC0gcmVmZXJlbmNlIDwgMiAqIF90aW55TnVtKSkgPyBfdGlueU51bSA6ICgodCArPSB0d2Vlbi50b3RhbER1cmF0aW9uKCkgLyB0d2Vlbi5fdGltZVNjYWxlIC8gdHMpID4gcmVmZXJlbmNlICsgX3RpbnlOdW0pID8gMCA6IHQgLSByZWZlcmVuY2UgLSBfdGlueU51bTtcblx0XHRcdH07XG5cblxuLy8tLS0tIFR3ZWVuTGl0ZSBpbnN0YW5jZSBtZXRob2RzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblx0XHRwLl9pbml0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgdiA9IHRoaXMudmFycyxcblx0XHRcdFx0b3AgPSB0aGlzLl9vdmVyd3JpdHRlblByb3BzLFxuXHRcdFx0XHRkdXIgPSB0aGlzLl9kdXJhdGlvbixcblx0XHRcdFx0aW1tZWRpYXRlID0gISF2LmltbWVkaWF0ZVJlbmRlcixcblx0XHRcdFx0ZWFzZSA9IHYuZWFzZSxcblx0XHRcdFx0aSwgaW5pdFBsdWdpbnMsIHB0LCBwLCBzdGFydFZhcnMsIGw7XG5cdFx0XHRpZiAodi5zdGFydEF0KSB7XG5cdFx0XHRcdGlmICh0aGlzLl9zdGFydEF0KSB7XG5cdFx0XHRcdFx0dGhpcy5fc3RhcnRBdC5yZW5kZXIoLTEsIHRydWUpOyAvL2lmIHdlJ3ZlIHJ1biBhIHN0YXJ0QXQgcHJldmlvdXNseSAod2hlbiB0aGUgdHdlZW4gaW5zdGFudGlhdGVkKSwgd2Ugc2hvdWxkIHJldmVydCBpdCBzbyB0aGF0IHRoZSB2YWx1ZXMgcmUtaW5zdGFudGlhdGUgY29ycmVjdGx5IHBhcnRpY3VsYXJseSBmb3IgcmVsYXRpdmUgdHdlZW5zLiBXaXRob3V0IHRoaXMsIGEgVHdlZW5MaXRlLmZyb21UbyhvYmosIDEsIHt4OlwiKz0xMDBcIn0sIHt4OlwiLT0xMDBcIn0pLCBmb3IgZXhhbXBsZSwgd291bGQgYWN0dWFsbHkganVtcCB0byArPTIwMCBiZWNhdXNlIHRoZSBzdGFydEF0IHdvdWxkIHJ1biB0d2ljZSwgZG91YmxpbmcgdGhlIHJlbGF0aXZlIGNoYW5nZS5cblx0XHRcdFx0XHR0aGlzLl9zdGFydEF0LmtpbGwoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzdGFydFZhcnMgPSB7fTtcblx0XHRcdFx0Zm9yIChwIGluIHYuc3RhcnRBdCkgeyAvL2NvcHkgdGhlIHByb3BlcnRpZXMvdmFsdWVzIGludG8gYSBuZXcgb2JqZWN0IHRvIGF2b2lkIGNvbGxpc2lvbnMsIGxpa2UgdmFyIHRvID0ge3g6MH0sIGZyb20gPSB7eDo1MDB9OyB0aW1lbGluZS5mcm9tVG8oZSwgMSwgZnJvbSwgdG8pLmZyb21UbyhlLCAxLCB0bywgZnJvbSk7XG5cdFx0XHRcdFx0c3RhcnRWYXJzW3BdID0gdi5zdGFydEF0W3BdO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHN0YXJ0VmFycy5vdmVyd3JpdGUgPSBmYWxzZTtcblx0XHRcdFx0c3RhcnRWYXJzLmltbWVkaWF0ZVJlbmRlciA9IHRydWU7XG5cdFx0XHRcdHN0YXJ0VmFycy5sYXp5ID0gKGltbWVkaWF0ZSAmJiB2LmxhenkgIT09IGZhbHNlKTtcblx0XHRcdFx0c3RhcnRWYXJzLnN0YXJ0QXQgPSBzdGFydFZhcnMuZGVsYXkgPSBudWxsOyAvL25vIG5lc3Rpbmcgb2Ygc3RhcnRBdCBvYmplY3RzIGFsbG93ZWQgKG90aGVyd2lzZSBpdCBjb3VsZCBjYXVzZSBhbiBpbmZpbml0ZSBsb29wKS5cblx0XHRcdFx0dGhpcy5fc3RhcnRBdCA9IFR3ZWVuTGl0ZS50byh0aGlzLnRhcmdldCwgMCwgc3RhcnRWYXJzKTtcblx0XHRcdFx0aWYgKGltbWVkaWF0ZSkge1xuXHRcdFx0XHRcdGlmICh0aGlzLl90aW1lID4gMCkge1xuXHRcdFx0XHRcdFx0dGhpcy5fc3RhcnRBdCA9IG51bGw7IC8vdHdlZW5zIHRoYXQgcmVuZGVyIGltbWVkaWF0ZWx5IChsaWtlIG1vc3QgZnJvbSgpIGFuZCBmcm9tVG8oKSB0d2VlbnMpIHNob3VsZG4ndCByZXZlcnQgd2hlbiB0aGVpciBwYXJlbnQgdGltZWxpbmUncyBwbGF5aGVhZCBnb2VzIGJhY2t3YXJkIHBhc3QgdGhlIHN0YXJ0VGltZSBiZWNhdXNlIHRoZSBpbml0aWFsIHJlbmRlciBjb3VsZCBoYXZlIGhhcHBlbmVkIGFueXRpbWUgYW5kIGl0IHNob3VsZG4ndCBiZSBkaXJlY3RseSBjb3JyZWxhdGVkIHRvIHRoaXMgdHdlZW4ncyBzdGFydFRpbWUuIEltYWdpbmUgc2V0dGluZyB1cCBhIGNvbXBsZXggYW5pbWF0aW9uIHdoZXJlIHRoZSBiZWdpbm5pbmcgc3RhdGVzIG9mIHZhcmlvdXMgb2JqZWN0cyBhcmUgcmVuZGVyZWQgaW1tZWRpYXRlbHkgYnV0IHRoZSB0d2VlbiBkb2Vzbid0IGhhcHBlbiBmb3IgcXVpdGUgc29tZSB0aW1lIC0gaWYgd2UgcmV2ZXJ0IHRvIHRoZSBzdGFydGluZyB2YWx1ZXMgYXMgc29vbiBhcyB0aGUgcGxheWhlYWQgZ29lcyBiYWNrd2FyZCBwYXN0IHRoZSB0d2VlbidzIHN0YXJ0VGltZSwgaXQgd2lsbCB0aHJvdyB0aGluZ3Mgb2ZmIHZpc3VhbGx5LiBSZXZlcnNpb24gc2hvdWxkIG9ubHkgaGFwcGVuIGluIFRpbWVsaW5lTGl0ZS9NYXggaW5zdGFuY2VzIHdoZXJlIGltbWVkaWF0ZVJlbmRlciB3YXMgZmFsc2UgKHdoaWNoIGlzIHRoZSBkZWZhdWx0IGluIHRoZSBjb252ZW5pZW5jZSBtZXRob2RzIGxpa2UgZnJvbSgpKS5cblx0XHRcdFx0XHR9IGVsc2UgaWYgKGR1ciAhPT0gMCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuOyAvL3dlIHNraXAgaW5pdGlhbGl6YXRpb24gaGVyZSBzbyB0aGF0IG92ZXJ3cml0aW5nIGRvZXNuJ3Qgb2NjdXIgdW50aWwgdGhlIHR3ZWVuIGFjdHVhbGx5IGJlZ2lucy4gT3RoZXJ3aXNlLCBpZiB5b3UgY3JlYXRlIHNldmVyYWwgaW1tZWRpYXRlUmVuZGVyOnRydWUgdHdlZW5zIG9mIHRoZSBzYW1lIHRhcmdldC9wcm9wZXJ0aWVzIHRvIGRyb3AgaW50byBhIFRpbWVsaW5lTGl0ZSBvciBUaW1lbGluZU1heCwgdGhlIGxhc3Qgb25lIGNyZWF0ZWQgd291bGQgb3ZlcndyaXRlIHRoZSBmaXJzdCBvbmVzIGJlY2F1c2UgdGhleSBkaWRuJ3QgZ2V0IHBsYWNlZCBpbnRvIHRoZSB0aW1lbGluZSB5ZXQgYmVmb3JlIHRoZSBmaXJzdCByZW5kZXIgb2NjdXJzIGFuZCBraWNrcyBpbiBvdmVyd3JpdGluZy5cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAodi5ydW5CYWNrd2FyZHMgJiYgZHVyICE9PSAwKSB7XG5cdFx0XHRcdC8vZnJvbSgpIHR3ZWVucyBtdXN0IGJlIGhhbmRsZWQgdW5pcXVlbHk6IHRoZWlyIGJlZ2lubmluZyB2YWx1ZXMgbXVzdCBiZSByZW5kZXJlZCBidXQgd2UgZG9uJ3Qgd2FudCBvdmVyd3JpdGluZyB0byBvY2N1ciB5ZXQgKHdoZW4gdGltZSBpcyBzdGlsbCAwKS4gV2FpdCB1bnRpbCB0aGUgdHdlZW4gYWN0dWFsbHkgYmVnaW5zIGJlZm9yZSBkb2luZyBhbGwgdGhlIHJvdXRpbmVzIGxpa2Ugb3ZlcndyaXRpbmcuIEF0IHRoYXQgdGltZSwgd2Ugc2hvdWxkIHJlbmRlciBhdCB0aGUgRU5EIG9mIHRoZSB0d2VlbiB0byBlbnN1cmUgdGhhdCB0aGluZ3MgaW5pdGlhbGl6ZSBjb3JyZWN0bHkgKHJlbWVtYmVyLCBmcm9tKCkgdHdlZW5zIGdvIGJhY2t3YXJkcylcblx0XHRcdFx0aWYgKHRoaXMuX3N0YXJ0QXQpIHtcblx0XHRcdFx0XHR0aGlzLl9zdGFydEF0LnJlbmRlcigtMSwgdHJ1ZSk7XG5cdFx0XHRcdFx0dGhpcy5fc3RhcnRBdC5raWxsKCk7XG5cdFx0XHRcdFx0dGhpcy5fc3RhcnRBdCA9IG51bGw7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aWYgKHRoaXMuX3RpbWUgIT09IDApIHsgLy9pbiByYXJlIGNhc2VzIChsaWtlIGlmIGEgZnJvbSgpIHR3ZWVuIHJ1bnMgYW5kIHRoZW4gaXMgaW52YWxpZGF0ZSgpLWVkKSwgaW1tZWRpYXRlUmVuZGVyIGNvdWxkIGJlIHRydWUgYnV0IHRoZSBpbml0aWFsIGZvcmNlZC1yZW5kZXIgZ2V0cyBza2lwcGVkLCBzbyB0aGVyZSdzIG5vIG5lZWQgdG8gZm9yY2UgdGhlIHJlbmRlciBpbiB0aGlzIGNvbnRleHQgd2hlbiB0aGUgX3RpbWUgaXMgZ3JlYXRlciB0aGFuIDBcblx0XHRcdFx0XHRcdGltbWVkaWF0ZSA9IGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRwdCA9IHt9O1xuXHRcdFx0XHRcdGZvciAocCBpbiB2KSB7IC8vY29weSBwcm9wcyBpbnRvIGEgbmV3IG9iamVjdCBhbmQgc2tpcCBhbnkgcmVzZXJ2ZWQgcHJvcHMsIG90aGVyd2lzZSBvbkNvbXBsZXRlIG9yIG9uVXBkYXRlIG9yIG9uU3RhcnQgY291bGQgZmlyZS4gV2Ugc2hvdWxkLCBob3dldmVyLCBwZXJtaXQgYXV0b0NTUyB0byBnbyB0aHJvdWdoLlxuXHRcdFx0XHRcdFx0aWYgKCFfcmVzZXJ2ZWRQcm9wc1twXSB8fCBwID09PSBcImF1dG9DU1NcIikge1xuXHRcdFx0XHRcdFx0XHRwdFtwXSA9IHZbcF07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHB0Lm92ZXJ3cml0ZSA9IDA7XG5cdFx0XHRcdFx0cHQuZGF0YSA9IFwiaXNGcm9tU3RhcnRcIjsgLy93ZSB0YWcgdGhlIHR3ZWVuIHdpdGggYXMgXCJpc0Zyb21TdGFydFwiIHNvIHRoYXQgaWYgW2luc2lkZSBhIHBsdWdpbl0gd2UgbmVlZCB0byBvbmx5IGRvIHNvbWV0aGluZyBhdCB0aGUgdmVyeSBFTkQgb2YgYSB0d2Vlbiwgd2UgaGF2ZSBhIHdheSBvZiBpZGVudGlmeWluZyB0aGlzIHR3ZWVuIGFzIG1lcmVseSB0aGUgb25lIHRoYXQncyBzZXR0aW5nIHRoZSBiZWdpbm5pbmcgdmFsdWVzIGZvciBhIFwiZnJvbSgpXCIgdHdlZW4uIEZvciBleGFtcGxlLCBjbGVhclByb3BzIGluIENTU1BsdWdpbiBzaG91bGQgb25seSBnZXQgYXBwbGllZCBhdCB0aGUgdmVyeSBFTkQgb2YgYSB0d2VlbiBhbmQgd2l0aG91dCB0aGlzIHRhZywgZnJvbSguLi57aGVpZ2h0OjEwMCwgY2xlYXJQcm9wczpcImhlaWdodFwiLCBkZWxheToxfSkgd291bGQgd2lwZSB0aGUgaGVpZ2h0IGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIHR3ZWVuIGFuZCBhZnRlciAxIHNlY29uZCwgaXQnZCBraWNrIGJhY2sgaW4uXG5cdFx0XHRcdFx0cHQubGF6eSA9IChpbW1lZGlhdGUgJiYgdi5sYXp5ICE9PSBmYWxzZSk7XG5cdFx0XHRcdFx0cHQuaW1tZWRpYXRlUmVuZGVyID0gaW1tZWRpYXRlOyAvL3plcm8tZHVyYXRpb24gdHdlZW5zIHJlbmRlciBpbW1lZGlhdGVseSBieSBkZWZhdWx0LCBidXQgaWYgd2UncmUgbm90IHNwZWNpZmljYWxseSBpbnN0cnVjdGVkIHRvIHJlbmRlciB0aGlzIHR3ZWVuIGltbWVkaWF0ZWx5LCB3ZSBzaG91bGQgc2tpcCB0aGlzIGFuZCBtZXJlbHkgX2luaXQoKSB0byByZWNvcmQgdGhlIHN0YXJ0aW5nIHZhbHVlcyAocmVuZGVyaW5nIHRoZW0gaW1tZWRpYXRlbHkgd291bGQgcHVzaCB0aGVtIHRvIGNvbXBsZXRpb24gd2hpY2ggaXMgd2FzdGVmdWwgaW4gdGhhdCBjYXNlIC0gd2UnZCBoYXZlIHRvIHJlbmRlcigtMSkgaW1tZWRpYXRlbHkgYWZ0ZXIpXG5cdFx0XHRcdFx0dGhpcy5fc3RhcnRBdCA9IFR3ZWVuTGl0ZS50byh0aGlzLnRhcmdldCwgMCwgcHQpO1xuXHRcdFx0XHRcdGlmICghaW1tZWRpYXRlKSB7XG5cdFx0XHRcdFx0XHR0aGlzLl9zdGFydEF0Ll9pbml0KCk7IC8vZW5zdXJlcyB0aGF0IHRoZSBpbml0aWFsIHZhbHVlcyBhcmUgcmVjb3JkZWRcblx0XHRcdFx0XHRcdHRoaXMuX3N0YXJ0QXQuX2VuYWJsZWQoZmFsc2UpOyAvL25vIG5lZWQgdG8gaGF2ZSB0aGUgdHdlZW4gcmVuZGVyIG9uIHRoZSBuZXh0IGN5Y2xlLiBEaXNhYmxlIGl0IGJlY2F1c2Ugd2UnbGwgYWx3YXlzIG1hbnVhbGx5IGNvbnRyb2wgdGhlIHJlbmRlcnMgb2YgdGhlIF9zdGFydEF0IHR3ZWVuLlxuXHRcdFx0XHRcdFx0aWYgKHRoaXMudmFycy5pbW1lZGlhdGVSZW5kZXIpIHtcblx0XHRcdFx0XHRcdFx0dGhpcy5fc3RhcnRBdCA9IG51bGw7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIGlmICh0aGlzLl90aW1lID09PSAwKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHR0aGlzLl9lYXNlID0gZWFzZSA9ICghZWFzZSkgPyBUd2VlbkxpdGUuZGVmYXVsdEVhc2UgOiAoZWFzZSBpbnN0YW5jZW9mIEVhc2UpID8gZWFzZSA6ICh0eXBlb2YoZWFzZSkgPT09IFwiZnVuY3Rpb25cIikgPyBuZXcgRWFzZShlYXNlLCB2LmVhc2VQYXJhbXMpIDogX2Vhc2VNYXBbZWFzZV0gfHwgVHdlZW5MaXRlLmRlZmF1bHRFYXNlO1xuXHRcdFx0aWYgKHYuZWFzZVBhcmFtcyBpbnN0YW5jZW9mIEFycmF5ICYmIGVhc2UuY29uZmlnKSB7XG5cdFx0XHRcdHRoaXMuX2Vhc2UgPSBlYXNlLmNvbmZpZy5hcHBseShlYXNlLCB2LmVhc2VQYXJhbXMpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5fZWFzZVR5cGUgPSB0aGlzLl9lYXNlLl90eXBlO1xuXHRcdFx0dGhpcy5fZWFzZVBvd2VyID0gdGhpcy5fZWFzZS5fcG93ZXI7XG5cdFx0XHR0aGlzLl9maXJzdFBUID0gbnVsbDtcblxuXHRcdFx0aWYgKHRoaXMuX3RhcmdldHMpIHtcblx0XHRcdFx0bCA9IHRoaXMuX3RhcmdldHMubGVuZ3RoO1xuXHRcdFx0XHRmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHRcdFx0aWYgKCB0aGlzLl9pbml0UHJvcHMoIHRoaXMuX3RhcmdldHNbaV0sICh0aGlzLl9wcm9wTG9va3VwW2ldID0ge30pLCB0aGlzLl9zaWJsaW5nc1tpXSwgKG9wID8gb3BbaV0gOiBudWxsKSwgaSkgKSB7XG5cdFx0XHRcdFx0XHRpbml0UGx1Z2lucyA9IHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpbml0UGx1Z2lucyA9IHRoaXMuX2luaXRQcm9wcyh0aGlzLnRhcmdldCwgdGhpcy5fcHJvcExvb2t1cCwgdGhpcy5fc2libGluZ3MsIG9wLCAwKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGluaXRQbHVnaW5zKSB7XG5cdFx0XHRcdFR3ZWVuTGl0ZS5fb25QbHVnaW5FdmVudChcIl9vbkluaXRBbGxQcm9wc1wiLCB0aGlzKTsgLy9yZW9yZGVycyB0aGUgYXJyYXkgaW4gb3JkZXIgb2YgcHJpb3JpdHkuIFVzZXMgYSBzdGF0aWMgVHdlZW5QbHVnaW4gbWV0aG9kIGluIG9yZGVyIHRvIG1pbmltaXplIGZpbGUgc2l6ZSBpbiBUd2VlbkxpdGVcblx0XHRcdH1cblx0XHRcdGlmIChvcCkgaWYgKCF0aGlzLl9maXJzdFBUKSBpZiAodHlwZW9mKHRoaXMudGFyZ2V0KSAhPT0gXCJmdW5jdGlvblwiKSB7IC8vaWYgYWxsIHR3ZWVuaW5nIHByb3BlcnRpZXMgaGF2ZSBiZWVuIG92ZXJ3cml0dGVuLCBraWxsIHRoZSB0d2Vlbi4gSWYgdGhlIHRhcmdldCBpcyBhIGZ1bmN0aW9uLCBpdCdzIHByb2JhYmx5IGEgZGVsYXllZENhbGwgc28gbGV0IGl0IGxpdmUuXG5cdFx0XHRcdHRoaXMuX2VuYWJsZWQoZmFsc2UsIGZhbHNlKTtcblx0XHRcdH1cblx0XHRcdGlmICh2LnJ1bkJhY2t3YXJkcykge1xuXHRcdFx0XHRwdCA9IHRoaXMuX2ZpcnN0UFQ7XG5cdFx0XHRcdHdoaWxlIChwdCkge1xuXHRcdFx0XHRcdHB0LnMgKz0gcHQuYztcblx0XHRcdFx0XHRwdC5jID0gLXB0LmM7XG5cdFx0XHRcdFx0cHQgPSBwdC5fbmV4dDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0dGhpcy5fb25VcGRhdGUgPSB2Lm9uVXBkYXRlO1xuXHRcdFx0dGhpcy5faW5pdHRlZCA9IHRydWU7XG5cdFx0fTtcblxuXHRcdHAuX2luaXRQcm9wcyA9IGZ1bmN0aW9uKHRhcmdldCwgcHJvcExvb2t1cCwgc2libGluZ3MsIG92ZXJ3cml0dGVuUHJvcHMsIGluZGV4KSB7XG5cdFx0XHR2YXIgcCwgaSwgaW5pdFBsdWdpbnMsIHBsdWdpbiwgcHQsIHY7XG5cdFx0XHRpZiAodGFyZ2V0ID09IG51bGwpIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoX2xhenlMb29rdXBbdGFyZ2V0Ll9nc1R3ZWVuSURdKSB7XG5cdFx0XHRcdF9sYXp5UmVuZGVyKCk7IC8vaWYgb3RoZXIgdHdlZW5zIG9mIHRoZSBzYW1lIHRhcmdldCBoYXZlIHJlY2VudGx5IGluaXR0ZWQgYnV0IGhhdmVuJ3QgcmVuZGVyZWQgeWV0LCB3ZSd2ZSBnb3QgdG8gZm9yY2UgdGhlIHJlbmRlciBzbyB0aGF0IHRoZSBzdGFydGluZyB2YWx1ZXMgYXJlIGNvcnJlY3QgKGltYWdpbmUgcG9wdWxhdGluZyBhIHRpbWVsaW5lIHdpdGggYSBidW5jaCBvZiBzZXF1ZW50aWFsIHR3ZWVucyBhbmQgdGhlbiBqdW1waW5nIHRvIHRoZSBlbmQpXG5cdFx0XHR9XG5cblx0XHRcdGlmICghdGhpcy52YXJzLmNzcykgaWYgKHRhcmdldC5zdHlsZSkgaWYgKHRhcmdldCAhPT0gd2luZG93ICYmIHRhcmdldC5ub2RlVHlwZSkgaWYgKF9wbHVnaW5zLmNzcykgaWYgKHRoaXMudmFycy5hdXRvQ1NTICE9PSBmYWxzZSkgeyAvL2l0J3Mgc28gY29tbW9uIHRvIHVzZSBUd2VlbkxpdGUvTWF4IHRvIGFuaW1hdGUgdGhlIGNzcyBvZiBET00gZWxlbWVudHMsIHdlIGFzc3VtZSB0aGF0IGlmIHRoZSB0YXJnZXQgaXMgYSBET00gZWxlbWVudCwgdGhhdCdzIHdoYXQgaXMgaW50ZW5kZWQgKGEgY29udmVuaWVuY2Ugc28gdGhhdCB1c2VycyBkb24ndCBoYXZlIHRvIHdyYXAgdGhpbmdzIGluIGNzczp7fSwgYWx0aG91Z2ggd2Ugc3RpbGwgcmVjb21tZW5kIGl0IGZvciBhIHNsaWdodCBwZXJmb3JtYW5jZSBib29zdCBhbmQgYmV0dGVyIHNwZWNpZmljaXR5KS4gTm90ZTogd2UgY2Fubm90IGNoZWNrIFwibm9kZVR5cGVcIiBvbiB0aGUgd2luZG93IGluc2lkZSBhbiBpZnJhbWUuXG5cdFx0XHRcdF9hdXRvQ1NTKHRoaXMudmFycywgdGFyZ2V0KTtcblx0XHRcdH1cblx0XHRcdGZvciAocCBpbiB0aGlzLnZhcnMpIHtcblx0XHRcdFx0diA9IHRoaXMudmFyc1twXTtcblx0XHRcdFx0aWYgKF9yZXNlcnZlZFByb3BzW3BdKSB7XG5cdFx0XHRcdFx0aWYgKHYpIGlmICgodiBpbnN0YW5jZW9mIEFycmF5KSB8fCAodi5wdXNoICYmIF9pc0FycmF5KHYpKSkgaWYgKHYuam9pbihcIlwiKS5pbmRleE9mKFwie3NlbGZ9XCIpICE9PSAtMSkge1xuXHRcdFx0XHRcdFx0dGhpcy52YXJzW3BdID0gdiA9IHRoaXMuX3N3YXBTZWxmSW5QYXJhbXModiwgdGhpcyk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdH0gZWxzZSBpZiAoX3BsdWdpbnNbcF0gJiYgKHBsdWdpbiA9IG5ldyBfcGx1Z2luc1twXSgpKS5fb25Jbml0VHdlZW4odGFyZ2V0LCB0aGlzLnZhcnNbcF0sIHRoaXMsIGluZGV4KSkge1xuXG5cdFx0XHRcdFx0Ly90IC0gdGFyZ2V0IFx0XHRbb2JqZWN0XVxuXHRcdFx0XHRcdC8vcCAtIHByb3BlcnR5IFx0XHRbc3RyaW5nXVxuXHRcdFx0XHRcdC8vcyAtIHN0YXJ0XHRcdFx0W251bWJlcl1cblx0XHRcdFx0XHQvL2MgLSBjaGFuZ2VcdFx0W251bWJlcl1cblx0XHRcdFx0XHQvL2YgLSBpc0Z1bmN0aW9uXHRbYm9vbGVhbl1cblx0XHRcdFx0XHQvL24gLSBuYW1lXHRcdFx0W3N0cmluZ11cblx0XHRcdFx0XHQvL3BnIC0gaXNQbHVnaW4gXHRbYm9vbGVhbl1cblx0XHRcdFx0XHQvL3ByIC0gcHJpb3JpdHlcdFx0W251bWJlcl1cblx0XHRcdFx0XHQvL20gLSBtb2QgICAgICAgICAgIFtmdW5jdGlvbiB8IDBdXG5cdFx0XHRcdFx0dGhpcy5fZmlyc3RQVCA9IHB0ID0ge19uZXh0OnRoaXMuX2ZpcnN0UFQsIHQ6cGx1Z2luLCBwOlwic2V0UmF0aW9cIiwgczowLCBjOjEsIGY6MSwgbjpwLCBwZzoxLCBwcjpwbHVnaW4uX3ByaW9yaXR5LCBtOjB9O1xuXHRcdFx0XHRcdGkgPSBwbHVnaW4uX292ZXJ3cml0ZVByb3BzLmxlbmd0aDtcblx0XHRcdFx0XHR3aGlsZSAoLS1pID4gLTEpIHtcblx0XHRcdFx0XHRcdHByb3BMb29rdXBbcGx1Z2luLl9vdmVyd3JpdGVQcm9wc1tpXV0gPSB0aGlzLl9maXJzdFBUO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAocGx1Z2luLl9wcmlvcml0eSB8fCBwbHVnaW4uX29uSW5pdEFsbFByb3BzKSB7XG5cdFx0XHRcdFx0XHRpbml0UGx1Z2lucyA9IHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChwbHVnaW4uX29uRGlzYWJsZSB8fCBwbHVnaW4uX29uRW5hYmxlKSB7XG5cdFx0XHRcdFx0XHR0aGlzLl9ub3RpZnlQbHVnaW5zT2ZFbmFibGVkID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKHB0Ll9uZXh0KSB7XG5cdFx0XHRcdFx0XHRwdC5fbmV4dC5fcHJldiA9IHB0O1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHByb3BMb29rdXBbcF0gPSBfYWRkUHJvcFR3ZWVuLmNhbGwodGhpcywgdGFyZ2V0LCBwLCBcImdldFwiLCB2LCBwLCAwLCBudWxsLCB0aGlzLnZhcnMuc3RyaW5nRmlsdGVyLCBpbmRleCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0aWYgKG92ZXJ3cml0dGVuUHJvcHMpIGlmICh0aGlzLl9raWxsKG92ZXJ3cml0dGVuUHJvcHMsIHRhcmdldCkpIHsgLy9hbm90aGVyIHR3ZWVuIG1heSBoYXZlIHRyaWVkIHRvIG92ZXJ3cml0ZSBwcm9wZXJ0aWVzIG9mIHRoaXMgdHdlZW4gYmVmb3JlIGluaXQoKSB3YXMgY2FsbGVkIChsaWtlIGlmIHR3byB0d2VlbnMgc3RhcnQgYXQgdGhlIHNhbWUgdGltZSwgdGhlIG9uZSBjcmVhdGVkIHNlY29uZCB3aWxsIHJ1biBmaXJzdClcblx0XHRcdFx0cmV0dXJuIHRoaXMuX2luaXRQcm9wcyh0YXJnZXQsIHByb3BMb29rdXAsIHNpYmxpbmdzLCBvdmVyd3JpdHRlblByb3BzLCBpbmRleCk7XG5cdFx0XHR9XG5cdFx0XHRpZiAodGhpcy5fb3ZlcndyaXRlID4gMSkgaWYgKHRoaXMuX2ZpcnN0UFQpIGlmIChzaWJsaW5ncy5sZW5ndGggPiAxKSBpZiAoX2FwcGx5T3ZlcndyaXRlKHRhcmdldCwgdGhpcywgcHJvcExvb2t1cCwgdGhpcy5fb3ZlcndyaXRlLCBzaWJsaW5ncykpIHtcblx0XHRcdFx0dGhpcy5fa2lsbChwcm9wTG9va3VwLCB0YXJnZXQpO1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5faW5pdFByb3BzKHRhcmdldCwgcHJvcExvb2t1cCwgc2libGluZ3MsIG92ZXJ3cml0dGVuUHJvcHMsIGluZGV4KTtcblx0XHRcdH1cblx0XHRcdGlmICh0aGlzLl9maXJzdFBUKSBpZiAoKHRoaXMudmFycy5sYXp5ICE9PSBmYWxzZSAmJiB0aGlzLl9kdXJhdGlvbikgfHwgKHRoaXMudmFycy5sYXp5ICYmICF0aGlzLl9kdXJhdGlvbikpIHsgLy96ZXJvIGR1cmF0aW9uIHR3ZWVucyBkb24ndCBsYXp5IHJlbmRlciBieSBkZWZhdWx0OyBldmVyeXRoaW5nIGVsc2UgZG9lcy5cblx0XHRcdFx0X2xhenlMb29rdXBbdGFyZ2V0Ll9nc1R3ZWVuSURdID0gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBpbml0UGx1Z2lucztcblx0XHR9O1xuXG5cdFx0cC5yZW5kZXIgPSBmdW5jdGlvbih0aW1lLCBzdXBwcmVzc0V2ZW50cywgZm9yY2UpIHtcblx0XHRcdHZhciBwcmV2VGltZSA9IHRoaXMuX3RpbWUsXG5cdFx0XHRcdGR1cmF0aW9uID0gdGhpcy5fZHVyYXRpb24sXG5cdFx0XHRcdHByZXZSYXdQcmV2VGltZSA9IHRoaXMuX3Jhd1ByZXZUaW1lLFxuXHRcdFx0XHRpc0NvbXBsZXRlLCBjYWxsYmFjaywgcHQsIHJhd1ByZXZUaW1lO1xuXHRcdFx0aWYgKHRpbWUgPj0gZHVyYXRpb24gLSAwLjAwMDAwMDEgJiYgdGltZSA+PSAwKSB7IC8vdG8gd29yayBhcm91bmQgb2NjYXNpb25hbCBmbG9hdGluZyBwb2ludCBtYXRoIGFydGlmYWN0cy5cblx0XHRcdFx0dGhpcy5fdG90YWxUaW1lID0gdGhpcy5fdGltZSA9IGR1cmF0aW9uO1xuXHRcdFx0XHR0aGlzLnJhdGlvID0gdGhpcy5fZWFzZS5fY2FsY0VuZCA/IHRoaXMuX2Vhc2UuZ2V0UmF0aW8oMSkgOiAxO1xuXHRcdFx0XHRpZiAoIXRoaXMuX3JldmVyc2VkICkge1xuXHRcdFx0XHRcdGlzQ29tcGxldGUgPSB0cnVlO1xuXHRcdFx0XHRcdGNhbGxiYWNrID0gXCJvbkNvbXBsZXRlXCI7XG5cdFx0XHRcdFx0Zm9yY2UgPSAoZm9yY2UgfHwgdGhpcy5fdGltZWxpbmUuYXV0b1JlbW92ZUNoaWxkcmVuKTsgLy9vdGhlcndpc2UsIGlmIHRoZSBhbmltYXRpb24gaXMgdW5wYXVzZWQvYWN0aXZhdGVkIGFmdGVyIGl0J3MgYWxyZWFkeSBmaW5pc2hlZCwgaXQgZG9lc24ndCBnZXQgcmVtb3ZlZCBmcm9tIHRoZSBwYXJlbnQgdGltZWxpbmUuXG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGR1cmF0aW9uID09PSAwKSBpZiAodGhpcy5faW5pdHRlZCB8fCAhdGhpcy52YXJzLmxhenkgfHwgZm9yY2UpIHsgLy96ZXJvLWR1cmF0aW9uIHR3ZWVucyBhcmUgdHJpY2t5IGJlY2F1c2Ugd2UgbXVzdCBkaXNjZXJuIHRoZSBtb21lbnR1bS9kaXJlY3Rpb24gb2YgdGltZSBpbiBvcmRlciB0byBkZXRlcm1pbmUgd2hldGhlciB0aGUgc3RhcnRpbmcgdmFsdWVzIHNob3VsZCBiZSByZW5kZXJlZCBvciB0aGUgZW5kaW5nIHZhbHVlcy4gSWYgdGhlIFwicGxheWhlYWRcIiBvZiBpdHMgdGltZWxpbmUgZ29lcyBwYXN0IHRoZSB6ZXJvLWR1cmF0aW9uIHR3ZWVuIGluIHRoZSBmb3J3YXJkIGRpcmVjdGlvbiBvciBsYW5kcyBkaXJlY3RseSBvbiBpdCwgdGhlIGVuZCB2YWx1ZXMgc2hvdWxkIGJlIHJlbmRlcmVkLCBidXQgaWYgdGhlIHRpbWVsaW5lJ3MgXCJwbGF5aGVhZFwiIG1vdmVzIHBhc3QgaXQgaW4gdGhlIGJhY2t3YXJkIGRpcmVjdGlvbiAoZnJvbSBhIHBvc3RpdGl2ZSB0aW1lIHRvIGEgbmVnYXRpdmUgdGltZSksIHRoZSBzdGFydGluZyB2YWx1ZXMgbXVzdCBiZSByZW5kZXJlZC5cblx0XHRcdFx0XHRpZiAodGhpcy5fc3RhcnRUaW1lID09PSB0aGlzLl90aW1lbGluZS5fZHVyYXRpb24pIHsgLy9pZiBhIHplcm8tZHVyYXRpb24gdHdlZW4gaXMgYXQgdGhlIFZFUlkgZW5kIG9mIGEgdGltZWxpbmUgYW5kIHRoYXQgdGltZWxpbmUgcmVuZGVycyBhdCBpdHMgZW5kLCBpdCB3aWxsIHR5cGljYWxseSBhZGQgYSB0aW55IGJpdCBvZiBjdXNoaW9uIHRvIHRoZSByZW5kZXIgdGltZSB0byBwcmV2ZW50IHJvdW5kaW5nIGVycm9ycyBmcm9tIGdldHRpbmcgaW4gdGhlIHdheSBvZiB0d2VlbnMgcmVuZGVyaW5nIHRoZWlyIFZFUlkgZW5kLiBJZiB3ZSB0aGVuIHJldmVyc2UoKSB0aGF0IHRpbWVsaW5lLCB0aGUgemVyby1kdXJhdGlvbiB0d2VlbiB3aWxsIHRyaWdnZXIgaXRzIG9uUmV2ZXJzZUNvbXBsZXRlIGV2ZW4gdGhvdWdoIHRlY2huaWNhbGx5IHRoZSBwbGF5aGVhZCBkaWRuJ3QgcGFzcyBvdmVyIGl0IGFnYWluLiBJdCdzIGEgdmVyeSBzcGVjaWZpYyBlZGdlIGNhc2Ugd2UgbXVzdCBhY2NvbW1vZGF0ZS5cblx0XHRcdFx0XHRcdHRpbWUgPSAwO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAocHJldlJhd1ByZXZUaW1lIDwgMCB8fCAodGltZSA8PSAwICYmIHRpbWUgPj0gLTAuMDAwMDAwMSkgfHwgKHByZXZSYXdQcmV2VGltZSA9PT0gX3RpbnlOdW0gJiYgdGhpcy5kYXRhICE9PSBcImlzUGF1c2VcIikpIGlmIChwcmV2UmF3UHJldlRpbWUgIT09IHRpbWUpIHsgLy9ub3RlOiB3aGVuIHRoaXMuZGF0YSBpcyBcImlzUGF1c2VcIiwgaXQncyBhIGNhbGxiYWNrIGFkZGVkIGJ5IGFkZFBhdXNlKCkgb24gYSB0aW1lbGluZSB0aGF0IHdlIHNob3VsZCBub3QgYmUgdHJpZ2dlcmVkIHdoZW4gTEVBVklORyBpdHMgZXhhY3Qgc3RhcnQgdGltZS4gSW4gb3RoZXIgd29yZHMsIHRsLmFkZFBhdXNlKDEpLnBsYXkoMSkgc2hvdWxkbid0IHBhdXNlLlxuXHRcdFx0XHRcdFx0Zm9yY2UgPSB0cnVlO1xuXHRcdFx0XHRcdFx0aWYgKHByZXZSYXdQcmV2VGltZSA+IF90aW55TnVtKSB7XG5cdFx0XHRcdFx0XHRcdGNhbGxiYWNrID0gXCJvblJldmVyc2VDb21wbGV0ZVwiO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aGlzLl9yYXdQcmV2VGltZSA9IHJhd1ByZXZUaW1lID0gKCFzdXBwcmVzc0V2ZW50cyB8fCB0aW1lIHx8IHByZXZSYXdQcmV2VGltZSA9PT0gdGltZSkgPyB0aW1lIDogX3RpbnlOdW07IC8vd2hlbiB0aGUgcGxheWhlYWQgYXJyaXZlcyBhdCBFWEFDVExZIHRpbWUgMCAocmlnaHQgb24gdG9wKSBvZiBhIHplcm8tZHVyYXRpb24gdHdlZW4sIHdlIG5lZWQgdG8gZGlzY2VybiBpZiBldmVudHMgYXJlIHN1cHByZXNzZWQgc28gdGhhdCB3aGVuIHRoZSBwbGF5aGVhZCBtb3ZlcyBhZ2FpbiAobmV4dCB0aW1lKSwgaXQnbGwgdHJpZ2dlciB0aGUgY2FsbGJhY2suIElmIGV2ZW50cyBhcmUgTk9UIHN1cHByZXNzZWQsIG9idmlvdXNseSB0aGUgY2FsbGJhY2sgd291bGQgYmUgdHJpZ2dlcmVkIGluIHRoaXMgcmVuZGVyLiBCYXNpY2FsbHksIHRoZSBjYWxsYmFjayBzaG91bGQgZmlyZSBlaXRoZXIgd2hlbiB0aGUgcGxheWhlYWQgQVJSSVZFUyBvciBMRUFWRVMgdGhpcyBleGFjdCBzcG90LCBub3QgYm90aC4gSW1hZ2luZSBkb2luZyBhIHRpbWVsaW5lLnNlZWsoMCkgYW5kIHRoZXJlJ3MgYSBjYWxsYmFjayB0aGF0IHNpdHMgYXQgMC4gU2luY2UgZXZlbnRzIGFyZSBzdXBwcmVzc2VkIG9uIHRoYXQgc2VlaygpIGJ5IGRlZmF1bHQsIG5vdGhpbmcgd2lsbCBmaXJlLCBidXQgd2hlbiB0aGUgcGxheWhlYWQgbW92ZXMgb2ZmIG9mIHRoYXQgcG9zaXRpb24sIHRoZSBjYWxsYmFjayBzaG91bGQgZmlyZS4gVGhpcyBiZWhhdmlvciBpcyB3aGF0IHBlb3BsZSBpbnR1aXRpdmVseSBleHBlY3QuIFdlIHNldCB0aGUgX3Jhd1ByZXZUaW1lIHRvIGJlIGEgcHJlY2lzZSB0aW55IG51bWJlciB0byBpbmRpY2F0ZSB0aGlzIHNjZW5hcmlvIHJhdGhlciB0aGFuIHVzaW5nIGFub3RoZXIgcHJvcGVydHkvdmFyaWFibGUgd2hpY2ggd291bGQgaW5jcmVhc2UgbWVtb3J5IHVzYWdlLiBUaGlzIHRlY2huaXF1ZSBpcyBsZXNzIHJlYWRhYmxlLCBidXQgbW9yZSBlZmZpY2llbnQuXG5cdFx0XHRcdH1cblxuXHRcdFx0fSBlbHNlIGlmICh0aW1lIDwgMC4wMDAwMDAxKSB7IC8vdG8gd29yayBhcm91bmQgb2NjYXNpb25hbCBmbG9hdGluZyBwb2ludCBtYXRoIGFydGlmYWN0cywgcm91bmQgc3VwZXIgc21hbGwgdmFsdWVzIHRvIDAuXG5cdFx0XHRcdHRoaXMuX3RvdGFsVGltZSA9IHRoaXMuX3RpbWUgPSAwO1xuXHRcdFx0XHR0aGlzLnJhdGlvID0gdGhpcy5fZWFzZS5fY2FsY0VuZCA/IHRoaXMuX2Vhc2UuZ2V0UmF0aW8oMCkgOiAwO1xuXHRcdFx0XHRpZiAocHJldlRpbWUgIT09IDAgfHwgKGR1cmF0aW9uID09PSAwICYmIHByZXZSYXdQcmV2VGltZSA+IDApKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2sgPSBcIm9uUmV2ZXJzZUNvbXBsZXRlXCI7XG5cdFx0XHRcdFx0aXNDb21wbGV0ZSA9IHRoaXMuX3JldmVyc2VkO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICh0aW1lIDwgMCkge1xuXHRcdFx0XHRcdHRoaXMuX2FjdGl2ZSA9IGZhbHNlO1xuXHRcdFx0XHRcdGlmIChkdXJhdGlvbiA9PT0gMCkgaWYgKHRoaXMuX2luaXR0ZWQgfHwgIXRoaXMudmFycy5sYXp5IHx8IGZvcmNlKSB7IC8vemVyby1kdXJhdGlvbiB0d2VlbnMgYXJlIHRyaWNreSBiZWNhdXNlIHdlIG11c3QgZGlzY2VybiB0aGUgbW9tZW50dW0vZGlyZWN0aW9uIG9mIHRpbWUgaW4gb3JkZXIgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHN0YXJ0aW5nIHZhbHVlcyBzaG91bGQgYmUgcmVuZGVyZWQgb3IgdGhlIGVuZGluZyB2YWx1ZXMuIElmIHRoZSBcInBsYXloZWFkXCIgb2YgaXRzIHRpbWVsaW5lIGdvZXMgcGFzdCB0aGUgemVyby1kdXJhdGlvbiB0d2VlbiBpbiB0aGUgZm9yd2FyZCBkaXJlY3Rpb24gb3IgbGFuZHMgZGlyZWN0bHkgb24gaXQsIHRoZSBlbmQgdmFsdWVzIHNob3VsZCBiZSByZW5kZXJlZCwgYnV0IGlmIHRoZSB0aW1lbGluZSdzIFwicGxheWhlYWRcIiBtb3ZlcyBwYXN0IGl0IGluIHRoZSBiYWNrd2FyZCBkaXJlY3Rpb24gKGZyb20gYSBwb3N0aXRpdmUgdGltZSB0byBhIG5lZ2F0aXZlIHRpbWUpLCB0aGUgc3RhcnRpbmcgdmFsdWVzIG11c3QgYmUgcmVuZGVyZWQuXG5cdFx0XHRcdFx0XHRpZiAocHJldlJhd1ByZXZUaW1lID49IDAgJiYgIShwcmV2UmF3UHJldlRpbWUgPT09IF90aW55TnVtICYmIHRoaXMuZGF0YSA9PT0gXCJpc1BhdXNlXCIpKSB7XG5cdFx0XHRcdFx0XHRcdGZvcmNlID0gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHRoaXMuX3Jhd1ByZXZUaW1lID0gcmF3UHJldlRpbWUgPSAoIXN1cHByZXNzRXZlbnRzIHx8IHRpbWUgfHwgcHJldlJhd1ByZXZUaW1lID09PSB0aW1lKSA/IHRpbWUgOiBfdGlueU51bTsgLy93aGVuIHRoZSBwbGF5aGVhZCBhcnJpdmVzIGF0IEVYQUNUTFkgdGltZSAwIChyaWdodCBvbiB0b3ApIG9mIGEgemVyby1kdXJhdGlvbiB0d2Vlbiwgd2UgbmVlZCB0byBkaXNjZXJuIGlmIGV2ZW50cyBhcmUgc3VwcHJlc3NlZCBzbyB0aGF0IHdoZW4gdGhlIHBsYXloZWFkIG1vdmVzIGFnYWluIChuZXh0IHRpbWUpLCBpdCdsbCB0cmlnZ2VyIHRoZSBjYWxsYmFjay4gSWYgZXZlbnRzIGFyZSBOT1Qgc3VwcHJlc3NlZCwgb2J2aW91c2x5IHRoZSBjYWxsYmFjayB3b3VsZCBiZSB0cmlnZ2VyZWQgaW4gdGhpcyByZW5kZXIuIEJhc2ljYWxseSwgdGhlIGNhbGxiYWNrIHNob3VsZCBmaXJlIGVpdGhlciB3aGVuIHRoZSBwbGF5aGVhZCBBUlJJVkVTIG9yIExFQVZFUyB0aGlzIGV4YWN0IHNwb3QsIG5vdCBib3RoLiBJbWFnaW5lIGRvaW5nIGEgdGltZWxpbmUuc2VlaygwKSBhbmQgdGhlcmUncyBhIGNhbGxiYWNrIHRoYXQgc2l0cyBhdCAwLiBTaW5jZSBldmVudHMgYXJlIHN1cHByZXNzZWQgb24gdGhhdCBzZWVrKCkgYnkgZGVmYXVsdCwgbm90aGluZyB3aWxsIGZpcmUsIGJ1dCB3aGVuIHRoZSBwbGF5aGVhZCBtb3ZlcyBvZmYgb2YgdGhhdCBwb3NpdGlvbiwgdGhlIGNhbGxiYWNrIHNob3VsZCBmaXJlLiBUaGlzIGJlaGF2aW9yIGlzIHdoYXQgcGVvcGxlIGludHVpdGl2ZWx5IGV4cGVjdC4gV2Ugc2V0IHRoZSBfcmF3UHJldlRpbWUgdG8gYmUgYSBwcmVjaXNlIHRpbnkgbnVtYmVyIHRvIGluZGljYXRlIHRoaXMgc2NlbmFyaW8gcmF0aGVyIHRoYW4gdXNpbmcgYW5vdGhlciBwcm9wZXJ0eS92YXJpYWJsZSB3aGljaCB3b3VsZCBpbmNyZWFzZSBtZW1vcnkgdXNhZ2UuIFRoaXMgdGVjaG5pcXVlIGlzIGxlc3MgcmVhZGFibGUsIGJ1dCBtb3JlIGVmZmljaWVudC5cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCF0aGlzLl9pbml0dGVkKSB7IC8vaWYgd2UgcmVuZGVyIHRoZSB2ZXJ5IGJlZ2lubmluZyAodGltZSA9PSAwKSBvZiBhIGZyb21UbygpLCB3ZSBtdXN0IGZvcmNlIHRoZSByZW5kZXIgKG5vcm1hbCB0d2VlbnMgd291bGRuJ3QgbmVlZCB0byByZW5kZXIgYXQgYSB0aW1lIG9mIDAgd2hlbiB0aGUgcHJldlRpbWUgd2FzIGFsc28gMCkuIFRoaXMgaXMgYWxzbyBtYW5kYXRvcnkgdG8gbWFrZSBzdXJlIG92ZXJ3cml0aW5nIGtpY2tzIGluIGltbWVkaWF0ZWx5LlxuXHRcdFx0XHRcdGZvcmNlID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGhpcy5fdG90YWxUaW1lID0gdGhpcy5fdGltZSA9IHRpbWU7XG5cblx0XHRcdFx0aWYgKHRoaXMuX2Vhc2VUeXBlKSB7XG5cdFx0XHRcdFx0dmFyIHIgPSB0aW1lIC8gZHVyYXRpb24sIHR5cGUgPSB0aGlzLl9lYXNlVHlwZSwgcG93ID0gdGhpcy5fZWFzZVBvd2VyO1xuXHRcdFx0XHRcdGlmICh0eXBlID09PSAxIHx8ICh0eXBlID09PSAzICYmIHIgPj0gMC41KSkge1xuXHRcdFx0XHRcdFx0ciA9IDEgLSByO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAodHlwZSA9PT0gMykge1xuXHRcdFx0XHRcdFx0ciAqPSAyO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAocG93ID09PSAxKSB7XG5cdFx0XHRcdFx0XHRyICo9IHI7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChwb3cgPT09IDIpIHtcblx0XHRcdFx0XHRcdHIgKj0gciAqIHI7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChwb3cgPT09IDMpIHtcblx0XHRcdFx0XHRcdHIgKj0gciAqIHIgKiByO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAocG93ID09PSA0KSB7XG5cdFx0XHRcdFx0XHRyICo9IHIgKiByICogciAqIHI7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKHR5cGUgPT09IDEpIHtcblx0XHRcdFx0XHRcdHRoaXMucmF0aW8gPSAxIC0gcjtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKHR5cGUgPT09IDIpIHtcblx0XHRcdFx0XHRcdHRoaXMucmF0aW8gPSByO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAodGltZSAvIGR1cmF0aW9uIDwgMC41KSB7XG5cdFx0XHRcdFx0XHR0aGlzLnJhdGlvID0gciAvIDI7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRoaXMucmF0aW8gPSAxIC0gKHIgLyAyKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aGlzLnJhdGlvID0gdGhpcy5fZWFzZS5nZXRSYXRpbyh0aW1lIC8gZHVyYXRpb24pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICh0aGlzLl90aW1lID09PSBwcmV2VGltZSAmJiAhZm9yY2UpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fSBlbHNlIGlmICghdGhpcy5faW5pdHRlZCkge1xuXHRcdFx0XHR0aGlzLl9pbml0KCk7XG5cdFx0XHRcdGlmICghdGhpcy5faW5pdHRlZCB8fCB0aGlzLl9nYykgeyAvL2ltbWVkaWF0ZVJlbmRlciB0d2VlbnMgdHlwaWNhbGx5IHdvbid0IGluaXRpYWxpemUgdW50aWwgdGhlIHBsYXloZWFkIGFkdmFuY2VzIChfdGltZSBpcyBncmVhdGVyIHRoYW4gMCkgaW4gb3JkZXIgdG8gZW5zdXJlIHRoYXQgb3ZlcndyaXRpbmcgb2NjdXJzIHByb3Blcmx5LiBBbHNvLCBpZiBhbGwgb2YgdGhlIHR3ZWVuaW5nIHByb3BlcnRpZXMgaGF2ZSBiZWVuIG92ZXJ3cml0dGVuICh3aGljaCB3b3VsZCBjYXVzZSBfZ2MgdG8gYmUgdHJ1ZSwgYXMgc2V0IGluIF9pbml0KCkpLCB3ZSBzaG91bGRuJ3QgY29udGludWUgb3RoZXJ3aXNlIGFuIG9uU3RhcnQgY2FsbGJhY2sgY291bGQgYmUgY2FsbGVkIGZvciBleGFtcGxlLlxuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fSBlbHNlIGlmICghZm9yY2UgJiYgdGhpcy5fZmlyc3RQVCAmJiAoKHRoaXMudmFycy5sYXp5ICE9PSBmYWxzZSAmJiB0aGlzLl9kdXJhdGlvbikgfHwgKHRoaXMudmFycy5sYXp5ICYmICF0aGlzLl9kdXJhdGlvbikpKSB7XG5cdFx0XHRcdFx0dGhpcy5fdGltZSA9IHRoaXMuX3RvdGFsVGltZSA9IHByZXZUaW1lO1xuXHRcdFx0XHRcdHRoaXMuX3Jhd1ByZXZUaW1lID0gcHJldlJhd1ByZXZUaW1lO1xuXHRcdFx0XHRcdF9sYXp5VHdlZW5zLnB1c2godGhpcyk7XG5cdFx0XHRcdFx0dGhpcy5fbGF6eSA9IFt0aW1lLCBzdXBwcmVzc0V2ZW50c107XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vX2Vhc2UgaXMgaW5pdGlhbGx5IHNldCB0byBkZWZhdWx0RWFzZSwgc28gbm93IHRoYXQgaW5pdCgpIGhhcyBydW4sIF9lYXNlIGlzIHNldCBwcm9wZXJseSBhbmQgd2UgbmVlZCB0byByZWNhbGN1bGF0ZSB0aGUgcmF0aW8uIE92ZXJhbGwgdGhpcyBpcyBmYXN0ZXIgdGhhbiB1c2luZyBjb25kaXRpb25hbCBsb2dpYyBlYXJsaWVyIGluIHRoZSBtZXRob2QgdG8gYXZvaWQgaGF2aW5nIHRvIHNldCByYXRpbyB0d2ljZSBiZWNhdXNlIHdlIG9ubHkgaW5pdCgpIG9uY2UgYnV0IHJlbmRlclRpbWUoKSBnZXRzIGNhbGxlZCBWRVJZIGZyZXF1ZW50bHkuXG5cdFx0XHRcdGlmICh0aGlzLl90aW1lICYmICFpc0NvbXBsZXRlKSB7XG5cdFx0XHRcdFx0dGhpcy5yYXRpbyA9IHRoaXMuX2Vhc2UuZ2V0UmF0aW8odGhpcy5fdGltZSAvIGR1cmF0aW9uKTtcblx0XHRcdFx0fSBlbHNlIGlmIChpc0NvbXBsZXRlICYmIHRoaXMuX2Vhc2UuX2NhbGNFbmQpIHtcblx0XHRcdFx0XHR0aGlzLnJhdGlvID0gdGhpcy5fZWFzZS5nZXRSYXRpbygodGhpcy5fdGltZSA9PT0gMCkgPyAwIDogMSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmICh0aGlzLl9sYXp5ICE9PSBmYWxzZSkgeyAvL2luIGNhc2UgYSBsYXp5IHJlbmRlciBpcyBwZW5kaW5nLCB3ZSBzaG91bGQgZmx1c2ggaXQgYmVjYXVzZSB0aGUgbmV3IHJlbmRlciBpcyBvY2N1cnJpbmcgbm93IChpbWFnaW5lIGEgbGF6eSB0d2VlbiBpbnN0YW50aWF0aW5nIGFuZCB0aGVuIGltbWVkaWF0ZWx5IHRoZSB1c2VyIGNhbGxzIHR3ZWVuLnNlZWsodHdlZW4uZHVyYXRpb24oKSksIHNraXBwaW5nIHRvIHRoZSBlbmQgLSB0aGUgZW5kIHJlbmRlciB3b3VsZCBiZSBmb3JjZWQsIGFuZCB0aGVuIGlmIHdlIGRpZG4ndCBmbHVzaCB0aGUgbGF6eSByZW5kZXIsIGl0J2QgZmlyZSBBRlRFUiB0aGUgc2VlaygpLCByZW5kZXJpbmcgaXQgYXQgdGhlIHdyb25nIHRpbWUuXG5cdFx0XHRcdHRoaXMuX2xhenkgPSBmYWxzZTtcblx0XHRcdH1cblx0XHRcdGlmICghdGhpcy5fYWN0aXZlKSBpZiAoIXRoaXMuX3BhdXNlZCAmJiB0aGlzLl90aW1lICE9PSBwcmV2VGltZSAmJiB0aW1lID49IDApIHtcblx0XHRcdFx0dGhpcy5fYWN0aXZlID0gdHJ1ZTsgIC8vc28gdGhhdCBpZiB0aGUgdXNlciByZW5kZXJzIGEgdHdlZW4gKGFzIG9wcG9zZWQgdG8gdGhlIHRpbWVsaW5lIHJlbmRlcmluZyBpdCksIHRoZSB0aW1lbGluZSBpcyBmb3JjZWQgdG8gcmUtcmVuZGVyIGFuZCBhbGlnbiBpdCB3aXRoIHRoZSBwcm9wZXIgdGltZS9mcmFtZSBvbiB0aGUgbmV4dCByZW5kZXJpbmcgY3ljbGUuIE1heWJlIHRoZSB0d2VlbiBhbHJlYWR5IGZpbmlzaGVkIGJ1dCB0aGUgdXNlciBtYW51YWxseSByZS1yZW5kZXJzIGl0IGFzIGhhbGZ3YXkgZG9uZS5cblx0XHRcdH1cblx0XHRcdGlmIChwcmV2VGltZSA9PT0gMCkge1xuXHRcdFx0XHRpZiAodGhpcy5fc3RhcnRBdCkge1xuXHRcdFx0XHRcdGlmICh0aW1lID49IDApIHtcblx0XHRcdFx0XHRcdHRoaXMuX3N0YXJ0QXQucmVuZGVyKHRpbWUsIHN1cHByZXNzRXZlbnRzLCBmb3JjZSk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmICghY2FsbGJhY2spIHtcblx0XHRcdFx0XHRcdGNhbGxiYWNrID0gXCJfZHVtbXlHU1wiOyAvL2lmIG5vIGNhbGxiYWNrIGlzIGRlZmluZWQsIHVzZSBhIGR1bW15IHZhbHVlIGp1c3Qgc28gdGhhdCB0aGUgY29uZGl0aW9uIGF0IHRoZSBlbmQgZXZhbHVhdGVzIGFzIHRydWUgYmVjYXVzZSBfc3RhcnRBdCBzaG91bGQgcmVuZGVyIEFGVEVSIHRoZSBub3JtYWwgcmVuZGVyIGxvb3Agd2hlbiB0aGUgdGltZSBpcyBuZWdhdGl2ZS4gV2UgY291bGQgaGFuZGxlIHRoaXMgaW4gYSBtb3JlIGludHVpdGl2ZSB3YXksIG9mIGNvdXJzZSwgYnV0IHRoZSByZW5kZXIgbG9vcCBpcyB0aGUgTU9TVCBpbXBvcnRhbnQgdGhpbmcgdG8gb3B0aW1pemUsIHNvIHRoaXMgdGVjaG5pcXVlIGFsbG93cyB1cyB0byBhdm9pZCBhZGRpbmcgZXh0cmEgY29uZGl0aW9uYWwgbG9naWMgaW4gYSBoaWdoLWZyZXF1ZW5jeSBhcmVhLlxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAodGhpcy52YXJzLm9uU3RhcnQpIGlmICh0aGlzLl90aW1lICE9PSAwIHx8IGR1cmF0aW9uID09PSAwKSBpZiAoIXN1cHByZXNzRXZlbnRzKSB7XG5cdFx0XHRcdFx0dGhpcy5fY2FsbGJhY2soXCJvblN0YXJ0XCIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRwdCA9IHRoaXMuX2ZpcnN0UFQ7XG5cdFx0XHR3aGlsZSAocHQpIHtcblx0XHRcdFx0aWYgKHB0LmYpIHtcblx0XHRcdFx0XHRwdC50W3B0LnBdKHB0LmMgKiB0aGlzLnJhdGlvICsgcHQucyk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cHQudFtwdC5wXSA9IHB0LmMgKiB0aGlzLnJhdGlvICsgcHQucztcblx0XHRcdFx0fVxuXHRcdFx0XHRwdCA9IHB0Ll9uZXh0O1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAodGhpcy5fb25VcGRhdGUpIHtcblx0XHRcdFx0aWYgKHRpbWUgPCAwKSBpZiAodGhpcy5fc3RhcnRBdCAmJiB0aW1lICE9PSAtMC4wMDAxKSB7IC8vaWYgdGhlIHR3ZWVuIGlzIHBvc2l0aW9uZWQgYXQgdGhlIFZFUlkgYmVnaW5uaW5nIChfc3RhcnRUaW1lIDApIG9mIGl0cyBwYXJlbnQgdGltZWxpbmUsIGl0J3MgaWxsZWdhbCBmb3IgdGhlIHBsYXloZWFkIHRvIGdvIGJhY2sgZnVydGhlciwgc28gd2Ugc2hvdWxkIG5vdCByZW5kZXIgdGhlIHJlY29yZGVkIHN0YXJ0QXQgdmFsdWVzLlxuXHRcdFx0XHRcdHRoaXMuX3N0YXJ0QXQucmVuZGVyKHRpbWUsIHN1cHByZXNzRXZlbnRzLCBmb3JjZSk7IC8vbm90ZTogZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMsIHdlIHR1Y2sgdGhpcyBjb25kaXRpb25hbCBsb2dpYyBpbnNpZGUgbGVzcyB0cmF2ZWxlZCBhcmVhcyAobW9zdCB0d2VlbnMgZG9uJ3QgaGF2ZSBhbiBvblVwZGF0ZSkuIFdlJ2QganVzdCBoYXZlIGl0IGF0IHRoZSBlbmQgYmVmb3JlIHRoZSBvbkNvbXBsZXRlLCBidXQgdGhlIHZhbHVlcyBzaG91bGQgYmUgdXBkYXRlZCBiZWZvcmUgYW55IG9uVXBkYXRlIGlzIGNhbGxlZCwgc28gd2UgQUxTTyBwdXQgaXQgaGVyZSBhbmQgdGhlbiBpZiBpdCdzIG5vdCBjYWxsZWQsIHdlIGRvIHNvIGxhdGVyIG5lYXIgdGhlIG9uQ29tcGxldGUuXG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCFzdXBwcmVzc0V2ZW50cykgaWYgKHRoaXMuX3RpbWUgIT09IHByZXZUaW1lIHx8IGlzQ29tcGxldGUgfHwgZm9yY2UpIHtcblx0XHRcdFx0XHR0aGlzLl9jYWxsYmFjayhcIm9uVXBkYXRlXCIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAoY2FsbGJhY2spIGlmICghdGhpcy5fZ2MgfHwgZm9yY2UpIHsgLy9jaGVjayBfZ2MgYmVjYXVzZSB0aGVyZSdzIGEgY2hhbmNlIHRoYXQga2lsbCgpIGNvdWxkIGJlIGNhbGxlZCBpbiBhbiBvblVwZGF0ZVxuXHRcdFx0XHRpZiAodGltZSA8IDAgJiYgdGhpcy5fc3RhcnRBdCAmJiAhdGhpcy5fb25VcGRhdGUgJiYgdGltZSAhPT0gLTAuMDAwMSkgeyAvLy0wLjAwMDEgaXMgYSBzcGVjaWFsIHZhbHVlIHRoYXQgd2UgdXNlIHdoZW4gbG9vcGluZyBiYWNrIHRvIHRoZSBiZWdpbm5pbmcgb2YgYSByZXBlYXRlZCBUaW1lbGluZU1heCwgaW4gd2hpY2ggY2FzZSB3ZSBzaG91bGRuJ3QgcmVuZGVyIHRoZSBfc3RhcnRBdCB2YWx1ZXMuXG5cdFx0XHRcdFx0dGhpcy5fc3RhcnRBdC5yZW5kZXIodGltZSwgc3VwcHJlc3NFdmVudHMsIGZvcmNlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoaXNDb21wbGV0ZSkge1xuXHRcdFx0XHRcdGlmICh0aGlzLl90aW1lbGluZS5hdXRvUmVtb3ZlQ2hpbGRyZW4pIHtcblx0XHRcdFx0XHRcdHRoaXMuX2VuYWJsZWQoZmFsc2UsIGZhbHNlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGhpcy5fYWN0aXZlID0gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCFzdXBwcmVzc0V2ZW50cyAmJiB0aGlzLnZhcnNbY2FsbGJhY2tdKSB7XG5cdFx0XHRcdFx0dGhpcy5fY2FsbGJhY2soY2FsbGJhY2spO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChkdXJhdGlvbiA9PT0gMCAmJiB0aGlzLl9yYXdQcmV2VGltZSA9PT0gX3RpbnlOdW0gJiYgcmF3UHJldlRpbWUgIT09IF90aW55TnVtKSB7IC8vdGhlIG9uQ29tcGxldGUgb3Igb25SZXZlcnNlQ29tcGxldGUgY291bGQgdHJpZ2dlciBtb3ZlbWVudCBvZiB0aGUgcGxheWhlYWQgYW5kIGZvciB6ZXJvLWR1cmF0aW9uIHR3ZWVucyAod2hpY2ggbXVzdCBkaXNjZXJuIGRpcmVjdGlvbikgdGhhdCBsYW5kIGRpcmVjdGx5IGJhY2sgb24gdGhlaXIgc3RhcnQgdGltZSwgd2UgZG9uJ3Qgd2FudCB0byBmaXJlIGFnYWluIG9uIHRoZSBuZXh0IHJlbmRlci4gVGhpbmsgb2Ygc2V2ZXJhbCBhZGRQYXVzZSgpJ3MgaW4gYSB0aW1lbGluZSB0aGF0IGZvcmNlcyB0aGUgcGxheWhlYWQgdG8gYSBjZXJ0YWluIHNwb3QsIGJ1dCB3aGF0IGlmIGl0J3MgYWxyZWFkeSBwYXVzZWQgYW5kIGFub3RoZXIgdHdlZW4gaXMgdHdlZW5pbmcgdGhlIFwidGltZVwiIG9mIHRoZSB0aW1lbGluZT8gRWFjaCB0aW1lIGl0IG1vdmVzIFtmb3J3YXJkXSBwYXN0IHRoYXQgc3BvdCwgaXQgd291bGQgbW92ZSBiYWNrLCBhbmQgc2luY2Ugc3VwcHJlc3NFdmVudHMgaXMgdHJ1ZSwgaXQnZCByZXNldCBfcmF3UHJldlRpbWUgdG8gX3RpbnlOdW0gc28gdGhhdCB3aGVuIGl0IGJlZ2lucyBhZ2FpbiwgdGhlIGNhbGxiYWNrIHdvdWxkIGZpcmUgKHNvIHVsdGltYXRlbHkgaXQgY291bGQgYm91bmNlIGJhY2sgYW5kIGZvcnRoIGR1cmluZyB0aGF0IHR3ZWVuKS4gQWdhaW4sIHRoaXMgaXMgYSB2ZXJ5IHVuY29tbW9uIHNjZW5hcmlvLCBidXQgcG9zc2libGUgbm9uZXRoZWxlc3MuXG5cdFx0XHRcdFx0dGhpcy5fcmF3UHJldlRpbWUgPSAwO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdHAuX2tpbGwgPSBmdW5jdGlvbih2YXJzLCB0YXJnZXQsIG92ZXJ3cml0aW5nVHdlZW4pIHtcblx0XHRcdGlmICh2YXJzID09PSBcImFsbFwiKSB7XG5cdFx0XHRcdHZhcnMgPSBudWxsO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHZhcnMgPT0gbnVsbCkgaWYgKHRhcmdldCA9PSBudWxsIHx8IHRhcmdldCA9PT0gdGhpcy50YXJnZXQpIHtcblx0XHRcdFx0dGhpcy5fbGF6eSA9IGZhbHNlO1xuXHRcdFx0XHRyZXR1cm4gdGhpcy5fZW5hYmxlZChmYWxzZSwgZmFsc2UpO1xuXHRcdFx0fVxuXHRcdFx0dGFyZ2V0ID0gKHR5cGVvZih0YXJnZXQpICE9PSBcInN0cmluZ1wiKSA/ICh0YXJnZXQgfHwgdGhpcy5fdGFyZ2V0cyB8fCB0aGlzLnRhcmdldCkgOiBUd2VlbkxpdGUuc2VsZWN0b3IodGFyZ2V0KSB8fCB0YXJnZXQ7XG5cdFx0XHR2YXIgc2ltdWx0YW5lb3VzT3ZlcndyaXRlID0gKG92ZXJ3cml0aW5nVHdlZW4gJiYgdGhpcy5fdGltZSAmJiBvdmVyd3JpdGluZ1R3ZWVuLl9zdGFydFRpbWUgPT09IHRoaXMuX3N0YXJ0VGltZSAmJiB0aGlzLl90aW1lbGluZSA9PT0gb3ZlcndyaXRpbmdUd2Vlbi5fdGltZWxpbmUpLFxuXHRcdFx0XHRpLCBvdmVyd3JpdHRlblByb3BzLCBwLCBwdCwgcHJvcExvb2t1cCwgY2hhbmdlZCwga2lsbFByb3BzLCByZWNvcmQsIGtpbGxlZDtcblx0XHRcdGlmICgoX2lzQXJyYXkodGFyZ2V0KSB8fCBfaXNTZWxlY3Rvcih0YXJnZXQpKSAmJiB0eXBlb2YodGFyZ2V0WzBdKSAhPT0gXCJudW1iZXJcIikge1xuXHRcdFx0XHRpID0gdGFyZ2V0Lmxlbmd0aDtcblx0XHRcdFx0d2hpbGUgKC0taSA+IC0xKSB7XG5cdFx0XHRcdFx0aWYgKHRoaXMuX2tpbGwodmFycywgdGFyZ2V0W2ldLCBvdmVyd3JpdGluZ1R3ZWVuKSkge1xuXHRcdFx0XHRcdFx0Y2hhbmdlZCA9IHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAodGhpcy5fdGFyZ2V0cykge1xuXHRcdFx0XHRcdGkgPSB0aGlzLl90YXJnZXRzLmxlbmd0aDtcblx0XHRcdFx0XHR3aGlsZSAoLS1pID4gLTEpIHtcblx0XHRcdFx0XHRcdGlmICh0YXJnZXQgPT09IHRoaXMuX3RhcmdldHNbaV0pIHtcblx0XHRcdFx0XHRcdFx0cHJvcExvb2t1cCA9IHRoaXMuX3Byb3BMb29rdXBbaV0gfHwge307XG5cdFx0XHRcdFx0XHRcdHRoaXMuX292ZXJ3cml0dGVuUHJvcHMgPSB0aGlzLl9vdmVyd3JpdHRlblByb3BzIHx8IFtdO1xuXHRcdFx0XHRcdFx0XHRvdmVyd3JpdHRlblByb3BzID0gdGhpcy5fb3ZlcndyaXR0ZW5Qcm9wc1tpXSA9IHZhcnMgPyB0aGlzLl9vdmVyd3JpdHRlblByb3BzW2ldIHx8IHt9IDogXCJhbGxcIjtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYgKHRhcmdldCAhPT0gdGhpcy50YXJnZXQpIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cHJvcExvb2t1cCA9IHRoaXMuX3Byb3BMb29rdXA7XG5cdFx0XHRcdFx0b3ZlcndyaXR0ZW5Qcm9wcyA9IHRoaXMuX292ZXJ3cml0dGVuUHJvcHMgPSB2YXJzID8gdGhpcy5fb3ZlcndyaXR0ZW5Qcm9wcyB8fCB7fSA6IFwiYWxsXCI7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAocHJvcExvb2t1cCkge1xuXHRcdFx0XHRcdGtpbGxQcm9wcyA9IHZhcnMgfHwgcHJvcExvb2t1cDtcblx0XHRcdFx0XHRyZWNvcmQgPSAodmFycyAhPT0gb3ZlcndyaXR0ZW5Qcm9wcyAmJiBvdmVyd3JpdHRlblByb3BzICE9PSBcImFsbFwiICYmIHZhcnMgIT09IHByb3BMb29rdXAgJiYgKHR5cGVvZih2YXJzKSAhPT0gXCJvYmplY3RcIiB8fCAhdmFycy5fdGVtcEtpbGwpKTsgLy9fdGVtcEtpbGwgaXMgYSBzdXBlci1zZWNyZXQgd2F5IHRvIGRlbGV0ZSBhIHBhcnRpY3VsYXIgdHdlZW5pbmcgcHJvcGVydHkgYnV0IE5PVCBoYXZlIGl0IHJlbWVtYmVyZWQgYXMgYW4gb2ZmaWNpYWwgb3ZlcndyaXR0ZW4gcHJvcGVydHkgKGxpa2UgaW4gQmV6aWVyUGx1Z2luKVxuXHRcdFx0XHRcdGlmIChvdmVyd3JpdGluZ1R3ZWVuICYmIChUd2VlbkxpdGUub25PdmVyd3JpdGUgfHwgdGhpcy52YXJzLm9uT3ZlcndyaXRlKSkge1xuXHRcdFx0XHRcdFx0Zm9yIChwIGluIGtpbGxQcm9wcykge1xuXHRcdFx0XHRcdFx0XHRpZiAocHJvcExvb2t1cFtwXSkge1xuXHRcdFx0XHRcdFx0XHRcdGlmICgha2lsbGVkKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRraWxsZWQgPSBbXTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0a2lsbGVkLnB1c2gocCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmICgoa2lsbGVkIHx8ICF2YXJzKSAmJiAhX29uT3ZlcndyaXRlKHRoaXMsIG92ZXJ3cml0aW5nVHdlZW4sIHRhcmdldCwga2lsbGVkKSkgeyAvL2lmIHRoZSBvbk92ZXJ3cml0ZSByZXR1cm5lZCBmYWxzZSwgdGhhdCBtZWFucyB0aGUgdXNlciB3YW50cyB0byBvdmVycmlkZSB0aGUgb3ZlcndyaXRpbmcgKGNhbmNlbCBpdCkuXG5cdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRmb3IgKHAgaW4ga2lsbFByb3BzKSB7XG5cdFx0XHRcdFx0XHRpZiAoKHB0ID0gcHJvcExvb2t1cFtwXSkpIHtcblx0XHRcdFx0XHRcdFx0aWYgKHNpbXVsdGFuZW91c092ZXJ3cml0ZSkgeyAvL2lmIGFub3RoZXIgdHdlZW4gb3ZlcndyaXRlcyB0aGlzIG9uZSBhbmQgdGhleSBib3RoIHN0YXJ0IGF0IGV4YWN0bHkgdGhlIHNhbWUgdGltZSwgeWV0IHRoaXMgdHdlZW4gaGFzIGFscmVhZHkgcmVuZGVyZWQgb25jZSAoZm9yIGV4YW1wbGUsIGF0IDAuMDAxKSBiZWNhdXNlIGl0J3MgZmlyc3QgaW4gdGhlIHF1ZXVlLCB3ZSBzaG91bGQgcmV2ZXJ0IHRoZSB2YWx1ZXMgdG8gd2hlcmUgdGhleSB3ZXJlIGF0IDAgc28gdGhhdCB0aGUgc3RhcnRpbmcgdmFsdWVzIGFyZW4ndCBjb250YW1pbmF0ZWQgb24gdGhlIG92ZXJ3cml0aW5nIHR3ZWVuLlxuXHRcdFx0XHRcdFx0XHRcdGlmIChwdC5mKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRwdC50W3B0LnBdKHB0LnMpO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRwdC50W3B0LnBdID0gcHQucztcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0Y2hhbmdlZCA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0aWYgKHB0LnBnICYmIHB0LnQuX2tpbGwoa2lsbFByb3BzKSkge1xuXHRcdFx0XHRcdFx0XHRcdGNoYW5nZWQgPSB0cnVlOyAvL3NvbWUgcGx1Z2lucyBuZWVkIHRvIGJlIG5vdGlmaWVkIHNvIHRoZXkgY2FuIHBlcmZvcm0gY2xlYW51cCB0YXNrcyBmaXJzdFxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGlmICghcHQucGcgfHwgcHQudC5fb3ZlcndyaXRlUHJvcHMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHB0Ll9wcmV2KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRwdC5fcHJldi5fbmV4dCA9IHB0Ll9uZXh0O1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAocHQgPT09IHRoaXMuX2ZpcnN0UFQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMuX2ZpcnN0UFQgPSBwdC5fbmV4dDtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHB0Ll9uZXh0KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRwdC5fbmV4dC5fcHJldiA9IHB0Ll9wcmV2O1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRwdC5fbmV4dCA9IHB0Ll9wcmV2ID0gbnVsbDtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRkZWxldGUgcHJvcExvb2t1cFtwXTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmIChyZWNvcmQpIHtcblx0XHRcdFx0XHRcdFx0b3ZlcndyaXR0ZW5Qcm9wc1twXSA9IDE7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICghdGhpcy5fZmlyc3RQVCAmJiB0aGlzLl9pbml0dGVkKSB7IC8vaWYgYWxsIHR3ZWVuaW5nIHByb3BlcnRpZXMgYXJlIGtpbGxlZCwga2lsbCB0aGUgdHdlZW4uIFdpdGhvdXQgdGhpcyBsaW5lLCBpZiB0aGVyZSdzIGEgdHdlZW4gd2l0aCBtdWx0aXBsZSB0YXJnZXRzIGFuZCB0aGVuIHlvdSBraWxsVHdlZW5zT2YoKSBlYWNoIHRhcmdldCBpbmRpdmlkdWFsbHksIHRoZSB0d2VlbiB3b3VsZCB0ZWNobmljYWxseSBzdGlsbCByZW1haW4gYWN0aXZlIGFuZCBmaXJlIGl0cyBvbkNvbXBsZXRlIGV2ZW4gdGhvdWdoIHRoZXJlIGFyZW4ndCBhbnkgbW9yZSBwcm9wZXJ0aWVzIHR3ZWVuaW5nLlxuXHRcdFx0XHRcdFx0dGhpcy5fZW5hYmxlZChmYWxzZSwgZmFsc2UpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGNoYW5nZWQ7XG5cdFx0fTtcblxuXHRcdHAuaW52YWxpZGF0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKHRoaXMuX25vdGlmeVBsdWdpbnNPZkVuYWJsZWQpIHtcblx0XHRcdFx0VHdlZW5MaXRlLl9vblBsdWdpbkV2ZW50KFwiX29uRGlzYWJsZVwiLCB0aGlzKTtcblx0XHRcdH1cblx0XHRcdHRoaXMuX2ZpcnN0UFQgPSB0aGlzLl9vdmVyd3JpdHRlblByb3BzID0gdGhpcy5fc3RhcnRBdCA9IHRoaXMuX29uVXBkYXRlID0gbnVsbDtcblx0XHRcdHRoaXMuX25vdGlmeVBsdWdpbnNPZkVuYWJsZWQgPSB0aGlzLl9hY3RpdmUgPSB0aGlzLl9sYXp5ID0gZmFsc2U7XG5cdFx0XHR0aGlzLl9wcm9wTG9va3VwID0gKHRoaXMuX3RhcmdldHMpID8ge30gOiBbXTtcblx0XHRcdEFuaW1hdGlvbi5wcm90b3R5cGUuaW52YWxpZGF0ZS5jYWxsKHRoaXMpO1xuXHRcdFx0aWYgKHRoaXMudmFycy5pbW1lZGlhdGVSZW5kZXIpIHtcblx0XHRcdFx0dGhpcy5fdGltZSA9IC1fdGlueU51bTsgLy9mb3JjZXMgYSByZW5kZXIgd2l0aG91dCBoYXZpbmcgdG8gc2V0IHRoZSByZW5kZXIoKSBcImZvcmNlXCIgcGFyYW1ldGVyIHRvIHRydWUgYmVjYXVzZSB3ZSB3YW50IHRvIGFsbG93IGxhenlpbmcgYnkgZGVmYXVsdCAodXNpbmcgdGhlIFwiZm9yY2VcIiBwYXJhbWV0ZXIgYWx3YXlzIGZvcmNlcyBhbiBpbW1lZGlhdGUgZnVsbCByZW5kZXIpXG5cdFx0XHRcdHRoaXMucmVuZGVyKE1hdGgubWluKDAsIC10aGlzLl9kZWxheSkpOyAvL2luIGNhc2UgZGVsYXkgaXMgbmVnYXRpdmUuXG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9O1xuXG5cdFx0cC5fZW5hYmxlZCA9IGZ1bmN0aW9uKGVuYWJsZWQsIGlnbm9yZVRpbWVsaW5lKSB7XG5cdFx0XHRpZiAoIV90aWNrZXJBY3RpdmUpIHtcblx0XHRcdFx0X3RpY2tlci53YWtlKCk7XG5cdFx0XHR9XG5cdFx0XHRpZiAoZW5hYmxlZCAmJiB0aGlzLl9nYykge1xuXHRcdFx0XHR2YXIgdGFyZ2V0cyA9IHRoaXMuX3RhcmdldHMsXG5cdFx0XHRcdFx0aTtcblx0XHRcdFx0aWYgKHRhcmdldHMpIHtcblx0XHRcdFx0XHRpID0gdGFyZ2V0cy5sZW5ndGg7XG5cdFx0XHRcdFx0d2hpbGUgKC0taSA+IC0xKSB7XG5cdFx0XHRcdFx0XHR0aGlzLl9zaWJsaW5nc1tpXSA9IF9yZWdpc3Rlcih0YXJnZXRzW2ldLCB0aGlzLCB0cnVlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhpcy5fc2libGluZ3MgPSBfcmVnaXN0ZXIodGhpcy50YXJnZXQsIHRoaXMsIHRydWUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRBbmltYXRpb24ucHJvdG90eXBlLl9lbmFibGVkLmNhbGwodGhpcywgZW5hYmxlZCwgaWdub3JlVGltZWxpbmUpO1xuXHRcdFx0aWYgKHRoaXMuX25vdGlmeVBsdWdpbnNPZkVuYWJsZWQpIGlmICh0aGlzLl9maXJzdFBUKSB7XG5cdFx0XHRcdHJldHVybiBUd2VlbkxpdGUuX29uUGx1Z2luRXZlbnQoKGVuYWJsZWQgPyBcIl9vbkVuYWJsZVwiIDogXCJfb25EaXNhYmxlXCIpLCB0aGlzKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9O1xuXG5cbi8vLS0tLVR3ZWVuTGl0ZSBzdGF0aWMgbWV0aG9kcyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cdFx0VHdlZW5MaXRlLnRvID0gZnVuY3Rpb24odGFyZ2V0LCBkdXJhdGlvbiwgdmFycykge1xuXHRcdFx0cmV0dXJuIG5ldyBUd2VlbkxpdGUodGFyZ2V0LCBkdXJhdGlvbiwgdmFycyk7XG5cdFx0fTtcblxuXHRcdFR3ZWVuTGl0ZS5mcm9tID0gZnVuY3Rpb24odGFyZ2V0LCBkdXJhdGlvbiwgdmFycykge1xuXHRcdFx0dmFycy5ydW5CYWNrd2FyZHMgPSB0cnVlO1xuXHRcdFx0dmFycy5pbW1lZGlhdGVSZW5kZXIgPSAodmFycy5pbW1lZGlhdGVSZW5kZXIgIT0gZmFsc2UpO1xuXHRcdFx0cmV0dXJuIG5ldyBUd2VlbkxpdGUodGFyZ2V0LCBkdXJhdGlvbiwgdmFycyk7XG5cdFx0fTtcblxuXHRcdFR3ZWVuTGl0ZS5mcm9tVG8gPSBmdW5jdGlvbih0YXJnZXQsIGR1cmF0aW9uLCBmcm9tVmFycywgdG9WYXJzKSB7XG5cdFx0XHR0b1ZhcnMuc3RhcnRBdCA9IGZyb21WYXJzO1xuXHRcdFx0dG9WYXJzLmltbWVkaWF0ZVJlbmRlciA9ICh0b1ZhcnMuaW1tZWRpYXRlUmVuZGVyICE9IGZhbHNlICYmIGZyb21WYXJzLmltbWVkaWF0ZVJlbmRlciAhPSBmYWxzZSk7XG5cdFx0XHRyZXR1cm4gbmV3IFR3ZWVuTGl0ZSh0YXJnZXQsIGR1cmF0aW9uLCB0b1ZhcnMpO1xuXHRcdH07XG5cblx0XHRUd2VlbkxpdGUuZGVsYXllZENhbGwgPSBmdW5jdGlvbihkZWxheSwgY2FsbGJhY2ssIHBhcmFtcywgc2NvcGUsIHVzZUZyYW1lcykge1xuXHRcdFx0cmV0dXJuIG5ldyBUd2VlbkxpdGUoY2FsbGJhY2ssIDAsIHtkZWxheTpkZWxheSwgb25Db21wbGV0ZTpjYWxsYmFjaywgb25Db21wbGV0ZVBhcmFtczpwYXJhbXMsIGNhbGxiYWNrU2NvcGU6c2NvcGUsIG9uUmV2ZXJzZUNvbXBsZXRlOmNhbGxiYWNrLCBvblJldmVyc2VDb21wbGV0ZVBhcmFtczpwYXJhbXMsIGltbWVkaWF0ZVJlbmRlcjpmYWxzZSwgbGF6eTpmYWxzZSwgdXNlRnJhbWVzOnVzZUZyYW1lcywgb3ZlcndyaXRlOjB9KTtcblx0XHR9O1xuXG5cdFx0VHdlZW5MaXRlLnNldCA9IGZ1bmN0aW9uKHRhcmdldCwgdmFycykge1xuXHRcdFx0cmV0dXJuIG5ldyBUd2VlbkxpdGUodGFyZ2V0LCAwLCB2YXJzKTtcblx0XHR9O1xuXG5cdFx0VHdlZW5MaXRlLmdldFR3ZWVuc09mID0gZnVuY3Rpb24odGFyZ2V0LCBvbmx5QWN0aXZlKSB7XG5cdFx0XHRpZiAodGFyZ2V0ID09IG51bGwpIHsgcmV0dXJuIFtdOyB9XG5cdFx0XHR0YXJnZXQgPSAodHlwZW9mKHRhcmdldCkgIT09IFwic3RyaW5nXCIpID8gdGFyZ2V0IDogVHdlZW5MaXRlLnNlbGVjdG9yKHRhcmdldCkgfHwgdGFyZ2V0O1xuXHRcdFx0dmFyIGksIGEsIGosIHQ7XG5cdFx0XHRpZiAoKF9pc0FycmF5KHRhcmdldCkgfHwgX2lzU2VsZWN0b3IodGFyZ2V0KSkgJiYgdHlwZW9mKHRhcmdldFswXSkgIT09IFwibnVtYmVyXCIpIHtcblx0XHRcdFx0aSA9IHRhcmdldC5sZW5ndGg7XG5cdFx0XHRcdGEgPSBbXTtcblx0XHRcdFx0d2hpbGUgKC0taSA+IC0xKSB7XG5cdFx0XHRcdFx0YSA9IGEuY29uY2F0KFR3ZWVuTGl0ZS5nZXRUd2VlbnNPZih0YXJnZXRbaV0sIG9ubHlBY3RpdmUpKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpID0gYS5sZW5ndGg7XG5cdFx0XHRcdC8vbm93IGdldCByaWQgb2YgYW55IGR1cGxpY2F0ZXMgKHR3ZWVucyBvZiBhcnJheXMgb2Ygb2JqZWN0cyBjb3VsZCBjYXVzZSBkdXBsaWNhdGVzKVxuXHRcdFx0XHR3aGlsZSAoLS1pID4gLTEpIHtcblx0XHRcdFx0XHR0ID0gYVtpXTtcblx0XHRcdFx0XHRqID0gaTtcblx0XHRcdFx0XHR3aGlsZSAoLS1qID4gLTEpIHtcblx0XHRcdFx0XHRcdGlmICh0ID09PSBhW2pdKSB7XG5cdFx0XHRcdFx0XHRcdGEuc3BsaWNlKGksIDEpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0YSA9IF9yZWdpc3Rlcih0YXJnZXQpLmNvbmNhdCgpO1xuXHRcdFx0XHRpID0gYS5sZW5ndGg7XG5cdFx0XHRcdHdoaWxlICgtLWkgPiAtMSkge1xuXHRcdFx0XHRcdGlmIChhW2ldLl9nYyB8fCAob25seUFjdGl2ZSAmJiAhYVtpXS5pc0FjdGl2ZSgpKSkge1xuXHRcdFx0XHRcdFx0YS5zcGxpY2UoaSwgMSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gYTtcblx0XHR9O1xuXG5cdFx0VHdlZW5MaXRlLmtpbGxUd2VlbnNPZiA9IFR3ZWVuTGl0ZS5raWxsRGVsYXllZENhbGxzVG8gPSBmdW5jdGlvbih0YXJnZXQsIG9ubHlBY3RpdmUsIHZhcnMpIHtcblx0XHRcdGlmICh0eXBlb2Yob25seUFjdGl2ZSkgPT09IFwib2JqZWN0XCIpIHtcblx0XHRcdFx0dmFycyA9IG9ubHlBY3RpdmU7IC8vZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IChiZWZvcmUgXCJvbmx5QWN0aXZlXCIgcGFyYW1ldGVyIHdhcyBpbnNlcnRlZClcblx0XHRcdFx0b25seUFjdGl2ZSA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0dmFyIGEgPSBUd2VlbkxpdGUuZ2V0VHdlZW5zT2YodGFyZ2V0LCBvbmx5QWN0aXZlKSxcblx0XHRcdFx0aSA9IGEubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKC0taSA+IC0xKSB7XG5cdFx0XHRcdGFbaV0uX2tpbGwodmFycywgdGFyZ2V0KTtcblx0XHRcdH1cblx0XHR9O1xuXG5cblxuLypcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIFR3ZWVuUGx1Z2luICAgKGNvdWxkIGVhc2lseSBiZSBzcGxpdCBvdXQgYXMgYSBzZXBhcmF0ZSBmaWxlL2NsYXNzLCBidXQgaW5jbHVkZWQgZm9yIGVhc2Ugb2YgdXNlIChzbyB0aGF0IHBlb3BsZSBkb24ndCBuZWVkIHRvIGluY2x1ZGUgYW5vdGhlciBzY3JpcHQgY2FsbCBiZWZvcmUgbG9hZGluZyBwbHVnaW5zIHdoaWNoIGlzIGVhc3kgdG8gZm9yZ2V0KVxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG5cdFx0dmFyIFR3ZWVuUGx1Z2luID0gX2NsYXNzKFwicGx1Z2lucy5Ud2VlblBsdWdpblwiLCBmdW5jdGlvbihwcm9wcywgcHJpb3JpdHkpIHtcblx0XHRcdFx0XHR0aGlzLl9vdmVyd3JpdGVQcm9wcyA9IChwcm9wcyB8fCBcIlwiKS5zcGxpdChcIixcIik7XG5cdFx0XHRcdFx0dGhpcy5fcHJvcE5hbWUgPSB0aGlzLl9vdmVyd3JpdGVQcm9wc1swXTtcblx0XHRcdFx0XHR0aGlzLl9wcmlvcml0eSA9IHByaW9yaXR5IHx8IDA7XG5cdFx0XHRcdFx0dGhpcy5fc3VwZXIgPSBUd2VlblBsdWdpbi5wcm90b3R5cGU7XG5cdFx0XHRcdH0sIHRydWUpO1xuXG5cdFx0cCA9IFR3ZWVuUGx1Z2luLnByb3RvdHlwZTtcblx0XHRUd2VlblBsdWdpbi52ZXJzaW9uID0gXCIxLjE5LjBcIjtcblx0XHRUd2VlblBsdWdpbi5BUEkgPSAyO1xuXHRcdHAuX2ZpcnN0UFQgPSBudWxsO1xuXHRcdHAuX2FkZFR3ZWVuID0gX2FkZFByb3BUd2Vlbjtcblx0XHRwLnNldFJhdGlvID0gX3NldFJhdGlvO1xuXG5cdFx0cC5fa2lsbCA9IGZ1bmN0aW9uKGxvb2t1cCkge1xuXHRcdFx0dmFyIGEgPSB0aGlzLl9vdmVyd3JpdGVQcm9wcyxcblx0XHRcdFx0cHQgPSB0aGlzLl9maXJzdFBULFxuXHRcdFx0XHRpO1xuXHRcdFx0aWYgKGxvb2t1cFt0aGlzLl9wcm9wTmFtZV0gIT0gbnVsbCkge1xuXHRcdFx0XHR0aGlzLl9vdmVyd3JpdGVQcm9wcyA9IFtdO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aSA9IGEubGVuZ3RoO1xuXHRcdFx0XHR3aGlsZSAoLS1pID4gLTEpIHtcblx0XHRcdFx0XHRpZiAobG9va3VwW2FbaV1dICE9IG51bGwpIHtcblx0XHRcdFx0XHRcdGEuc3BsaWNlKGksIDEpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0d2hpbGUgKHB0KSB7XG5cdFx0XHRcdGlmIChsb29rdXBbcHQubl0gIT0gbnVsbCkge1xuXHRcdFx0XHRcdGlmIChwdC5fbmV4dCkge1xuXHRcdFx0XHRcdFx0cHQuX25leHQuX3ByZXYgPSBwdC5fcHJldjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKHB0Ll9wcmV2KSB7XG5cdFx0XHRcdFx0XHRwdC5fcHJldi5fbmV4dCA9IHB0Ll9uZXh0O1xuXHRcdFx0XHRcdFx0cHQuX3ByZXYgPSBudWxsO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAodGhpcy5fZmlyc3RQVCA9PT0gcHQpIHtcblx0XHRcdFx0XHRcdHRoaXMuX2ZpcnN0UFQgPSBwdC5fbmV4dDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cHQgPSBwdC5fbmV4dDtcblx0XHRcdH1cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9O1xuXG5cdFx0cC5fbW9kID0gcC5fcm91bmRQcm9wcyA9IGZ1bmN0aW9uKGxvb2t1cCkge1xuXHRcdFx0dmFyIHB0ID0gdGhpcy5fZmlyc3RQVCxcblx0XHRcdFx0dmFsO1xuXHRcdFx0d2hpbGUgKHB0KSB7XG5cdFx0XHRcdHZhbCA9IGxvb2t1cFt0aGlzLl9wcm9wTmFtZV0gfHwgKHB0Lm4gIT0gbnVsbCAmJiBsb29rdXBbIHB0Lm4uc3BsaXQodGhpcy5fcHJvcE5hbWUgKyBcIl9cIikuam9pbihcIlwiKSBdKTtcblx0XHRcdFx0aWYgKHZhbCAmJiB0eXBlb2YodmFsKSA9PT0gXCJmdW5jdGlvblwiKSB7IC8vc29tZSBwcm9wZXJ0aWVzIHRoYXQgYXJlIHZlcnkgcGx1Z2luLXNwZWNpZmljIGFkZCBhIHByZWZpeCBuYW1lZCBhZnRlciB0aGUgX3Byb3BOYW1lIHBsdXMgYW4gdW5kZXJzY29yZSwgc28gd2UgbmVlZCB0byBpZ25vcmUgdGhhdCBleHRyYSBzdHVmZiBoZXJlLlxuXHRcdFx0XHRcdGlmIChwdC5mID09PSAyKSB7XG5cdFx0XHRcdFx0XHRwdC50Ll9hcHBseVBULm0gPSB2YWw7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHB0Lm0gPSB2YWw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHB0ID0gcHQuX25leHQ7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdFR3ZWVuTGl0ZS5fb25QbHVnaW5FdmVudCA9IGZ1bmN0aW9uKHR5cGUsIHR3ZWVuKSB7XG5cdFx0XHR2YXIgcHQgPSB0d2Vlbi5fZmlyc3RQVCxcblx0XHRcdFx0Y2hhbmdlZCwgcHQyLCBmaXJzdCwgbGFzdCwgbmV4dDtcblx0XHRcdGlmICh0eXBlID09PSBcIl9vbkluaXRBbGxQcm9wc1wiKSB7XG5cdFx0XHRcdC8vc29ydHMgdGhlIFByb3BUd2VlbiBsaW5rZWQgbGlzdCBpbiBvcmRlciBvZiBwcmlvcml0eSBiZWNhdXNlIHNvbWUgcGx1Z2lucyBuZWVkIHRvIHJlbmRlciBlYXJsaWVyL2xhdGVyIHRoYW4gb3RoZXJzLCBsaWtlIE1vdGlvbkJsdXJQbHVnaW4gYXBwbGllcyBpdHMgZWZmZWN0cyBhZnRlciBhbGwgeC95L2FscGhhIHR3ZWVucyBoYXZlIHJlbmRlcmVkIG9uIGVhY2ggZnJhbWUuXG5cdFx0XHRcdHdoaWxlIChwdCkge1xuXHRcdFx0XHRcdG5leHQgPSBwdC5fbmV4dDtcblx0XHRcdFx0XHRwdDIgPSBmaXJzdDtcblx0XHRcdFx0XHR3aGlsZSAocHQyICYmIHB0Mi5wciA+IHB0LnByKSB7XG5cdFx0XHRcdFx0XHRwdDIgPSBwdDIuX25leHQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICgocHQuX3ByZXYgPSBwdDIgPyBwdDIuX3ByZXYgOiBsYXN0KSkge1xuXHRcdFx0XHRcdFx0cHQuX3ByZXYuX25leHQgPSBwdDtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Zmlyc3QgPSBwdDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKChwdC5fbmV4dCA9IHB0MikpIHtcblx0XHRcdFx0XHRcdHB0Mi5fcHJldiA9IHB0O1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRsYXN0ID0gcHQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHB0ID0gbmV4dDtcblx0XHRcdFx0fVxuXHRcdFx0XHRwdCA9IHR3ZWVuLl9maXJzdFBUID0gZmlyc3Q7XG5cdFx0XHR9XG5cdFx0XHR3aGlsZSAocHQpIHtcblx0XHRcdFx0aWYgKHB0LnBnKSBpZiAodHlwZW9mKHB0LnRbdHlwZV0pID09PSBcImZ1bmN0aW9uXCIpIGlmIChwdC50W3R5cGVdKCkpIHtcblx0XHRcdFx0XHRjaGFuZ2VkID0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRwdCA9IHB0Ll9uZXh0O1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGNoYW5nZWQ7XG5cdFx0fTtcblxuXHRcdFR3ZWVuUGx1Z2luLmFjdGl2YXRlID0gZnVuY3Rpb24ocGx1Z2lucykge1xuXHRcdFx0dmFyIGkgPSBwbHVnaW5zLmxlbmd0aDtcblx0XHRcdHdoaWxlICgtLWkgPiAtMSkge1xuXHRcdFx0XHRpZiAocGx1Z2luc1tpXS5BUEkgPT09IFR3ZWVuUGx1Z2luLkFQSSkge1xuXHRcdFx0XHRcdF9wbHVnaW5zWyhuZXcgcGx1Z2luc1tpXSgpKS5fcHJvcE5hbWVdID0gcGx1Z2luc1tpXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fTtcblxuXHRcdC8vcHJvdmlkZXMgYSBtb3JlIGNvbmNpc2Ugd2F5IHRvIGRlZmluZSBwbHVnaW5zIHRoYXQgaGF2ZSBubyBkZXBlbmRlbmNpZXMgYmVzaWRlcyBUd2VlblBsdWdpbiBhbmQgVHdlZW5MaXRlLCB3cmFwcGluZyBjb21tb24gYm9pbGVycGxhdGUgc3R1ZmYgaW50byBvbmUgZnVuY3Rpb24gKGFkZGVkIGluIDEuOS4wKS4gWW91IGRvbid0IE5FRUQgdG8gdXNlIHRoaXMgdG8gZGVmaW5lIGEgcGx1Z2luIC0gdGhlIG9sZCB3YXkgc3RpbGwgd29ya3MgYW5kIGNhbiBiZSB1c2VmdWwgaW4gY2VydGFpbiAocmFyZSkgc2l0dWF0aW9ucy5cblx0XHRfZ3NEZWZpbmUucGx1Z2luID0gZnVuY3Rpb24oY29uZmlnKSB7XG5cdFx0XHRpZiAoIWNvbmZpZyB8fCAhY29uZmlnLnByb3BOYW1lIHx8ICFjb25maWcuaW5pdCB8fCAhY29uZmlnLkFQSSkgeyB0aHJvdyBcImlsbGVnYWwgcGx1Z2luIGRlZmluaXRpb24uXCI7IH1cblx0XHRcdHZhciBwcm9wTmFtZSA9IGNvbmZpZy5wcm9wTmFtZSxcblx0XHRcdFx0cHJpb3JpdHkgPSBjb25maWcucHJpb3JpdHkgfHwgMCxcblx0XHRcdFx0b3ZlcndyaXRlUHJvcHMgPSBjb25maWcub3ZlcndyaXRlUHJvcHMsXG5cdFx0XHRcdG1hcCA9IHtpbml0OlwiX29uSW5pdFR3ZWVuXCIsIHNldDpcInNldFJhdGlvXCIsIGtpbGw6XCJfa2lsbFwiLCByb3VuZDpcIl9tb2RcIiwgbW9kOlwiX21vZFwiLCBpbml0QWxsOlwiX29uSW5pdEFsbFByb3BzXCJ9LFxuXHRcdFx0XHRQbHVnaW4gPSBfY2xhc3MoXCJwbHVnaW5zLlwiICsgcHJvcE5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBwcm9wTmFtZS5zdWJzdHIoMSkgKyBcIlBsdWdpblwiLFxuXHRcdFx0XHRcdGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0VHdlZW5QbHVnaW4uY2FsbCh0aGlzLCBwcm9wTmFtZSwgcHJpb3JpdHkpO1xuXHRcdFx0XHRcdFx0dGhpcy5fb3ZlcndyaXRlUHJvcHMgPSBvdmVyd3JpdGVQcm9wcyB8fCBbXTtcblx0XHRcdFx0XHR9LCAoY29uZmlnLmdsb2JhbCA9PT0gdHJ1ZSkpLFxuXHRcdFx0XHRwID0gUGx1Z2luLnByb3RvdHlwZSA9IG5ldyBUd2VlblBsdWdpbihwcm9wTmFtZSksXG5cdFx0XHRcdHByb3A7XG5cdFx0XHRwLmNvbnN0cnVjdG9yID0gUGx1Z2luO1xuXHRcdFx0UGx1Z2luLkFQSSA9IGNvbmZpZy5BUEk7XG5cdFx0XHRmb3IgKHByb3AgaW4gbWFwKSB7XG5cdFx0XHRcdGlmICh0eXBlb2YoY29uZmlnW3Byb3BdKSA9PT0gXCJmdW5jdGlvblwiKSB7XG5cdFx0XHRcdFx0cFttYXBbcHJvcF1dID0gY29uZmlnW3Byb3BdO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRQbHVnaW4udmVyc2lvbiA9IGNvbmZpZy52ZXJzaW9uO1xuXHRcdFx0VHdlZW5QbHVnaW4uYWN0aXZhdGUoW1BsdWdpbl0pO1xuXHRcdFx0cmV0dXJuIFBsdWdpbjtcblx0XHR9O1xuXG5cblx0XHQvL25vdyBydW4gdGhyb3VnaCBhbGwgdGhlIGRlcGVuZGVuY2llcyBkaXNjb3ZlcmVkIGFuZCBpZiBhbnkgYXJlIG1pc3NpbmcsIGxvZyB0aGF0IHRvIHRoZSBjb25zb2xlIGFzIGEgd2FybmluZy4gVGhpcyBpcyB3aHkgaXQncyBiZXN0IHRvIGhhdmUgVHdlZW5MaXRlIGxvYWQgbGFzdCAtIGl0IGNhbiBjaGVjayBhbGwgdGhlIGRlcGVuZGVuY2llcyBmb3IgeW91LlxuXHRcdGEgPSB3aW5kb3cuX2dzUXVldWU7XG5cdFx0aWYgKGEpIHtcblx0XHRcdGZvciAoaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGFbaV0oKTtcblx0XHRcdH1cblx0XHRcdGZvciAocCBpbiBfZGVmTG9va3VwKSB7XG5cdFx0XHRcdGlmICghX2RlZkxvb2t1cFtwXS5mdW5jKSB7XG5cdFx0XHRcdFx0d2luZG93LmNvbnNvbGUubG9nKFwiR1NBUCBlbmNvdW50ZXJlZCBtaXNzaW5nIGRlcGVuZGVuY3k6IFwiICsgcCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRfdGlja2VyQWN0aXZlID0gZmFsc2U7IC8vZW5zdXJlcyB0aGF0IHRoZSBmaXJzdCBvZmZpY2lhbCBhbmltYXRpb24gZm9yY2VzIGEgdGlja2VyLnRpY2soKSB0byB1cGRhdGUgdGhlIHRpbWUgd2hlbiBpdCBpcyBpbnN0YW50aWF0ZWRcblxufSkoKHR5cGVvZihtb2R1bGUpICE9PSBcInVuZGVmaW5lZFwiICYmIG1vZHVsZS5leHBvcnRzICYmIHR5cGVvZihnbG9iYWwpICE9PSBcInVuZGVmaW5lZFwiKSA/IGdsb2JhbCA6IHRoaXMgfHwgd2luZG93LCBcIlR3ZWVuTGl0ZVwiKTsiLCJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIHJpY2hMYWJlbDogY2MuUmljaFRleHQsXHJcbiAgICAgICAgc3ByaXRlOiBjYy5TcHJpdGUsXHJcbiAgICAgICAgc2VsZWN0Qm46Y2MuQnV0dG9uLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDoo4XlpIdcclxuICAgICAqIGluZGV4OiDlrp7kvovljJZpdGVt55qE5bqP5Y+377yMMOW8gOWni1xyXG4gICAgICogdHlwZTog57G75Z6L77yaeWFvcGlu77yMemh1YW5nYmVp77yMa3VhbmdzaGnvvIx6YXd1XHJcbiAgICAgKiBkYXRh77ya5pWw5o2uXHJcbiAgICAgKiBldmVudO+8muaMiemSruWbnuaOieaWueazle+8iOWmguaenOacieaMiemSru+8iVxyXG4gICAgICovXHJcbiAgICBpbml0Wmh1YW5nYmVpSXRlbTogZnVuY3Rpb24gKGluZGV4LCB0eXBlLCBkYXRhLCBldmVudCkge1xyXG4gICAgICAgIHRoaXMuc3ByaXRlVG9nZ2xlKGluZGV4KTtcclxuXHJcbiAgICAgICAgdGhpcy5ub2RlLm5hbWUgPSB0eXBlICsgaW5kZXg7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgIHRoaXMuZXZlbnQgPSBldmVudDtcclxuICAgICAgICB2YXIgcmljaFN0cmluZyA9ICc8Y29sb3I9I0ZGRkYwMCBjbGljaz1cInpodWFuZ2JlaVJpY2hUZXh0RXZlbnRcIj4nICsgZGF0YS5uYW1lICsgJzwvYz4nO1xyXG4gICAgICAgIHRoaXMucmljaExhYmVsLnN0cmluZyA9IHJpY2hTdHJpbmc7XHJcbiAgICB9LFxyXG5cclxuICAgIHpodWFuZ2JlaVJpY2hUZXh0RXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coJ3podWFuZ2JlaSBpdGVtICcgKyB0aGlzLmRhdGEubmFtZSk7XHJcbiAgICAgICAgY3VySXRlbURhdGEgPSB0aGlzLmRhdGE7XHJcbiAgICAgICAgY2MubG9nKHRoaXMuZGF0YSlcclxuICAgICAgICAgemhhdW5nQmVpRGV0YWlsc1piaWQuaWQgPSB0aGlzLmRhdGEuaWQ7XHJcbiAgICAgICAgbG9hZFNjZW5lKEh4c2dTY2VuZXMuemh1YW5nYmVpLCBIeHNnU2NlbmVzLnd1cGluKTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnn7/nn7NcclxuICAgICAqIGluZGV4OiDlrp7kvovljJZpdGVt55qE5bqP5Y+377yMMOW8gOWni1xyXG4gICAgICogdHlwZTog57G75Z6L77yaeWFvcGlu77yMemh1YW5nYmVp77yMa3VhbmdzaGnvvIx6YXd1XHJcbiAgICAgKiBkYXRh77ya5pWw5o2uXHJcbiAgICAgKiBldmVudO+8muaMiemSruWbnuaOieaWueazle+8iOWmguaenOacieaMiemSru+8iVxyXG4gICAgICovXHJcbiAgICBpbml0S3VhbmdzaGlJdGVtOiBmdW5jdGlvbiAoaW5kZXgsIHR5cGUsIGRhdGEsIGV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5zcHJpdGVUb2dnbGUoaW5kZXgpO1xyXG5cclxuICAgICAgICB0aGlzLm5vZGUubmFtZSA9IHR5cGUgKyBpbmRleDtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcblxyXG4gICAgICAgIHZhciByaWNoU3RyaW5nID0gJzxjb2xvcj0jRkZGRjAwIGNsaWNrPVwia3VhbmdzaGlSaWNoVGV4dEV2ZW50XCI+JyArIGRhdGEuendOYW1lICsgJygnICsgZGF0YS56d1hpYW9HdW8gKyAnKScgKyAnPC9jPic7XHJcbiAgICAgICAgdGhpcy5yaWNoTGFiZWwuc3RyaW5nID0gcmljaFN0cmluZztcclxuICAgIH0sXHJcblxyXG4gICAga3VhbmdzaGlSaWNoVGV4dEV2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MubG9nKCdrdWFuZ3NoaSBpdGVtICcgKyB0aGlzLmRhdGEuendOYW1lKTtcclxuICAgICAgICBjdXJJdGVtRGF0YSA9IHsgJ2lkJzogdGhpcy5kYXRhLmlkICsgJyd9O1xyXG4gICAgICAgIGxvYWRTY2VuZShIeHNnU2NlbmVzLmJhb3NoaSwgSHhzZ1NjZW5lcy53dXBpbik7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5p2C54mpXHJcbiAgICAgKiBpbmRleDog5a6e5L6L5YyWaXRlbeeahOW6j+WPt++8jDDlvIDlp4tcclxuICAgICAqIHR5cGU6IOexu+Wei++8mnlhb3Bpbu+8jHpodWFuZ2Jlae+8jGt1YW5nc2hp77yMemF3dVxyXG4gICAgICogZGF0Ye+8muaVsOaNrlxyXG4gICAgICogZXZlbnTvvJrmjInpkq7lm57mjonmlrnms5XvvIjlpoLmnpzmnInmjInpkq7vvIlcclxuICAgICAqL1xyXG4gICAgaW5pdFphd3VJdGVtOiBmdW5jdGlvbiAoaW5kZXgsIHR5cGUsIGRhdGEsIGV2ZW50LHVzZXJQYXJhbSkge1xyXG4gICAgICAgIHRoaXMuc3ByaXRlVG9nZ2xlKGluZGV4KTtcclxuXHJcbiAgICAgICAgdGhpcy5ub2RlLm5hbWUgPSB0eXBlICsgaW5kZXg7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgIHRoaXMuY2xpY2tFdmVudCA9IGV2ZW50O1xyXG4gICAgICAgIHRoaXMudXNlclBhcmFtPXVzZXJQYXJhbTtcclxuICAgICAgICAvL+aVsOmHj1xyXG4gICAgICAgdmFyIGJ0biA9IHRoaXMubm9kZS5wYXJlbnQuZ2V0Q2hpbGRCeU5hbWUoJ3VzZUJ0bicpO1xyXG4gICAgICAgIGJ0bi5hY3RpdmUgPSAoZGF0YS5jdXN0b20xID09PSAnMScpID8gdHJ1ZSA6IGZhbHNlOyAvLyYmIChkYXRhLm51bSA+IDApXHJcblxyXG4gICAgICAgIHZhciBudW0gPSAnKCcgKyBkYXRhLm51bSArICcpJztcclxuXHJcbiAgICAgICAgdmFyIHJpY2hTdHJpbmcgPSAnPGNvbG9yPSNGRkZGMDAgY2xpY2s9XCJ6YXd1UmljaFRleHRFdmVudFwiPicgKyBkYXRhLm5hbWUgKyAnPC9jPiAnICsgbnVtO1xyXG4gICAgICAgIHRoaXMucmljaExhYmVsLnN0cmluZyA9IHJpY2hTdHJpbmc7XHJcbiAgICB9LFxyXG5cclxuICAgIHphd3VSaWNoVGV4dEV2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MubG9nKCd6YXd1IGl0ZW0gJyArIHRoaXMuZGF0YS5uYW1lKTtcclxuICAgICAgICB2YXIgdXJsID0gSHhzZ1VybC56YXd1SXRlbVVybDtcclxuICAgICAgICB2YXIgZGF0YSA9IEpTT04uc3RyaW5naWZ5KHsgJ2lkJzogdGhpcy5kYXRhLmlkIH0pO1xyXG4gICAgICAgIGFqYXhEYXRhKHVybCwgZGF0YSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGJ1dHRvbkV2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MubG9nKCdidXR0b25FdmVudCcpXHJcbiAgICAgICAgaWYgKHRoaXMuY2xpY2tFdmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLmNsaWNrRXZlbnQodGhpcy51c2VyUGFyYW0pO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBpbmRleOWlh+WBtuaVsOWIpOaWre+8jOWlh+aVsOWFs+mXrXNwcml0Zee7hOS7tu+8jOaYvuekuuiDjOaZr+aYjuaal+ebuOmXtOaViOaenFxyXG4gICAgICovXHJcbiAgICBzcHJpdGVUb2dnbGU6IGZ1bmN0aW9uIChpbmRleCkge1xyXG4gICAgICAgIHZhciBpc09kZCA9IGluZGV4ICUgMiA9PT0gMCA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICB0aGlzLnNwcml0ZS5lbmFibGVkID0gaXNPZGQ7XHJcbiAgICB9XHJcbn0pO1xyXG4iLCJ3aW5kb3cuY3VySXRlbURhdGEgPSBudWxsO1xyXG53aW5kb3cuY3VycmVudFd1cGluID0gMDtcclxudmFyIHNlbGY7XHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAga3NodWlmdVByZWZhYjogY2MuUHJlZmFiLFxyXG4gICAgICAgIHlhb3BpblByZWZhYjogY2MuUHJlZmFiLFxyXG4gICAgICAgIHpodWFuZ2JlaVByZWZhYjogY2MuUHJlZmFiLFxyXG4gICAgICAgIGt1YW5nc2hpUHJlZmFiOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgemF3dVByZWZhYjogY2MuUHJlZmFiLFxyXG5cclxuICAgICAgICBjb250ZW50OiBjYy5Ob2RlLFxyXG4gICAgICAgIHRpdGxlOiBjYy5MYWJlbCxcclxuICAgICAgICBmdXpob25nOiBjYy5MYWJlbCxcclxuICAgICAgICBtZW51OiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5CdXR0b25cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZiA9IHRoaXM7XHJcbiAgbG9hZENvbW1vbVNjZW5jZSgpO1xyXG4gICAgICAgIHRoaXMuY2xlYXJTY3JvbGx2aWV3KCk7XHJcblxyXG4gICAgICAgIHN3aXRjaCAoY3VycmVudFd1cGluKXtcclxuICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgdGhpcy55YW9waW5FdmVudCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgIHRoaXMuemh1YW5nYmVpRXZlbnQoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmt1YW5nc2hpRXZlbnQoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnphd3VFdmVudCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnlhb3BpbkV2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOeCueWHu+S6i+S7ti0tPuW/q+mAn+aBouWkjVxyXG4gICAgICovXHJcbiAgICBrc2h1aWZ1RXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coJ3d1cGluIG1hbmFuZ2VyIOW/q+mAn+aBouWkjScpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOeCueWHu+S6i+S7ti0tPui/lOWbnlxyXG4gICAgICovXHJcbiAgICBiYWNrRXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL+iwg+eUqOmAmueUqOeahOi/lOWbnuS4iuS4gOWcuuaZr+aWueazlVxyXG4gICAgICAgcmV0dXJuTGFzdCgpXHJcbiAgICAgICAgY3VySXRlbURhdGEgPSBudWxsO1xyXG4gICAgfSxcclxuICAgIG15Wmh1YW5nQmVpRXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL+iwg+eUqOmAmueUqOeahOi/lOWbnuS4iuS4gOWcuuaZr+aWueazlVxyXG4gICAgICBsb2FkaW5nU2NlbmUoSHhzZ1NjZW5lcy5teVpodWFuZ0JlaSxIeHNnU2NlbmVzLnd1cGluKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIC0tPuiNr+WTgVxyXG4gICAgICovXHJcbiAgICB5YW9waW5FdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmxvZygnd3VwaW4gbWFuYW5nZXIg6I2v5ZOBJyk7XHJcbiAgICAgICAgdGhpcy50aXRsZS5zdHJpbmcgPSAn6I2v5ZOBJztcclxuICAgICAgICB0aGlzLmNsZWFyU2Nyb2xsdmlldygpO1xyXG4gICAgICAgIHRoaXMubWVudVtjdXJyZW50V3VwaW5dLmludGVyYWN0YWJsZSA9IHRydWU7XHJcbiAgICAgICAgY3VycmVudFd1cGluID0gMDtcclxuICAgICAgICB0aGlzLm1lbnVbY3VycmVudFd1cGluXS5pbnRlcmFjdGFibGUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdmFyIGtzaHVpZnUgPSBjYy5pbnN0YW50aWF0ZSh0aGlzLmtzaHVpZnVQcmVmYWIpO1xyXG4gICAgICAgIHRoaXMuY29udGVudC5hZGRDaGlsZChrc2h1aWZ1KTtcclxuICAgICAgICB0aGlzLmtzaHVpZnVCdXR0b24gPSBrc2h1aWZ1LmdldENoaWxkQnlOYW1lKCdodWlmdUJ0bicpO1xyXG4gICAgICAgIHRoaXMua3NodWlmdUJ1dHRvbi5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9FTkQsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy9UT0RP5b+r6YCf5oGi5aSNXHJcbiAgICAgICAgICAgIGNjLmxvZygnd3VwaW4gbWFuYW5nZXIg6I2v5ZOBIOW/q+mAn+aBouWkjScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBhamF4KEh4c2dVcmwueWFvcGluVXJsLCB0aGlzLmluaXRZYW9waW4pO1xyXG4gICAgfSxcclxuXHJcbiAgICBpbml0WWFvcGluOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIGlmKGN1cnJlbnRXdXBpbiAhPSBkYXRhLnR5cGUpIHJldHVybjtcclxuXHJcbiAgICAgICAgLy8gdGhpcy5jb250ZW50LmhlaWdodCA9IChtc2cubGVuZ3RoICsgMSkgKiA2NTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAtLT7oo4XlpIdcclxuICAgICAqL1xyXG4gICAgemh1YW5nYmVpRXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coJ3d1cGluIG1hbmFuZ2VyIOijheWkhycpO1xyXG4gICAgICAgIHRoaXMudGl0bGUuc3RyaW5nID0gJ+ijheWkhyc7XHJcbiAgICAgICAgdGhpcy5jbGVhclNjcm9sbHZpZXcoKTtcclxuICAgICAgICB0aGlzLm1lbnVbY3VycmVudFd1cGluXS5pbnRlcmFjdGFibGUgPSB0cnVlO1xyXG4gICAgICAgIGN1cnJlbnRXdXBpbiA9IDE7XHJcbiAgICAgICAgdGhpcy5tZW51W2N1cnJlbnRXdXBpbl0uaW50ZXJhY3RhYmxlID0gZmFsc2U7XHJcblxyXG4gICAgICAgIGFqYXhEYXRhKEh4c2dVcmwuemh1YW5nYmVpVXJsLG51bGwsIHRoaXMuaW5pdFpodWFuZ2JlaSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGluaXRaaHVhbmdiZWk6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgaWYoY3VycmVudFd1cGluICE9IGRhdGEudHlwZSkgcmV0dXJuO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBtc2cgPSBkYXRhLm1zZ1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbXNnLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBpdGVtTXNnID0gbXNnW2ldO1xyXG4gICAgICAgICAgICB2YXIgaXRlbSA9IGNjLmluc3RhbnRpYXRlKHNlbGYuemh1YW5nYmVpUHJlZmFiKTtcclxuICAgICAgICAgICAgc2VsZi5jb250ZW50LmFkZENoaWxkKGl0ZW0pO1xyXG4gICAgICAgICAgICB2YXIgY29tcCA9IGl0ZW0uZ2V0Q29tcG9uZW50SW5DaGlsZHJlbignV3VwaW5JdGVtJyk7XHJcbiAgICAgICAgICAgIGNvbXAuaW5pdFpodWFuZ2JlaUl0ZW0oaSwgJ3podWFuZ2JlaScsIGl0ZW1Nc2cpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5jb250ZW50LmhlaWdodCA9IG1zZy5sZW5ndGggKiA2NTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAtLT7nn7/nn7NcclxuICAgICAqL1xyXG4gICAga3VhbmdzaGlFdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmxvZygnd3VwaW4gbWFuYW5nZXIg55+/55+zJyk7XHJcbiAgICAgICAgdGhpcy50aXRsZS5zdHJpbmcgPSAn55+/55+zJztcclxuICAgICAgICB0aGlzLmNsZWFyU2Nyb2xsdmlldygpO1xyXG4gICAgICAgIHRoaXMubWVudVtjdXJyZW50V3VwaW5dLmludGVyYWN0YWJsZSA9IHRydWU7XHJcbiAgICAgICAgY3VycmVudFd1cGluID0gMjtcclxuICAgICAgICB0aGlzLm1lbnVbY3VycmVudFd1cGluXS5pbnRlcmFjdGFibGUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgYWpheERhdGEoSHhzZ1VybC5rdWFuZ3NoaVVybCwgbnVsbCx0aGlzLmluaXRLdWFuZ3NoaSk7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBpbml0S3VhbmdzaGk6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgaWYoY3VycmVudFd1cGluICE9IGRhdGEudHlwZSkgcmV0dXJuO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBtc2cgPSBkYXRhLm1zZztcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgaXRlbSA9IGNjLmluc3RhbnRpYXRlKHNlbGYua3VhbmdzaGlQcmVmYWIpO1xyXG4gICAgICAgICAgICBzZWxmLmNvbnRlbnQuYWRkQ2hpbGQoaXRlbSk7XHJcbiAgICAgICAgICAgIHZhciBjb21wID0gaXRlbS5nZXRDb21wb25lbnRJbkNoaWxkcmVuKCdXdXBpbkl0ZW0nKTtcclxuICAgICAgICAgICAgdmFyIGl0ZW1Nc2cgPSBtc2dbaV07XHJcbiAgICAgICAgICAgIGNvbXAuaW5pdEt1YW5nc2hpSXRlbShpLCAna3VhbmdzaGknLCBpdGVtTXNnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5jb250ZW50LmhlaWdodCA9IG1zZy5sZW5ndGggKiA2NTtcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAtLT7mnYLnialcclxuICAgICAqL1xyXG4gICAgemF3dUV2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MubG9nKCd3dXBpbiBtYW5hbmdlciDmnYLniaknKTtcclxuICAgICAgICB0aGlzLnRpdGxlLnN0cmluZyA9ICfmnYLniaknO1xyXG4gICAgICAgIHRoaXMuY2xlYXJTY3JvbGx2aWV3KCk7XHJcbiAgICAgICAgdGhpcy5tZW51W2N1cnJlbnRXdXBpbl0uaW50ZXJhY3RhYmxlID0gdHJ1ZTtcclxuICAgICAgICBjdXJyZW50V3VwaW4gPSAzO1xyXG4gICAgICAgIHRoaXMubWVudVtjdXJyZW50V3VwaW5dLmludGVyYWN0YWJsZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBhamF4RGF0YShIeHNnVXJsLnphd3VVcmwsbnVsbCwgdGhpcy5pbml0WmF3dSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGluaXRaYXd1OiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIGlmKGN1cnJlbnRXdXBpbiAhPSBkYXRhLnR5cGUpIHJldHVybjtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgbXNnID0gZGF0YS5tc2dcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0cnl7XHJcbiAgICAgICAgICAgICAgICAgdmFyIGl0ZW1Nc2cgPSBtc2dbaV07XHJcbiAgICAgICAgICAgIHZhciBpdGVtID0gY2MuaW5zdGFudGlhdGUoc2VsZi56YXd1UHJlZmFiKTtcclxuICAgICAgICAgICAgc2VsZi5jb250ZW50LmFkZENoaWxkKGl0ZW0pO1xyXG4gICAgICAgICAgICB2YXIgY29tcCA9IGl0ZW0uZ2V0Q29tcG9uZW50SW5DaGlsZHJlbignV3VwaW5JdGVtJyk7XHJcbiAgICAgICAgICAgIGNvbXAuaW5pdFphd3VJdGVtKGksICd6YXd1JywgaXRlbU1zZyxzZWxmLnphd3VJdGVtRXZlbnQsaXRlbU1zZyk7XHJcbiAgICAgICAgICAgIH1jYXRjaChlKXtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgXHJcbiAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5jb250ZW50LmhlaWdodCA9IG1zZy5sZW5ndGggKiA2NTtcclxuICAgIH0sXHJcblxyXG4gICAgemF3dUl0ZW1FdmVudDogZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICB2YXIgdHlwZT0gZGF0YS50eXBlMTtcclxuICAgICAgIHVzZXJXdVBpbi53dXBpbklkPWRhdGEuaWQ7XHJcbiAgICAgICB1c2VyV3VQaW4ub2JqZWN0cz1kYXRhO1xyXG4gICAgICAgY2MubG9nKHVzZXJXdVBpbi53dXBpbklkKVxyXG4gICAgICAgaWYodHlwZT09J+S7pCcpe1xyXG4gICAgICAgICAgICBjYy5sb2coJ+S7pCcpXHJcbiAgICAgICAgbG9hZFNjZW5lKEh4c2dTY2VuZXMudXNlckppYW5nSnVuTGluZywgSHhzZ1NjZW5lcy53dXBpbik7XHJcbiAgICAgICB9XHJcbiAgICAgICBpZih0eXBlPT0n5oqA6IO95LmmJ3x8dHlwZT09J+aKgOiDvScpe1xyXG4gICAgICAgICAgIGNjLmxvZygn5oqA6IO95LmmJylcclxuICAgICAgICAgICBsb2FkU2NlbmUoSHhzZ1NjZW5lcy51c2VyTGlzdCwgSHhzZ1NjZW5lcy53dXBpbik7XHJcbiAgICAgICB9XHJcbiAgICAgICBpZih0eXBlPT0n5b+D5rOV5LmmJyl7XHJcbiAgICAgICAgICAgY2MubG9nKCflv4Pms5XkuaYnKVxyXG4gICAgICAgICAgIGxvYWRTY2VuZShIeHNnU2NlbmVzLnVzZXJYaW5GYVNodSwgSHhzZ1NjZW5lcy53dXBpbik7XHJcbiAgICAgICB9XHJcbiAgICAgICAgaWYodHlwZT09J+efsycpe1xyXG4gICAgICAgICAgIGNjLmxvZygn56C455+/55+zJylcclxuICAgICAgICAgICBzZWxmLnVzZXJNaW5lcmFsKCk7XHJcbiAgICAgICB9XHJcbiAgICAgXHJcbiAgICB9LFxyXG4gICAgY2xlYXJTY3JvbGx2aWV3OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jb250ZW50LnJlbW92ZUFsbENoaWxkcmVuKCk7XHJcbiAgICB9LFxyXG4gICAgdXNlck1pbmVyYWw6ZnVuY3Rpb24oKXtcclxuICAgICAgICAgIGNjLmxvZygnZGF0YTonKyB1c2VyV3VQaW4ud3VwaW5JZClcclxuICAgICAgICAgYWpheERhdGEoSHhzZ1VybC51c2VyTWluZXJhbCx7J2lkJzp1c2VyV3VQaW4ud3VwaW5JZCwnbnVtJzonMSd9LHNlbGYudGlTaGkpO1xyXG4gICAgICAgIFxyXG4gICAgfSxcclxuICAgIHRpU2hpOmZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgIGNjLmxvZyhkYXRhKVxyXG4gICAgICAgIHNob3dBbGVydChkYXRhLm1zZyk7XHJcbiAgICB9XHJcblxyXG59KTtcclxuXHJcbiIsImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgbXNnOmNjLkxhYmVsXHJcbiAgICAgICAgLy8gZm9vOiB7XHJcbiAgICAgICAgLy8gICAgZGVmYXVsdDogbnVsbCwgICAgICAvLyBUaGUgZGVmYXVsdCB2YWx1ZSB3aWxsIGJlIHVzZWQgb25seSB3aGVuIHRoZSBjb21wb25lbnQgYXR0YWNoaW5nXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICB0byBhIG5vZGUgZm9yIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgLy8gICAgdXJsOiBjYy5UZXh0dXJlMkQsICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxyXG4gICAgICAgIC8vICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSwgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIHZpc2libGU6IHRydWUsICAgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIGRpc3BsYXlOYW1lOiAnRm9vJywgLy8gb3B0aW9uYWxcclxuICAgICAgICAvLyAgICByZWFkb25seTogZmFsc2UsICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIGZhbHNlXHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICAvLyAuLi5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgIHRoaXMuY2FuY2VsZGlhbG9nKClcclxuICAgICAgXHJcblxyXG4gICAgfSxcclxuICAgIGNhbmNlbGRpYWxvZzpmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgY2MuZmluZChcIkNhbnZhcy9hbGVydFwiKS5hY3RpdmU9ZmFsc2U7XHJcbiAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIC8vIGZvbzoge1xyXG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub2RlIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcclxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICB2aXNpYmxlOiB0cnVlLCAgICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXHJcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gLi4uXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuICAgIGJhY2tFdmVudDpmdW5jdGlvbigpe1xyXG4gICAgICAgICByZXR1cm5MYXN0KClcclxuICAgIH1cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcbiAgICBcclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBtc2c6Y2MuUmljaFRleHQsXHJcbiAgICAgICAgLy8gZm9vOiB7XHJcbiAgICAgICAgLy8gICAgZGVmYXVsdDogbnVsbCwgICAgICAvLyBUaGUgZGVmYXVsdCB2YWx1ZSB3aWxsIGJlIHVzZWQgb25seSB3aGVuIHRoZSBjb21wb25lbnQgYXR0YWNoaW5nXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICB0byBhIG5vZGUgZm9yIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgLy8gICAgdXJsOiBjYy5UZXh0dXJlMkQsICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxyXG4gICAgICAgIC8vICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSwgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIHZpc2libGU6IHRydWUsICAgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIGRpc3BsYXlOYW1lOiAnRm9vJywgLy8gb3B0aW9uYWxcclxuICAgICAgICAvLyAgICByZWFkb25seTogZmFsc2UsICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIGZhbHNlXHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICAvLyAuLi5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG4gICAgc2V0TXNnOmZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgIHRoaXMubXNnLnN0cmluZz1kYXRhO1xyXG5cclxuICAgIH0sXHJcbiAgICBnZXRNc2c6ZnVuY3Rpb24oKXtcclxuICAgICAgICByZXR1cm4gdGhpcy5tc2cuc3RyaW5nO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwidmFyIHNlbGY7XHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgICAgIGJhbmdJdGVtOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgICAgICAgICAgY29udGVudDogY2MuTm9kZSxcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBjYy5MYWJlbCxcclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICBcclxuICAgICAgICBzZWxmPXRoaXM7XHJcbiAgICAgICAgc2VsZi50aXRsZS5zdHJpbmc9Q2hpQmlWby50aXRsZTtcclxuICAgICAgICAgYWpheERhdGEoQ2hpQmlWby51cmwsbnVsbCx0aGlzLmxvYWRpbmcpO1xyXG4gICAgfSxcclxuICAgIGxvYWRpbmc6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAvLyB0aGlzLmNsZWFyU2Nyb2xsdmlldygpO1xyXG4gICAgICAgIHZhciBtc2cgPSBkYXRhLm1zZ1xyXG4gICAgICAgIGNjLmxvZyhkYXRhKVxyXG4gICAgICAgIGlmKG1zZz09Jyd8fHR5cGVvZihtc2cpPT0ndW5kZWZpbmVkJ3x8bXNnLmxlbmd0aD09MCl7XHJcbiAgICAgICAgICAgIHNob3dBbGVydChcIuezu+e7n+ayoeacieivpeS/oeaBr++8gVwiKVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgIHNlbGYuY29udGVudC5yZW1vdmVBbGxDaGlsZHJlbigpO1xyXG4gICAgICAgIHNlbGYuY29udGVudC5oZWlnaHQgPSBtc2cubGVuZ3RoICoxMDA7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtc2cubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW1Nc2cgPSBtc2dbaV07XHJcbiAgICAgICAgICAgIHZhciBpdGVtID0gY2MuaW5zdGFudGlhdGUoc2VsZi5iYW5nSXRlbSk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgc2VsZi5jb250ZW50LmFkZENoaWxkKGl0ZW0pO1xyXG4gICAgICAgICAgICAgIHZhciBjb21wID0gaXRlbS5nZXRDb21wb25lbnQoJ2JhbmdJdGVtJyk7XHJcbiAgICAgICAgICAgICAgaWYoQ2hpQmlWby50aXRsZT09XCLljoblj7Lmn6Xor6JcIil7XHJcbiAgICAgICAgICAgICAgICAgY29tcC5zZXRNc2coXCLnrKxcIittc2dbaV0uaWQrXCLmnJ/otaTlo4HmlpdcIittc2dbaV0ucmVzdXQrXCLog5zliKlcIiApO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgaWYoQ2hpQmlWby50aXRsZT09XCLmiJjliKnlk4HmjpLooYxcIil7XHJcbiAgICAgICAgICAgICAgICAgY29tcC5zZXRNc2coXCI8Y29sb3I9I0YxOUNDNT5cIittc2dbaV0ucm9sZW5hbWUrXCI8L2M+XCIrbXNnW2ldLmppbitcIumHkVwiK21zZ1tpXS55aW4rXCLpk7ZcIik7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgaWYoQ2hpQmlWby50aXRsZT09XCLlo7Dmj7TorrDlvZVcIil7XHJcbiAgICAgICAgICAgICAgICAgdmFyIG09XCJcIjtcclxuICAgICAgICAgICAgICAgICBpZihtc2dbaV0uamllZ3VvPT1udWxsfHx0eXBlb2YobXNnW2ldLmppZWd1byk9PSd1bmRlZmluZWQnKXtcclxuICAgICAgICAgICAgICAgICAgICAgbT1cIuW+heWumlwiO1xyXG4gICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICBtPW1zZ1tpXS5qaWVndW87XHJcbiAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgIGNvbXAuc2V0TXNnKFwi56ysXCIrbXNnW2ldLm51bStcIuacn+i1pOWjgeaWl++8jOWinuaPtFwiK21zZ1tpXS5yZXN1bHQrXCLlhptcIittc2dbaV0uamluK1wi6YeRXCIrbXNnW2ldLnlpbitcIumTtuOAkFwiK20rXCLjgJFcIik7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGlmKENoaUJpVm8udGl0bGU9PVwi5aWW5Yqx5o6S6KGMXCIpe1xyXG4gICAgICAgICAgICAgICAgICAgY29tcC5zZXRNc2coXCI8Y29sb3I9I0YxOUNDNT5cIittc2dbaV0ucm9sZW5hbWUrXCI8L2M+XCIrbXNnW2ldLmppbitcIumHkVwiK21zZ1tpXS55aW4rXCLpk7ZcIik7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIC8vIGNvbXAuc2VsZWN0Qm4ubm9kZS5vbihcImNsaWNrXCIsc2VsZi5za2lsbExpc3Qsc2VsZilcclxuICAgICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgIFxyXG4gICAgfSxcclxuICAgICAvKipcclxuICAgICAqIOeCueWHu+S6i+S7ti0tPui/lOWbnlxyXG4gICAgICovXHJcbiAgICBiYWNrRXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICByZXR1cm5MYXN0KCk7XHJcbiAgICB9LFxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsInZhciBzZWxmO1xyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMub25sb2FkQmFvU2hpKCk7XHJcbiAgICB9LFxyXG4gICAgb25sb2FkQmFvU2hpOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIGFqYXhEYXRhKEh4c2dVcmwueHFic0xpc3QsIHsgJ3piaWQnOiB6aGF1bmdCZWlEZXRhaWxzWmJpZC5pZCB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmRhdGEpXHJcbiAgICAgICAgICAgIGlmIChkYXRhLmNvZGUgPT0gXCIwMDBcIikge1xyXG4gICAgICAgICAgICAgICAgbGV0IGRhdGFBcnJ5ID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYubm9kZS5yZW1vdmVBbGxDaGlsZHJlbigpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5ub2RlLmhlaWdodCA9KGRhdGFBcnJ5Lmxlbmd0aCkvNio2MCsyNDA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7aTwgZGF0YUFycnkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjYy5sb2FkZXIubG9hZFJlcygncHJlZmFicy9rb25nJywgY2MuUHJlZmFiLCBmdW5jdGlvbiAoZXJyLCBwcmVmYWIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrb25nID0gY2MuaW5zdGFudGlhdGUocHJlZmFiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOS9v+eUqOS6i+S7tuWQjeadpeazqOWGjFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga29uZy5vbigndG91Y2hzdGFydCcsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYy5maW5kKCdDYW52YXMvemJCYW9zaGkyJykgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYy5maW5kKCdDYW52YXMvemJCYW9zaGkyJykuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYy5sb2FkZXIubG9hZFJlcygncHJlZmFicy96YkJhb3NoaTInLCBjYy5QcmVmYWIsIGZ1bmN0aW9uIChlcnIsIHByZWZhYikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHpiQmFvc2hpID0gY2MuaW5zdGFudGlhdGUocHJlZmFiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNjLmZpbmQoJ0NhbnZhcycpLmFkZENoaWxkKHpiQmFvc2hpLCA5MCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6YkJhb3NoaS5zZXRQb3NpdGlvblgoMzApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgemJCYW9zaGkuc2V0UG9zaXRpb25ZKC0xMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+WKoOi8iXpiQmFvc2hp6IWz5pysLOWIneWni+WMlueVjOmdolxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHpiQmFvc2hpSnMgPSB6YkJhb3NoaS5nZXRDb21wb25lbnQoJ3piQmFvc2hpRGV0YWlsJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6YkJhb3NoaUpzLmluaXQoZGF0YUFycnlbaV0pO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5ub2RlLmFkZENoaWxkKGtvbmcpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgc2hvd0FsZXJ0KFwi5pyN5Yqh5Zmo5Ye66Zeu6aKY5LqGXCIpO1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcblxyXG5cclxuICAgICAgICB9KVxyXG5cclxuXHJcblxyXG4gICAgfSxcclxuICAgIGNsaWNrOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGNjLmZpbmQoJ0NhbnZhcy9icycpICE9IG51bGwpIHtcclxuICAgICAgICAgICAgY2MuZmluZCgnQ2FudmFzL2JzJykuZGVzdHJveSgpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsInZhciBzZWxmO1xyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBmZW5nOmNjLlNwcml0ZUZyYW1lLFxyXG4gICAgICAgIHdlaTpjYy5TcHJpdGVGcmFtZSxcclxuICAgICAgICBsdWFuOmNjLlNwcml0ZUZyYW1lLFxyXG4gICAgICAgIGdvbmc6Y2MuU3ByaXRlRnJhbWUsXHJcbiAgICAgICAgeWluOmNjLlNwcml0ZUZyYW1lLFxyXG4gICAgICAgIHN1OmNjLlNwcml0ZUZyYW1lLFxyXG4gICAgICAgIGd1OmNjLlNwcml0ZUZyYW1lLFxyXG4gICAgICAgIGR1OmNjLlNwcml0ZUZyYW1lLFxyXG4gICAgICAgIC8vIGZvbzoge1xyXG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub2RlIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcclxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICB2aXNpYmxlOiB0cnVlLCAgICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXHJcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gLi4uXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHNlbGY9dGhpcztcclxuICAgIH0sXHJcbiAgIGdldFNwcml0ZUZyYW1lOmZ1bmN0aW9uKG5hbWUpe1xyXG4gICAgICAgY2MubG9nKHRoaXNbbmFtZV0pXHJcbiAgICAgXHJcbiAgICAgICAgcmV0dXJuIHRoaXNbbmFtZV07XHJcblxyXG4gICB9XHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwidmFyIHNlbGY7XHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgYnVmZlByZWZhYjpjYy5QcmVmYWJcclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGY9dGhpcztcclxuXHJcbiAgICB9LFxyXG4gIFxyXG4gICAgZ2V0QnVmZlByZWZhYjpmdW5jdGlvbigpe1xyXG4gICAgIHJldHVybiBzZWxmLmJ1ZmZQcmVmYWI7XHJcbiAgICB9XHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICByaWNoTGFiZWw6IGNjLlJpY2hUZXh0LFxyXG4gICAgICAgIHNwcml0ZTogY2MuU3ByaXRlXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuICBcclxuICAgaW5pdENoYXRNc2dJdGVtOiBmdW5jdGlvbiAoaW5kZXgsIHR5cGUsIGRhdGEsIGV2ZW50KSB7XHJcbiAgICBcclxuXHJcbiAgICAgICAgdGhpcy5ub2RlLm5hbWUgPSB0eXBlICsgaW5kZXg7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgIHRoaXMuZXZlbnQgPSBldmVudDtcclxuICAgICAgICAgdmFyIHJpY2hTdHJpbmc7XHJcbiAgICAgICAgIHZhciB0aW1lPWRhdGEuZGF0YTtcclxuICAgICAgdmFyIGQgPSBuZXcgRGF0ZSh0aW1lKTtcclxuICAgICAgICB2YXIgaGggPSBkLmdldEhvdXJzKCk7XHJcbiAgICAgICAgdmFyIG1tID0gZC5nZXRNaW51dGVzKCk7XHJcbiAgICAgICAgaWYgKG1tIDwgMTApIHtcclxuICAgICAgICAgICAgbW0gPSBcIjBcIiArIG1tO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaGggPCAxMCkge1xyXG4gICAgICAgICAgICBoaCA9IFwiMFwiICsgaGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciB0aW1lcyA9IGhoICsgXCI6XCIgKyBtbTtcclxuICAgICAgICAgaWYobXlGcmllbmRzLmZyaWVuZGlkPT1kYXRhLnJvbGVpZCl7XHJcbiAgICAgICAgICAgICAgICAgICByaWNoU3RyaW5nID0gdGltZXMrJzxjb2xvcj0jRkYwMDAwIGNsaWNrPVwiemF3dVJpY2hUZXh0RXZlbnRcIj4nICsgZGF0YS5yb2xlbmFtZStcIjo8Yz48Y29sb3I9I0ZBRjlGOSA+XCIrZGF0YS5tZXNzYWdlKyc8L2M+JztcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICByaWNoU3RyaW5nID0gdGltZXMrJzxjb2xvcj0jMDBCMzBGIGNsaWNrPVwiemF3dVJpY2hUZXh0RXZlbnRcIj4nICsgZGF0YS5yb2xlbmFtZSsnOjxjPjxjb2xvcj0jRkFGOUY5PicrZGF0YS5tZXNzYWdlKyc8L2M+JztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICBcclxuICAgICAgICB0aGlzLnJpY2hMYWJlbC5zdHJpbmcgPSByaWNoU3RyaW5nO1xyXG4gICAgICBcclxuICAgIH0sXHJcbiAgICBcclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJ2YXIgc2VsZjtcclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG4gICAgXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgdG9wTXNnOmNjLkxhYmVsLFxyXG4gICAgICAgIHBsYXllck1vbmV5OmNjLkxhYmVsLFxyXG4gICAgICAgIHlhWmh1TW9uZXk6Y2MuTGFiZWwsXHJcbiAgICAgICAgd2VpOntcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuRWRpdEJveCwgXHJcbiAgICAgICAgfSxcclxuICAgICAgICBzaHU6e1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5FZGl0Qm94LCBcclxuICAgICAgICB9LFxyXG4gICAgICAgIHd1OntcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuRWRpdEJveCwgXHJcbiAgICAgICAgfSxcclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFqYXhEYXRhKEh4c2dVcmwubG9hZFlhWmh1TXNnLG51bGwsZnVuY3Rpb24obXNnKXtcclxuXHJcbiAgICAgICAgICAgIHNlbGYucGxheWVyTW9uZXkuc3RyaW5nPVwi5oKo5pyJXCIrbXNnLm1zZy5yb2xlSmluK1wi6YeRXCIrbXNnLm1zZy5yb2xlWWluK1wi6ZO2XCI7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICBzZWxmLnlhWmh1TW9uZXkuc3RyaW5nPVwi5oKo55uu5YmN5bey5aKe5o+0XCIrbXNnLm1zZy5zdW1KaW4rXCLph5FcIittc2cubXNnLnN1bVlpbitcIumTtlwiO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNlbGY9dGhpcztcclxuICAgICAgICBzZWxmLnRvcE1zZy5zdHJpbmc9Q2hpQmlWby50b3BNc2c7XHJcblxyXG4gICAgfSxcclxuICAgYmFja0V2ZW50OmZ1bmN0aW9uKCl7XHJcbiAgICAgICB2YXIgeWFaaHU9IGNjLmZpbmQoXCJDYW52YXMvY2hpQmlZYVpodVwiKTtcclxuICAgICAgICB5YVpodS5hY3RpdmU9ZmFsc2U7XHJcbiAgICAgICAgIHZhciBjaGliaT1jYy5maW5kKFwiQ2FudmFzL2NoaWJpXCIpLmdldENvbXBvbmVudChcImNoaUJpXCIpO1xyXG4gICAgICAgICBjaGliaS5sb2FkKCk7IFxyXG4gICAgICAgXHJcblxyXG5cclxuXHJcbiAgIH0sXHJcbiAgIHN1cmU6ZnVuY3Rpb24oZSxudW0pe1xyXG4gICAgICAgdmFyIG1vbmV5O1xyXG4gICAgICAgdmFyIHJlc3VsdDtcclxuICAgICAgICB2YXIgZGF0YTtcclxuICAgICAgIHZhciB0aXNoaTtcclxuXHJcbiAgICAgICBzd2l0Y2gobnVtKXtcclxuICAgICAgICAgICBjYXNlICcxJzp7XHJcbiAgICAgICAgICAgICAgIG1vbmV5PXNlbGYud2VpLnN0cmluZztcclxuICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgIHJlc3VsdD0n6a2PJztcclxuICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgJzInOntcclxuICAgICAgICAgICAgICAgIG1vbmV5PSBzZWxmLnNodS5zdHJpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0PSfonIAnO1xyXG4gICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgJzMnOntcclxuICAgICAgICAgICAgICAgICBtb25leT1zZWxmLnd1LnN0cmluZztcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHQ9J+WQtCc7XHJcbiAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgIH1cclxuICAgICAgICBpZihDaGlCaVZvLnR5cGU9PVwiamluXCIpe1xyXG4gICAgICAgICBkYXRhPXsncmVzdWx0JzpyZXN1bHQsJ2ppbic6bW9uZXl9XHJcbiAgICAgICAgICAgdGlzaGk9XCLmgqjmirzkuoZcIityZXN1bHQrXCLlhptcIittb25leStcIumHkeegllwiXHJcbiAgICAgIH1lbHNle1xyXG4gICAgICAgZGF0YT17J3Jlc3VsdCc6cmVzdWx0LCd5aW4nOm1vbmV5fVxyXG4gICAgICAgIHRpc2hpPVwi5oKo5oq85LqGXCIrcmVzdWx0K1wi5YabXCIrbW9uZXkrXCLpk7bkuKRcIlxyXG4gICAgICB9ICBcclxuICAgIFxyXG4gICBcclxuICAgICBhamF4RGF0YShIeHNnVXJsLmNoaUJpWWFaaHUsZGF0YSxmdW5jdGlvbihtc2cpe1xyXG4gICAgICAgICBpZihcInRydWVcIj09bXNnLm1zZyl7XHJcbiAgICAgICAgICAgICBzaG93QWxlcnQodGlzaGkpXHJcbiAgICAgICAgfWVsc2UgaWYoXCI1MDAxXCI9PW1zZy5tc2cpe1xyXG4gICAgICAgICAgICAgc2hvd0FsZXJ0KFwi5q+P5pyf5oq85rOo5oC75pWw5LiN6IO96LaF6L+HMTAwMOmHkTEw5LiH6ZO2XCIpXHJcbiAgICAgICAgfWVsc2UgaWYoXCJmYWxzZVwiPT1tc2cubXNnKXtcclxuICAgICAgICAgICAgIHNob3dBbGVydChcIuaCqOeahOS9memineS4jei2s1wiKVxyXG4gICAgICAgIH1cclxuICBcclxuICAgICAgIHNlbGYub25Mb2FkKCk7XHJcblxyXG4gICAgIH0pO1xyXG5cclxuXHJcbiAgIH1cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJcclxuXHJcbi8qKlxyXG4gKiDotaTlo4HmuLjmiI/ln7rnsbtcclxuICovXHJcbnZhciBzZWxmO1xyXG52YXIgdGltZXMgPSAzMDAwO1xyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIG51bTogY2MuTGFiZWwsXHJcbiAgICAgICAgZ2FtZVRpbWU6IGNjLkxhYmVsLFxyXG4gICAgICAgIGJhdHRsZU1zZzogY2MuTGFiZWwsXHJcbiAgICAgICAgd3U6IGNjLkxhYmVsLFxyXG4gICAgICAgIHNodTogY2MuTGFiZWwsXHJcbiAgICAgICAgd2VpOiBjYy5MYWJlbCxcclxuICAgICAgICBnYW1lUmVzdWx0OiBjYy5MYWJlbCxcclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciB5YVpodSA9IGNjLmZpbmQoXCJDYW52YXMvY2hpQmlZYVpodVwiKTtcclxuICAgICAgICB5YVpodS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICBzZWxmID0gdGhpcztcclxuICAgICAgICBTb2NrZXRFdmVudHMuY2JNc2cgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHNlbGYubG9hZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhamF4RGF0YShIeHNnVXJsLmNoaUJpVGltZSwgbnVsbCwgc2VsZi50aW1lcylcclxuICAgICAgICB0aGlzLmxvYWQoKTtcclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgfSxcclxuICAgIHN1cmU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsb2FkaW5nU2NlbmUoSHhzZ1NjZW5lcy5ndWFuZ0NoYW5nLCBIeHNnU2NlbmVzLmluZGV4KTtcclxuXHJcbiAgICB9LFxyXG4gICAgdGltZXM6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICB0aW1lcyA9IG1zZy50aW1lcztcclxuICAgICAgICB0aW1lcyA9IERhdGUubm93KCkgKyB0aW1lcztcclxuICAgICAgICBzZWxmLnNjaGVkdWxlKHNlbGYuc2NoZWR1bGVUaW1lLCAxKTtcclxuXHJcbiAgICB9LFxyXG4gICAgc2NoZWR1bGVUaW1lOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgQ2hpQmlWby5udW0gPSAodGltZXMgLSBEYXRlLm5vdygpKTtcclxuICAgICAgICBpZiAodGltZXMgLSBEYXRlLm5vdygpIDw9IDAgfHwgdHlwZW9mICh0aW1lcykgPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgc2VsZi51bnNjaGVkdWxlKHNlbGYuc2NoZWR1bGVUaW1lKTtcclxuICAgICAgICAgICAgdmFyIGppZXN1YW4gPSBjYy5maW5kKFwiQ2FudmFzL2ppZXN1YW5cIik7XHJcbiAgICAgICAgICAgIGppZXN1YW4uYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgamllc3Vhbi5nZXRDb21wb25lbnQoXCJqaWVzdWFuXCIpLnNldE1zZyhcIui1pOWjgee7k+eul+S4re+8jOivt+eojeWQjuWGjeadpVwiKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBtaW51dGVzID0gTWF0aC5mbG9vcigodGltZXMgLSBEYXRlLm5vdygpKSAvIDEwMDAgLyA2MCAlIDYwKTsgLy/miYDkvZnliIbpkp/mlbAgIFxyXG4gICAgICAgIHZhciBzZWNvbmQgPSBNYXRoLmZsb29yKCh0aW1lcyAtIERhdGUubm93KCkpIC8gMTAwMCAlIDYwKTsgLy/miYDkvZnnp5LmlbAgIFxyXG4gICAgICAgIC8vMeWIhjU456eS5ZCO5byA55uF77yM5Lmw5a6a56a75omLXHJcbiAgICAgICAgdmFyIHRhcmdldCA9IGNjLmZpbmQoXCJDYW52YXMvc2FpemkvbWFpbi9sYWJlbDJcIik7XHJcbiAgICAgICAgdmFyIG1zdHIgPSBtaW51dGVzLnRvU3RyaW5nKCkgKyBcIuWIhlwiICsgc2Vjb25kLnRvU3RyaW5nKCkgKyBcIuenkuWQjuWGs+WHuuiDnOi0n++8jOivt+axguWinuaPtFwiO1xyXG4gICAgICAgIHNlbGYuZ2FtZVRpbWUuc3RyaW5nID0gbXN0cjtcclxuXHJcbiAgICAgICAgLy90aW1lcz10aW1lcy0xMDAwO1xyXG5cclxuXHJcbiAgICB9LFxyXG4gICAgbG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByYW5kID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMyk7XHJcbiAgICAgICAgdmFyIGJhdHRsZU1zZyA9IFwiXCI7XHJcbiAgICAgICAgc3dpdGNoIChyYW5kKSB7XHJcbiAgICAgICAgICAgIGNhc2UgMDoge1xyXG4gICAgICAgICAgICAgICAgYmF0dGxlTXNnID0gXCLlkLTlhpvoioLoioLotKXpgIDvvIzprY/lhpvml5flvIDlvpfog5xcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgMToge1xyXG4gICAgICAgICAgICAgICAgYmF0dGxlTXNnID0gXCLonIDlhpvmlrDlvpflkI3lsIbvvIzprY/lhpvlo6vmsJTkvY7okL1cIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgMjoge1xyXG4gICAgICAgICAgICAgICAgYmF0dGxlTXNnID0gXCLprY/lhpvooqvlm7DlsbHosLfvvIzonIDlhpvotoHomZrogIzlhaVcIjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmJhdHRsZU1zZy5zdHJpbmcgPSBiYXR0bGVNc2c7XHJcbiAgICAgICAgYWpheERhdGEoSHhzZ1VybC5sb2FkQ2hpQmksIG51bGwsIGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbGQgPSBtc2cubXNnLnJlc3VsdDtcclxuICAgICAgICAgICAgICAgIHZhciB5YU1zZyA9IG1zZy5tc2cuY2JMaTtcclxuICAgICAgICAgICAgICAgIHNlbGYubnVtLnN0cmluZyA9IFwi56ysXCIgKyBtc2cubXNnLm51bSArIFwi5pyf6LWk5aOB5paX6L+b6KGM5LitXCJcclxuICAgICAgICAgICAgICAgIGlmICh5YU1zZyA9PSBudWxsIHx8IHR5cGVvZiAoeWFNc2cpID09ICd1bmRlZmluZWQnIHx8IHlhTXNnLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi53ZWkuc3RyaW5nID0gXCLprY/lhpvnm67liY3lhpvotYQw6YeRMOmTtlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuc2h1LnN0cmluZyA9IFwi6JyA5Yab55uu5YmN5Yab6LWEMOmHkTDpk7ZcIjtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnd1LnN0cmluZyA9IFwi5ZC05Yab55uu5YmN5Yab6LWEMOmHkTDpk7ZcIjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHlhTXNnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh5YU1zZ1trZXldLnJlc3VsdCA9PSBcIumtj1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLndlaS5zdHJpbmcgPSBcIumtj+WGm+ebruWJjeWGm+i1hFwiICsgeWFNc2dba2V5XS5qaW4gKyBcIumHkVwiICsgeWFNc2dba2V5XS55aW4gKyBcIumTtlwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoeWFNc2dba2V5XS5yZXN1bHQgPT0gXCLonIBcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zaHUuc3RyaW5nID0gXCLonIDlhpvnm67liY3lhpvotYRcIiArIHlhTXNnW2tleV0uamluICsgXCLph5FcIiArIHlhTXNnW2tleV0ueWluICsgXCLpk7ZcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoeWFNc2dba2V5XS5yZXN1bHQgPT0gXCLlkLRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi53dS5zdHJpbmcgPSBcIuWQtOWGm+ebruWJjeWGm+i1hFwiICsgeWFNc2dba2V5XS5qaW4gKyBcIumHkVwiICsgeWFNc2dba2V5XS55aW4gKyBcIumTtlwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBzZWxmLmdhbWVSZXN1bHQuc3RyaW5nID0gXCLkuIrmrKHmiJjkuotcIiArIGxkICsgXCLlhpvog5zliKlcIjtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgY2MubG9nKGUpXHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICB9LFxyXG4gICAgenlqejogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmxvZyhcIuWinuaPtOmHkeegllwiKVxyXG4gICAgICAgIENoaUJpVm8udG9wTXNnID0gXCLlop7mj7Tph5HnoJZcIjtcclxuICAgICAgICBDaGlCaVZvLnR5cGUgPSBcImppblwiO1xyXG4gICAgICAgIHZhciB5YVpodSA9IGNjLmZpbmQoXCJDYW52YXMvY2hpQmlZYVpodVwiKTtcclxuICAgICAgICB5YVpodS5hY3RpdmUgPSB0cnVlO1xyXG5cclxuICAgIH0sXHJcbiAgICB6eXlsOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgQ2hpQmlWby50b3BNc2cgPSBcIuWinuaPtOmTtuS4pFwiO1xyXG4gICAgICAgIENoaUJpVm8udHlwZSA9IFwieWluXCI7XHJcbiAgICAgICAgdmFyIHlhWmh1ID0gY2MuZmluZChcIkNhbnZhcy9jaGlCaVlhWmh1XCIpO1xyXG4gICAgICAgIHlhWmh1LmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgY2MubG9nKFwi5aKe5o+06ZO25LikXCIpXHJcblxyXG4gICAgfSxcclxuICAgIHpscHBoOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MubG9nKFwi5oiY5Yip5ZOB5o6S6KGMXCIpXHJcblxyXG4gICAgICAgIENoaUJpVm8udGl0bGUgPSBcIuaImOWIqeWTgeaOkuihjFwiO1xyXG4gICAgICAgIENoaUJpVm8udXJsID0gSHhzZ1VybC5jaGlCaVdpblJlY29yZFxyXG4gICAgICAgIGxvYWRpbmdTY2VuZShIeHNnU2NlbmVzLmJhbmcsIEh4c2dTY2VuZXMuc2FpemkpO1xyXG5cclxuICAgIH0sXHJcbiAgICBsc2N4OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MubG9nKFwi5Y6G5Y+y5p+l6K+iXCIpXHJcbiAgICAgICAgQ2hpQmlWby50aXRsZSA9IFwi5Y6G5Y+y5p+l6K+iXCI7XHJcbiAgICAgICAgQ2hpQmlWby51cmwgPSBIeHNnVXJsLmNoaUJpSGlzdG9yeTtcclxuICAgICAgICBsb2FkaW5nU2NlbmUoSHhzZ1NjZW5lcy5iYW5nLCBIeHNnU2NlbmVzLnNhaXppKTtcclxuXHJcbiAgICB9LFxyXG4gICAgc3lqbDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmxvZyhcIuWjsOaPtOiusOW9lVwiKVxyXG4gICAgICAgIENoaUJpVm8udGl0bGUgPSBcIuWjsOaPtOiusOW9lVwiO1xyXG4gICAgICAgIENoaUJpVm8udXJsID0gSHhzZ1VybC5jaGlCaVlhWmh1UmVjb3JkO1xyXG4gICAgICAgIGxvYWRpbmdTY2VuZShIeHNnU2NlbmVzLmJhbmcsIEh4c2dTY2VuZXMuc2FpemkpO1xyXG4gICAgfSxcclxuICAgIGpscGg6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coXCLlpZblirHmjpLooYxcIilcclxuICAgICAgICBDaGlCaVZvLnRpdGxlID0gXCLlpZblirHmjpLooYxcIjtcclxuICAgICAgICBDaGlCaVZvLnVybCA9IEh4c2dVcmwuY2hpQmlCYW5nO1xyXG4gICAgICAgIGxvYWRpbmdTY2VuZShIeHNnU2NlbmVzLmJhbmcsIEh4c2dTY2VuZXMuc2FpemkpO1xyXG5cclxuICAgIH0sXHJcbiAgICB5eHNtOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MubG9nKFwi5ri45oiP6K+05piOXCIpXHJcbiAgICAgICAgQ2hpQmlWby50aXRsZSA9IFwi5ri45oiP6K+05piOXCI7XHJcbiAgICAgICAgbG9hZGluZ1NjZW5lKEh4c2dTY2VuZXMuYmFuZywgSHhzZ1NjZW5lcy5zYWl6aSk7XHJcblxyXG5cclxuICAgIH0sXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwidmFyIHNlbGY7XHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgampNc2c6Y2MuUmljaFRleHQsXHJcbiAgICAgICAgZnVOYW1lOmNjLkxhYmVsLFxyXG4gICAgICAgICBjejpjYy5MYWJlbCxcclxuICAgICAgICAgZ2o6Y2MuTGFiZWwsXHJcbiAgICAgICAgIGpsOmNjLkxhYmVsLFxyXG4gICAgICAgICBtajpjYy5MYWJlbCxcclxuICAgICAgICAgcXg6Y2MuTGFiZWwsXHJcbiAgICAgICAgIGN6YjpjYy5CdXR0b24sXHJcbiAgICAgICAgIGdqYjpjYy5CdXR0b24sXHJcbiAgICAgICAgIGpsYjpjYy5CdXR0b24sXHJcbiAgICAgICAgIHF4YjpjYy5CdXR0b24sXHJcbiAgICAgICAgIG1qYjpjYy5CdXR0b24sXHJcbiAgICAgICAgIHB5c206Y2MuQnV0dG9uLFxyXG4gICAgICAgICBxdGZqOmNjLkJ1dHRvbixcclxuICAgICAgICAgenlmajpjYy5CdXR0b25cclxuICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIGZvbzoge1xyXG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub2RlIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcclxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICB2aXNpYmxlOiB0cnVlLCAgICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXHJcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gLi4uXHJcbiAgICB9LFxyXG4gIC8qKlxyXG4gICAgICog54K55Ye75LqL5Lu2LS0+6L+U5ZueXHJcbiAgICAgKi9cclxuICAgIGJhY2tFdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybkxhc3QoKTtcclxuICAgIH0sXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICBzZWxmPXRoaXM7XHJcbiAgICAgICAgIGFqYXhEYXRhKEh4c2dVcmwubG9hZENodVpoaVBlaVlhbmcseydmdUlkJzp1c2VyV3VQaW4ud3VwaW5JZH0sc2VsZi5sb2FkRnVqaWFuZ1B5KTsgICAgICBcclxuXHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICBsb2FkRnVqaWFuZ1B5OmZ1bmN0aW9uIChtc2cpe1xyXG4gICAgICAgICAgICAgICAgdmFyIHAgPSBtc2cubXNnO1xyXG4gICAgICAgICAgICAgICAgaWYodHlwZW9mKHAuY3psKT09J3VuZGVmaW5lZCcpe1xyXG4gICAgICAgICAgICAgICAgICAgIHNob3dBbGVydChwLnRpU2hpTXNnKTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgc2VsZi5qak1zZy5zdHJpbmc9cC5qak1zZztcclxuICAgICAgICAgICAgICAgIHNlbGYuZnVOYW1lLnN0cmluZz1wLmZ1TmFtZTtcclxuICAgICAgICAgICAgICAgIHNlbGYuY3ouc3RyaW5nPXAuY3psO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5nai5zdHJpbmc9cC5najtcclxuICAgICAgICAgICAgICAgIHNlbGYucXguc3RyaW5nPXAucXg7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmpsLnN0cmluZz1wLmpsO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5tai5zdHJpbmc9cC5tajtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjYy5sb2cocC50aVNoaU1zZykgIFxyXG4gICAgfSxcclxuICAgIHB5Y3o6ZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgZGE9e1widHlwZVwiOlwi5oiQ6ZW/XCIsXCJmdUlkXCI6dXNlcld1UGluLnd1cGluSWR9O1xyXG4gICAgICAgICBhamF4RGF0YShIeHNnVXJsLnBlaVlhbmdGdUppYW5nLGRhLHNlbGYucHlhamF4KTtcclxuICAgICAgICBcclxuICAgIH0sXHJcbiAgICBweWdqOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyIGRhPXtcInR5cGVcIjpcIuaUu+WHu1wiLFwiZnVJZFwiOnVzZXJXdVBpbi53dXBpbklkfTtcclxuICAgICAgICAgIGFqYXhEYXRhKEh4c2dVcmwucGVpWWFuZ0Z1SmlhbmcsZGEsc2VsZi5weWFqYXgpO1xyXG4gICAgICAgIFxyXG4gICAgfSxcclxuICAgIHB5bWo6ZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgZGE9e1widHlwZVwiOlwi5pWP5o23XCIsXCJmdUlkXCI6dXNlcld1UGluLnd1cGluSWR9O1xyXG4gICAgICAgICAgICBhamF4RGF0YShIeHNnVXJsLnBlaVlhbmdGdUppYW5nLGRhLHNlbGYucHlhamF4KTtcclxuICAgICAgICBcclxuICAgIH0sXHJcbiAgICBweWpsOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyIGRhPXtcInR5cGVcIjpcIueyvuWKm1wiLFwiZnVJZFwiOnVzZXJXdVBpbi53dXBpbklkfTtcclxuICAgICAgICAgICBhamF4RGF0YShIeHNnVXJsLnBlaVlhbmdGdUppYW5nLGRhLHNlbGYucHlhamF4KTtcclxuICAgICAgICBcclxuICAgIH0sXHJcbiAgICAgcHlxeDpmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciBkYT17XCJ0eXBlXCI6XCLmsJTooYBcIixcImZ1SWRcIjp1c2VyV3VQaW4ud3VwaW5JZH07XHJcbiAgICAgICAgYWpheERhdGEoSHhzZ1VybC5wZWlZYW5nRnVKaWFuZyxkYSxzZWxmLnB5YWpheCk7XHJcbiAgICAgICAgXHJcbiAgICB9LFxyXG4gICAgcHlTaHVvTWluZzpmdW5jdGlvbigpe1xyXG4gICAgICAgbG9hZGluZ1NjZW5lKEh4c2dTY2VuZXMucHlTaHVvTWluZyxIeHNnU2NlbmVzLmNodVpoaVB5KVxyXG4gICAgICAgICAvL2NjLmRpcmVjdG9yLmxvYWRTY2VuZSgncHlTaHVvTWluZycpO1xyXG4gICAgICAgIFxyXG4gICAgfSxcclxuICAgIHB5YWpheDpmdW5jdGlvbihtc2cpe1xyXG4gICAgICAgICAgICAgICAgdmFyIG09bXNnLm1zZztcclxuICAgICAgICAgICAgICAgIGlmKG1bMF09PTApe1xyXG4gICAgICAgICAgICAgICAgICAgICBzZWxmLmpqTXNnLnN0cmluZz1cIjxjb2xvcj0jZmYwMDAwPuaCqOayoeacieWwhuWGm+S7pOS6hiE8L2M+XCI7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGFqYXhEYXRhKEh4c2dVcmwubG9hZENodVpoaVBlaVlhbmcseydmdUlkJzp1c2VyV3VQaW4ud3VwaW5JZH0sc2VsZi5sb2FkRnVqaWFuZ1B5KTsgICAgICBcclxuICAgICAgICAgICAgICAgIH0gICAgICAgIFxyXG4gICAgfVxyXG4gICAgXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcblxyXG5cclxuIiwiY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBpZDowLFxyXG4gICAgICAgIHJpY2hUZXh0OmNjLlJpY2hUZXh0XHJcbiAgICB9LFxyXG4gICAgXHJcblxyXG5cclxuICAgIGluaXQ6IGZ1bmN0aW9uKGRhdGEsaWQpe1xyXG4gICAgICBpZih0aGlzLm5vZGUubmFtZT09PVwiemh1YW5xaWFuSXRlbVwiKXtcclxuICAgICAgICAgICAgdmFyIHN0cj1cIjxjb2xvcj0jZmY5ZTAwPuOAkFwiK2RhdGEucm9sZW5hbWUrXCLjgJE8L2M+XCI7XHJcbiAgICAgICAgICAgIGlmKHR5cGVvZihkYXRhLmppbikhPVwidW5kZWZpbmVkXCImJmRhdGEuamluIT09bnVsbCYmZGF0YS5qaW4hPT0wKXtcclxuICAgICAgICAgICAgICAgIHN0cis9XCI8Y29sb3I9I2ZmZmZmZj5cIitcIijotaLlvpdcIitkYXRhLmppbi50b1N0cmluZygpK1wi6YeRKVwiK1wiPC9jb2xvcj5cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZih0eXBlb2YoZGF0YS55aW4pIT1cInVuZGVmaW5lZFwiJiZkYXRhLnlpbiE9PW51bGwmJmRhdGEueWluIT09MCl7XHJcbiAgICAgICAgICAgICAgICBzdHIrPVwiPGNvbG9yPSNmZmZmZmY+XCIrXCIo6LWi5b6XXCIrZGF0YS55aW4udG9TdHJpbmcoKStcIumTtilcIitcIjwvY29sb3I+XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5yaWNoVGV4dC5zdHJpbmc9c3RyO1xyXG4gICAgICAgICAgICB0aGlzLmlkPWlkO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgIHZhciBzdHI9XCI8Y29sb3I9I2ZmOWUwMD7jgJBcIitkYXRhLnJvbGVuYW1lK1wi44CRPC9jPuWcqOesrFwiK2RhdGEubnVtK1wi5pyfXCIrXCJcIjtcclxuICAgICAgICAgICAgaWYodHlwZW9mKGRhdGEuamluKSE9XCJ1bmRlZmluZWRcIiYmZGF0YS5qaW4hPT1udWxsJiZkYXRhLmppbiE9PTApe1xyXG4gICAgICAgICAgICAgICBzdHIrPVwiPGNvbG9yPSNmZmZmZmY+XCIrXCIo5LmwXCIrZGF0YS5yZXN1bHQrXCJcIitkYXRhLmppbi50b1N0cmluZygpK1wi6YeRKVwiK1wiPC9jb2xvcj5cIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIGlmKHR5cGVvZihkYXRhLnlpbikhPVwidW5kZWZpbmVkXCImJmRhdGEueWluIT09bnVsbCYmZGF0YS55aW4hPT0wKXtcclxuICAgICAgICAgICAgICAgc3RyKz1cIjxjb2xvcj0jZmZmZmZmPlwiK1wiKOS5sFwiK2RhdGEucmVzdWx0K1wiXCIrZGF0YS55aW4udG9TdHJpbmcoKStcIumTtilcIitcIjwvY29sb3I+XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoZGF0YS5qaWVndW89PSfovpMnKXtcclxuICAgICAgICAgICAgICAgICAgc3RyKz1cIjxjb2xvcj0jZmZmZmZmPlwiK1wiLFwiK2RhdGEuamllZ3VvK1wiPC9jb2xvcj5cIjtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgIHN0cis9XCI8Y29sb3I9I0VERjcxNT5cIitcIixcIitkYXRhLmppZWd1bytcIjwvY29sb3I+XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgICB0aGlzLnJpY2hUZXh0LnN0cmluZz1zdHI7XHJcbiAgICAgICAgICAgIHRoaXMuaWQ9aWQ7XHJcblxyXG4gICAgICB9XHJcbiAgICAgICBpZihpZCUyPT09MCl7XHJcbiAgICAgICAgICAgICAgIHRoaXMubm9kZS5jb2xvcj1uZXcgY2MuQ29sb3IoMCwgMCwzOCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgdGhpcy5ub2RlLmNvbG9yPW5ldyBjYy5Db2xvcig5OSw2NSw5OSk7XHJcbiAgICAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgIGl0ZW1QcmVmYWI6IGNjLlByZWZhYixcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICB2YXIgcHJlZmFiPXRoaXMuaXRlbVByZWZhYjtcclxuICAgICAgICAgICB2YXIgbm9kZT10aGlzLm5vZGU7XHJcbiAgICAgICAgICAgdmFyIGFqYXhVcmw9Jyc7XHJcbiAgICAgICAgICAgICAgY2MubG9nKHByZWZhYi5uYW1lKTtcclxuICAgICAgICAgICAgICBpZignemh1YW5xaWFuaXRlbSc9PXByZWZhYi5uYW1lKXtcclxuICAgICAgICAgICAgICAgICAgIGFqYXhVcmw9SHhzZ1VybC5xdWVyeVdpbkppbkJhbmc7XHJcbiAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgIGFqYXhVcmw9SHhzZ1VybC5xdWVyeUJldHRpbmdSZWNvcmQ7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIGFqYXhEYXRhKGFqYXhVcmwsbnVsbCxmdW5jdGlvbiAobXNnKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2MubG9nKG1zZy5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1oZWlnaHQ9MDtcclxuXHRcdFx0XHQgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtc2cubXNnLmxlbmd0aDsgKytpKSB7XHJcblx0XHRcdFx0ICAgICAgICAgICAgICB0cnl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBjYy5pbnN0YW50aWF0ZShwcmVmYWIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuYWRkQ2hpbGQoaXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5nZXRDb21wb25lbnQoJ2NvbW1vbkl0ZW0nKS5pbml0KG1zZy5tc2dbaV0saSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWhlaWdodCs9aXRlbS5oZWlnaHQ7XHJcblx0XHRcdFx0ICAgICAgICAgICAgICB9XHJcblx0XHRcdFx0ICAgICAgICAgICAgICBjYXRjaChlKXtcclxuXHRcdFx0XHQgICAgICAgICAgICAgICAgICBcclxuXHRcdFx0XHQgICAgICAgICAgICAgIH1cclxuXHRcdFx0ICAgIFx0ICAgICB9XHJcblx0XHRcdCAgICBcdCAgICAgbm9kZS5oZWlnaHQ9bWhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgXHRcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIOeCueWHu+S6i+S7ti0tPui/lOWbnlxyXG4gICAgICovXHJcbiAgICBiYWNrRXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL+iwg+eUqOmAmueUqOeahOi/lOWbnuS4iuS4gOWcuuaZr+aWueazlVxyXG4gICAgICAgIHJldHVybkxhc3QoKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgLy8gZm9vOiB7XHJcbiAgICAgICAgLy8gICAgZGVmYXVsdDogbnVsbCwgICAgICAvLyBUaGUgZGVmYXVsdCB2YWx1ZSB3aWxsIGJlIHVzZWQgb25seSB3aGVuIHRoZSBjb21wb25lbnQgYXR0YWNoaW5nXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICB0byBhIG5vZGUgZm9yIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgLy8gICAgdXJsOiBjYy5UZXh0dXJlMkQsICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxyXG4gICAgICAgIC8vICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSwgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIHZpc2libGU6IHRydWUsICAgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIGRpc3BsYXlOYW1lOiAnRm9vJywgLy8gb3B0aW9uYWxcclxuICAgICAgICAvLyAgICByZWFkb25seTogZmFsc2UsICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIGZhbHNlXHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICAvLyAuLi5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICBsb2FkQ29tbW9tU2NlbmNlKCk7XHJcbiAgICB9LFxyXG4gICAgIHRrOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgIGNjLmRpcmVjdG9yLmxvYWRTY2VuZSgndGtUeXBlJyk7XHJcbiAgICB9LFxyXG4gICAgIHdxOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgIGNjLmRpcmVjdG9yLmxvYWRTY2VuZSgnd3FUeXBlJyk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIGJhY2tncm91bmQ6W2NjLlNwcml0ZUZyYW1lXSxcclxuICAgICAgICBiYW5rTG9zZTpbY2MuU3ByaXRlRnJhbWVdLFxyXG5cclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcbiAgICBnYW1lT3ZlcjpmdW5jdGlvbigpe1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCAgSnNvbkRhdGE9cGsuZ2FtZU92ZXJEZXRhaWw7XHJcbiAgICAgICAgbGV0IGFyckp5PUpzb25EYXRhLmp5O1xyXG4gICAgICAgICBsZXQgYXJySnlSZXN1bHQ9XCJcIjtcclxuICAgICAgICBmb3IodmFyIGtleSBpbiBhcnJKeSl7XHJcbiAgICAgICAgICAgIGFyckp5UmVzdWx0Kz1hcnJKeVtrZXldXHJcbiAgICAgICAgfVxyXG4gICAgICAgICBsZXQgYXJyRGo9SnNvbkRhdGEuZGpBcnJcclxuICAgICAgICBsZXQgcmVzdWx0PVwiLuaBreWWnOaCqOiOt+W+l1wiO1xyXG4gICAgICAgIGZvcihsZXQgaT0wO2k8YXJyRGoubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgcmVzdWx0Kz1cIuOAkFwiK2FyckRqW2ldLm5hbWUrXCLjgJFcIlxyXG4gICAgICAgIH1cclxuICAgICAgICAgc2hvd0FsZXJ0KGFyckp5UmVzdWx0K3Jlc3VsdCxmdW5jdGlvbigpeyAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKEh4c2dTY2VuZXMuaW5kZXgpfSk7XHJcbiAgICBcclxuICAgIH1cclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiXHJcbnZhciBzZWxmO1xyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIFxyXG4gICAgfSxcclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHNlbGY9dGhpcztcclxuICAgICAgICBjYy5sb2cocm9sZU1zZy5pZClcclxuICAgICAgIGFqYXhEYXRhKEh4c2dVcmwuaW5kZXhOZXdSb2xlTXNnLHJvbGVNc2cgLHRoaXMuaW5pdC5iaW5kKHRoaXMpKTtcclxuICAgICAgXHJcblxyXG4gICAgfSxcclxuICAgIGluaXQ6ZnVuY3Rpb24obXNnKXtcclxuICAgICAgICB2YXIgbT1tc2cucm9sZU1zZztcclxuICAgICAgICBteUZyaWVuZHMuZnJpZW5kaWQ9bS5pZDtcclxuICAgICAgICBteUZyaWVuZHMuZnJpZW5kbmFtZT1tLnJvbGVuYW1lO1xyXG4gICAgICAgIC8vIGNjLmxvZyhhamF4UmV0dXJuRGF0YSlcclxuICAgICAgICB2YXIgVmlld05vZGU9dGhpcy5ub2RlLmdldENoaWxkQnlOYW1lKFwic2Nyb2xsVmlld1wiKTtcclxuICAgICAgICAgdmFyIGJ0bmxpc3Q9Vmlld05vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJ2aWV3XCIpLmdldENoaWxkQnlOYW1lKFwiY29udGVudFwiKS5nZXRDaGlsZEJ5TmFtZShcInRvcF9idG5saXN0XCIpO1xyXG4gICAgICAgICAvL+aLiem7ke+8jOino+m7kVxyXG4gICAgICAgICB2YXIgbGFoZWk9YnRubGlzdC5nZXRDaGlsZEJ5TmFtZShcImxhaGVpXCIpLmdldENoaWxkcmVuKClbMF0uZ2V0Q29tcG9uZW50KGNjLkxhYmVsKTtcclxuICAgICAgICAgbGFoZWkuc3RyaW5nPW0uaGVpU3RhdHVzO1xyXG4gICAgICAgICAvL+emgeiogO+8jOino+emgVxyXG4gICAgICAgICB2YXIgamlueWFuPWJ0bmxpc3QuZ2V0Q2hpbGRCeU5hbWUoXCJqaW55YW5cIikuZ2V0Q2hpbGRyZW4oKVswXS5nZXRDb21wb25lbnQoY2MuTGFiZWwpO1xyXG4gICAgICAgICBqaW55YW4uc3RyaW5nPW0uamluU3RhdHVzO1xyXG4gICAgICAgIHZhciBwbGF5ZXJJbmZvPVZpZXdOb2RlLmdldENoaWxkQnlOYW1lKFwidmlld1wiKS5nZXRDaGlsZEJ5TmFtZShcImNvbnRlbnRcIikuZ2V0Q2hpbGRCeU5hbWUoXCJwbGF5ZXJpbmZvXCIpO1xyXG4gICAgICAgIHZhciBuYW1lPVZpZXdOb2RlLmdldENoaWxkQnlOYW1lKFwiSW5mb1wiKS5nZXRDaGlsZHJlbigpWzBdLmdldENvbXBvbmVudChjYy5MYWJlbCk7XHJcbiAgICAgICAgbmFtZS5zdHJpbmc9bS5yb2xlbmFtZSsnKElEOicrbS5pZCsnKScrJ+OAkCcrbS5yb2xlU3RhdHVzKyfjgJEnO1xyXG4gICAgICAgIHZhciBpbWc9cGxheWVySW5mby5nZXRDaGlsZEJ5TmFtZShcImltZ1wiKS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKTtcclxuICAgICAgICB2YXIgemhpeT1wbGF5ZXJJbmZvLmdldENoaWxkQnlOYW1lKFwiemhpeVwiKS5nZXRDaGlsZHJlbigpWzBdLmdldENvbXBvbmVudChjYy5MYWJlbCk7XHJcbiAgICAgICAgemhpeS5zdHJpbmc9bS5sZXZlbCsn57qnJyttLnpoaXllO1xyXG4gICAgICAgIHZhciBjaGVuaD1wbGF5ZXJJbmZvLmdldENoaWxkQnlOYW1lKFwiY2hlbmhcIikuZ2V0Q2hpbGRyZW4oKVswXS5nZXRDb21wb25lbnQoY2MuTGFiZWwpO1xyXG4gICAgICAgIGNoZW5oLnN0cmluZz1tLmNoZW5naGFvOy8v56ew5Y+3XHJcbiAgICAgICAgdmFyIGppYW9wPXBsYXllckluZm8uZ2V0Q2hpbGRCeU5hbWUoXCJqaWFvcFwiKS5nZXRDaGlsZHJlbigpWzBdLmdldENvbXBvbmVudChjYy5MYWJlbCk7XHJcbiAgICAgICAgIGppYW9wLnN0cmluZz1tLmppYW9wYWk7Ly/mlZnmtL5cclxuICAgICAgICB2YXIgaHVvbD1wbGF5ZXJJbmZvLmdldENoaWxkQnlOYW1lKFwiaHVvbFwiKS5nZXRDaGlsZHJlbigpWzBdLmdldENvbXBvbmVudChjYy5MYWJlbCk7XHJcbiAgICAgICAgaHVvbC5zdHJpbmc9bS50aWxpemhpOy8v5L2T5Yqb5YC8XHJcbiAgICAgICAgdmFyIG1laWw9cGxheWVySW5mby5nZXRDaGlsZEJ5TmFtZShcIm1laWxcIikuZ2V0Q2hpbGRyZW4oKVswXS5nZXRDb21wb25lbnQoY2MuTGFiZWwpO1xyXG4gICAgICAgIG1laWwuc3RyaW5nPW0ubWVpbGk7Ly/prYXlipvlgLxcclxuICAgICAgICB2YXIgdGFudz1wbGF5ZXJJbmZvLmdldENoaWxkQnlOYW1lKFwidGFud1wiKS5nZXRDaGlsZHJlbigpWzBdLmdldENvbXBvbmVudChjYy5MYWJlbCk7XHJcbiAgICAgICAgdGFudy5zdHJpbmc9bS50YW53ZWk7Ly/mkYrkvY1cclxuICAgICAgICB2YXIgZmFuYz1wbGF5ZXJJbmZvLmdldENoaWxkQnlOYW1lKFwiZmFuY1wiKS5nZXRDaGlsZHJlbigpWzBdLmdldENvbXBvbmVudChjYy5MYWJlbCk7XHJcbiAgICAgICAgZmFuYy5zdHJpbmc9bS5mYW5nY2hhbjsvL+aIv+S6p1xyXG4gICAgICAgIHZhciB5aXM9cGxheWVySW5mby5nZXRDaGlsZEJ5TmFtZShcInlpc1wiKS5nZXRDaGlsZHJlbigpWzBdLmdldENvbXBvbmVudChjYy5MYWJlbCk7XHJcbiAgICAgICAgeWlzLnN0cmluZz1tLmtpbGxudW07Ly/mnYDkurrmlbDnm65cclxuICAgICAgICB2YXIgeGluZz1wbGF5ZXJJbmZvLmdldENoaWxkQnlOYW1lKFwieGluZ1wiKS5nZXRDaGlsZHJlbigpWzBdLmdldENvbXBvbmVudChjYy5MYWJlbCk7XHJcbiAgICAgICAgeGluZy5zdHJpbmc9bS54aW5nZ2U7Ly/mgKfmoLxcclxuICAgICAgICB2YXIgcGVpbz1wbGF5ZXJJbmZvLmdldENoaWxkQnlOYW1lKFwicGVpb1wiKS5nZXRDaGlsZHJlbigpWzBdLmdldENvbXBvbmVudChjYy5MYWJlbCk7XHJcbiAgICAgICAgcGVpby5zdHJpbmc9bS5wZWlvdTsvL+mFjeWBtlxyXG4gICAgICAgIHZhciBmdWo9cGxheWVySW5mby5nZXRDaGlsZEJ5TmFtZShcImZ1alwiKS5nZXRDaGlsZHJlbigpWzBdLmdldENvbXBvbmVudChjYy5MYWJlbCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIHRpYW5mPXBsYXllckluZm8uZ2V0Q2hpbGRCeU5hbWUoXCJ0aWFuZlwiKS5nZXRDaGlsZHJlbigpWzBdLmdldENvbXBvbmVudChjYy5MYWJlbCk7XHJcbiAgICAgICAgdGlhbmYuc3RyaW5nPW0udGlhbmZ1Oy8v5aSp6LWLXHJcbiAgICAgICAgdmFyIHp1b3E9cGxheWVySW5mby5nZXRDaGlsZEJ5TmFtZShcInp1b3FcIikuZ2V0Q2hpbGRyZW4oKVswXS5nZXRDb21wb25lbnQoY2MuTGFiZWwpO1xyXG4gICAgICAgIHp1b3Euc3RyaW5nPW0uenVvcWk7Ly/lnZDpqpFcclxuICAgICAgICB2YXIga2FuZ3g9cGxheWVySW5mby5nZXRDaGlsZEJ5TmFtZShcImthbmd4XCIpLmdldENoaWxkcmVuKClbMF0uZ2V0Q29tcG9uZW50KGNjLkxhYmVsKTtcclxuICAgICAgICB2YXIga2FuZ2Y9cGxheWVySW5mby5nZXRDaGlsZEJ5TmFtZShcImthbmdmXCIpLmdldENoaWxkcmVuKClbMF0uZ2V0Q29tcG9uZW50KGNjLkxhYmVsKTtcclxuICAgICAgICB2YXIgZmVuZz1wbGF5ZXJJbmZvLmdldENoaWxkQnlOYW1lKFwiZmVuZ1wiKS5nZXRDaGlsZHJlbigpWzBdLmdldENvbXBvbmVudChjYy5MYWJlbCk7XHJcbiAgICAgICAgIFxyXG4gICAgICAgICBcclxuICAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICB9LFxyXG4gICAgb25CdG5MaXN0OmZ1bmN0aW9uKGUsZCl7XHJcbiAgICAgICAgc3dpdGNoKGQpe1xyXG4gICAgICAgICAgICBjYXNlIFwiMVwiOlxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZS50YXJnZXQuZ2V0Q2hpbGRCeU5hbWUoJ0xhYmVsJykuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcrXCIsXCIrZCk7XHJcbiAgICAgICAgICAgICAgICAgbG9hZFNjZW5lKEh4c2dTY2VuZXMudGFsa2luZywgSHhzZ1NjZW5lcy5mcmllbmRJbmZvKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCIyXCI6XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlLnRhcmdldC5nZXRDaGlsZEJ5TmFtZSgnTGFiZWwnKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZytcIixcIitkKTtcclxuICAgICAgICAgICAgICAgIG15RnJpZW5kcy5zdGF0dXM9JzIwMic7XHJcbiAgICAgICAgICAgICAgICBteUZyaWVuZHMudHlwZT0neWVzJztcclxuICAgICAgICAgICAgICAgIGFqYXhEYXRhKEh4c2dVcmwubm9BZGRGcmllbmRzLG15RnJpZW5kcyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiM1wiOlxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZS50YXJnZXQuZ2V0Q2hpbGRCeU5hbWUoJ0xhYmVsJykuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcrXCIsXCIrZCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiNFwiOlxyXG4gICAgICAgICAgICB0cnl7XHJcbiAgICAgICAgICAgICAgICB2YXIgbm90aWNlPSBlLnRhcmdldC5nZXRDaGlsZEJ5TmFtZSgnTGFiZWwnKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZztcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG5vdGljZSk7XHJcbiAgICAgICAgICAgICAgICBpZihub3RpY2U9PT0n5ouJ6buRJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgbXlGcmllbmRzLnN0YXR1cz0n5ouJ6buRJztcclxuICAgICAgICAgICAgICAgICAgICAgYWpheERhdGEoSHhzZ1VybC5zcGVha1N0YXR1cyxteUZyaWVuZHMsZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5tc2c9PT0ndHJ1ZScpe1xyXG4gICAgICAgICAgICAgICAgICAgIHNob3dBbGVydCgn5ouJ6buR5oiQ5YqfJylcclxuICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5nZXRDaGlsZEJ5TmFtZSgnTGFiZWwnKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZz0n6Kej6buRJztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYobm90aWNlPT09J+ino+m7kScpe1xyXG4gICAgICAgICAgICAgICAgICAgIG15RnJpZW5kcy5zdGF0dXM9J+ato+W4uCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICBhamF4RGF0YShIeHNnVXJsLnNwZWFrU3RhdHVzLG15RnJpZW5kcyxmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihkYXRhLm1zZz09PSd0cnVlJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd0FsZXJ0KCfop6Ppu5HmiJDlip8nKVxyXG4gICAgICAgICAgICAgICAgICAgIGUudGFyZ2V0LmdldENoaWxkQnlOYW1lKCdMYWJlbCcpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nPSfmi4npu5EnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL+aLiem7keino+m7keaTjeS9nFxyXG4gICAgICAgICAgICAgICAgY2MubG9nKG15RnJpZW5kcylcclxuICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1jYXRjaChlKXtcclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgIFxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIjVcIjpcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUudGFyZ2V0LmdldENoaWxkQnlOYW1lKCdMYWJlbCcpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nK1wiLFwiK2QpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIjZcIjpcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUudGFyZ2V0LmdldENoaWxkQnlOYW1lKCdMYWJlbCcpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nK1wiLFwiK2QpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIjdcIjpcclxuICAgICAgICAgICAgIHRyeXtcclxuICAgICAgICAgICAgICAgIHZhciBub3RpY2U9IGUudGFyZ2V0LmdldENoaWxkQnlOYW1lKCdMYWJlbCcpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobm90aWNlKTtcclxuICAgICAgICAgICAgICAgIGlmKG5vdGljZT09PSfnpoHoqIAnKXtcclxuICAgICAgICAgICAgICAgICAgIHNob3dBbGVydChcIuemgeiogOaIkOWKn++8jOWcqOacrOasoeeZu+W9leaXtuacieaViFwiKTtcclxuICAgICAgICAgICAgICBlLnRhcmdldC5nZXRDaGlsZEJ5TmFtZSgnTGFiZWwnKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZz0n6Kej56aBJztcclxuICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYobm90aWNlPT09J+ino+emgScpe1xyXG4gICAgICAgICAgICAgICAgICAgICBzaG93QWxlcnQoXCLop6PnpoHmiJDlip9cIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBlLnRhcmdldC5nZXRDaGlsZEJ5TmFtZSgnTGFiZWwnKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZz0n56aB6KiAJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8v5ouJ6buR6Kej6buR5pON5L2cXHJcbiAgICAgICAgICAgICAgICBjYy5sb2cobXlGcmllbmRzKVxyXG4gICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfWNhdGNoKGUpe1xyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiOFwiOlxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZS50YXJnZXQuZ2V0Q2hpbGRCeU5hbWUoJ0xhYmVsJykuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcrXCIsXCIrZCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiOVwiOlxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZS50YXJnZXQuZ2V0Q2hpbGRCeU5hbWUoJ0xhYmVsJykuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcrXCIsXCIrZCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiMTBcIjpcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUudGFyZ2V0LmdldENoaWxkQnlOYW1lKCdMYWJlbCcpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nK1wiLFwiK2QpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIjExXCI6XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlLnRhcmdldC5nZXRDaGlsZEJ5TmFtZSgnTGFiZWwnKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZytcIixcIitkKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCIxMlwiOlxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZS50YXJnZXQuZ2V0Q2hpbGRCeU5hbWUoJ0xhYmVsJykuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcrXCIsXCIrZCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiMTNcIjpcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUudGFyZ2V0LmdldENoaWxkQnlOYW1lKCdMYWJlbCcpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nK1wiLFwiK2QpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcIjE0XCI6XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlLnRhcmdldC5nZXRDaGlsZEJ5TmFtZSgnTGFiZWwnKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZytcIixcIitkKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCIxNVwiOlxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZS50YXJnZXQuZ2V0Q2hpbGRCeU5hbWUoJ0xhYmVsJykuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcrXCIsXCIrZCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiMTZcIjpcclxuICAgICAgICAgICByZXR1cm5MYXN0KCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSk7XHJcbiIsImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgcmljaExhYmVsOiBjYy5SaWNoVGV4dCxcclxuICAgICAgICBzcHJpdGU6IGNjLlNwcml0ZSxcclxuICAgICAgICBzZWxlY3RCbjogY2MuQnV0dG9uLFxyXG4gICAgICAgIFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcbiAvKipcclxuICAgICAqIOijheWkh1xyXG4gICAgICogaW5kZXg6IOWunuS+i+WMlml0ZW3nmoTluo/lj7fvvIww5byA5aeLXHJcbiAgICAgKiB0eXBlOiDnsbvlnovvvJp5YW9waW7vvIx6aHVhbmdiZWnvvIxrdWFuZ3Noae+8jHphd3VcclxuICAgICAqIGRhdGHvvJrmlbDmja5cclxuICAgICAqIGV2ZW5077ya5oyJ6ZKu5Zue5o6J5pa55rOV77yI5aaC5p6c5pyJ5oyJ6ZKu77yJXHJcbiAgICAgKi9cclxuICAgIGluaXRGcmllbmRzSXRlbTogZnVuY3Rpb24gKGluZGV4LCB0eXBlLCBkYXRhKSB7XHJcbiAgICAgICAgdmFyIG51bT0wO1xyXG4gICAgICAgIHRoaXMuc3ByaXRlVG9nZ2xlKGluZGV4KTtcclxuICAgICAgICB0aGlzLm5vZGUubmFtZSA9IHR5cGUgKyBpbmRleDtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAvLyB0aGlzLmV2ZW50ID0gZXZlbnQ7XHJcbiAgICAgICAgIHZhciByaWNoU3RyaW5nO1xyXG4gICAgICAgICBcclxuICAgICAgICB2YXIgYnRuPXRoaXMuc2VsZWN0Qm4uaWQ9eydpZCc6ZGF0YS5mcmllbmRJZCwnbmFtZSc6ZGF0YS5mcmllbmROYW1lfTtcclxuICAgICAgXHJcbiAgICAgICAgLy9jYy5sb2coYnRuK2J0bjIpO1xyXG4gICAgICAgICBpZihkYXRhLnN0YXR1cz09J+emu+e6vycpe1xyXG4gICAgICAgICAgICAgICAgICAgcmljaFN0cmluZyA9ICc8Y29sb3I9IzkxOEU4MyBjbGljaz1cImZyaWVuZEluZm9cIj4nICsgZGF0YS5mcmllbmROYW1lICsgJ+OAkOemu+e6v+OAkTwvYz4gJztcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIG51bT0xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJpY2hTdHJpbmcgPSAnPGNvbG9yPSNGRkZGMDAgY2xpY2s9XCJmcmllbmRJbmZvXCI+JyArIGRhdGEuZnJpZW5kTmFtZSArICc8L2M+PGNvbG9yPSNGRjAwMDA+44CQ5Zyo57q/44CRPC9jPiAnIDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICBcclxuICAgICAgICB0aGlzLnJpY2hMYWJlbC5zdHJpbmcgPSByaWNoU3RyaW5nO1xyXG4gICAgICAgIHRoaXMucmljaExhYmVsLmlkPWRhdGE7XHJcbiAgICAgICAgcmV0dXJuIG51bTtcclxuICAgIH0sXHJcbiAgICAgLyoqXHJcbiAgICAgKiDoo4XlpIdcclxuICAgICAqIGluZGV4OiDlrp7kvovljJZpdGVt55qE5bqP5Y+377yMMOW8gOWni1xyXG4gICAgICogdHlwZTog57G75Z6L77yaeWFvcGlu77yMemh1YW5nYmVp77yMa3VhbmdzaGnvvIx6YXd1XHJcbiAgICAgKiBkYXRh77ya5pWw5o2uXHJcbiAgICAgKiBldmVudO+8muaMiemSruWbnuaOieaWueazle+8iOWmguaenOacieaMiemSru+8iVxyXG4gICAgICovXHJcbiAgICBpbml0RnJpZW5kc0xpc3Q6IGZ1bmN0aW9uIChpbmRleCwgdHlwZSwgZGF0YSwgZXZlbnQpIHtcclxuICAgICAgICB2YXIgbnVtPTA7XHJcbiAgICAgICAgdGhpcy5zcHJpdGVUb2dnbGUoaW5kZXgpO1xyXG5cclxuICAgICAgICB0aGlzLm5vZGUubmFtZSA9IHR5cGUgKyBpbmRleDtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5ldmVudCA9IGV2ZW50O1xyXG4gICAgICAgICB2YXIgcmljaFN0cmluZztcclxuICAgICAgICAgXHJcbiAgICAgICAgdmFyIGJ0bj10aGlzLnNlbGVjdEJuLmlkPXsnaWQnOmRhdGEuaWQsJ25hbWUnOmRhdGEucm9sZW5hbWV9O1xyXG4gICAgICBcclxuICAgICAgICAvL2NjLmxvZyhidG4rYnRuMik7XHJcbiAgICAgICAgIGlmKGRhdGEuc3RhdHVzPT0n56a757q/Jyl7XHJcbiAgICAgICAgICAgICAgICAgICByaWNoU3RyaW5nID0gJzxjb2xvcj0jOTE4RTgzIGNsaWNrPVwiZnJpZW5kSW5mb1wiPicgKyBkYXRhLnJvbGVuYW1lICsgJ+OAkOemu+e6v+OAkTwvYz4gJztcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIG51bT0xO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHJpY2hTdHJpbmcgPSAnPGNvbG9yPSNGRkZGMDAgY2xpY2s9XCJmcmllbmRJbmZvXCI+JyArIGRhdGEucm9sZW5hbWUgKyAnPC9jPjxjb2xvcj0jRkYwMDAwPuOAkOWcqOe6v+OAkTwvYz4gJyA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgXHJcbiAgICAgICAgdGhpcy5yaWNoTGFiZWwuc3RyaW5nID0gcmljaFN0cmluZztcclxuICAgICAgICB0aGlzLnJpY2hMYWJlbC5pZD1kYXRhO1xyXG4gICAgICAgIHJldHVybiBudW07XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKui3s+i9rOWIsOWlveWPi+ivpuaDheeVjOmdoiBcclxuICAgICAqL1xyXG4gICAgZnJpZW5kSW5mbzpmdW5jdGlvbihldmVudCl7XHJcbiAgICAgICAgdmFyIG5vZGUgPSBldmVudC50YXJnZXQ7XHJcbiAgICAgICAgIHZhciByPW5vZGUuZ2V0Q29tcG9uZW50KCBjYy5SaWNoVGV4dCk7XHJcbiAgICAgICAgY2MubG9nKHIuaWQpXHJcbiAgICAgICAgcm9sZU1zZy5pZD1yLmlkLmZyaWVuZElkO1xyXG4gICAgICAgLy8gIGNjLmxvZyhcIui3s+i9rOWIsOWlveWPi+ivpuaDheeVjOmdojpcIittc2cuZnJpZW5kTmFtZSlcclxuIGxvYWRpbmdTY2VuZShIeHNnU2NlbmVzLmZyaWVuZEluZm8sIEh4c2dTY2VuZXMuZnJpZW5kcylcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIOijheWkh1xyXG4gICAgICogaW5kZXg6IOWunuS+i+WMlml0ZW3nmoTluo/lj7fvvIww5byA5aeLXHJcbiAgICAgKiB0eXBlOiDnsbvlnovvvJp5YW9waW7vvIx6aHVhbmdiZWnvvIxrdWFuZ3Noae+8jHphd3VcclxuICAgICAqIGRhdGHvvJrmlbDmja5cclxuICAgICAqIGV2ZW5077ya5oyJ6ZKu5Zue5o6J5pa55rOV77yI5aaC5p6c5pyJ5oyJ6ZKu77yJXHJcbiAgICAgKi9cclxuICAgIGluaXRaaHVhbmdiZWlJdGVtOiBmdW5jdGlvbiAoaW5kZXgsIHR5cGUsIGRhdGEsIGV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5zcHJpdGVUb2dnbGUoaW5kZXgpO1xyXG5cclxuICAgICAgICB0aGlzLm5vZGUubmFtZSA9IHR5cGUgKyBpbmRleDtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5ldmVudCA9IGV2ZW50O1xyXG5cclxuICAgICAgICB2YXIgcmljaFN0cmluZyA9ICc8Y29sb3I9I0ZGRkYwMCBjbGljaz1cInpodWFuZ2JlaVJpY2hUZXh0RXZlbnRcIj4nICsgZGF0YS5mcmllbmROYW1lICsgJzwvYz4nO1xyXG4gICAgICAgIHRoaXMucmljaExhYmVsLnN0cmluZyA9IHJpY2hTdHJpbmc7XHJcbiAgICB9LFxyXG5cclxuICAgIFJpY2hUZXh0RXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coJ+i3s+i9rOWIsOafpeivouivpeinkuiJsuivpuaDheeVjOmdoicgKyB0aGlzLmRhdGEubmFtZSk7XHJcbiAgICAgICBcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnn7/nn7NcclxuICAgICAqIGluZGV4OiDlrp7kvovljJZpdGVt55qE5bqP5Y+377yMMOW8gOWni1xyXG4gICAgICogdHlwZTog57G75Z6L77yaeWFvcGlu77yMemh1YW5nYmVp77yMa3VhbmdzaGnvvIx6YXd1XHJcbiAgICAgKiBkYXRh77ya5pWw5o2uXHJcbiAgICAgKiBldmVudO+8muaMiemSruWbnuaOieaWueazle+8iOWmguaenOacieaMiemSru+8iVxyXG4gICAgICovXHJcbiAgICBpbml0S3VhbmdzaGlJdGVtOiBmdW5jdGlvbiAoaW5kZXgsIHR5cGUsIGRhdGEsIGV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5zcHJpdGVUb2dnbGUoaW5kZXgpO1xyXG5cclxuICAgICAgICB0aGlzLm5vZGUubmFtZSA9IHR5cGUgKyBpbmRleDtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RCbi5nZXRDb21cclxuICAgICAgICB2YXIgcmljaFN0cmluZyA9ICc8Y29sb3I9I0ZGRkYwMCBjbGljaz1cImt1YW5nc2hpUmljaFRleHRFdmVudFwiPicgKyBkYXRhLnp3TmFtZSArICcoJyArIGRhdGEuendYaWFvR3VvICsgJyknICsgJzwvYz4nO1xyXG4gICAgICAgIHRoaXMucmljaExhYmVsLnN0cmluZyA9IHJpY2hTdHJpbmc7XHJcbiAgICB9LFxyXG5cclxuICAgIGt1YW5nc2hpUmljaFRleHRFdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmxvZygna3VhbmdzaGkgaXRlbSAnICsgdGhpcy5kYXRhLnp3TmFtZSk7XHJcbiAgICAgICAgY3VySXRlbURhdGEgPSB7ICdpZCc6IHRoaXMuZGF0YS5pZCArICcnfTtcclxuICAgICAgICBsb2FkU2NlbmUoSHhzZ1NjZW5lcy5iYW9zaGksIEh4c2dTY2VuZXMud3VwaW4pO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIOadgueJqVxyXG4gICAgICogaW5kZXg6IOWunuS+i+WMlml0ZW3nmoTluo/lj7fvvIww5byA5aeLXHJcbiAgICAgKiB0eXBlOiDnsbvlnovvvJp5YW9waW7vvIx6aHVhbmdiZWnvvIxrdWFuZ3Noae+8jHphd3VcclxuICAgICAqIGRhdGHvvJrmlbDmja5cclxuICAgICAqIGV2ZW5077ya5oyJ6ZKu5Zue5o6J5pa55rOV77yI5aaC5p6c5pyJ5oyJ6ZKu77yJXHJcbiAgICAgKi9cclxuICAgIGluaXRaYXd1SXRlbTogZnVuY3Rpb24gKGluZGV4LCB0eXBlLCBkYXRhLCBldmVudCkge1xyXG4gICAgICAgIHRoaXMuc3ByaXRlVG9nZ2xlKGluZGV4KTtcclxuXHJcbiAgICAgICAgdGhpcy5ub2RlLm5hbWUgPSB0eXBlICsgaW5kZXg7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xyXG4gICAgICAgIHRoaXMuY2xpY2tFdmVudCA9IGV2ZW50O1xyXG5cclxuICAgICAgICAvL+aVsOmHj1xyXG4gICAgICAgIHZhciBidG4gPSB0aGlzLm5vZGUucGFyZW50LmdldENoaWxkQnlOYW1lKCd1c2VCdG4nKTtcclxuICAgICAgICBidG4uYWN0aXZlID0gKGRhdGEuY3VzdG9tMSA9PT0gJzEnKSA/IHRydWUgOiBmYWxzZTsgLy8mJiAoZGF0YS5udW0gPiAwKVxyXG5cclxuICAgICAgICB2YXIgbnVtID0gJygnICsgZGF0YS5udW0gKyAnKSc7XHJcbiAgICAgICAgIHZhciByaWNoU3RyaW5nO1xyXG4gICAgICAgIGlmKGRhdGEuc3RhdHVzPT0n56a757q/Jyl7XHJcbiAgICAgICAgICAgcmljaFN0cmluZyA9ICc8Y29sb3I9IzkxOEU4MyBjbGljaz1cInphd3VSaWNoVGV4dEV2ZW50XCI+JyArIGRhdGEubmFtZSArICc8L2M+ICcgKyBudW07XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgIHJpY2hTdHJpbmcgPSAnPGNvbG9yPSNGRkZGMDAgY2xpY2s9XCJ6YXd1UmljaFRleHRFdmVudFwiPicgKyBkYXRhLm5hbWUgKyAnPC9jPiAnICsgbnVtO1xyXG4gICAgICAgIH1cclxuICAgICAgIFxyXG4gICAgICAgIHRoaXMucmljaExhYmVsLnN0cmluZyA9IHJpY2hTdHJpbmc7XHJcbiAgICB9LFxyXG5cclxuICAgIHphd3VSaWNoVGV4dEV2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MubG9nKCd6YXd1IGl0ZW0gJyArIHRoaXMuZGF0YS5uYW1lKTtcclxuICAgICAgICB2YXIgdXJsID0gSHhzZ1VybC56YXd1SXRlbVVybDtcclxuICAgICAgICB2YXIgZGF0YSA9IEpTT04uc3RyaW5naWZ5KHsgJ2lkJzogdGhpcy5kYXRhLmlkIH0pO1xyXG4gICAgICAgIGFqYXhEYXRhKHVybCwgZGF0YSk7XHJcbiAgICB9LFxyXG5cclxuICAgIGJ1dHRvbkV2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY2xpY2tFdmVudCkge1xyXG4gICAgICAgICAgICB0aGlzLmNsaWNrRXZlbnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogaW5kZXjlpYflgbbmlbDliKTmlq3vvIzlpYfmlbDlhbPpl61zcHJpdGXnu4Tku7bvvIzmmL7npLrog4zmma/mmI7mmpfnm7jpl7TmlYjmnpxcclxuICAgICAqL1xyXG4gICAgc3ByaXRlVG9nZ2xlOiBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICB2YXIgaXNPZGQgPSBpbmRleCAlIDIgPT09IDAgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgdGhpcy5zcHJpdGUuZW5hYmxlZCA9IGlzT2RkO1xyXG4gICAgfVxyXG59KTtcclxuIiwiY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgIHJpY2hMYWJlbDogY2MuUmljaFRleHQsXHJcbiAgICAgICAgc3ByaXRlOiBjYy5TcHJpdGUsXHJcbiAgICAgICAgc2VsZWN0Qm46IGNjLkJ1dHRvbixcclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAq6Lez6L2s5Yiw5aW95Y+L6K+m5oOF55WM6Z2iIFxyXG4gICAgICovXHJcbiAgICBmcmllbmRJbmZvOmZ1bmN0aW9uKGV2ZW50KXtcclxuICAgICBjYy5sb2coJ+i3s+i9rOWIsOWlveWPi+ivpuaDheeVjOmdoicpXHJcbiAgICAgICAgdmFyIG5vZGUgPSBldmVudC50YXJnZXQ7XHJcbiAgICAgICAgIHZhciByPW5vZGUuZ2V0Q29tcG9uZW50KCBjYy5SaWNoVGV4dCk7XHJcbiAgICAgICAgY2MubG9nKHIuaWQpXHJcbiAgICAgICAgcm9sZU1zZy5pZD1yLmlkLmlkO1xyXG4gICAgICAgLy8gIGNjLmxvZyhcIui3s+i9rOWIsOWlveWPi+ivpuaDheeVjOmdojpcIittc2cuZnJpZW5kTmFtZSlcclxuICAgICAgIGxvYWRpbmdTY2VuZShIeHNnU2NlbmVzLmZyaWVuZEluZm8sIEh4c2dTY2VuZXMuZnJpZW5kcylcclxuICAgIH0sXHJcbiAgICBpbml0RnJpZW5kc0xpc3Q6IGZ1bmN0aW9uIChpbmRleCwgdHlwZSwgZGF0YSkge1xyXG5cclxuXHJcbiAgICAgICAgIHZhciBudW09MDtcclxuICAgICAgICB0aGlzLm5vZGUubmFtZSA9IHR5cGUgKyBpbmRleDtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XHJcbiAgICAgICAvLyB0aGlzLmV2ZW50ID0gZXZlbnQ7XHJcbiAgICAgICAgIHZhciByaWNoU3RyaW5nO1xyXG4gICAgICAgICBcclxuICAgICAgICB2YXIgYnRuPXRoaXMuc2VsZWN0Qm4uaWQ9eydpZCc6ZGF0YS5pZCwnbmFtZSc6ZGF0YS5yb2xlbmFtZX07XHJcbiAgICAgIFxyXG4gICAgICAgIC8vY2MubG9nKGJ0bitidG4yKTtcclxuICAgICAgICAgaWYoZGF0YS5zdGF0dXM9PSfnprvnur8nKXtcclxuICAgICAgICAgICAgICAgICAgIHJpY2hTdHJpbmcgPSAnPGNvbG9yPSM5MThFODMgY2xpY2s9XCJmcmllbmRJbmZvXCI+JyArIGRhdGEucm9sZW5hbWUgKyAn44CQ56a757q/44CRPC9jPiAnO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgbnVtPTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgcmljaFN0cmluZyA9ICc8Y29sb3I9I0ZGRkYwMCBjbGljaz1cImZyaWVuZEluZm9cIj4nICsgZGF0YS5yb2xlbmFtZSArICc8L2M+PGNvbG9yPSNGRjAwMDAgY2xpY2s9XCJmcmllbmRJbmZvXCI+44CQ5Zyo57q/44CRPC9jPiAnIDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgdGhpcy5yaWNoTGFiZWwuc3RyaW5nID0gcmljaFN0cmluZztcclxuICAgICAgICB0aGlzLnJpY2hMYWJlbC5pZD1kYXRhO1xyXG4gICAgICAgIHJldHVybiBudW07XHJcbiAgICAgXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJ2YXIgc2VsZjtcclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICAgICAgeWFvcGluUHJlZmFiOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgICAgICAgICAgY29udGVudDogY2MuTm9kZSxcclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIHNlbGY9dGhpcztcclxuICAgICAgICAgYWpheERhdGEoSHhzZ1VybC5xdWVyeUZyaWVuZHMsdXNlcld1UGluLm9iamVjdHMsdGhpcy5mcmllbmRzTGlzdCk7XHJcblxyXG5cclxuICAgIH0sXHJcbiAgICBmcmllbmRzTGlzdDogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgIC8vIHRoaXMuY2xlYXJTY3JvbGx2aWV3KCk7XHJcbiAgICAgICAgdmFyIG1zZyA9IGRhdGEubXNnXHJcbiAgICAgICAgY2MubG9nKGRhdGEpXHJcbiAgICAgICAgdmFyIG51bT0wO1xyXG4gICAgICAgIGlmKG1zZz09Jyd8fHR5cGVvZihtc2cpPT0ndW5kZWZpbmVkJ3x8bXNnLmxlbmd0aD09MCl7XHJcbiAgICAgICAgICAgIHNob3dBbGVydChcIuayoeacieafpeWIsOaQnOe0ouS/oeaBr++8gVwiKVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgIHZhciB0b3RhbD1tc2cubGVuZ3RoO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbXNnLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBpdGVtTXNnID0gbXNnW2ldO1xyXG4gICAgICAgICAgICB2YXIgaXRlbSA9IGNjLmluc3RhbnRpYXRlKHNlbGYueWFvcGluUHJlZmFiKTtcclxuICAgICAgICAgICAgc2VsZi5jb250ZW50LmFkZENoaWxkKGl0ZW0pO1xyXG4gICAgICAgICAgICAgIHZhciBjb21wID0gaXRlbS5nZXRDb21wb25lbnRJbkNoaWxkcmVuKCdmcmllbmRzTGlzdEl0ZW0nKTtcclxuICAgICAgICAgICAgbnVtKz1jb21wLmluaXRGcmllbmRzTGlzdChpLCAnZnJpZW5kcycsIGl0ZW1Nc2cpO1xyXG4gICAgICAgICAgIC8vIGNvbXAuc2VsZWN0Qm4ubm9kZS5vbihcImNsaWNrXCIsc2VsZi5za2lsbExpc3Qsc2VsZilcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi5jb250ZW50LmhlaWdodCA9IG1zZy5sZW5ndGggKiA2NTtcclxuICAgICAgICB9XHJcbiAgICAgICBcclxuICAgIH0sXHJcbiAgICAgLyoqXHJcbiAgICAgKiDngrnlh7vkuovku7YtLT7ov5Tlm55cclxuICAgICAqL1xyXG4gICAgYmFja0V2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgcmV0dXJuTGFzdCgpO1xyXG4gICAgfSxcclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJ3aW5kb3cuY3VySXRlbURhdGEgPSBudWxsO1xyXG53aW5kb3cuY3VycmVudFd1cGluID0gMDtcclxudmFyIHNlbGY7XHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAga3NodWlmdVByZWZhYjogY2MuUHJlZmFiLFxyXG4gICAgICAgIHlhb3BpblByZWZhYjogY2MuUHJlZmFiLFxyXG4gICAgICAgIHpodWFuZ2JlaVByZWZhYjogY2MuUHJlZmFiLFxyXG4gICAgICAgIGt1YW5nc2hpUHJlZmFiOiBjYy5QcmVmYWIsXHJcbiAgICAgICAgemF3dVByZWZhYjogY2MuUHJlZmFiLFxyXG4gICAgICAgIGNvbnRlbnQ6IGNjLk5vZGUsXHJcbiAgICAgICAgdGl0bGU6IGNjLkxhYmVsLFxyXG4gICAgICAgIGZ1emhvbmc6IGNjLkxhYmVsLFxyXG4gICAgICAgIG1zZzpjYy5FZGl0Qm94LFxyXG4gICAgICAgIG1lbnU6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogW10sXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLkJ1dHRvblxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmID0gdGhpcztcclxuIGNjLmRpcmVjdG9yLnByZWxvYWRTY2VuZSgndGFsa2luZycpO1xyXG4gICAgICAgLy8gdGhpcy5jbGVhclNjcm9sbHZpZXcoKTtcclxuXHJcbiAgICAgICAgc3dpdGNoIChjdXJyZW50V3VwaW4pe1xyXG4gICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnlhb3BpbkV2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgdGhpcy56aHVhbmdiZWlFdmVudCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgIHRoaXMua3VhbmdzaGlFdmVudCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMzpcclxuICAgICAgICAgICAgICAgIHRoaXMuemF3dUV2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHRoaXMueWFvcGluRXZlbnQoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog54K55Ye75LqL5Lu2LS0+5b+r6YCf5oGi5aSNXHJcbiAgICAgKi9cclxuICAgIHNlbmRNc2c6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL2NjLmxvZygnd3VwaW4gbWFuYW5nZXIg5Y+R6YCB5raI5oGvJyk7XHJcbiAgICAgICAgIGFqYXhEYXRhKEh4c2dVcmwuc2VuZE1zZ0ZvckZyaWVuZHMseyd0eXBlJzon5aW95Y+LJ30sdGhpcy5pbml0WWFvcGluKTtcclxuICAgICAgICAgdmFyIG1zZXNzYWdlPXRoaXMubXNnLmdldENvbXBvbmVudChjYy5FZGl0Qm94KS5zdHJpbmc7XHJcbiAgICAgICAgXHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICog54K55Ye75LqL5Lu2LS0+6L+U5ZueXHJcbiAgICAgKi9cclxuICAgIGJhY2tFdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8v6LCD55So6YCa55So55qE6L+U5Zue5LiK5LiA5Zy65pmv5pa55rOVXHJcbiAgICAgICAgICBsb2FkU2NlbmUoSHhzZ1NjZW5lcy5pbmRleCwgSHhzZ1NjZW5lcy5pbmRleCk7XHJcbiAgICAgICAgY3VySXRlbURhdGEgPSBudWxsO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIC0tPuiNr+WTgVxyXG4gICAgICovXHJcbiAgICB5YW9waW5FdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgLy8gY2MubG9nKCd3dXBpbiBtYW5hbmdlciDlpb3lj4snKTtcclxuICAgICAgICB0aGlzLmNsZWFyU2Nyb2xsdmlldygpO1xyXG4gICAgICAgIHRoaXMubWVudVtjdXJyZW50V3VwaW5dLmludGVyYWN0YWJsZSA9IHRydWU7XHJcbiAgICAgICAgIGN1cnJlbnRXdXBpbiA9IDA7XHJcbiAgICAgICAgIHRoaXMubWVudVtjdXJyZW50V3VwaW5dLmludGVyYWN0YWJsZSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAvLyB2YXIga3NodWlmdSA9IGNjLmluc3RhbnRpYXRlKHRoaXMua3NodWlmdVByZWZhYik7XHJcbiAgICAgICAgLy8gdGhpcy5jb250ZW50LmFkZENoaWxkKGtzaHVpZnUpO1xyXG4gICAgICAgIC8vIHRoaXMua3NodWlmdUJ1dHRvbiA9IGtzaHVpZnUuZ2V0Q2hpbGRCeU5hbWUoJ2h1aWZ1QnRuJyk7XHJcbiAgICAgICAgLy8gdGhpcy5rc2h1aWZ1QnV0dG9uLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX0VORCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vICAgICAvL1RPRE/lv6vpgJ/mgaLlpI1cclxuICAgICAgICAvLyAgICAgY2MubG9nKCd3dXBpbiBtYW5hbmdlciDoja/lk4Eg5b+r6YCf5oGi5aSNJyk7XHJcbiAgICAgICAgLy8gfSk7XHJcbiAgICAgIGFqYXhEYXRhKEh4c2dVcmwuZnJpZW5kcyx7J3R5cGUnOiflpb3lj4snfSx0aGlzLmluaXRZYW9waW4pO1xyXG4gICAgICBcclxuICAgICBcclxuICAgIH0sXHJcbiAgICBxdWVyeU1vSHUgOiBmdW5jdGlvbihlLHR5cGUpe1xyXG4gICAgICAgdmFyIG1zZz0gY2MuZmluZChcIkNhbnZhcy9tb2h1L2lucHV0XCIpLmdldENvbXBvbmVudCgnY2MuRWRpdEJveCcpLnN0cmluZztcclxuICAgICAgIGlmKG1zZz09Jyd8fHR5cGVvZihtc2cpPT0ndW5kZWZpbmVkJyl7XHJcbiAgICAgICAgICAgc2hvd0FsZXJ0KFwi6L6T5YWl5LiN6IO95Li656m6XCIpO1xyXG4gICAgICAgfWVsc2V7XHJcbiAgICAgICAgc3dpdGNoKHR5cGUpe1xyXG4gICAgICAgICAgICBjYXNlXCJJRFwiOlxyXG4gICAgICAgICAgICAvL+ato+WImeihqOi+vuW8j1xyXG4gICAgICAgICAgICAgdmFyICByZSA9IC9bXjAtOV0vO1xyXG4gICAgICAgICAgICAgaWYoIXJlLnRlc3QobXNnKSl7XHJcbiAgICAgICAgICAgICAgICAgdXNlcld1UGluLm9iamVjdHM9eyd0eXBlJzonSUQnLCdtc2cnOm1zZ31cclxuICAgICAgICAgICAgICAgICBsb2FkaW5nU2NlbmUoSHhzZ1NjZW5lcy5mcmllbmRzTGlzdCxIeHNnU2NlbmVzLmZyaWVuZHMpXHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICBzaG93QWxlcnQoXCLmn6Xor6JJROWPquiDvei+k+WFpeaVsOWtl1wiKSAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZVwiTkFNRVwiOlxyXG4gICAgICAgICAgICAgICB1c2VyV3VQaW4ub2JqZWN0cz17J3R5cGUnOidOQU1FJywnbXNnJzptc2d9XHJcbiAgICAgICAgICAgICAgIGxvYWRpbmdTY2VuZShIeHNnU2NlbmVzLmZyaWVuZHNMaXN0LEh4c2dTY2VuZXMuZnJpZW5kcylcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfSAgXHJcblxyXG5cclxuXHJcblxyXG4gICAgICAgfVxyXG4gICAgfSxcclxuICAgIGZyaWVuZHNMaXN0OiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgLy8gdGhpcy5jbGVhclNjcm9sbHZpZXcoKTtcclxuICAgICAgICB2YXIgbXNnID0gZGF0YS5tc2dcclxuICAgICAgICBjYy5sb2coZGF0YSlcclxuICAgICAgICB2YXIgbnVtPTA7XHJcbiAgICAgICAgdmFyIHRvdGFsPW1zZy5sZW5ndGg7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtc2cubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW1Nc2cgPSBtc2dbaV07XHJcbiAgICAgICAgICAgIHZhciBpdGVtID0gY2MuaW5zdGFudGlhdGUoc2VsZi55YW9waW5QcmVmYWIpO1xyXG4gICAgICAgICAgICBzZWxmLmNvbnRlbnQuYWRkQ2hpbGQoaXRlbSk7XHJcbiAgICAgICAgICAgIHZhciBjb21wID0gaXRlbS5nZXRDb21wb25lbnRJbkNoaWxkcmVuKCdmcmllbmRzSXRlbScpO1xyXG4gICAgICAgICAgICBudW0rPWNvbXAuaW5pdEZyaWVuZHNMaXN0KGksICdmcmllbmRzJywgaXRlbU1zZyk7XHJcbiAgICAgICAgICAgIGNvbXAuc2VsZWN0Qm4ubm9kZS5vbihcImNsaWNrXCIsc2VsZi5za2lsbExpc3Qsc2VsZilcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi50aXRsZS5zdHJpbmc9J+WcqOe6vycrbnVtKycvJyt0b3RhbDtcclxuICAgICAgICBzZWxmLmNvbnRlbnQuaGVpZ2h0ID0gbXNnLmxlbmd0aCAqIDY1O1xyXG4gICAgfSxcclxuXHJcblxyXG4gICAgaW5pdFlhb3BpbjogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAvL2lmKGN1cnJlbnRXdXBpbiAhPSBkYXRhLnR5cGUpIHJldHVybjtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgbXNnID0gZGF0YS5tc2dcclxuICAgICAgICB2YXIgbnVtPTA7XHJcbiAgICAgICAgdmFyIHRvdGFsPW1zZy5sZW5ndGg7XHJcbiAgICAgICAgLy9zaG93QWxlcnQobXNnLCBudWxsLCBudWxsKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgaXRlbU1zZyA9IG1zZ1tpXTtcclxuICAgICAgICAgICAgdmFyIGl0ZW0gPSBjYy5pbnN0YW50aWF0ZShzZWxmLnlhb3BpblByZWZhYik7XHJcbiAgICAgICAgICAgIHNlbGYuY29udGVudC5hZGRDaGlsZChpdGVtKTtcclxuICAgICAgICAgICAgdmFyIGNvbXAgPSBpdGVtLmdldENvbXBvbmVudEluQ2hpbGRyZW4oJ2ZyaWVuZHNJdGVtJyk7XHJcbiAgICAgICAgICAgIG51bSs9Y29tcC5pbml0RnJpZW5kc0l0ZW0oaSwgJ2ZyaWVuZHMnLCBpdGVtTXNnKTtcclxuICAgICAgICAgICAgY29tcC5zZWxlY3RCbi5ub2RlLm9uKFwiY2xpY2tcIixzZWxmLnNraWxsTGlzdCxzZWxmKVxyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLnRpdGxlLnN0cmluZz0n5Zyo57q/JytudW0rJy8nK3RvdGFsO1xyXG4gICAgICAgIHNlbGYuY29udGVudC5oZWlnaHQgPSBtc2cubGVuZ3RoICogNjU7XHJcbiAgICB9LFxyXG5za2lsbExpc3Q6ZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAvL+i/memHjCBldmVudCDmmK/kuIDkuKogVG91Y2ggRXZlbnQg5a+56LGh77yM5L2g5Y+v5Lul6YCa6L+HIGV2ZW50LnRhcmdldCDlj5bliLDkuovku7bnmoTlj5HpgIHoioLngrlcclxuICAgICAgICB2YXIgbm9kZSA9IGV2ZW50LnRhcmdldDtcclxuICAgICAgICBcclxuICAgICBcclxuICAgICAgICB2YXIgYnV0dG9uID0gbm9kZS5nZXRDb21wb25lbnQoY2MuQnV0dG9uKTtcclxuICAgICAgICAvL3dpbmRvdy53dVBpbi5qaW5lbmdMaXN0PWJuLmlkO1xyXG4gICAgICAgIG15RnJpZW5kcy5mcmllbmRpZD1idXR0b24uaWQuaWQ7XHJcbiAgICAgICAgbXlGcmllbmRzLmZyaWVuZG5hbWU9YnV0dG9uLmlkLm5hbWU7XHJcbiAgICAgbG9hZGluZ1NjZW5lKFwidGFsa2luZ1wiLFwiZnJpZW5kc1wiKVxyXG4gICAgIFxyXG4gICAgICAgIC8v6L+Z6YeM55qEIGN1c3RvbUV2ZW50RGF0YSDlj4LmlbDlsLHnrYnkuo7kvaDkuYvliY3orr7nva7nmoQgXCJmb29iYXJcIlxyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogLS0+6KOF5aSHXHJcbiAgICAgKi9cclxuICAgIHpodWFuZ2JlaUV2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICBcclxuICAgICAgICB0aGlzLmNsZWFyU2Nyb2xsdmlldygpO1xyXG4gICAgICAgIHRoaXMubWVudVtjdXJyZW50V3VwaW5dLmludGVyYWN0YWJsZSA9IHRydWU7XHJcbiAgICAgICAgY3VycmVudFd1cGluID0gMTtcclxuICAgICAgICB0aGlzLm1lbnVbY3VycmVudFd1cGluXS5pbnRlcmFjdGFibGUgPSBmYWxzZTtcclxuXHJcbiAgIGFqYXhEYXRhKEh4c2dVcmwuZnJpZW5kcyx7J3R5cGUnOifmnIDov5EnfSx0aGlzLmluaXRZYW9waW4pO1xyXG4gICAgfSxcclxuXHJcbiAgICBpbml0Wmh1YW5nYmVpOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIGlmKGN1cnJlbnRXdXBpbiAhPSBkYXRhLnR5cGUpIHJldHVybjtcclxuICAgICAgICBcclxuICAgICAgICB2YXIgbXNnID0gZGF0YS5tc2dcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1zZy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgaXRlbU1zZyA9IG1zZ1tpXTtcclxuICAgICAgICAgICAgdmFyIGl0ZW0gPSBjYy5pbnN0YW50aWF0ZShzZWxmLnphd3VQcmVmYWIpO1xyXG4gICAgICAgICAgICBzZWxmLmNvbnRlbnQuYWRkQ2hpbGQoaXRlbSk7XHJcbiAgICAgICAgICAgIHZhciBjb21wID0gaXRlbS5nZXRDb21wb25lbnRJbkNoaWxkcmVuKCdXdXBpbkl0ZW0nKTtcclxuICAgICAgICAgICAgY29tcC5pbml0Wmh1YW5nYmVpSXRlbShpLCAnemh1YW5nYmVpJywgaXRlbU1zZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuY29udGVudC5oZWlnaHQgPSBtc2cubGVuZ3RoICogNjU7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogLS0+55+/55+zXHJcbiAgICAgKi9cclxuICAgIGt1YW5nc2hpRXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coJ3d1cGluIG1hbmFuZ2VyIOS6suS6uicpO1xyXG5cclxuICAgICAgICB0aGlzLmNsZWFyU2Nyb2xsdmlldygpO1xyXG4gICAgICAgIHRoaXMubWVudVtjdXJyZW50V3VwaW5dLmludGVyYWN0YWJsZSA9IHRydWU7XHJcbiAgICAgICAgY3VycmVudFd1cGluID0gMjtcclxuICAgICAgICB0aGlzLm1lbnVbY3VycmVudFd1cGluXS5pbnRlcmFjdGFibGUgPSBmYWxzZTtcclxuXHJcbiAgICAgICBhamF4RGF0YShIeHNnVXJsLmZyaWVuZHMseyd0eXBlJzon5Lqy5Lq6J30sdGhpcy5pbml0WWFvcGluKTtcclxuICAgIH0sXHJcbiAgICBcclxuICAgIGluaXRLdWFuZ3NoaTogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICBpZihjdXJyZW50V3VwaW4gIT0gZGF0YS50eXBlKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIG1zZyA9IGRhdGEubXNnO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbXNnLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBpdGVtID0gY2MuaW5zdGFudGlhdGUoc2VsZi5rdWFuZ3NoaVByZWZhYik7XHJcbiAgICAgICAgICAgIHNlbGYuY29udGVudC5hZGRDaGlsZChpdGVtKTtcclxuICAgICAgICAgICAgdmFyIGNvbXAgPSBpdGVtLmdldENvbXBvbmVudEluQ2hpbGRyZW4oJ1d1cGluSXRlbScpO1xyXG4gICAgICAgICAgICB2YXIgaXRlbU1zZyA9IG1zZ1tpXTtcclxuICAgICAgICAgICAgY29tcC5pbml0S3VhbmdzaGlJdGVtKGksICdrdWFuZ3NoaScsIGl0ZW1Nc2cpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZWxmLmNvbnRlbnQuaGVpZ2h0ID0gbXNnLmxlbmd0aCAqIDY1O1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIC0tPuadgueJqVxyXG4gICAgICovXHJcbiAgICB6YXd1RXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coJ3d1cGluIG1hbmFuZ2VyIOS7h+S6uicpO1xyXG4gIFxyXG4gICAgICAgIHRoaXMuY2xlYXJTY3JvbGx2aWV3KCk7XHJcbiAgICAgICAgdGhpcy5tZW51W2N1cnJlbnRXdXBpbl0uaW50ZXJhY3RhYmxlID0gdHJ1ZTtcclxuICAgICAgICBjdXJyZW50V3VwaW4gPSAzO1xyXG4gICAgICAgIHRoaXMubWVudVtjdXJyZW50V3VwaW5dLmludGVyYWN0YWJsZSA9IGZhbHNlO1xyXG5cclxuICAgIGFqYXhEYXRhKEh4c2dVcmwuZnJpZW5kcyx7J3R5cGUnOifku4fkuronfSx0aGlzLmluaXRZYW9waW4pO1xyXG4gICAgfSxcclxuXHJcbiAgICBpbml0WmF3dTogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICBpZihjdXJyZW50V3VwaW4gIT0gZGF0YS50eXBlKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgdmFyIG1zZyA9IGRhdGEubXNnXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtc2cubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW1Nc2cgPSBtc2dbaV07XHJcbiAgICAgICAgICAgIHZhciBpdGVtID0gY2MuaW5zdGFudGlhdGUoc2VsZi56YXd1UHJlZmFiKTtcclxuICAgICAgICAgICAgc2VsZi5jb250ZW50LmFkZENoaWxkKGl0ZW0pO1xyXG4gICAgICAgICAgICB2YXIgY29tcCA9IGl0ZW0uZ2V0Q29tcG9uZW50SW5DaGlsZHJlbignV3VwaW5JdGVtJyk7XHJcbiAgICAgICAgICAgIGNvbXAuaW5pdFphd3VJdGVtKGksICd6YXd1JywgaXRlbU1zZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuY29udGVudC5oZWlnaHQgPSBtc2cubGVuZ3RoICogNjU7XHJcbiAgICB9LFxyXG5cclxuICAgIHphd3VJdGVtRXZlbnQ6IGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgIC8vVE9ETzpcclxuICAgIH0sXHJcblxyXG4gICAgY2xlYXJTY3JvbGx2aWV3OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5jb250ZW50LnJlbW92ZUFsbENoaWxkcmVuKCk7XHJcbiAgICB9LFxyXG5cclxufSk7XHJcbiIsImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgLy8gZm9vOiB7XHJcbiAgICAgICAgLy8gICAgZGVmYXVsdDogbnVsbCwgICAgICAvLyBUaGUgZGVmYXVsdCB2YWx1ZSB3aWxsIGJlIHVzZWQgb25seSB3aGVuIHRoZSBjb21wb25lbnQgYXR0YWNoaW5nXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICB0byBhIG5vZGUgZm9yIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgLy8gICAgdXJsOiBjYy5UZXh0dXJlMkQsICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxyXG4gICAgICAgIC8vICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSwgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIHZpc2libGU6IHRydWUsICAgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIGRpc3BsYXlOYW1lOiAnRm9vJywgLy8gb3B0aW9uYWxcclxuICAgICAgICAvLyAgICByZWFkb25seTogZmFsc2UsICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIGZhbHNlXHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICAvLyAuLi5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG4gICAgY2xpY2tFdmVudDpmdW5jdGlvbihlLG51bSl7XHJcbiAgICAgICAgICAgdmFyIGppZXN1YW49Y2MuZmluZChcIkNhbnZhcy9qaWVzdWFuXCIpO1xyXG4gICAgICAgICAgICBzd2l0Y2gobnVtKXtcclxuICAgICAgICAgICAgICAgIGNhc2UgJzEnOntcclxuICAgICAgICAgICAgICAgICAgICAvL+eMnOeMnOeMnFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBqaWVzdWFuLmFjdGl2ZT1mYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICBjYy5maW5kKFwiQ2FudmFzL2NoaWJpXCIpLmFjdGl2ZT1mYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICBjYy5maW5kKFwiQ2FudmFzL3NhaXppXCIpLmFjdGl2ZT10cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcIkR1Q2hhbmdWby5udW1cIitEdUNoYW5nVm8ubnVtKVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgaWYoIER1Q2hhbmdWby5udW08PTApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqaWVzdWFuLmFjdGl2ZT10cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqaWVzdWFuLmdldENvbXBvbmVudChcImppZXN1YW5cIikuc2V0TXNnKFwi54yc54yc54yc57uT566X5Lit77yM6K+356iN5ZCO5YaN5p2lXCIpOyAgICAgXHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgIGNhc2UgJzInOntcclxuICAgICAgICAgICAgICAgICAgICAgLy/otaTlo4FcclxuICAgICAgICAgICAgICAgICAgICAgIGNjLmZpbmQoXCJDYW52YXMvamllc3VhblwiKS5hY3RpdmU9ZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgY2MuZmluZChcIkNhbnZhcy9jaGliaVwiKS5hY3RpdmU9dHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICBjYy5maW5kKFwiQ2FudmFzL3NhaXppXCIpLmFjdGl2ZT1mYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICBpZiggQ2hpQmlWby5udW08PTApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGppZXN1YW4uYWN0aXZlPXRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgamllc3Vhbi5nZXRDb21wb25lbnQoXCJqaWVzdWFuXCIpLnNldE1zZyhcIui1pOWjgee7k+eul+S4re+8jOivt+eojeWQjuWGjeadpVwiKTsgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICBjYXNlICczJzp7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgY2FzZSAnNCc6e1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgfVxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgaGVhZEltZzpjYy5TcHJpdGUsXHJcbiAgICAgICAgaGVhZEltZ0xpc3Q6e1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBbXSxcclxuICAgICAgICAgICAgdHlwZTogY2MuU3ByaXRlRnJhbWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8vIGZvbzoge1xyXG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub2RlIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcclxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICB2aXNpYmxlOiB0cnVlLCAgICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXHJcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gLi4uXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuICAgIGluaXQ6ZnVuY3Rpb24obnVtKXtcclxuICAgICAgICB0aGlzLmhlYWRJbWcuc3ByaXRlRnJhbWU9dGhpcy5oZWFkSW1nTGlzdFtudW1dO1xyXG5cclxuICAgIH1cclxufSk7XHJcbiIsImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgbXNnOmNjLkVkaXRCb3gsXHJcbiAgICAgICAgc2VsZWN0Qm46Y2MuQnV0dG9uLFxyXG4gICAgICAgIC8vIGZvbzoge1xyXG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub2RlIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcclxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICB2aXNpYmxlOiB0cnVlLCAgICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXHJcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gLi4uXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuICAgIGJ1dHRvbkV2ZW50OmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdmFyIG51bT10aGlzLm1zZy5zdHJpbmdcclxuICAgICAgICBpZihudW0+MTB8fG51bTwwKXtcclxuICAgICAgICAgIHNob3dBbGVydCgn6K+36L6T5q2j56Gu55qE5pWw6YePJylcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdXNlcld1UGluLm51bT1udW07XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHVzZXJXdVBpbilcclxuICAgICAgICAgICAgYWpheERhdGEoSHhzZ1VybC51c2VyV3VQaW4sdXNlcld1UGluLHRoaXMudGlTaGkpXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0sXHJcbiAgICB0aVNoaTpmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICBjYy5sb2coZGF0YS5tc2cpXHJcbiAgICAgICAgc2hvd0FsZXJ0KGRhdGEubXNnKTtcclxuICAgICAgICBcclxuICAgIH0sXHJcbmJhY2tFdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8v6LCD55So6YCa55So55qE6L+U5Zue5LiK5LiA5Zy65pmv5pa55rOVXHJcbiAgICAgICAgICBsb2FkU2NlbmUoSHhzZ1NjZW5lcy53dXBpbiwgSHhzZ1NjZW5lcy5pbmRleCk7XHJcblxyXG4gICAgfSxcclxufSk7XHJcbiIsImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICB0YXJnZXQ6IHtcclxuICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgdHlwZTogY2MuUHJlZmFiLFxyXG4gICAgICAgfSxcclxuICAgIGxlZnRDb250ZW50OmNjLk5vZGUsXHJcbiAgICAgICAgY29udGVudDogY2MuTm9kZSxcclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG52YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgYWpheCh7XHJcbiAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgICAgICAgICAvLyB1cmw6IFwiXCIgKyBsb2NhbGhvc3QgKyBcImdjaGFuZy9hcHBsaXNoaVwiLFxyXG4gICAgICAgICAgICB1cmw6XCJodHRwOi8vMTkyLjE2OC4xMzAuMTg6ODA4MC9jb2NvczJkV3VQaW4vZ2V0SmlOZW5nU2h1TGlzdD9pZD05OFwiLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb25wJyxcclxuICAgICAgICAgICAganNvbnA6IFwianNvbnBDYWxsYmFja1wiLC8v5pyN5Yqh56uv55So5LqO5o6l5pS2Y2FsbGJhY2vosIPnlKjnmoRmdW5jdGlvbuWQjeeahOWPguaVsFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcCA9IG1zZy5tc2c7XHJcbiAgICAgICAgICAgICAgICAvL2FsZXJ0KHApO1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBjYy5pbnN0YW50aWF0ZShzZWxmLnRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgIHNlbGYuY29udGVudC5hZGRDaGlsZChpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLnggPTE7XHJcbiAgICAgICAgICAgICAgICAgICAgIGl0ZW0ueT0gLTEgKiBpICogaXRlbS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5uYW1lID0gJ3VzZXJMaXN0JyArIGk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5sZWZ0Q29udGVudC5oZWlnaHQgPSAoaSArIDEpICogaXRlbS5oZWlnaHQrMjA7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxhYiA9IGl0ZW0uZ2V0Q29tcG9uZW50KFwid3VQaW5MaXN0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiLm1zZy5zdHJpbmc9cFtpXS5yb2xlbmFtZStcIihcIitwW2ldLmZ1bGV2ZWwrXCLnuqcpXCI7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBsYWIuaWQuc3RyaW5nPXBbaV0ucmZpZDtcclxuICAgICAgICAgICAgICAgICAgICBpZihpJTIhPTApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmNvbG9yPW5ldyBjYy5Db2xvcigwLDAsNDkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coaXRlbS5jb2xvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9sYWIuTm9kZS5Db2xvcj1cIldISVRFXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICBsYWIuc2VsZWN0Qm4ubmFtZT0nYnV0dG9uJytpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciBjbGlja0V2ZW50SGFuZGxlciA9IG5ldyBjYy5Db21wb25lbnQuRXZlbnRIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2xpY2tFdmVudEhhbmRsZXIudGFyZ2V0ID0gbGFiLnNlbGVjdEJuLm5vZGU7IC8v6L+Z5LiqIG5vZGUg6IqC54K55piv5L2g55qE5LqL5Lu25aSE55CG5Luj56CB57uE5Lu25omA5bGe55qE6IqC54K5XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2xpY2tFdmVudEhhbmRsZXIuY29tcG9uZW50ID0nYnV0dG9uMCc7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2xpY2tFdmVudEhhbmRsZXIuaGFuZGxlciA9IFwic2tpbGxMaXN0XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2xpY2tFdmVudEhhbmRsZXIuY3VzdG9tRXZlbnREYXRhID1wW2ldLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vd3VQaW4uamluZW5nTGlzdD1cIjEwMzExXCJcclxuICAgICAgICAgICAgICAgICAgICAgLy9sYWIuc2VsZWN0Qm4uaWQuc3RyaW5nPXBbaV0ucmZpZFxyXG4gICAgICAgICAgICAgICAgICAgICAgdmFyIGJuPWxhYi5zZWxlY3RCbi5nZXRDb21wb25lbnQoXCJqaU5lbmdCdXR0b25cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICBibi5pZD1wW2ldLnJmaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbGFiLnNlbGVjdEJuLnNldElkKG5ldyBjYy5MYWJlbCgpKVxyXG4gICAgICAgICAgICAgICAgICAgIGxhYi5zZWxlY3RCbi5ub2RlLm9uKCdjbGljaycsc2VsZi5za2lsbExpc3QsIHNlbGYpXHJcbiAgICAgICAgICAgICAgICAgICAvL2xhYi5zZWxlY3RCbi5jbGlja0V2ZW50cy5wdXNoKGNsaWNrRXZlbnRIYW5kbGVyKTtcclxuICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cgKGJuLmlkKVxyXG4gICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocFtpXS5pZClcclxuICAgICAgICAgICAgICAgICAgICAvL3MgKz0gXCIgPHAgY2xhc3M9XFxcInlhb3BpbmdcXFwiIHN0eWxlPSdjb2xvcjojRkZGM0FFJz7nrKxcIiArIHBbaV0uaWQgKyBcIuacn++8jOW8gOWHulwiICsgcFtpXS5udW0xICsgXCIsXCIgKyBwW2ldLm51bTIgKyBcIixcIiArIHBbaV0ubnVtMyArIFwiJm5ic3A7Jm5ic3A7XCIgKyBwW2ldLnJlc3VsdCArIFwiPC9wPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciBpdGVtID0gY2MuaW5zdGFudGlhdGUoc2VsZi5pdGVtUHJlZmFiKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBzZWxmLmxlZnRDb250ZW50LmFkZENoaWxkKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGl0ZW0ueCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaXRlbS55ID0gLTEgKiBpICogaXRlbS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaXRlbS5uYW1lID0gJ2hpc3RvcnknICsgaTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBzZWxmLmNvbnRlbnQuaGVpZ2h0ID0gKGkgKyAxKSAqIGl0ZW0uaGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBpdGVtID0gaXRlbS5nZXRDb21wb25lbnQoJ0hpc3RvcnlJdGVtJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdmFyIGxhYmVsU3RyID0gXCLnrKxcIiArIHBbaV0uaWQgKyBcIuacn++8jOW8gOWHulwiICsgcFtpXS5udW0xICsgXCIsXCIgKyBwW2ldLm51bTIgKyBcIixcIiArIHBbaV0ubnVtMyArIFwiXFx0XFx0XCIgKyBwW2ldLnJlc3VsdDtcclxuICAgICAgICAgICAgICAgICAgICAvLyBpdGVtLnNldE1zZyhsYWJlbFN0cik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBza2lsbExpc3Q6ZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAvL+i/memHjCBldmVudCDmmK/kuIDkuKogVG91Y2ggRXZlbnQg5a+56LGh77yM5L2g5Y+v5Lul6YCa6L+HIGV2ZW50LnRhcmdldCDlj5bliLDkuovku7bnmoTlj5HpgIHoioLngrlcclxuICAgICAgICB2YXIgbm9kZSA9IGV2ZW50LnRhcmdldDtcclxuICAgICAgICAgdmFyIGJuPW5vZGUuZ2V0Q29tcG9uZW50KFwiamlOZW5nQnV0dG9uXCIpO1xyXG4gICAgICAgIHZhciBidXR0b24gPSBub2RlLmdldENvbXBvbmVudChjYy5CdXR0b24pO1xyXG4gICAgICAgIHdpbmRvdy53dVBpbi5qaW5lbmdMaXN0PWJuLmlkO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGJuLmlkKVxyXG4gICAgICAgIC8v6L+Z6YeM55qEIGN1c3RvbUV2ZW50RGF0YSDlj4LmlbDlsLHnrYnkuo7kvaDkuYvliY3orr7nva7nmoQgXCJmb29iYXJcIlxyXG4gICAgfSxcclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIG1zZzpjYy5MYWJlbCxcclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcbiAgIHNldE1zZzpmdW5jdGlvbihkYXRhKXtcclxuICAgICAgIHRoaXMubXNnLnN0cmluZz1kYXRhO1xyXG4gICB9XHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBqTmFtZTpjYy5MYWJlbCxcclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcbiAgICBzZXRKbmFtZTpmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICB0aGlzLmpOYW1lLnN0cmluZz1kYXRhO1xyXG5cclxuICAgIH0sXHJcbiAgIGFuaW1hdGlvblRlc3Q6ZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICBcclxuICAgfVxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJ2YXIgc2VsZjtcclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYgPSB0aGlzO1xyXG4gICAgfSxcclxuICAgIGNsaWNrOiBmdW5jdGlvbiAoZSwgaWQpIHtcclxuICAgICAgICBpZiAoY2MuZmluZCgnQ2FudmFzL3piQmFvc2hpJykgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjYy5maW5kKCdDYW52YXMvemJCYW9zaGknKS5kZXN0cm95KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL+epuuanvVxyXG4gICAgICAgIGlmIChpZCA9PSAxKSB7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIuWuneefs+WtlOaMiemSrjogXCIgKyBpZClcclxuICAgICAgICBjYy5sb2FkZXIubG9hZFJlcygncHJlZmFicy9icycsIGNjLlByZWZhYiwgZnVuY3Rpb24gKGVyciwgcHJlZmFiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJzTGlzdCA9IGNjLmluc3RhbnRpYXRlKHByZWZhYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYy5maW5kKCdDYW52YXMnKS5hZGRDaGlsZChic0xpc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNjLmxvZyhcIuWuneefs+WtlOaMiemSrjogXCIgKyBpZClcclxuICAgICAgICAgICAgY2MubG9hZGVyLmxvYWRSZXMoJ3ByZWZhYnMvemJCYW9zaGknLCBjYy5QcmVmYWIsIGZ1bmN0aW9uIChlcnIsIHByZWZhYikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYy5sb2coc2VsZilcclxuICAgICAgICAgICAgICAgICAgICBjYy5sb2coc2VsZi5tc2dpZClcclxuICAgICAgICAgICAgICAgICAgICB2YXIgemJCYW9zaGkgPSBjYy5pbnN0YW50aWF0ZShwcmVmYWIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmZpbmQoJ0NhbnZhcycpLmFkZENoaWxkKHpiQmFvc2hpLCA5MCk7XHJcbiAgICAgICAgICAgICAgICAgICAgemJCYW9zaGkuc2V0UG9zaXRpb25YKDMwKTtcclxuICAgICAgICAgICAgICAgICAgICB6YkJhb3NoaS5zZXRQb3NpdGlvblkoLTEwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJ2YXIgaWQgPSAwO1xyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIGl0ZW1QcmVmYWI6IGNjLlByZWZhYixcclxuICAgICAgICBjb250ZW50OiBjYy5Ob2RlLFxyXG5cclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICBhamF4KHtcclxuICAgICAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgICAgIHVybDogSHhzZ1VybC5sb2FkQ3JlYXRlUm9sZSxcclxuICAgICAgICAgICAgZGF0YTogeyBcImtleVwiOiB1dWlkS2V5IH0sXHJcbiAgICAgICAgICAgIC8vanNvbnA6IFwianNvbnBDYWxsYmFja1wiLC8v5pyN5Yqh56uv55So5LqO5o6l5pS2Y2FsbGJhY2vosIPnlKjnmoRmdW5jdGlvbuWQjeeahOWPguaVsFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgICAgICAgICBjYy5sb2codXVpZEtleSlcclxuICAgICAgICAgICAgICAgIG1zZyA9IGV2YWwoJygnICsgbXNnICsgJyknKTtcclxuICAgICAgICAgICAgICAgIGlmIChtc2cuY29kZSA9PSBcIjAwMFwiKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgMzsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gY2MuaW5zdGFudGlhdGUoc2VsZi5pdGVtUHJlZmFiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS54ID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS55ID0gKDEgKiBqICogaXRlbS5oZWlnaHQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2MuZmluZChcIkNhbnZhcy9jb3RlbnRcIikuYWRkQ2hpbGQoaXRlbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsYWIgPSBpdGVtLmdldENvbXBvbmVudChcInNlbGVjdGVkUm9sZVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYi5ub2RlLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULCBzZWxmLnRvSW5kZXgsIHNlbGYpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwID0gbXNnLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwID09IG51bGwgfHwgcCA9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWIubmFtZSA9IGo7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLm5hbWUgPSAnaXRlbScgKyBqO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiLm1zZy5zdHJpbmcgPSBcIuOAkOepuuOAkVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWIuaWQuc3RyaW5nID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYi56aGl5ZS5zdHJpbmcgPSBcIuaWsOW7uuinkuiJslwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBbal0gIT09IHVuZGVmaW5lZCAmJiBwW2pdICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5uYW1lID0gJ2l0ZW0nICsgcFtqXS5pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWIubmFtZSA9IHBbal0uaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lsIbpooTliLbotYTmupDlhpnlhaVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWIubXNnLnN0cmluZyA9IHBbal0ucm9sZW5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiLmlkLnN0cmluZyA9IFwiSUQ6XCIgKyBwW2pdLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYi56aGl5ZS5zdHJpbmcgPSBwW2pdLmxldmVsICsgXCLnuqdcIiArIHBbal0uemhpeWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbGFiLmltZy5zcHJpdGVGcmFtZS5zZXRUZXh0dXJlKFwiaHR0cDovL2xvY2FsaG9zdDo3NDU2L3Jlcy9yYXctYXNzZXRzLy9yZXNvdXJjZXMvdG91eGlhbmcvd3VzaGkzLmpwZ1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWIubmFtZSA9IGo7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLm5hbWUgPSAnaXRlbScgKyBqO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiLm1zZy5zdHJpbmcgPSBcIuOAkOepuuOAkVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWIuaWQuc3RyaW5nID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhYi56aGl5ZS5zdHJpbmcgPSBcIuaWsOW7uuinkuiJslwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+eCueWHu+S6i+S7tlxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzaG93QWxlcnQoXCLmnI3liqHlmajlvILluLhcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0sXHJcbiAgICB0b0luZGV4OiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuXHJcbiAgICAgICAgdmFyIG5vZGUgPSBldmVudC50YXJnZXQ7XHJcblxyXG4gICAgICAgIHZhciBsYWIgPSBub2RlLmdldENvbXBvbmVudChcInNlbGVjdGVkUm9sZVwiKTtcclxuICAgICAgICBpZCA9IGxhYi5uYW1lO1xyXG4gICAgICAgIC8vbm9kZS5jb2xvcj1uZXcgY2MuQ29sb3IoMjMwLDIxLDIxKTtcclxuICAgICAgICB2YXIgYXJyID0gbm9kZS5wYXJlbnQuY2hpbGRyZW47XHJcbiAgICAgICAgY2MubG9nKGlkKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoYXJyW2ldLm5hbWUgPT0gKFwiaXRlbVwiICsgaWQpKSB7XHJcbiAgICAgICAgICAgICAgICBjYy5sb2coYXJyW2ldLm5hbWUuaW5kZXhPZihpZCkpXHJcbiAgICAgICAgICAgICAgICBhcnJbaV0uY29sb3IgPSBuZXcgY2MuQ29sb3IoMjQwLCAyMzIsIDIzMik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhcnJbaV0uY29sb3IgPSBuZXcgY2MuQ29sb3IoMTk5LCAxMzUsIDEzNSk7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIG5vZGUucGFyZW50LmdldENoaWxkQnlOYW1lKFwiaXRlbTEwMDBcIikuY29sb3I9bmV3IGNjLkNvbG9yKDIzMCwyMSwyMSk7XHJcbiAgICAgICAgY2MubG9nKG5vZGUucGFyZW50LmdldENoaWxkQnlOYW1lKFwiaXRlbVwiICsgaWQpKVxyXG4gICAgICAgIC8vICBpZihpZDwxMDAwKVxyXG4gICAgICAgIC8vIHtcclxuICAgICAgICAvLyAgICAgICBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoJ2NyZWF0ZVJvbGUnKTtcclxuICAgICAgICAvLyAgfVxyXG4gICAgICAgIC8vIGNjLmRpcmVjdG9yLmxvYWRTY2VuZSgnaW5wdXROdW0nKTtcclxuXHJcbiAgICB9LFxyXG4gICAgZ2FtZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmIChpZCA+PSAxMDAwKSB7XHJcbiAgICAgICAgICAgIGFqYXhEYXRhKEh4c2dVcmwuc2VsZWN0Um9sZSwgeyAnaWQnOiBpZCwgXCJrZXlzXCI6IHV1aWRLZXkgfSwgbG9hZGluZ1NjZW5lKCdpbmRleGhnJykpO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgbG9hZGluZ1NjZW5lKCdjcmVhdGVSb2xlJylcclxuICAgICAgICB9XHJcblxyXG4gICAgfSxcclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJcclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICB0ZXh0OiBjYy5MYWJlbFxyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIG1zZzog5pi+56S655qE5YaF5a65XHJcbiAgICAgKiBzdXJlRXZlbnQ6IOehruWumuaMiemSruWbnuiwg+WHveaVsO+8jOayoeacieS8oHVuZGVmaW5lZOaIluiAhW51bGxcclxuICAgICAqIGNhbmNlbEV2ZW50OiDov5Tlm57mjInpkq7lm57osIPlh73mlbDvvIzmsqHmnInkvKB1bmRlZmluZWTmiJbogIVudWxsXHJcbiAgICAgKiBzdWVyUGFyYW1ldGVyOiDnoa7lrprmjInpkq7lm57osIPlh73mlbDlj4LmlbBcclxuICAgICAqIGNhbmNlbFBhcmFtZXRlcjog6L+U5Zue5oyJ6ZKu5Zue6LCD5Ye95pWw5Y+C5pWwXHJcbiAgICAgKi9cclxuICAgIGluaXRBbGVydDogZnVuY3Rpb24obXNnLCBzdXJlRXZlbnQsIGNhbmNlbEV2ZW50LHN1ZXJQYXJhbWV0ZXIsY2FuY2VsUGFyYW1ldGVyKXtcclxuICAgICAgICB0aGlzLnRleHQuc3RyaW5nID0gbXNnO1xyXG4gICAgICAgIHRoaXMuc3VyZUV2ZW50ID0gc3VyZUV2ZW50O1xyXG4gICAgICAgIHRoaXMuY2FuY2VsRXZlbnQgPSBjYW5jZWxFdmVudDtcclxuICAgICAgICB0aGlzLnN1ZXJQYXJhbWV0ZXIgPSBzdWVyUGFyYW1ldGVyO1xyXG4gICAgICAgIHRoaXMuY2FuY2VsUGFyYW1ldGVyID0gY2FuY2VsUGFyYW1ldGVyO1xyXG4gICAgfSxcclxuXHJcbiAgICBzdXJlQ2xpY2tFdmVudDogZnVuY3Rpb24oKXtcclxuICAgICAgICBpZih0aGlzLnN1cmVFdmVudCl7XHJcbiAgICAgICAgICAgIHRoaXMuc3VyZUV2ZW50KHRoaXMuc3VlclBhcmFtZXRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubm9kZS5kZXN0cm95KCk7XHJcbiAgICB9LFxyXG5cclxuICAgIGNhbmNlbENsaWNrRXZuZXQ6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgY2MubG9nKCdjYW5jZWxDbGlja0V2bmV0JylcclxuICAgICAgICBpZih0aGlzLmNhbmNlbEV2ZW50KXtcclxuICAgICAgICAgICAgdGhpcy5jYW5jZWxFdmVudCh0aGlzLmNhbmNlbFBhcmFtZXRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubm9kZS5kZXN0cm95KCk7XHJcbiAgICB9XHJcbn0pO1xyXG4iLCJcbmNjLkNsYXNzKHtcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXG5cbiAgICBwcm9wZXJ0aWVzOiB7XG5cbiAgICAgICAgaW5wdXROYW1lOlxuICAgICAgICB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuRWRpdEJveCxcbiAgICAgICAgfSxcbiAgICAgICAgdG91eGlhbmcxOlxuICAgICAgICB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuU3ByaXRlLFxuICAgICAgICB9LFxuICAgICAgICB0b3V4aWFuZzI6XG4gICAgICAgIHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5TcHJpdGUsXG4gICAgICAgIH0sXG4gICAgICAgIHRvdXhpYW5nMzpcbiAgICAgICAge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLlNwcml0ZSxcbiAgICAgICAgfSxcbiAgICAgICAgdHh0OlxuICAgICAgICB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuTGFiZWwsXG4gICAgICAgIH0sXG4gICAgfSxcblxuICAgIC8vIOS4iuS8oOinkuiJsuS/oeaBryDliJvlu7rop5LoibJcbiAgICB1cGxvYWRpbmZvOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgc2VsZi5pbmZvLm5hbWUgPSBzZWxmLmlucHV0TmFtZS5zdHJpbmc7XG4gICAgICAgIC8vY2MubG9nKFwi6aqM6K+B6KeS6Imy5L+h5oGv77yaXCIsc2VsZi5pbmZvKTtcbiAgICAgICAgLy9jYy5sb2coXCLpqozor4HpgInkuK3nmoTlpLTlg4/vvJpcIixldmFsKFwic2VsZi50eEZpbGUudHhcIitzZWxmLnR4RmlsZS5mbGFnKSk7XG4gICAgICAgIHZhciBkYXRhSnNvbiA9IHsgJ3JvbGVuYW1lJzogc2VsZi5pbmZvLm5hbWUgfTtcbiAgICAgICAgLy9jYy5sb2coXCLop5LoibLlkI3pqozor4FcXG7lh4blpIfliJvlu7rop5LoibJcIik7XG4gICAgICAgIGFqYXhEYXRhKEh4c2dVcmwuY2hlY2tSb2xlLCBkYXRhSnNvbiwgZnVuY3Rpb24gKG1zZykge1xuICAgICAgICAgICAgY2MubG9nKG1zZyk7XG4gICAgICAgICAgICBpZiAobXNnLmNvZGUgPT0gXCIwMDBcIikge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAobXNnLmRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnMDAwJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdmFyIHR4dXJsID0gZXZhbChcInNlbGYudHhGaWxlLnR4XCIrc2VsZi50eEZpbGUuZmxhZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YUpzb24gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJ6aGl5ZVwiOiBzZWxmLmluZm8uam9iLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicm9sZW5hbWVcIjogc2VsZi5pbmZvLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJzZXhcIjogc2VsZi5pbmZvLnNleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImltZ1wiOiBzZWxmLnR4RmlsZS50eCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImtleXNcIjp1dWlkS2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2MubG9nKFwi5YeG5aSH5byA5aeL5Yib5bu66KeS6ImyOlwiLCBkYXRhSnNvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL+atpOWkhOmcgOimgeS4sOWvjOWGheWuuVxuICAgICAgICAgICAgICAgICAgICAgICAgYWpheERhdGEoSHhzZ1VybC5jcmVhdGVSb2xlLCBkYXRhSnNvbiwgZnVuY3Rpb24gKG1zZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNjLmxvZyhtc2cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtc2cuY29kZSA9PSBcIjAwMFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtc2cuZGF0YSA9PSAnMDAwJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MubG9nKFwi5Yib5bu66KeS6Imy5oiQ5YqfXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZFNjZW5lKEh4c2dTY2VuZXMuaW5kZXgsIEh4c2dTY2VuZXMuaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MubG9nKFwi5Yib5bu66KeS6Imy5aSx6LSlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0FsZXJ0KFwi5Yib5bu66KeS6Imy5aSx6LSlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0FsZXJ0KFwi5pyN5Yqh5Zmo5byC5bi4XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2VuZFxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJzAwMSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBjYy5sb2coXCLop5LoibLlkI3lt7LlrZjlnKjmiJbkuLrnqbpcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93QWxlcnQoXCLop5LoibLlkI3lt7LlrZjlnKjmiJbkuLrnqbpcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcIuWPkeeUn+acquefpemUmeivr1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dBbGVydChcIuazqOWGjOWksei0pe+8jOacquefpemUmeivr++8mlwiICsgbXNnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH0vL2VuZCBzd2l0Y2hcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2hvd0FsZXJ0KFwi5pyN5Yqh5Zmo5byC5bi4XCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgc2VsZi50eHQuc3RyaW5nID0gXCLor7fovpPlhaXmgqjlnKjmuLjmiI/kuK3nmoTlkI3np7BcIlxuXG4gICAgICAgIC8v5L+d5a2Y6KeS6Imy5L+h5oGvXG4gICAgICAgIHNlbGYuaW5mbyA9IG5ldyBPYmplY3QoKTtcbiAgICAgICAgc2VsZi5pbmZvLnR4VXJsID0gJ3Jlc291cmNlcy90b3V4aWFuZy8nO1xuICAgICAgICBzZWxmLmluZm8uc2V4ID0gXCLnlLdcIjtcbiAgICAgICAgc2VsZi5pbmZvLnNleF9mbGcgPSAwO1xuICAgICAgICBzZWxmLmluZm8uam9iID0gXCLmrablo6tcIjtcbiAgICAgICAgc2VsZi5pbmZvLmpvYl9mbGcgPSAwO1xuICAgICAgICBzZWxmLmluZm8ubmFtZSA9ICcnO1xuXG4gICAgICAgIC8v5L+d5a2Y6YCJ5Lit55qE5aS05YOP6Lev5b6EICAgIFxuICAgICAgICBzZWxmLnR4RmlsZSA9IG5ldyBPYmplY3QoKTtcbiAgICAgICAgLy9zZWxmLnR4RmlsZS5mbGFnID0gMTtcbiAgICAgICAgLy9zZWxmLnR4RmlsZS50eDEgPSAnJztcbiAgICAgICAgLy9zZWxmLnR4RmlsZS50eDIgPSAnJztcbiAgICAgICAgc2VsZi50eEZpbGUudHggPSAnJzsvL+S/neWtmOmAieS4reeahOWktOWDj1xuXG4gICAgICAgIC8qIOiOt+WPluaJgOacieaMiemSrue7hOS7tiAqL1xuICAgICAgICBzZWxmLmJ1dHRvbnMgPSBzZWxmLm5vZGUuZ2V0Q29tcG9uZW50c0luQ2hpbGRyZW4oY2MuQnV0dG9uKTtcbiAgICAgICAgc2VsZi5uYW5CdXR0b24gPSB0aGlzLmdldENvbXBvbmVudEJ5Tm9kZU5hbWUoXCJuYW5cIik7XG4gICAgICAgIHNlbGYubnZCdXR0b24gPSB0aGlzLmdldENvbXBvbmVudEJ5Tm9kZU5hbWUoXCJudlwiKTtcbiAgICAgICAgc2VsZi53dXNoaUJ1dHRvbiA9IHRoaXMuZ2V0Q29tcG9uZW50QnlOb2RlTmFtZShcInd1c2hpXCIpO1xuICAgICAgICBzZWxmLndlbnJlbkJ1dHRvbiA9IHRoaXMuZ2V0Q29tcG9uZW50QnlOb2RlTmFtZShcIndlbnJlblwiKTtcbiAgICAgICAgc2VsZi55aXNoaUJ1dHRvbiA9IHRoaXMuZ2V0Q29tcG9uZW50QnlOb2RlTmFtZShcInlpc2hpXCIpO1xuICAgICAgICBzZWxmLnR4MUJ1dHRvbiA9IHRoaXMuZ2V0Q29tcG9uZW50QnlOb2RlTmFtZShcInRvdXhpYW5nMVwiKTtcbiAgICAgICAgc2VsZi50eDJCdXR0b24gPSB0aGlzLmdldENvbXBvbmVudEJ5Tm9kZU5hbWUoXCJ0b3V4aWFuZzJcIik7XG4gICAgICAgIHNlbGYudHgzQnV0dG9uID0gdGhpcy5nZXRDb21wb25lbnRCeU5vZGVOYW1lKFwidG91eGlhbmczXCIpO1xuXG4gICAgICAgIC8v6I635Y+W5aS05YOP5oyJ6ZKu55qE57K+54G157uE5Lu2XG4gICAgICAgIC8vY2MubG9nKHNlbGYudHgxQnV0dG9uLm5vZGUubmFtZSk7XG4gICAgICAgIHNlbGYudG91eGlhbmcxID0gc2VsZi50eDFCdXR0b24ubm9kZS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKTtcblxuICAgICAgICAvKiDliJ3lp4vljJblpLTlg4/nn6npmLUgKi9cbiAgICAgICAgLypcbiAgICAgICAgICAgICstLS0tKy0tLS0tLSstLS0tLSstLS0tLS0rLS0tLS1cbiAgICAgICAgICAgIHwgICAgfCDmrablo6sgfCDmlofkurogfCDlvILlo6sgfFxuICAgICAgICAgICAgKy0tLS0rLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgICAgfCDnlLcgfCAgICAgIHwgICAgICB8ICAgICB8XG4gICAgICAgICAgICArLS0tLSstLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgICAgICB8IOWlsyB8ICAgICAgfCAgICAgIHwgICAgIHxcbiAgICAgICAgICAgICstLS0tKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi50eHRhYmxlID0gbmV3IEFycmF5KG5ldyBBcnJheSgpLCBuZXcgQXJyYXkoKSk7XG5cbiAgICAgICAgc2VsZi50eHRhYmxlWzBdWzBdID0gW2NjLnVybC5yYXcoc2VsZi5pbmZvLnR4VXJsICsgJ3d1c2hpMS5qcGcnKSxcbiAgICAgICAgY2MudXJsLnJhdyhzZWxmLmluZm8udHhVcmwgKyAnd3VzaGkyLmpwZycpLFxuICAgICAgICBjYy51cmwucmF3KHNlbGYuaW5mby50eFVybCArICd3dXNoaTMuanBnJyldO1xuICAgICAgICBzZWxmLnR4dGFibGVbMF1bMV0gPSBbY2MudXJsLnJhdyhzZWxmLmluZm8udHhVcmwgKyAnd2VucmVuMS5qcGcnKSxcbiAgICAgICAgY2MudXJsLnJhdyhzZWxmLmluZm8udHhVcmwgKyAnd2VucmVuMi5qcGcnKSxcbiAgICAgICAgY2MudXJsLnJhdyhzZWxmLmluZm8udHhVcmwgKyAnd2VucmVuMy5qcGcnKV07XG4gICAgICAgIHNlbGYudHh0YWJsZVswXVsyXSA9IFtjYy51cmwucmF3KHNlbGYuaW5mby50eFVybCArICd5aXNoaTEuanBnJyksXG4gICAgICAgIGNjLnVybC5yYXcoc2VsZi5pbmZvLnR4VXJsICsgJ3lpc2hpMi5qcGcnKSxcbiAgICAgICAgY2MudXJsLnJhdyhzZWxmLmluZm8udHhVcmwgKyAneWlzaGkzLmpwZycpXTtcblxuICAgICAgICBzZWxmLnR4dGFibGVbMV1bMF0gPSBbY2MudXJsLnJhdyhzZWxmLmluZm8udHhVcmwgKyAnd3VzaGludjEuanBnJyksXG4gICAgICAgIGNjLnVybC5yYXcoc2VsZi5pbmZvLnR4VXJsICsgJ3d1c2hpbnYyLmpwZycpLFxuICAgICAgICBjYy51cmwucmF3KHNlbGYuaW5mby50eFVybCArICd3dXNoaW52My5qcGcnKV07XG4gICAgICAgIHNlbGYudHh0YWJsZVsxXVsxXSA9IFtjYy51cmwucmF3KHNlbGYuaW5mby50eFVybCArICd3ZW5yZW5udjEuanBnJyksXG4gICAgICAgIGNjLnVybC5yYXcoc2VsZi5pbmZvLnR4VXJsICsgJ3dlbnJlbm52Mi5qcGcnKSxcbiAgICAgICAgY2MudXJsLnJhdyhzZWxmLmluZm8udHhVcmwgKyAnd2VucmVubnYzLmpwZycpXTtcbiAgICAgICAgc2VsZi50eHRhYmxlWzFdWzJdID0gW2NjLnVybC5yYXcoc2VsZi5pbmZvLnR4VXJsICsgJ3lpc2hpbnYxLmpwZycpLFxuICAgICAgICBjYy51cmwucmF3KHNlbGYuaW5mby50eFVybCArICd5aXNoaW52Mi5qcGcnKSxcbiAgICAgICAgY2MudXJsLnJhdyhzZWxmLmluZm8udHhVcmwgKyAneWlzaGludjMuanBnJyldO1xuICAgICAgICBjYy5sb2coc2VsZi50eHRhYmxlKTtcblxuICAgIH0sXG4gICAgLyog6YCa6L+Hbm9kZS5uYW1l6I635Y+W5oyJ6ZKuICovXG4gICAgZ2V0Q29tcG9uZW50QnlOb2RlTmFtZTogZnVuY3Rpb24gKG5vZGVOYW1lKSB7XG4gICAgICAgIC8vY2MubG9nKG5vZGVOYW1lKTtcbiAgICAgICAgLy9jYy5sb2codHlwZU5hbWUpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYnV0dG9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLmJ1dHRvbnNbaV07XG4gICAgICAgICAgICBpZiAoZWxlbWVudC5ub2RlLm5hbWUgPT09IG5vZGVOYW1lKSB7XG4gICAgICAgICAgICAgICAgLyogZW5hYmxlQXV0b0dyYXlFZmZlY3Q9PXRydWXvvIzlvZMgYnV0dG9uIOeahCBpbnRlcmFjdGFibGUg5bGe5oCn5Li6IGZhbHNlIOeahOaXtuWAmVxuICAgICAgICAgICAgICAgIOS8muS9v+eUqOWGhee9riBzaGFkZXIg6K6pIGJ1dHRvbiDnmoQgdGFyZ2V0IOiKgueCueeahCBzcHJpdGUg57uE5Lu25Y+Y54GwICovXG4gICAgICAgICAgICAgICAgZWxlbWVudC5lbmFibGVBdXRvR3JheUVmZmVjdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9LFxuXG5cbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWVcbiAgICAvKlxuICAgIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XG4gICAgICAgIFxuICAgIH0sXG4gICAgKi9cbiAgICB1cGRhdGV0eDogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIHNleF9mbGcgPSBzZWxmLmluZm8uc2V4X2ZsZztcbiAgICAgICAgdmFyIGpvYl9mbGcgPSBzZWxmLmluZm8uam9iX2ZsZztcbiAgICAgICAgLy8g5pu05paw5aS05YOPXG4gICAgICAgIGNjLmxvZyhzZWxmLnR4dGFibGVbc2V4X2ZsZ11bam9iX2ZsZ11bMF0pO1xuICAgICAgICBjYy5sb2coc2VsZi50eHRhYmxlW3NleF9mbGddW2pvYl9mbGddWzFdKTtcbiAgICAgICAgY2MubG9nKHNlbGYudHh0YWJsZVtzZXhfZmxnXVtqb2JfZmxnXVsyXSk7XG5cbiAgICAgICAgc2VsZi50b3V4aWFuZzEuc3ByaXRlRnJhbWUuc2V0VGV4dHVyZShzZWxmLnR4dGFibGVbc2V4X2ZsZ11bam9iX2ZsZ11bMF0pO1xuICAgICAgICBzZWxmLnRvdXhpYW5nMi5zcHJpdGVGcmFtZS5zZXRUZXh0dXJlKHNlbGYudHh0YWJsZVtzZXhfZmxnXVtqb2JfZmxnXVsxXSk7XG4gICAgICAgIHNlbGYudG91eGlhbmczLnNwcml0ZUZyYW1lLnNldFRleHR1cmUoc2VsZi50eHRhYmxlW3NleF9mbGddW2pvYl9mbGddWzJdKTtcblxuICAgICAgICAvL3NlbGYudG91eGlhbmcxLnNwcml0ZUZyYW1lLmVuc3VyZUxvYWRUZXh0dXJlKCk7XG4gICAgICAgIC8v6LCD6K+V5Luj56CBXG4gICAgICAgIC8qXG4gICAgICAgICAgICAgICAgdmFyIHVybCA9IHNlbGYuaW5mby50eFVybCArIFwieWlzaGkxXCI7ICBcbiAgICAgICAgICAgICAgICBjYy5sb2FkZXIubG9hZFJlcyhzZWxmLnR4dGFibGVbc2V4X2ZsZ11bam9iX2ZsZ11bMF0sIGZ1bmN0aW9uIChlcnIsIHNwcml0ZUZyYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmKCFlcnIgJiYgc3ByaXRlRnJhbWUpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcImRzZHNcIik7XG4gICAgICAgICAgICAgICAgICAgIC8vdmFyIG5vZGUgPSBuZXcgY2MuTm9kZShcIk5ldyBTcHJpdGVcIik7XG4gICAgICAgICAgICAgICAgICAgIC8vdmFyIHNwcml0ZSA9IG5vZGUuYWRkQ29tcG9uZW50KGNjLlNwcml0ZSk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYudG91eGlhbmcxLnNwcml0ZUZyYW1lID0gc3ByaXRlRnJhbWU7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYudG91eGlhbmcyLnNwcml0ZUZyYW1lID0gc3ByaXRlRnJhbWU7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYudG91eGlhbmczLnNwcml0ZUZyYW1lID0gc3ByaXRlRnJhbWU7XG4gICAgICAgICAgICAgICAgICAgIC8vbm9kZS5wYXJlbnQgPSBzZWxmLm5vZGVcbiAgICAgICAgICAgICAgICAgICAgLy9zZWxmLnRvdXhpYW5nMS5zcHJpdGVGcmFtZS5lbnN1cmVMb2FkVGV4dHVyZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICghc3ByaXRlRnJhbWUpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2MubG9nKFwieHh4eFwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAqL1xuICAgICAgICAvL+iwg+ivleS7o+eggSBlbmRcblxuICAgIH0sXG4gICAgLy/ovpPlhaXmoYblm57osINcbiAgICBpbnB1dENLOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgc2VsZi50eHQuc3RyaW5nID0gXCLor7fovpPlhaXmgqjlnKjmuLjmiI/kuK3nmoTlkI3np7BcIlxuICAgIH0sXG5cbiAgICAvL+eUt+aMiemSrlxuICAgIG5hbkJ1dHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBzZWxmLmluZm8uc2V4ID0gXCLnlLdcIjtcbiAgICAgICAgc2VsZi5pbmZvLnNleF9mbGcgPSAwO1xuICAgICAgICBzZWxmLnR4dC5zdHJpbmcgPSBcIuivt+mAieaLqeWcqOa4uOaIj+S4reinkuiJsueahOaAp+WIq1wiXG5cbiAgICAgICAgc2VsZi5uYW5CdXR0b24uaW50ZXJhY3RhYmxlID0gZmFsc2U7XG4gICAgICAgIHNlbGYubnZCdXR0b24uaW50ZXJhY3RhYmxlID0gdHJ1ZTtcblxuICAgICAgICBzZWxmLnVwZGF0ZXR4KCk7XG5cbiAgICB9LFxuICAgIC8v5aWz5oyJ6ZKuXG4gICAgbnZCdXR0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgc2VsZi5pbmZvLnNleCA9IFwi5aWzXCI7XG4gICAgICAgIHNlbGYuaW5mby5zZXhfZmxnID0gMTtcbiAgICAgICAgc2VsZi50eHQuc3RyaW5nID0gXCLor7fpgInmi6nlnKjmuLjmiI/kuK3op5LoibLnmoTmgKfliKtcIlxuXG4gICAgICAgIHNlbGYubnZCdXR0b24uaW50ZXJhY3RhYmxlID0gZmFsc2U7XG4gICAgICAgIHNlbGYubmFuQnV0dG9uLmludGVyYWN0YWJsZSA9IHRydWU7XG5cbiAgICAgICAgc2VsZi51cGRhdGV0eCgpO1xuXG4gICAgfSxcbiAgICAvL+atpuWjq1xuICAgIHd1c2hpQnV0dDogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHNlbGYuaW5mby5qb2IgPSBcIuatpuWjq1wiO1xuICAgICAgICBzZWxmLmluZm8uam9iX2ZsZyA9IDA7XG4gICAgICAgIHNlbGYudHh0LnN0cmluZyA9IFwi6K+36YCJ5oup5Zyo5ri45oiP5Lit6KeS6Imy55qE6IGM5LiaXCJcblxuICAgICAgICBzZWxmLnd1c2hpQnV0dG9uLmludGVyYWN0YWJsZSA9IGZhbHNlO1xuICAgICAgICBzZWxmLndlbnJlbkJ1dHRvbi5pbnRlcmFjdGFibGUgPSB0cnVlO1xuICAgICAgICBzZWxmLnlpc2hpQnV0dG9uLmludGVyYWN0YWJsZSA9IHRydWU7XG5cbiAgICAgICAgc2VsZi51cGRhdGV0eCgpO1xuXG4gICAgfSxcbiAgICAvL+aWh+S6ulxuICAgIHdlbnJlbkJ1dHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBzZWxmLmluZm8uam9iID0gXCLmlofkurpcIjtcbiAgICAgICAgc2VsZi5pbmZvLmpvYl9mbGcgPSAxO1xuICAgICAgICBzZWxmLnR4dC5zdHJpbmcgPSBcIuivt+mAieaLqeWcqOa4uOaIj+S4reinkuiJsueahOiBjOS4mlwiXG5cbiAgICAgICAgc2VsZi53dXNoaUJ1dHRvbi5pbnRlcmFjdGFibGUgPSB0cnVlO1xuICAgICAgICBzZWxmLndlbnJlbkJ1dHRvbi5pbnRlcmFjdGFibGUgPSBmYWxzZTtcbiAgICAgICAgc2VsZi55aXNoaUJ1dHRvbi5pbnRlcmFjdGFibGUgPSB0cnVlO1xuXG4gICAgICAgIHNlbGYudXBkYXRldHgoKTtcbiAgICB9LFxuICAgIC8v5byC5aOrXG4gICAgeWlzaGlCdXR0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgc2VsZi5pbmZvLmpvYiA9IFwi5byC5Lq6XCI7XG4gICAgICAgIHNlbGYuaW5mby5qb2JfZmxnID0gMjtcbiAgICAgICAgc2VsZi50eHQuc3RyaW5nID0gXCLor7fpgInmi6nlnKjmuLjmiI/kuK3op5LoibLnmoTogYzkuJpcIlxuXG4gICAgICAgIHNlbGYud3VzaGlCdXR0b24uaW50ZXJhY3RhYmxlID0gdHJ1ZTtcbiAgICAgICAgc2VsZi53ZW5yZW5CdXR0b24uaW50ZXJhY3RhYmxlID0gdHJ1ZTtcbiAgICAgICAgc2VsZi55aXNoaUJ1dHRvbi5pbnRlcmFjdGFibGUgPSBmYWxzZTtcblxuICAgICAgICBzZWxmLnVwZGF0ZXR4KCk7XG5cbiAgICB9LFxuICAgIC8v5aS05YOPMemAieS4rVxuICAgIHR4MUJ1dHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgc2V4X2ZsZyA9IHNlbGYuaW5mby5zZXhfZmxnO1xuICAgICAgICB2YXIgam9iX2ZsZyA9IHNlbGYuaW5mby5qb2JfZmxnO1xuICAgICAgICAvLyDmm7TmlrDlpLTlg49cbiAgICAgICAgY2MubG9nKHNlbGYudHh0YWJsZVtzZXhfZmxnXVtqb2JfZmxnXVswXSk7XG4gICAgICAgIHNlbGYudHhGaWxlLnR4ID0gc2VsZi50eHRhYmxlW3NleF9mbGddW2pvYl9mbGddWzBdO1xuXG4gICAgICAgIHNlbGYudHh0LnN0cmluZyA9IFwi6K+36YCJ5oup5Zyo5ri45oiP5Lit6KeS6Imy55qE5aS05YOPXCJcbiAgICAgICAgc2VsZi50eDFCdXR0b24uaW50ZXJhY3RhYmxlID0gZmFsc2U7XG4gICAgICAgIHNlbGYudHgyQnV0dG9uLmludGVyYWN0YWJsZSA9IHRydWU7XG4gICAgICAgIHNlbGYudHgzQnV0dG9uLmludGVyYWN0YWJsZSA9IHRydWU7XG5cbiAgICB9LFxuICAgIC8v5aS05YOPMumAieS4rVxuICAgIHR4MkJ1dHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgc2V4X2ZsZyA9IHNlbGYuaW5mby5zZXhfZmxnO1xuICAgICAgICB2YXIgam9iX2ZsZyA9IHNlbGYuaW5mby5qb2JfZmxnO1xuICAgICAgICBjYy5sb2coc2VsZi50eHRhYmxlW3NleF9mbGddW2pvYl9mbGddWzFdKTtcbiAgICAgICAgc2VsZi50eEZpbGUudHggPSBzZWxmLnR4dGFibGVbc2V4X2ZsZ11bam9iX2ZsZ11bMV07XG5cbiAgICAgICAgc2VsZi50eHQuc3RyaW5nID0gXCLor7fpgInmi6nlnKjmuLjmiI/kuK3op5LoibLnmoTlpLTlg49cIlxuICAgICAgICBzZWxmLnR4MUJ1dHRvbi5pbnRlcmFjdGFibGUgPSB0cnVlO1xuICAgICAgICBzZWxmLnR4MkJ1dHRvbi5pbnRlcmFjdGFibGUgPSBmYWxzZTtcbiAgICAgICAgc2VsZi50eDNCdXR0b24uaW50ZXJhY3RhYmxlID0gdHJ1ZTtcblxuICAgIH0sXG4gICAgLy/lpLTlg48z6YCJ5LitXG4gICAgdHgzQnV0dDogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBzZXhfZmxnID0gc2VsZi5pbmZvLnNleF9mbGc7XG4gICAgICAgIHZhciBqb2JfZmxnID0gc2VsZi5pbmZvLmpvYl9mbGc7XG4gICAgICAgIGNjLmxvZyhzZWxmLnR4dGFibGVbc2V4X2ZsZ11bam9iX2ZsZ11bMl0pO1xuICAgICAgICBzZWxmLnR4RmlsZS50eCA9IHNlbGYudHh0YWJsZVtzZXhfZmxnXVtqb2JfZmxnXVsyXTtcblxuICAgICAgICBzZWxmLnR4dC5zdHJpbmcgPSBcIuivt+mAieaLqeWcqOa4uOaIj+S4reinkuiJsueahOWktOWDj1wiXG4gICAgICAgIHNlbGYudHgxQnV0dG9uLmludGVyYWN0YWJsZSA9IHRydWU7XG4gICAgICAgIHNlbGYudHgyQnV0dG9uLmludGVyYWN0YWJsZSA9IHRydWU7XG4gICAgICAgIHNlbGYudHgzQnV0dG9uLmludGVyYWN0YWJsZSA9IGZhbHNlO1xuXG4gICAgfSxcbn0pOyIsIi8vdmFyIFdTID0gcmVxdWlyZSgnc2VydmVyU2V0dXAuanMnKTtcclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBhY2NvdW50OiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLkVkaXRCb3gsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwYXNzOiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLkVkaXRCb3gsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwYXNzMjoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5FZGl0Qm94LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3VwcGFzczoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5FZGl0Qm94LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3VwcGFzczI6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuRWRpdEJveCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlZ0luZm86IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcclxuICAgICAgICAgICAgdHlwZTogY2MuTGFiZWwsXHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnJlZ0luZm8uc3RyaW5nID0gJyc7XHJcblxyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLy/ms6jlhozmjInpkq5cclxuICAgIHpodWNlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy/ojrflj5bms6jlhozkv6Hmga9cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGFjY291bnQgPSB0aGlzLmFjY291bnQuc3RyaW5nO1xyXG4gICAgICAgIHZhciBwYXNzID0gdGhpcy5wYXNzLnN0cmluZztcclxuICAgICAgICB2YXIgcGFzczIgPSB0aGlzLnBhc3MyLnN0cmluZztcclxuICAgICAgICB2YXIgc3VwcGFzcyA9IHRoaXMuc3VwcGFzcy5zdHJpbmc7XHJcbiAgICAgICAgdmFyIHN1cHBhc3MyID0gdGhpcy5zdXBwYXNzMi5zdHJpbmc7XHJcbiAgICAgICAgLy/liKTmlq3lr4bnoIHkuIDoh7TmgKfvvIjmmK/lkKborr7nva7lr4bnoIHkuI7otoXnuqflr4bnoIHkuI3lkIzvvJ/vvIlcclxuICAgICAgICBpZiAocGFzcyAhPT0gcGFzczIpIHtcclxuICAgICAgICAgICAgc2hvd0FsZXJ0KFwi5Lik5qyh5a+G56CB5LiN5LiA6Ie0XCIpO1xyXG4gICAgICAgICAgICAvL3RoaXMucmVnSW5mby5zdHJpbmcgPSBcIuS4pOasoeWvhueggeS4jeS4gOiHtFwiO1xyXG4gICAgICAgICAgICBwYXNzMi5zdHJpbmcgPSBcIlwiO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzdXBwYXNzICE9PSBzdXBwYXNzMikge1xyXG4gICAgICAgICAgICBzaG93QWxlcnQoXCLkuKTmrKHotoXnuqflr4bnoIHkuI3kuIDoh7RcIik7XHJcbiAgICAgICAgICAgIC8vdGhpcy5yZWdJbmZvLnN0cmluZyA9IFwi5Lik5qyh6LaF57qn5a+G56CB5LiN5LiA6Ie0XCI7XHJcbiAgICAgICAgICAgIHN1cHBhc3MyLnN0cmluZyA9IFwiXCI7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNjLmxvZyhhY2NvdW50KTtcclxuICAgICAgICBjYy5sb2cocGFzcyArIFwiPT1cIiArIHBhc3MyKTtcclxuICAgICAgICBjYy5sb2coc3VwcGFzcyArIFwiPT1cIiArIHN1cHBhc3MyKTtcclxuXHJcbiAgICAgICAgdmFyIGRhdGFKc29uID0geyBcIm5hbWVcIjogYWNjb3VudCB9O1xyXG4gICAgICAgIC8v5qOA5rWL6LSm5Y+36YeN5ZCNXHJcbiAgICAgICAgYWpheERhdGEoSHhzZ1VybC5jaGVja0Fjb3VudCwgZGF0YUpzb24sIGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICAgICAgaWYgKG1zZy5jb2RlID09IFwiMDAwXCIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChtc2cuZGF0YSA9PT0gXCIwMDFcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHNob3dBbGVydChcIui0puWPt+W3suWtmOWcqFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAvL3NlbGYucmVnSW5mby5zdHJpbmcgPSBcIui0puWPt+W3suWtmOWcqFwiXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5hY2NvdW50LnN0cmluZyA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy/lhYHorrjms6jlhowgXHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChtc2cuZGF0YSA9PT0gXCIwMDBcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcIui0puWPt+azqOWGjOW8gOWni1wiKTtcclxuICAgICAgICAgICAgICAgICAgICBjYy5sb2coYWNjb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MubG9nKHBhc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZyhzdXBwYXNzKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YUpzb24gPSB7IFwibmFtZVwiOiBhY2NvdW50LCBcInBhc3N3b3JkXCI6IHBhc3MsIFwic3VwcGVycGFzc1wiOiBzdXBwYXNzIH07XHJcbiAgICAgICAgICAgICAgICAgICAgLy/ms6jlhozotKblj7dcclxuICAgICAgICAgICAgICAgICAgICBhamF4RGF0YShIeHNnVXJsLnJlZ2lzdGVyLCBkYXRhSnNvbiwgZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYy5sb2cobXNnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1zZy5jb2RlID09IFwiMDAwXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtc2cuZGF0YSA9PT0gXCIwMDBcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcIuazqOWGjOaIkOWKn++8jOi3s+i9rOWIsOinkuiJsuWIm+W7uueVjOmdolwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93QWxlcnQoXCLmga3llpzmgqjms6jlhozmiJDlip9cIiwgZnVuY3Rpb24gKCkgeyBsb2FkU2NlbmUoXCJsb2dpblwiLCBcInJlZ2lzdGVyXCIpOyB9LCBmdW5jdGlvbiAoKSB7IGxvYWRTY2VuZShcImxvZ2luXCIsIFwicmVnaXN0ZXJcIik7IH0pXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY2MuZGlyZWN0b3IubG9hZFNjZW5lKCdjcmVhdGVSb2xlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChtc2cuZGF0YSA9PT0gXCIwMDFcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcIuazqOWGjOWksei0pVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93QWxlcnQobXNnLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dBbGVydChcIuacquefpemUmeivr++8jOazqOWGjOWksei0pe+8mm1zZ++8mlwiICsgbXNnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYy5sb2coXCLmnKrnn6XplJnor69cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93QWxlcnQoXCLmnI3liqHlmajlvILluLhcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzaG93QWxlcnQoXCLmnI3liqHlmajlvILluLhcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8v6L+U5Zue55m75YWl55WM6Z2iXHJcbiAgICBjb21lQmFjazogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxvYWRTY2VuZShcImxvZ2luXCIsIFwicmVnaXN0ZXJcIik7XHJcbiAgICAgICAgLy9jYy5kaXJlY3Rvci5sb2FkU2NlbmUoJ2xvZ2luJyk7XHJcbiAgICB9LFxyXG59KTtcclxuIiwiY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICB1c2VybmFtZToge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5FZGl0Qm94LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcGFzczoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5FZGl0Qm94LFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgLy90ZXN0OjIyLFxyXG4gICAgICAgIC8vcHJlc3NlZFNjYWxlOiAxLFxyXG4gICAgICAgIC8vdHJhbnNEdXJhdGlvbjogMCwgXHJcbiAgICB9LFxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgXHJcbiAgICAgICBcclxuICAgICAgICAvLyB2YXIga2V5PSB1dWlkKDE2LDM2KTtcclxuICAgICAgICAvLyB1dWlkS2V5PWtleTtcclxuICAgICAgICB2YXIgYW5pbSA9IHRoaXMuZ2V0Q29tcG9uZW50KGNjLkFuaW1hdGlvbik7XHJcbiAgICAgICAgLy8g5aaC5p6c5rKh5pyJ5oyH5a6a5pKt5pS+5ZOq5Liq5Yqo55S777yM5bm25LiU5pyJ6K6+572uIGRlZmF1bHRDbGlwIOeahOivne+8jOWImeS8muaSreaUviBkZWZhdWx0Q2xpcCDliqjnlLtcclxuICAgICAgICBhbmltLnBsYXkoKTtcclxuICAgICAgICAvLyDmjIflrprmkq3mlL4gdGVzdCDliqjnlLtcclxuICAgICAgICBhbmltLnBsYXkoJ3N5c3RlbScpO1xyXG4gICAgICAgIHRoaXMuY2hlY2soKTtcclxuXHJcbiAgICAgICAgIFxyXG4gICAgfSxcclxuICAgIHN0YXJ0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ2hhbmdlIHRoZSB0ZXh0IGluIExhYmVsIENvbXBvbmVudCAgICBcclxuICAgIH0sXHJcbiAgICBjaGVjazpmdW5jdGlvbigpe1xyXG4gICAgICAgICAgYWpheFV0aWxzKEh4c2dVcmwuY2hlY2tWZXJzaW9uLG51bGwsZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgIGlmKGRhdGE9PVwiMVwiKXtcclxuICAgICAgICAgICAgICAgIHNob3dBbGVydChcIuajgOa1i+WIsOacieaWsOeahOeJiOacrO+8gXHnvqQ0NTU4OTU2NzPkuIvovb1cIixmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmRpcmVjdG9yLmVuZCgpXHJcbiAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MuZGlyZWN0b3IuZW5kKClcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgIGlmKGRhdGE9PVwiMlwiKXtcclxuICAgICAgICAgICAgICAgIHNob3dBbGVydChcIuWBnOacjee7tOaKpOS4re+8gXHnvqQ0NTU4OTU2NzNcIixmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmRpcmVjdG9yLmVuZCgpXHJcbiAgICAgICAgICAgICAgICB9LGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MuZGlyZWN0b3IuZW5kKClcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSxcclxuICAgIC8v55m75YWl5oyJ6ZKuXHJcbiAgICBsb2dpbjogZnVuY3Rpb24gKCkge1xyXG4gXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIC8v6I635Y+W55So5oi36L6T5YWlICAgICAgICAgXHJcbiAgICAgICAgdmFyIG5hbWUgPSBzZWxmLnVzZXJuYW1lLnN0cmluZztcclxuICAgICAgICB2YXIgcGFzcyA9IHNlbGYucGFzcy5zdHJpbmc7XHJcbiAgICAgICAgLy/nqbrmlbDmja7mi6bmiKpcclxuICAgICAgICBpZiAobmFtZSA9PT0gbnVsbCB8fCBuYW1lID09PSB1bmRlZmluZWQgfHwgbmFtZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgc2hvd0FsZXJ0KCfor7fovpPlhaXnlKjmiLflkI0nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocGFzcyA9PT0gbnVsbCB8fCBwYXNzID09PSB1bmRlZmluZWQgfHwgcGFzcyA9PT0gJycpIHtcclxuICAgICAgICAgICAgc2hvd0FsZXJ0KCfor7fovpPlhaXlr4bnoIEnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYy5sb2cobmFtZSwgcGFzcyk7XHJcbiAgICAgICAgLy/mlY/mhJ/or43mo4DmtYsg77yfXHJcbiAgICAgICAgdmFyIGRhdGFKc29uID0geyBcIm5hbWVcIjogbmFtZSwgXCJwYXNzd29yZFwiOiBwYXNzLCBcImtleVwiOiB1dWlkS2V5IH07XHJcbiAgICAgICAgYWpheERhdGEoSHhzZ1VybC5sb2dpbiwgZGF0YUpzb24sIGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICAgICAgaWYgKG1zZy5jb2RlID09IFwiMDAwXCIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChtc2cuZGF0YSA9PT0gXCIwMDVcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcIui3s+i9rOWIsOmAieaLqeinkuiJsueVjOmdolwiKTtcclxuICAgICAgICAgICAgICAgICAgICAvL+i3s+i9rOWIsOmAieaLqeeVjOmdolxyXG4gICAgICAgICAgICAgICAgICAgIGxvYWRTY2VuZSgnc2VsZWN0Um9sZScsICdsb2dpbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vY2MuZGlyZWN0b3IubG9hZFNjZW5lKCdzY2VuZXMvbG9naW4vc2VsZWN0Um9sZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobXNnLmRhdGEgPT09IFwiMDAzXCIpIHsvL+WIm+W7uuinkuiJslxyXG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcIui3s+i9rOWIsOWIm+W7uuinkuiJsueVjOmdolwiKTtcclxuICAgICAgICAgICAgICAgICAgICBsb2FkU2NlbmUoJ3NlbGVjdFJvbGUnLCAnbG9naW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAvL2NjLmRpcmVjdG9yLmxvYWRTY2VuZSgnc2NlbmVzL2xvZ2luL2NyZWF0ZVJvbGUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1zZy5kYXRhID09PSBcIjAwMVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MubG9nKFwi55m75YWl5aSx6LSlXCIgKyBtc2cubXNnKTtcclxuICAgICAgICAgICAgICAgICAgICBzaG93QWxlcnQoJ+eUqOaIt+WQjeaIluiAheWvhueggemUmeivrycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAobXNnLmRhdGEgPT09IFwiMDAyXCIpIHsvL+acjeWKoeWZqOW8guW4uFxyXG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcIueZu+WFpeWksei0pVwiICsgbXNnLm1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd0FsZXJ0KCfnlKjmiLflkI3miJbogIXlr4bnoIHplJnor68nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcIuacquWumuS5iemUmeivr1wiICsgbXNnLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNob3dBbGVydCgn5Y+R55Sf5pyq55+l6ZSZ6K+vJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzaG93QWxlcnQoJ+acjeWKoeWZqOW8guW4uCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICAvL+azqOWGjOaMiemSriDlm57osIPlh73mlbBcclxuICAgIHJlZ2lzdGVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbG9hZFNjZW5lKCdyZWdpc3RlcicsICdsb2dpbicpO1xyXG4gICAgICAgIC8vY2MuZGlyZWN0b3IubG9hZFNjZW5lKCdyZWdpc3RlcicpO1xyXG4gICAgfSxcclxufSk7XHJcbiIsIlxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIGNpdHlOYW1lOiBjYy5MYWJlbCxcclxuICAgICAgICB6dW9CaWFvOiBjYy5TcHJpdGUsXHJcbiAgICAgICAgIG1vdmUyOiBjYy5TcHJpdGUsXHJcbiAgICAgICAgY2l0eUltZzogY2MuU3ByaXRlLFxyXG4gICAgICAgIHp1b0JpYW9MaXN0OiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5TcHJpdGVGcmFtZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2l0eUltZ0xpc3Q6IHtcclxuICAgICAgICAgICAgZGVmYXVsdDogW10sXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLlNwcml0ZUZyYW1lXHJcbiAgICAgICAgfSxcclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgfSxcclxuICAgIGluaXQ6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLmNpdHlOYW1lLnN0cmluZyA9IG1zZy5uYW1lO1xyXG4gICAgICAgICAgICB0aGlzLnp1b0JpYW8uc3ByaXRlRnJhbWUgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLmNpdHlJbWcuc3ByaXRlRnJhbWUgPSBudWxsO1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTUpO1xyXG4gICAgICAgICAgICBjYy5sb2coJ2tleScgKyBrZXkpXHJcbiAgICAgICAgICAgIHRoaXMuY2l0eUltZy5zcHJpdGVGcmFtZSA9IHRoaXMuY2l0eUltZ0xpc3Rba2V5XTtcclxuICAgICAgICAgICAgaWYgKG1zZy5udW0gIT0gNCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy56dW9CaWFvLnNwcml0ZUZyYW1lID0gdGhpcy56dW9CaWFvTGlzdFttc2cubnVtXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY2MubG9nKCfliqDovb3lnLDlm77kv6Hmga/lvILluLg6JyArIGUpXHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgfSxcclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJcclxudmFyIHNlbGY7XHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgZ2o6IGNjLkxhYmVsLFxyXG4gICAgICAgIHN1OiBjYy5MYWJlbCxcclxuICAgICAgICBxeDogY2MuUmljaFRleHQsXHJcbiAgICAgICAgamw6IGNjLlJpY2hUZXh0LFxyXG4gICAgICAgIC8vIGZvbzoge1xyXG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub2RlIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcclxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICB2aXNpYmxlOiB0cnVlLCAgICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXHJcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gLi4uXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgbG9hZENvbW1vbVNjZW5jZSgpO1xyXG4gICAgICAgIHRoaXMuaW5pdCgpO1xyXG4gICAgICAgIHRoaXMuaW5pdERhdGEoKTtcclxuXHJcbiAgICB9LFxyXG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFqYXhEYXRhKEh4c2dVcmwubXlaaHVhbmdCZWksIG51bGwsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmIChcIjAwMFwiID09IGRhdGEuY29kZSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGFyckpzb24gPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyckpzb24ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgd3VxaVR5cGUgPSBhcnJKc29uW2ldLnd1cWlUeXBlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAod3VxaVR5cGUuaW5kZXhPZihcIuatplwiKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjLmxvYWRlci5sb2FkUmVzKCdwcmVmYWJzL3piSWNvbicsIGNjLlByZWZhYiwgZnVuY3Rpb24gKGVyciwgcHJlZmFiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgemJJY29uID0gY2MuaW5zdGFudGlhdGUocHJlZmFiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcHJpdGUgPSB6Ykljb24uZ2V0Q29tcG9uZW50KCdjYy5TcHJpdGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v572R57uc5Yqg6L295Zu+54mHXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYy5sb2FkZXIubG9hZChpbWdVcmwgKyBhcnJKc29uW2ldLmltZ1VybCwgZnVuY3Rpb24gKGVycm9yLCB0ZXh0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ByaXRlLnNwcml0ZUZyYW1lID0gbmV3IGNjLlNwcml0ZUZyYW1lKHRleHR1cmUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgemJJY29uLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpoYXVuZ0JlaURldGFpbHNaYmlkLmlkID0gYXJySnNvbltpXS5pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYy5sb2coXCLmrablmajor6bmg4U6XCIgKyBhcnJKc29uW2ldLmlkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmdTY2VuZShIeHNnU2NlbmVzLnpodWFuZ2JlaSwgSHhzZ1NjZW5lcy5teVpodWFuZ0JlaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNjLmZpbmQoJ0NhbnZhcy93dXFpJykuYWRkQ2hpbGQoemJJY29uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh3dXFpVHlwZS5pbmRleE9mKFwi6Z20XCIpID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2MubG9hZGVyLmxvYWRSZXMoJ3ByZWZhYnMvemJJY29uJywgY2MuUHJlZmFiLCBmdW5jdGlvbiAoZXJyLCBwcmVmYWIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB6Ykljb24gPSBjYy5pbnN0YW50aWF0ZShwcmVmYWIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNwcml0ZSA9IHpiSWNvbi5nZXRDb21wb25lbnQoJ2NjLlNwcml0ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nvZHnu5zliqDovb3lm77niYdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNjLmxvYWRlci5sb2FkKGltZ1VybCArIGFyckpzb25baV0uaW1nVXJsLCBmdW5jdGlvbiAoZXJyb3IsIHRleHR1cmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJpdGUuc3ByaXRlRnJhbWUgPSBuZXcgY2MuU3ByaXRlRnJhbWUodGV4dHVyZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB6Ykljb24ub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgemhhdW5nQmVpRGV0YWlsc1piaWQuaWQgPSBhcnJKc29uW2ldLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmdTY2VuZShIeHNnU2NlbmVzLnpodWFuZ2JlaSwgSHhzZ1NjZW5lcy5teVpodWFuZ0JlaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNjLmZpbmQoJ0NhbnZhcy94aWV6aScpLmFkZENoaWxkKHpiSWNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHd1cWlUeXBlLmluZGV4T2YoXCLpk75cIikgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYy5sb2FkZXIubG9hZFJlcygncHJlZmFicy96Ykljb24nLCBjYy5QcmVmYWIsIGZ1bmN0aW9uIChlcnIsIHByZWZhYikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHpiSWNvbiA9IGNjLmluc3RhbnRpYXRlKHByZWZhYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ByaXRlID0gemJJY29uLmdldENvbXBvbmVudCgnY2MuU3ByaXRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+e9kee7nOWKoOi9veWbvueJh1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MubG9hZGVyLmxvYWQoaW1nVXJsICsgYXJySnNvbltpXS5pbWdVcmwsIGZ1bmN0aW9uIChlcnJvciwgdGV4dHVyZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcml0ZS5zcHJpdGVGcmFtZSA9IG5ldyBjYy5TcHJpdGVGcmFtZSh0ZXh0dXJlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpiSWNvbi5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6aGF1bmdCZWlEZXRhaWxzWmJpZC5pZCA9IGFyckpzb25baV0uaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZ1NjZW5lKEh4c2dTY2VuZXMuemh1YW5nYmVpLCBIeHNnU2NlbmVzLm15Wmh1YW5nQmVpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MuZmluZCgnQ2FudmFzL3hpYW5saWFuJykuYWRkQ2hpbGQoemJJY29uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHd1cWlUeXBlLmluZGV4T2YoXCLohZVcIikgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYy5sb2FkZXIubG9hZFJlcygncHJlZmFicy96Ykljb24nLCBjYy5QcmVmYWIsIGZ1bmN0aW9uIChlcnIsIHByZWZhYikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHpiSWNvbiA9IGNjLmluc3RhbnRpYXRlKHByZWZhYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ByaXRlID0gemJJY29uLmdldENvbXBvbmVudCgnY2MuU3ByaXRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+e9kee7nOWKoOi9veWbvueJh1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MubG9hZGVyLmxvYWQoaW1nVXJsICsgYXJySnNvbltpXS5pbWdVcmwsIGZ1bmN0aW9uIChlcnJvciwgdGV4dHVyZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcml0ZS5zcHJpdGVGcmFtZSA9IG5ldyBjYy5TcHJpdGVGcmFtZSh0ZXh0dXJlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpiSWNvbi5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6aGF1bmdCZWlEZXRhaWxzWmJpZC5pZCA9IGFyckpzb25baV0uaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZ1NjZW5lKEh4c2dTY2VuZXMuemh1YW5nYmVpLCBIeHNnU2NlbmVzLm15Wmh1YW5nQmVpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MuZmluZCgnQ2FudmFzL2h1d2FuJykuYWRkQ2hpbGQoemJJY29uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHd1cWlUeXBlLmluZGV4T2YoXCLnm5RcIikgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYy5sb2FkZXIubG9hZFJlcygncHJlZmFicy96Ykljb24nLCBjYy5QcmVmYWIsIGZ1bmN0aW9uIChlcnIsIHByZWZhYikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHpiSWNvbiA9IGNjLmluc3RhbnRpYXRlKHByZWZhYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ByaXRlID0gemJJY29uLmdldENvbXBvbmVudCgnY2MuU3ByaXRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+e9kee7nOWKoOi9veWbvueJh1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MubG9hZGVyLmxvYWQoaW1nVXJsICsgYXJySnNvbltpXS5pbWdVcmwsIGZ1bmN0aW9uIChlcnJvciwgdGV4dHVyZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcml0ZS5zcHJpdGVGcmFtZSA9IG5ldyBjYy5TcHJpdGVGcmFtZSh0ZXh0dXJlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpiSWNvbi5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6aGF1bmdCZWlEZXRhaWxzWmJpZC5pZCA9IGFyckpzb25baV0uaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9hZGluZ1NjZW5lKEh4c2dTY2VuZXMuemh1YW5nYmVpLCBIeHNnU2NlbmVzLm15Wmh1YW5nQmVpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MuZmluZCgnQ2FudmFzL3RvdScpLmFkZENoaWxkKHpiSWNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh3dXFpVHlwZS5pbmRleE9mKFwi55SyXCIpID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2MubG9hZGVyLmxvYWRSZXMoJ3ByZWZhYnMvemJJY29uJywgY2MuUHJlZmFiLCBmdW5jdGlvbiAoZXJyLCBwcmVmYWIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB6Ykljb24gPSBjYy5pbnN0YW50aWF0ZShwcmVmYWIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNwcml0ZSA9IHpiSWNvbi5nZXRDb21wb25lbnQoJ2NjLlNwcml0ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nvZHnu5zliqDovb3lm77niYdcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNjLmxvYWRlci5sb2FkKGltZ1VybCArIGFyckpzb25baV0uaW1nVXJsLCBmdW5jdGlvbiAoZXJyb3IsIHRleHR1cmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcHJpdGUuc3ByaXRlRnJhbWUgPSBuZXcgY2MuU3ByaXRlRnJhbWUodGV4dHVyZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB6Ykljb24ub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgemhhdW5nQmVpRGV0YWlsc1piaWQuaWQgPSBhcnJKc29uW2ldLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRpbmdTY2VuZShIeHNnU2NlbmVzLnpodWFuZ2JlaSwgSHhzZ1NjZW5lcy5teVpodWFuZ0JlaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNjLmZpbmQoJ0NhbnZhcy9nYWlqaWEnKS5hZGRDaGlsZCh6Ykljb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzaG93QWxlcnQoXCLns7vnu5/plJnor68hXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICB9LFxyXG4gICAgaW5pdERhdGE6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBhamF4RGF0YShIeHNnVXJsLmluZGV4cm9sZU1zZ1VybCwgbnVsbCwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgbGV0IHJvbGVNc2cgPSBkYXRhLnJvbGVNc2c7XHJcbiAgICAgICAgICAgIHNlbGYuZ2ouc3RyaW5nID1yb2xlTXNnLnRvdGFsZ29uZztcclxuICAgICAgICAgICAgc2VsZi5xeC5zdHJpbmcgPSByb2xlTXNnLnRvdGFseHVlMSArIFwiL1wiICsgcm9sZU1zZy50b3RhbHh1ZTI7XHJcbiAgICAgICAgICAgIHNlbGYuamwuc3RyaW5nID0gcm9sZU1zZy50b3RhbGppbmcxICsgXCIvXCIgKyByb2xlTXNnLnRvdGFsamluZzI7XHJcbiAgICAgICAgICAgIHNlbGYuc3Uuc3RyaW5nID0gcm9sZU1zZy50b3RhbHN1ZHU7XHJcbiAgICAgICAgICAgIGNjLmxvZyggc2VsZi5nai5zdHJpbmcpXHJcbiAgICAgICAgICAgICAgY2MubG9nKCAgc2VsZi5zdS5zdHJpbmcgKVxyXG5cclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIGxhYmVsOmNjLkxhYmVsLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcbiAgICBzZXRMYWJlbDpmdW5jdGlvbihtc2cpe1xyXG4gICAgICAgIHRoaXMubGFiZWwuc3RyaW5nPW1zZztcclxuXHJcbiAgICB9XHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjYy5nYW1lLmFkZFBlcnNpc3RSb290Tm9kZSh0aGlzKTtcclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsIlxyXG52YXIgc2VsZjtcclxudmFyIHBrV2FpdCA9IHJlcXVpcmUoXCJwa1dhaXRcIik7XHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgY29udGVudHM6IGNjLk5vZGUsXHJcbiAgICAgICAgLy8gZm9vOiB7XHJcbiAgICAgICAgLy8gICAgZGVmYXVsdDogbnVsbCwgICAgICAvLyBUaGUgZGVmYXVsdCB2YWx1ZSB3aWxsIGJlIHVzZWQgb25seSB3aGVuIHRoZSBjb21wb25lbnQgYXR0YWNoaW5nXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICB0byBhIG5vZGUgZm9yIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgLy8gICAgdXJsOiBjYy5UZXh0dXJlMkQsICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxyXG4gICAgICAgIC8vICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSwgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIHZpc2libGU6IHRydWUsICAgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIGRpc3BsYXlOYW1lOiAnRm9vJywgLy8gb3B0aW9uYWxcclxuICAgICAgICAvLyAgICByZWFkb25seTogZmFsc2UsICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIGZhbHNlXHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICAvLyAuLi5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmID0gdGhpcztcclxuICAgICAgICAvLyB0aGlzLm9ubG9hZGluZygpO1xyXG4gICAgfSxcclxuICAgIGJhY2tFdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmZpbmQoXCJDYW52YXMvemhpbGluZ1wiKS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIGNjLmxvZyhcIuWIneWni+WMluaKgOiDveWIl+ihqFwiKVxyXG4gICAgICAgIGNjLmZpbmQoXCJDYW52YXMvamluZW5nXCIpLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgfSxcclxuICAgIG9ubG9hZGluZzogZnVuY3Rpb24gKGUsIGlkKSB7XHJcbiAgICAgICAgY2MubG9hZGVyLmxvYWRSZXMoJ3BrL2puQnV0dG9uJywgY2MuUHJlZmFiLCBmdW5jdGlvbiAoZXJyLCBwcmVmYWIpIHtcclxuICAgICAgICAgICAgaWYgKCFlcnIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwID0gZ2V0Um9sZU1zZyhway5jbGlja0FycmF5UmlnaHRbMF0sIHBrLnBsYXllcjIpXHJcbiAgICAgICAgICAgICAgICB2YXIgam4gPSBwLmppbmVuZztcclxuICAgICAgICAgICAgICAgIHNlbGYuY29udGVudHMucmVtb3ZlQWxsQ2hpbGRyZW4oKTtcclxuICAgICAgICAgICAgICAgIHZhciBoUHJlZmFiID0gY2MuaW5zdGFudGlhdGUocHJlZmFiKTtcclxuICAgICAgICAgICAgICAgIHNlbGYuY29udGVudHMuaGVpZ2h0ID0gam4ubGVuZ3RoICogKGhQcmVmYWIuaGVpZ2h0ICsgNSk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGpuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGpuUHJlZmFiID0gY2MuaW5zdGFudGlhdGUocHJlZmFiKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgam5KcyA9IGpuUHJlZmFiLmdldENvbXBvbmVudChcImpuTmFtZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBqbkpzLnNldEpuYW1lKGpuW2ldLnNraWxsbmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgam5QcmVmYWIub24oJ2NsaWNrJywgc2VsZi5jbGlja0V2ZW50LCBzZWxmKTtcclxuICAgICAgICAgICAgICAgICAgICBqblByZWZhYi5pZCA9IGpuW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY29udGVudHMuYWRkQ2hpbGQoam5QcmVmYWIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgY2xpY2tFdmVudDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIG5vZGUgPSBldmVudC50YXJnZXQ7XHJcbiAgICAgICAgdmFyIGpuID0gbm9kZS5pZDtcclxuICAgICAgICBjYy5sb2coJ+aKgOiDveWQjeensDonICsgbm9kZS5pZC5za2lsbG5hbWUpO1xyXG4gICAgICAgIGNjLmZpbmQoXCJDYW52YXMvamluZW5nXCIpLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBkYXRhID0gbnVsbDtcclxuICAgICAgICAvL+acieS6m+aKgOiDveWPr+S7peWvueiHquW3seaIluiAhemYn+WPi+mHiuaUvlxyXG4gICAgICAgIHN3aXRjaCAobm9kZS5pZC5za2lsbG5hbWUpIHtcclxuICAgICAgICAgICAgY2FzZSBcIuawlOWGsuaWl+eJm1wiOiB7XHJcbiAgICAgICAgICAgICAgICBway5zZWxlY3RTdGF0dXMgPSAyMDAwO1xyXG4gICAgICAgICAgICAgICAgZGF0YSA9IHBrLmNsaWNrQXJyYXlSaWdodFswXVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGVmYXVsdDoge1xyXG4gICAgICAgICAgICAgICAgcGsuc2VsZWN0U3RhdHVzID0gMzAwMDtcclxuICAgICAgICAgICAgICAgIGRhdGEgPSBway5jbGlja0FycmF5TGVmdFswXTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgb25sb2FkSm5aaGlsaW5nKGZhbHNlKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIumAieaLqeaMh+S7pOWujOaIkFwiKVxyXG5cclxuICAgICAgICAvL+aooeaLn+eCueWHu+esrOS4gOS4quS6uueJqeaMiemSruaViOaenFxyXG4gICAgICAgIGNsaWNrUm9sZVRvb2woZGF0YSwgbm9kZS5pZC5za2lsbG5hbWUpO1xyXG5cclxuICAgIH1cclxufSk7XHJcbiIsIlxyXG5cclxuXHJcblxyXG53aW5kb3cucGtPbmxvYWQ7XHJcbnZhciBzZWxmO1xyXG5cclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBsZWZ0UGxheTogY2MuUHJlZmFiLFxyXG4gICAgICAgIHJpZ2h0UGxheTogY2MuUHJlZmFiLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIC0yMTIgNTkgICAgLTEyMyAgICBoZWlndD03MiAgIHdpZHRoIDg5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgd2luZG93LnBrT25sb2FkID0gdGhpcztcclxuICAgICAgICBQa1NvY2tldEV2ZW50cy5vbmxvYWRQbGF5ID0gdGhpcy5vbmxvYWRQbGF5O1xyXG4gICAgICAgIC8vdGhpcy5pbml0KCk7XHJcbiAgICAgICAgY2MubG9nKFwicGtPbmxvYWTliqDovb3kuobjgILjgILjgILjgILjgILjgILjgILjgIJcIilcclxuICAgICAgICBvcGVuUGtTY29rZXQodHJ1ZSk7XHJcbiAgICAgICAgc2VsZi5pbml0KCk7XHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIGFqYXhEYXRhKFwiaHR0cDovLzEyNy4wLjAuMTo4MDgwL0NvY29zMmRBZGRQay9nZXRZZUd1YWlEYXRhP2xldmVsPTEwLDE1Jm5hbWU95L6N5Y2r576kXCIsIG51bGwsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgLy8gICAgIGlmIChkYXRhLmNvZGUgIT0gXCIwMDBcIikge1xyXG4gICAgICAgIC8vICAgICAgICAgc2hvd0FsZXJ0KGRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgLy8gICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgIC8vICAgICAgICAgbGV0IGluaXREYXRhID0gSlNPTi5wYXJzZShkYXRhLmRhdGEpO1xyXG4gICAgICAgIC8vICAgICAgICAgb25sb2FkUGtNc2coaW5pdERhdGEpO1xyXG4gICAgICAgIC8vICAgICAgICAgc2VsZi5vbmxvYWRQbGF5KC0xNjAsIC0xNjUsIDApO1xyXG4gICAgICAgIC8vICAgICAgICAgc2VsZi5vbmxvYWRQbGF5KDI1MywgMjA1LCAxKTtcclxuICAgICAgICAvLyAgICAgICAgIG9ubG9hZEpuKHRydWUpO1xyXG5cclxuXHJcbiAgICAgICAgLy8gICAgICAgICAvLyBzZWxmLmluaXQoKTtcclxuICAgICAgICAvLyAgICAgfVxyXG5cclxuICAgICAgICAvLyB9KTtcclxuXHJcbiAgICAgICAgLy8gICAgLyBzZWxmLmluaXQoKTtcclxuICAgIH0sXHJcbiAgICBjbGlja0V2ZW50OiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICB2YXIgbm9kZSA9IGV2ZW50LnRhcmdldDtcclxuICAgICAgICB2YXIgam4gPSBub2RlLmlkO1xyXG4gICAgICAgIGNjLmxvZygn5oqA6IO95ZCN56ewOicgKyBub2RlLmlkLnNraWxsbmFtZSk7XHJcbiAgICAgICAgY2MuZmluZChcIkNhbnZhcy9qaW5lbmdcIikuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIGRhdGEgPSBudWxsO1xyXG4gICAgICAgIC8v5pyJ5Lqb5oqA6IO95Y+v5Lul5a+56Ieq5bex5oiW6ICF6Zif5Y+L6YeK5pS+XHJcbiAgICAgICAgc3dpdGNoIChub2RlLmlkLnNraWxsbmFtZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwi5rCU5Yay5paX54mbXCI6IHtcclxuICAgICAgICAgICAgICAgIHBrLnNlbGVjdFN0YXR1cyA9IDIwMDA7XHJcbiAgICAgICAgICAgICAgICBkYXRhID0gcGsuY2xpY2tBcnJheVJpZ2h0WzBdXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkZWZhdWx0OiB7XHJcbiAgICAgICAgICAgICAgICBway5zZWxlY3RTdGF0dXMgPSAzMDAwO1xyXG4gICAgICAgICAgICAgICAgZGF0YSA9IHBrLmNsaWNrQXJyYXlMZWZ0WzBdO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBvbmxvYWRKblpoaWxpbmcoZmFsc2UpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwi6YCJ5oup5oyH5Luk5a6M5oiQXCIpXHJcblxyXG4gICAgICAgIC8v5qih5ouf54K55Ye756ys5LiA5Liq5Lq654mp5oyJ6ZKu5pWI5p6cXHJcbiAgICAgICAgY2xpY2tSb2xlVG9vbChkYXRhLCBub2RlLmlkLnNraWxsbmFtZSk7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvKipyaWdodCAgIHc9ODkgaD01OVxyXG4gICAgICogeD0yNTMgXHJcbiAgICAgKiBsZWZ0IFxyXG4gICAgICogeD0tMjEyICAgLTI2NSAgIDMwNVxyXG4gICAgICovXHJcblxyXG4gICAgb25sb2FkUGxheTogZnVuY3Rpb24gKHgsIHksIHByZWZhYikge1xyXG4gICAgICAgIGNjLmxvZyhcIm9ubG9hZFBsYXnooqvosIPnlKjkuoYtLS0tLS0tLS0tLS0tLS0tLS1cIilcclxuICAgICAgICAvL+WIneWni+WMluWKoOi9veeVjOmdou+8jOaJgOacieinkuiJsumDveS4jeWPr+S7peeCueWHu1xyXG4gICAgICAgIHBrLnNlbGVjdFN0YXR1cyA9IFwiMDAxXCI7XHJcbiAgICAgICAgdmFyIGxlZnRwO1xyXG4gICAgICAgIGlmIChwcmVmYWIgPT0gMCkge1xyXG4gICAgICAgICAgICBwcmVmYWIgPSBzZWxmLmxlZnRQbGF5O1xyXG4gICAgICAgICAgICBjYy5sb2cocGsucGxheWVyMSlcclxuICAgICAgICAgICAgbGVmdHAgPSBway5wbGF5ZXIxXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcHJlZmFiID0gc2VsZi5yaWdodFBsYXk7XHJcbiAgICAgICAgICAgIGxlZnRwID0gcGsucGxheWVyMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZWZ0cC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgcGxheSA9IGNjLmluc3RhbnRpYXRlKHByZWZhYik7XHJcbiAgICAgICAgICAgIHNlbGYubm9kZS5hZGRDaGlsZChwbGF5KTtcclxuICAgICAgICAgICAgcGxheS5zZXRQb3NpdGlvblkoNTkgLSBpICogNzIpO1xyXG4gICAgICAgICAgICBpZiAobGVmdHAubGVuZ3RoID09IDEpIHtcclxuICAgICAgICAgICAgICAgIHBsYXkuc2V0UG9zaXRpb25ZKDApO1xyXG4gICAgICAgICAgICAgICAgcGxheS5zZXRQb3NpdGlvblgoeCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOiB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5LnNldFBvc2l0aW9uWCh4IC0gODkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5LnNldFBvc2l0aW9uWCh4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHBsYXkubmFtZSA9IGxlZnRwW2ldLmlkO1xyXG4gICAgICAgICAgICB2YXIgcm9sZSA9IHBsYXkuZ2V0Q29tcG9uZW50KFwicm9sZVwiKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB4dWUgPSBsZWZ0cFtpXS5xaXh1ZSAvIGxlZnRwW2ldLnFpeHVlMjtcclxuICAgICAgICAgICAgdmFyIGppbmcgPSBsZWZ0cFtpXS5qaW5nbGkgLyBsZWZ0cFtpXS5qaW5nbGkyO1xyXG4gICAgICAgICAgICByb2xlLnNldFh1ZUFuZEppbmcoeHVlLCBqaW5nKTtcclxuXHJcbiAgICAgICAgICAgIC8vYnVmZlxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJ1ZmZMaSA9IGxlZnRwW2ldLmJ1ZmY7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnVmZkxpICE9IG51bGwgJiYgYnVmZkxpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYnVmZiA9IHBsYXkuZ2V0Q2hpbGRCeU5hbWUoXCJidWZmXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZmYucmVtb3ZlQWxsQ2hpbGRyZW4oKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IGJ1ZmZMaS5sZW5ndGg7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYy5sb2coXCIta2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2tra2trXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBidWZmSnMgPSBidWZmLmdldENvbXBvbmVudChcImJ1ZmZcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBQcmVmYWJCdWZmID0gYnVmZkpzLmdldEJ1ZmZQcmVmYWIoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJ1ZmZJbiA9IGNjLmluc3RhbnRpYXRlKFByZWZhYkJ1ZmYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYnVmZkRldGFpbCA9IGJ1ZmZJbi5nZXRDb21wb25lbnQoXCJidWZmRGV0YWlsXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYnVmZkFuaSA9IGJ1ZmZEZXRhaWwuZ2V0Q29tcG9uZW50KGNjLkFuaW1hdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzcHJpdGVGcmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiBpbiBidWZmTGlba10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcml0ZUZyYW1lID0gYnVmZkRldGFpbC5nZXRTcHJpdGVGcmFtZShqKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL3Nwcml0ZUZyYW1l5a2Y5Zyo5pe25Yqg5YWlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgKHNwcml0ZUZyYW1lKSAhPSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNwcml0ZSA9IGJ1ZmZJbi5nZXRDb21wb25lbnQoY2MuU3ByaXRlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNwcml0ZS5zcHJpdGVGcmFtZSA9IHNwcml0ZUZyYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZi5hZGRDaGlsZChidWZmSW4pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL+awlOihgOS4ujBcclxuICAgICAgICAgICAgICAgIGlmIChsZWZ0cFtpXS5xaXh1ZSA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcm9sZS5zZXREZWFkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxlZnRwW2ldLmlkICE9IHBrLnJpZ2h0T25lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBrLmNsaWNrQXJyYXlMZWZ0LnJlbW92ZShsZWZ0cFtpXS5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBpZiAobGVmdHBbaV0uYnVmZlR5cGUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIHZhciBidWZmID0gcGxheS5nZXRDaGlsZEJ5TmFtZShcImJ1ZmZcIik7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgdmFyIGJ1ZmZKcyA9IGJ1ZmYuZ2V0Q29tcG9uZW50KFwiYnVmZlwiKTtcclxuICAgICAgICAgICAgICAgIC8vICAgICB2YXIgUHJlZmFiQnVmZiA9IGJ1ZmZKcy5nZXRCdWZmUHJlZmFiKCk7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgdmFyIGJ1ZmZJbiA9IGNjLmluc3RhbnRpYXRlKFByZWZhYkJ1ZmYpO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIHZhciBidWZmRGV0YWlsID0gYnVmZkluLmdldENvbXBvbmVudChcImJ1ZmZEZXRhaWxcIik7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgdmFyIGJ1ZmZBbmkgPSBidWZmRGV0YWlsLmdldENvbXBvbmVudChjYy5BbmltYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIHZhciBzcHJpdGVGcmFtZSA9IGJ1ZmZEZXRhaWwuZ2V0U3ByaXRlRnJhbWUobGVmdHBbaV0uYnVmZlR5cGVLZXkpO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIHZhciBzcHJpdGUgPSBidWZmSW4uZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSk7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgc3ByaXRlLnNwcml0ZUZyYW1lID0gc3ByaXRlRnJhbWU7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgYnVmZi5hZGRDaGlsZChidWZmSW4pO1xyXG4gICAgICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBjYy5sb2coXCLliqDovb1idWZm5aSx6LSl77yaXCIgKyBlKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICog5Y+R6YCB5oyH5Luk54q25oCB5qCH6K+GXHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICog5oyH5Luk5Ye95pWwXHJcbiAgICAqIHBhcmFtIGUg5LqL5Lu25a+56LGhXHJcbiAgICAqIHBhcmFtIG51bSDljLrliIbmjInpkq7nsbvlnotcclxuICAgICogcGFyYW0gdHlwZSDljLrliIbmlLvlh7vnsbvlnotcclxuICAgICogcGFyYW0gc3RhdHVzIOWMuuWIhuW3puWPs+inkuiJslxyXG4gICAgKi9cclxuICAgIGF0dGFjazogZnVuY3Rpb24gKGUsIG51bSkge1xyXG4gICAgICAgIHZhciBuYW1lO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAobnVtKSB7XHJcbiAgICAgICAgICAgICAgICAvL+aUu+WHu+aMh+S7pFxyXG4gICAgICAgICAgICAgICAgY2FzZSAnZ2onOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb25sb2FkSm5aaGlsaW5nKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIumAieaLqeaMh+S7pOWujOaIkFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIHBrLnNlbGVjdFN0YXR1cyA9IDMwMDA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8v5qih5ouf54K55Ye756ys5LiA5Liq5Lq654mp5oyJ6ZKu5pWI5p6cXHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2tSb2xlVG9vbChway5jbGlja0FycmF5TGVmdFswXSwgXCLmma7pgJrmlLvlh7tcIik7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvL+aUu+WHu+aMh+S7pFxyXG4gICAgICAgICAgICAgICAgY2FzZSAnZnknOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/mqKHmi5/ngrnlh7vnrKzkuIDkuKrkurrnianmjInpkq7mlYjmnpxcclxuICAgICAgICAgICAgICAgICAgICBjbGlja1JvbGVUb29sKHBrLmNsaWNrQXJyYXlMZWZ0WzBdLCBcIumYsuW+oVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhc2UgJ3RwJzoge1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcIumAg+i3kVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBjYy5maW5kKFwiQ2FudmFzL3poaWxpbmdcIikuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBsYXkgPSBjYy5maW5kKFwiQ2FudmFzL2JhY2tncm91bmQvXCIgKyBway5jbGlja0FycmF5UmlnaHRbMF0pXHJcbiAgICAgICAgICAgICAgICAgICAgLy/ojrflj5bovrnmoYbliLDkuK3lv4PnmoTot53nprvvvIzljbPlvpfliLDkuKTovrnmoYbnmoTlnZDmoIfjgILms6jmhI/vvJrlm6DkuLrml7bluo/pl67popjvvIzlv4XpobvopoFjYW52YXPnmoTlrr3luqbmnaXorqHnrpdcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc2VxUmlnaHQgPSBjYy5zZXF1ZW5jZShjYy5tb3ZlVG8oMiwgY2MucChwbGF5LmdldFBvc2l0aW9uWCgpICsgNTAwLCBwbGF5LmdldFBvc2l0aW9uWSgpKSkuZWFzaW5nKGNjLmVhc2VDdWJpY0FjdGlvbk91dCgxKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXkucnVuQWN0aW9uKHNlcVJpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8v5oqA6IO95oyH5LukXHJcbiAgICAgICAgICAgICAgICBjYXNlICdqbic6IHtcclxuICAgICAgICAgICAgICAgICAgICBjYy5sb2coXCLmioDog71cIilcclxuICAgICAgICAgICAgICAgICAgICBjYy5maW5kKFwiQ2FudmFzL3poaWxpbmdcIikuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MubG9nKFwi5Yid5aeL5YyW5oqA6IO95YiX6KGoXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGppbmVuZyA9IGNjLmZpbmQoXCJDYW52YXMvamluZW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGppbmVuZy5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjb250ZW50ID0gY2MuZmluZChcIkNhbnZhcy9qaW5lbmcvZGV0YWlsL3Njcm9sbHZpZXcvdmlldy9jb250ZW50XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgY2MubG9hZGVyLmxvYWRSZXMoJ3BrL2puQnV0dG9uJywgY2MuUHJlZmFiLCBmdW5jdGlvbiAoZXJyLCBwcmVmYWIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwID0gZ2V0Um9sZU1zZyhway5jbGlja0FycmF5UmlnaHRbMF0sIHBrLnBsYXllcjIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgam4gPSBwLmppbmVuZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQucmVtb3ZlQWxsQ2hpbGRyZW4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoUHJlZmFiID0gY2MuaW5zdGFudGlhdGUocHJlZmFiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuaGVpZ2h0ID0gam4ubGVuZ3RoICogKGhQcmVmYWIuaGVpZ2h0ICsgNSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGpuLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGpuUHJlZmFiID0gY2MuaW5zdGFudGlhdGUocHJlZmFiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgam5KcyA9IGpuUHJlZmFiLmdldENvbXBvbmVudChcImpuTmFtZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqbkpzLnNldEpuYW1lKGpuW2ldLnNraWxsbmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgam5QcmVmYWIub24oJ2NsaWNrJywgc2VsZi5jbGlja0V2ZW50LCBzZWxmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBqblByZWZhYi5pZCA9IGpuW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuYWRkQ2hpbGQoam5QcmVmYWIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8v54mp5ZOBXHJcbiAgICAgICAgICAgICAgICBjYXNlICd3cCc6IHtcclxuICAgICAgICAgICAgICAgICAgICBjYy5sb2coXCLnianlk4FcIilcclxuICAgICAgICAgICAgICAgICAgICBjYy5maW5kKFwiQ2FudmFzL3poaWxpbmdcIikuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MuZmluZChcIkNhbnZhcy93dXBpblwiKS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmZpbmQoXCJDYW52YXMvamluZW5nXCIpLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcIueJqeWTgeWIl+ihqFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIGNjLmZpbmQoXCJDYW52YXMvd3VwaW4vZGV0YWlsL3Njcm9sbHZpZXcvdmlldy9jb250ZW50XCIpLmdldENvbXBvbmVudCgncGtXdVBpbicpLm9ubG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBrLnBreWFvc3RhdHVzID0gXCIxXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy/mi5vlsIZcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3pqJzoge1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcIueJqeWTgVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIGNjLmZpbmQoXCJDYW52YXMvemhpbGluZ1wiKS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBjYy5maW5kKFwiQ2FudmFzL3poYW9qaWFuZ1wiKS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmZpbmQoXCJDYW52YXMvamluZW5nXCIpLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcIueJqeWTgeWIl+ihqFwiKVxyXG5cclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNjLmxvZygn5Yqg6L295oqA6IO95YiX6KGo5byC5bi4OicgKyBlKVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgfSxcclxuICAgIHppZG9uZzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBudW0gPSAxO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGsuY2xpY2tBcnJheVJpZ2h0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5hdHRhY2sodGhpcywgXCJnalwiKTtcclxuXHJcbiAgICAgICAgICAgIH0sIDIwMCAqIG51bSk7XHJcbiAgICAgICAgICAgIG51bSsrO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNsaWNrUm9sZVRvb2wocGsuY2xpY2tBcnJheUxlZnRbMF0sIFwi5pmu6YCa5pS75Ye7XCIpO1xyXG4gICAgICAgICAgICB9LCAyMDAgKiBudW0pO1xyXG4gICAgICAgICAgICBudW0rKztcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0cnkge1xyXG5cclxuICAgICAgICAgICAgY2MuZmluZChcIkNhbnZhcy9yb2xlRGV0YWlsXCIpLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBjYy5maW5kKFwiQ2FudmFzL2ppbmVuZ1wiKS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgY2MuZmluZChcIkNhbnZhcy93dXBpblwiKS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgY2MuZmluZChcIkNhbnZhcy96aGFvamlhbmdcIikuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGNjLmZpbmQoXCJDYW52YXMvZW5kXCIpLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBjYy5maW5kKFwiQ2FudmFzL3poaWxpbmdcIikuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdmFyIGxlZnRwID0gcGsucGxheWVyMTtcclxuICAgICAgICAgICAgdmFyIHJpZ2h0cCA9IHBrLnBsYXllcjI7XHJcbiAgICAgICAgICAgIHNlbGYubm9kZS5yZW1vdmVBbGxDaGlsZHJlbigpO1xyXG4gICAgICAgICAgICBjYy5maW5kKFwiQ2FudmFzL3ZzL2xlZnRcIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBsZWZ0cFswXS5uYW1lXHJcbiAgICAgICAgICAgIGNjLmZpbmQoXCJDYW52YXMvdnMvcmlnaHRcIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSByaWdodHBbMF0ubmFtZVxyXG4gICAgICAgICAgICBjYy5maW5kKFwiQ2FudmFzL3RpbWUvbmFtZVwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IHJpZ2h0cFswXS5uYW1lXHJcbiAgICAgICAgICAgIC8v5YCS6K6h5pe2XHJcbiAgICAgICAgICAgIHZhciBjb3VudCA9IDYwO1xyXG4gICAgICAgICAgICB2YXIgdGltZUNhbGxiYWNrID0gZnVuY3Rpb24gKGR0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDlnKjnrKzlha3mrKHmiafooYzlm57osIPml7blj5bmtojov5nkuKrorqHml7blmahcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc2NoZWR1bGUodGltZUNhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnppZG9uZygpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjYy5maW5kKFwiQ2FudmFzL3RpbWVcIikuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBjYy5maW5kKFwiQ2FudmFzL3RpbWUvdGltZVwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IFwi5Ye65oubKFwiICsgY291bnQgKyBcIilcIjtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudC0tO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHBrLnRpbWVTdGF0dXMgPT09IDgwMDApIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDlnKjnrKzlha3mrKHmiafooYzlm57osIPml7blj5bmtojov5nkuKrorqHml7blmahcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVuc2NoZWR1bGUodGltZUNhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgICAgICBjYy5maW5kKFwiQ2FudmFzL3RpbWVcIikuYWN0aXZlID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlKHRpbWVDYWxsYmFjaywgMSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjYy5sb2coZSlcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgIH0sXHJcblxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG5cclxuXHJcbi8vICB3aW5kb3cucGtXcz0gbmV3IFdlYlNvY2tldCh3czovLzEyNy4wLjAuMTo4MDgwL3BrU2VydmVyJyk7XHJcbi8vICAgICAgICAgcGtXcy5vbm9wZW4gPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuLy8gICAgICAgICAgICAgLy8g5Y+R6YCB5LiA5Liq5Yid5aeL5YyW5raI5oGvXHJcbi8vICAgICAgICAgICAgIC8vIOWPkemAgeS4gOS4quWIneWni+WMlua2iOaBr1xyXG4vLyAgICAgICAgICAgICB2YXIganNvbkRhdGEgPSB7XHJcbi8vICAgICAgICAgICAgICAgICB0eXBlOiBcInBrV2FpdFwiLFxyXG4vLyAgICAgICAgICAgICAgICAgcGtUeXBlOiBcIjEwMDFcIixcclxuLy8gICAgICAgICAgICAgICAgIGpzb25EYXRhOiB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgcm9sZUE6IFwiMTAwMFwiLFxyXG4vLyAgICAgICAgICAgICAgICAgICAgIHJvbGVCOiBcIjEwMDBcIixcclxuLy8gICAgICAgICAgICAgICAgICAgICBndWFpRGF0YToge1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICBcImxldmVsXCI6IFwiMTE1LDEyMFwiLFxyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCLol6TnlLLlhbXnvqRcIlxyXG4vLyAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbi8vICAgICAgICAgICAgICAgICB9LFxyXG4vLyAgICAgICAgICAgICB9XHJcbi8vICAgICAgICAgICAgIHBrV3Muc2VuZChKU09OLnN0cmluZ2lmeShqc29uRGF0YSkpO1xyXG4vLyAgICAgICAgIH1cclxuLy8gICAgICAgICAvLyDnm5HlkKzmtojmga9cclxuLy8gICAgICAgICBwa1dzLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4vLyAgICAgICAgICAgICBjb25zb2xlLmxvZygnQ2xpZW50IG5vdGlmaWVkIHNvY2tldCBoYXMgY2xvc2VkJywgSlNPTi5zdHJpbmdpZnkoZXZlbnQuZGF0YSkpO1xyXG4vLyAgICAgICAgICAgICB2YXIgcmV0dXJuSnNvbkRhdGEgPUpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XHJcbi8vICAgICAgICAgICAgIGNjLmxvZyhyZXR1cm5Kc29uRGF0YSlcclxuLy8gICAgICAgICAgICAgcGsudXVpZCA9IHJldHVybkpzb25EYXRhWzBdO1xyXG4vLyAgICAgICAgICAgICBway5wbGF5ZXIxID0gcmV0dXJuSnNvbkRhdGFbMV07XHJcbi8vICAgICAgICAgICAvLyAgcGsucGxheWVyMiA9IHJldHVybkpzb25EYXRhO1xyXG4vLyAgICAgICAgICAgICBway5sZWZ0UGxheSA9IFtdO1xyXG4vLyAgICAgICAgICAgICAgIHBrLmNsaWNrQXJyYXlMZWZ0PVtdO1xyXG4vLyAgICAgICAgICAgLy8gIHBrLnJpZ2h0UGxheSA9IFtdO1xyXG4vLyAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICBway5wbGF5ZXIxLmxlbmd0aDsgaSsrKSB7XHJcbi8vICAgICAgICAgICAgICAgICBjYy5sb2coIHBrLnBsYXllcjFbaV0uaWQpO1xyXG4vLyAgICAgICAgICAgICAgICAgIHBrLmxlZnRQbGF5LnB1c2goIHBrLnBsYXllcjFbaV0uaWQpO1xyXG4vLyAgICAgICAgICAgICAgICAgIHBrLmNsaWNrQXJyYXlMZWZ0LnB1c2goIHBrLnBsYXllcjFbaV0uaWQpO1xyXG4vLyAgICAgICAgICAgICAgIC8vICBway5yaWdodFBsYXkucHVzaChyZXR1cm5Kc29uRGF0YVtpXS5pZClcclxuLy8gICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgICAgICBzZWxmLm9ubG9hZFBsYXkoIHBrLnBsYXllcjEsIC0xNjAsIC0xNjUsICBzZWxmLmxlZnRQbGF5LCBzZWxmKTtcclxuLy8gICAgICAgICAgICAgc2VsZi5vbmxvYWRQbGF5KCBway5wbGF5ZXIyLCAyNTMsIDIwNSwgIHNlbGYucmlnaHRQbGF5LCBzZWxmKTtcclxuLy8gICAgICAgICAgICAgb25sb2FkSm4odHJ1ZSk7XHJcbi8vICAgICAgICAgfTsiLCJ2YXIgc2VsZjtcclxudmFyIHBsYXlKcyA9IHJlcXVpcmUoXCJwbGF5ZXJJdGVtXCIpO1xyXG5cclxuLyoqXHJcbiAqIFBL5Yqo55S75pKt5pS+5pyJ6ZmQ54q25oCB5py6XHJcbiAqL1xyXG5cclxudmFyIHN0YXR1cztcclxuXHJcbi8vIHZhciBwa1N0YXRlTWFjaGluZSA9IG5ldyBTdGF0ZU1hY2hpbmUoe1xyXG4vLyAgICAgZGF0YToge1xyXG4vLyAgICAgICAgIGJhdHRsZTogbnVsbCxcclxuLy8gICAgIH0sXHJcbi8vICAgICB0cmFuc2l0aW9uczogW1xyXG4vLyAgICAgICAgIHsgbmFtZTogJ3RvU3RhcnQnLCBmcm9tOiAnbm9uZScsIHRvOiAnc3RhcnQnIH0sXHJcbi8vICAgICAgICAgeyBuYW1lOiAndG9TaGlmYScsIGZyb206ICdzdGFydCcsIHRvOiAnc2hpZmEnIH0sXHJcbi8vICAgICAgICAgeyBuYW1lOiAndG9Nb3ZlQmFja0dyb3VuZCcsIGZyb206ICdzaGlmYScsIHRvOiAnYmFja2dvcnVuZCcgfSxcclxuLy8gICAgICAgICB7IG5hbWU6ICd0b1NraWxsJywgZnJvbTogJ2JhY2tnb3J1bmQnLCB0bzogJ3NraWxsJyB9LFxyXG4vLyAgICAgICAgIHsgbmFtZTogJ2ZpbnNoZWQnLCBmcm9tOiAnc2tpbGwnLCB0bzogJ2VuZCcgfSxcclxuLy8gICAgICAgICB7IG5hbWU6ICdlbmQnLCBmcm9tOiAnZW5kJywgdG86ICdzdGFydCcgfVxyXG4vLyAgICAgXSxcclxuLy8gICAgIG1ldGhvZHM6IHtcclxuLy8gICAgICAgICBvblRvU2hpZmEoKSB7XHJcblxyXG5cclxuXHJcbi8vICAgICAgICAgfSxcclxuLy8gICAgICAgICBvblRvTW92ZUJhY2tHcm91bmQoKSB7XHJcblxyXG4vLyAgICAgICAgIH0sXHJcblxyXG4vLyAgICAgICAgIG9uVG9Ta2lsbCgpIHtcclxuXHJcbi8vICAgICAgICAgfSxcclxuXHJcbi8vICAgICAgICAgb25GaW5zaGVkKCkge1xyXG5cclxuLy8gICAgICAgICB9LFxyXG4vLyAgICAgICAgIG9uRW5kKCkge1xyXG5cclxuLy8gICAgICAgICB9LFxyXG4vLyAgICAgfVxyXG4vLyB9KTtcclxudmFyIHBrV2FpdCA9IGNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgcGxheVByZWZhYjogY2MuUHJlZmFiLFxyXG4gICAgICAgIC8vIGZvbzoge1xyXG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub2RlIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcclxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICB2aXNpYmxlOiB0cnVlLCAgICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXHJcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gLi4uXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgcGtXYWl0LmxvYWQgPSB0aGlzO1xyXG4gICAgICAgIHZhciBweSA9IG5ldyBwbGF5SnMoKTtcclxuICAgICAgICB2YXIgcGtTdGF0ZU1hY2hpbmUgPSBweS5wa1N0YXRlTWFjaGluZTtcclxuICAgICAgICBwa1N0YXRlTWFjaGluZS50b1N0YXJ0KCk7XHJcbiAgICAgICAgLy8gdGhpcy5iYWNrKCk7XHJcbiAgICAgICAgLy90aGlzLmxvYWRpbmcoKTtcclxuICAgIH0sXHJcbiAgICBsb2FkaW5nOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MuZmluZChcIkNhbnZhcy9qaW5lbmdcIikuYWN0aXZlID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHZhciByZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICdwbGF5ZXIxJzogW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICduYW1lJzogJ+m7hOaciOiLsScsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2lkJzogJzEwMDInLFxyXG4gICAgICAgICAgICAgICAgICAgICdxaXh1ZSc6ICcyMTIzJyxcclxuICAgICAgICAgICAgICAgICAgICAnamluZ2xpJzogJzIxMjEwJyxcclxuICAgICAgICAgICAgICAgICAgICAnc3VkdSc6ICcxJyxcclxuICAgICAgICAgICAgICAgICAgICAnamluZW5nJzogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbmFtZSc6ICfoiI3lkb3kuIDlh7snLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAnMScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3RhdHVzJzogJ2xlZnQnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICduYW1lJzogJ+WKm+WKiOWNjuWxsScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICcxJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzdGF0dXMnOiAnbGVmdCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ25hbWUnOiAn5rCU5Yay5paX54mbJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJzogJzEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3N0YXR1cyc6ICdyaWdodCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ25hbWUnOiAn6buE5pyI6IuxJyxcclxuICAgICAgICAgICAgICAgICAgICAnaWQnOiAnMTAwMycsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3FpeHVlJzogJzIxMjEwJyxcclxuICAgICAgICAgICAgICAgICAgICAnamluZ2xpJzogJzIwJyxcclxuICAgICAgICAgICAgICAgICAgICAnc3VkdSc6ICcxJyxcclxuICAgICAgICAgICAgICAgICAgICAnamluZW5nJzogW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbmFtZSc6ICfkupTpm7fovbDpobYnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAnMScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3RhdHVzJzogJ2xlZnQnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBdXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICduYW1lJzogJ+m7hOaciOiLsScsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2lkJzogJzEwMDQnLFxyXG4gICAgICAgICAgICAgICAgICAgICdxaXh1ZSc6ICczMTMwJyxcclxuICAgICAgICAgICAgICAgICAgICAnamluZ2xpJzogJzAnLFxyXG4gICAgICAgICAgICAgICAgICAgICdzdWR1JzogJzEnLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAnbmFtZSc6ICfpu4TmnIjoi7EnLFxyXG4gICAgICAgICAgICAgICAgICAgICdpZCc6ICcxMDA1JyxcclxuICAgICAgICAgICAgICAgICAgICAncWl4dWUnOiAnMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2ppbmdsaSc6ICcwJyxcclxuICAgICAgICAgICAgICAgICAgICAnc3VkdSc6ICcxJyxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgJ3BsYXllcjInOiBbXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ25hbWUnOiAn5ZKV5Y+9JyxcclxuICAgICAgICAgICAgICAgICAgICAnaWQnOiAnMTAzMicsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3FpeHVlJzogJzAnLFxyXG4gICAgICAgICAgICAgICAgICAgICdqaW5nbGknOiAnMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3N1ZHUnOiAnMScsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2ppbmVuZyc6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ25hbWUnOiAn6IiN5ZG95LiA5Ye7JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJzogJzEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3N0YXR1cyc6ICdsZWZ0J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbmFtZSc6ICflipvliojljY7lsbEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAnMScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnc3RhdHVzJzogJ2xlZnQnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICduYW1lJzogJ+awlOWGsuaWl+eJmycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICcxJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzdGF0dXMnOiAncmlnaHQnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ25hbWUnOiAn6buE5pyI6IuxJyxcclxuICAgICAgICAgICAgICAgICAgICAnaWQnOiAnMTAwNzcnLFxyXG4gICAgICAgICAgICAgICAgICAgICdxaXh1ZSc6ICcyMTIxMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2ppbmdsaSc6ICcyMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3N1ZHUnOiAnMScsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2ppbmVuZyc6IFtcclxuICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ25hbWUnOiAn5LqU6Zu36L2w6aG2JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJzogJzEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3N0YXR1cyc6ICdsZWZ0J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAnbmFtZSc6ICfoiJ7lpbMnLFxyXG4gICAgICAgICAgICAgICAgICAgICdpZCc6ICcxMDYyJyxcclxuICAgICAgICAgICAgICAgICAgICAncWl4dWUnOiAnMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2ppbmdsaSc6ICcwJyxcclxuICAgICAgICAgICAgICAgICAgICAnc3VkdSc6ICcxJyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ25hbWUnOiAn6Iie5aWzJyxcclxuICAgICAgICAgICAgICAgICAgICAnaWQnOiAnMTAwNicsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3FpeHVlJzogJzAnLFxyXG4gICAgICAgICAgICAgICAgICAgICdqaW5nbGknOiAnMCcsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3N1ZHUnOiAnMScsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvL+WIneWni+WMluWPs+i+ueeOqeWutuaVsOe7hFxyXG4gICAgICAgICAgICBway5yaWdodFBsYXkgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICAgICAgLy/liJ3lp4vljJblj7PovrnnjqnlrrbmlbDnu4RcclxuICAgICAgICAgICAgcGsubGVmdFBsYXkgPSBuZXcgQXJyYXkoKTtcclxuICAgICAgICAgICAgY2MubG9hZGVyLmxvYWRSZXMoJ3BrL3BsYXllcicsIGNjLlByZWZhYiwgZnVuY3Rpb24gKGVyciwgcHJlZmFiKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwMiA9IHJlc3VsdC5wbGF5ZXIyO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwMSA9IHJlc3VsdC5wbGF5ZXIxO1xyXG4gICAgICAgICAgICAgICAgICAgIHBrLnBsYXkxID0gcDE7XHJcbiAgICAgICAgICAgICAgICAgICAgcGsucGxheTIgPSBwMjtcclxuICAgICAgICAgICAgICAgICAgICBway5qbiA9ICfmma7pgJrmlLvlh7snXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgaW4gcDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGsubGVmdFBsYXkucHVzaChwMVtpXS5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwbGF5MSA9IGNjLmluc3RhbnRpYXRlKHByZWZhYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXkxLmlkID0gcDFbaV0uaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXkxLm5hbWUgPSBwMVtpXS5pZDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwbGF5MUpzID0gcGxheTEuZ2V0Q29tcG9uZW50KFwicGxheWVySXRlbVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGxheTFKcy5hdHRhY2tIaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXkxLmlkID0gaTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeSA9IDc0MCAtIGkgKiA3MDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG51bSA9IHBhcnNlSW50KGkpICsgcGFyc2VJbnQoMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjLmxvZyhudW0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudW0gJSAyID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggPSAxNzA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ID0gMTAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5MS5zZXRQb3NpdGlvbih4LCB5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYy5kaXJlY3Rvci5nZXRTY2VuZSgpLmFkZENoaWxkKHBsYXkxKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbSBpbiBwMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBway5yaWdodFBsYXkucHVzaChwMlttXS5pZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGxheTIgPSBjYy5pbnN0YW50aWF0ZShwcmVmYWIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBsYXkySnMgPSBwbGF5Mi5nZXRDb21wb25lbnQoXCJwbGF5ZXJJdGVtXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5MkpzLmF0dGFja1Nob3coKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheTJKcy5hdHRhY2tIaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmxpcFlBY3Rpb24gPSBjYy5mbGlwWCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGxheTIucnVuQWN0aW9uKGZsaXBZQWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGxheTIubmFtZSA9IHAyW21dLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB5ID0gNzQwIC0gbSAqIDcwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbnVtID0gcGFyc2VJbnQobSkgKyBwYXJzZUludCgxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2MubG9nKG51bSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bSAlIDIgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9IDY1MDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggPSA1NjA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXkyLnNldFBvc2l0aW9uKHgsIHkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjLmRpcmVjdG9yLmdldFNjZW5lKCkuYWRkQ2hpbGQocGxheTIpO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY2MubG9nKFwi5Yid5aeL5YyWcGvnlYzpnaLlvILluLg6XCIgKyBlKVxyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgIH0sXHJcbiAgICBpbmRleDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxvYWRpbmcoKTtcclxuICAgICAgICBjYy5kaXJlY3Rvci5wcmVsb2FkU2NlbmUoJ2luZGV4aGcnLCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICBjYy5sb2coJ05leHQgc2NlbmUgaW5kZXgnKTtcclxuXHJcbiAgICAgICAgICAgIGNjLmRpcmVjdG9yLmxvYWRTY2VuZSgnaW5kZXhoZycpO1xyXG5cclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIOaMh+S7pOWHveaVsFxyXG4gICAgICogcGFyYW0gZSDkuovku7blr7nosaFcclxuICAgICAqIHBhcmFtIG51bSDljLrliIbmjInpkq7nsbvlnotcclxuICAgICAqIHBhcmFtIHR5cGUg5Yy65YiG5pS75Ye757G75Z6LXHJcbiAgICAgKiBwYXJhbSBzdGF0dXMg5Yy65YiG5bem5Y+z6KeS6ImyXHJcbiAgICAgKi9cclxuICAgIGF0dGFjazogZnVuY3Rpb24gKGUsIG51bSwgdHlwZSwgc3RhdHVzKSB7XHJcbiAgICAgICAgdmFyIG5hbWU7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgc3dpdGNoIChudW0pIHtcclxuICAgICAgICAgICAgICAgIC8v5pS75Ye75oyH5LukXHJcbiAgICAgICAgICAgICAgICBjYXNlICdnaic6IHtcclxuICAgICAgICAgICAgICAgICAgICBjYy5sb2codHlwZSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mICh0eXBlKSA9PSAndW5kZWZpbmVkJyB8fCB0eXBlID09IG51bGwgfHwgdHlwZSA9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBway5qbiA9ICfmma7pgJrmlLvlh7snO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYy5sb2coXCLmlLvlh7tcIilcclxuICAgICAgICAgICAgICAgICAgICBjYy5maW5kKFwiQ2FudmFzL3poaWxpbmdcIikuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MuZmluZChcIkNhbnZhcy9yb2xlRGV0YWlsXCIpLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXR1cyA9PSAnbGVmdCcgfHwgdHlwZW9mIChzdGF0dXMpID09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgPSBway5sZWZ0UGxheVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yaWdodFNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PSAncmlnaHQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgPSBway5yaWdodFBsYXlbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcGsuY2xpY2tTdGF0dXMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoaXMubGVmdFNob3cobmFtZSlcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcm9sZSA9IGNjLmRpcmVjdG9yLmdldFNjZW5lKCkuZ2V0Q2hpbGRCeU5hbWUobmFtZSlcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJ1dHRvbiA9IHJvbGUuZ2V0Q29tcG9uZW50SW5DaGlsZHJlbihjYy5CdXR0b24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXlKcy5sb2FkLnBsYXllckNsaWNrRXZlbnQocm9sZSk7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8v5oqA6IO95oyH5LukXHJcbiAgICAgICAgICAgICAgICBjYXNlICdqbic6IHtcclxuICAgICAgICAgICAgICAgICAgICBjYy5sb2coXCLmioDog71cIilcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcCA9IGdldFBrUm9sZU1zZyhway5yaWdodFBsYXlbMF0sIDIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBqbiA9IHAuamluZW5nO1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZyhqblswXS5uYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgIGNjLmZpbmQoXCJDYW52YXMvemhpbGluZ1wiKS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBjYy5sb2coXCLliJ3lp4vljJbmioDog73liJfooahcIilcclxuICAgICAgICAgICAgICAgICAgICB2YXIgamluZW5nID0gY2MuZmluZChcIkNhbnZhcy9qaW5lbmdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgamluZW5nLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MuZmluZChcIkNhbnZhcy9qaW5lbmcvZGV0YWlsL3Njcm9sbHZpZXcvdmlldy9jb250ZW50XCIpLmdldENvbXBvbmVudCgncGtKbkNvbnRlbnQnKS5vbmxvYWRpbmcoKTtcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNjLmxvZygn5Yqg6L295oqA6IO95YiX6KGo5byC5bi4OicgKyBlKVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgfSxcclxuICAgIGxlZnRTaG93OiBmdW5jdGlvbiAobnVtKSB7XHJcbiAgICAgICAgdmFyIGxlZnQgPSBway5sZWZ0UGxheTtcclxuICAgICAgICB2YXIgc2NjZW4gPSBjYy5kaXJlY3Rvci5nZXRTY2VuZSgpXHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgaW4gbGVmdCkge1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQgPSBzY2Nlbi5nZXRDaGlsZEJ5TmFtZShsZWZ0W2ldKTtcclxuICAgICAgICAgICAgaWYgKG51bSAhPSBsZWZ0W2ldKSB7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC5nZXRDb21wb25lbnQoXCJwbGF5ZXJJdGVtXCIpLmF0dGFja0hpZGUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNoaWxkLmdldENvbXBvbmVudChcInBsYXllckl0ZW1cIikuYXR0YWNrU2hvdygpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgfSxcclxuICAgIHJpZ2h0U2hvdzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByaWdodCA9IHBrLnJpZ2h0UGxheTtcclxuICAgICAgICB2YXIgY2hpbGQgPSBjYy5kaXJlY3Rvci5nZXRTY2VuZSgpLmdldENoaWxkQnlOYW1lKHJpZ2h0WzBdKTtcclxuICAgICAgICBjaGlsZC5nZXRDb21wb25lbnQoXCJwbGF5ZXJJdGVtXCIpLmF0dGFja0hpZGUoKTtcclxuICAgIH0sXHJcbiAgICBiYWNrOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcGsuc3RhdHVzID0gbnVsbDtcclxuICAgICAgICBjYy5maW5kKFwiQ2FudmFzL3poaWxpbmdcIikuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICBjYy5maW5kKFwiQ2FudmFzL3JvbGVEZXRhaWxcIikuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIGxlZnQgPSBway5sZWZ0UGxheTtcclxuICAgICAgICBmb3IgKHZhciBpIGluIGxlZnQpIHtcclxuICAgICAgICAgICAgdmFyIGNoaWxkID0gY2MuZGlyZWN0b3IuZ2V0U2NlbmUoKS5nZXRDaGlsZEJ5TmFtZShsZWZ0W2ldKTtcclxuICAgICAgICAgICAgY2hpbGQuZ2V0Q29tcG9uZW50KFwicGxheWVySXRlbVwiKS5hdHRhY2tIaWRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciByaWdodCA9IHBrLnJpZ2h0UGxheTtcclxuXHJcbiAgICAgICAgZm9yICh2YXIgbSBpbiByaWdodCkge1xyXG4gICAgICAgICAgICB2YXIgY2hpbGQgPSBjYy5kaXJlY3Rvci5nZXRTY2VuZSgpLmdldENoaWxkQnlOYW1lKHJpZ2h0W21dKTtcclxuICAgICAgICAgICAgaWYgKG0gPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgY2hpbGQuZ2V0Q29tcG9uZW50KFwicGxheWVySXRlbVwiKS5hdHRhY2tTaG93KCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjaGlsZC5nZXRDb21wb25lbnQoXCJwbGF5ZXJJdGVtXCIpLmF0dGFja0hpZGUoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgIH0sXHJcbiAgICBwbGF5ZXJDbGlja0V2ZW50OiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICB2YXIgbm9kZSA9IGV2ZW50LnRhcmdldDtcclxuICAgICAgICBjYy5sb2cobm9kZS5uYW1lKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIOaOpeaUtuacjeWKoeWZqOi/lOWbnuaVsOaNruaSreaUvuWKqOeUu1xyXG4gICAgICovXHJcbiAgICBwbGF5UGtBbmltYXRpb246IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBQa0FuaW1hdGlvbigpO1xyXG4gICAgfSxcclxuICAgIGFuaW1hdGlvblRlc3Q6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL3RoaXMucGxheVBrQW5pbWF0aW9uKClcclxuICAgICAgICAvLyAgICAgdmFyIGJhY2tncm91bmQgPSBjYy5maW5kKFwiQ2FudmFzL2JhY2tncm91bmRcIik7XHJcbiAgICAgICAgLy8gICAgIHZhciBzZXE7XHJcbiAgICAgICAgLy8gICAgIGlmIChzdGF0dXMgPT0gMSkge1xyXG4gICAgICAgIC8vICAgICAgICAgc2VxID0gY2Muc2VxdWVuY2UoY2MubW92ZVRvKDEsIGNjLnAoMCwgMTM3KSkuZWFzaW5nKGNjLmVhc2VDdWJpY0FjdGlvbk91dCgxKSkpO1xyXG4gICAgICAgIC8vICAgICAgICAgYmFja2dyb3VuZC5jb2xvciA9IG5ldyBjYy5Db2xvcigyNDUsIDI0NSwgMjQ1KTtcclxuXHJcbiAgICAgICAgLy8gICAgICAgICBzdGF0dXMgPSBudWxsO1xyXG4gICAgICAgIC8vICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vICAgICAgICAgc2VxID0gY2Muc2VxdWVuY2UoY2MubW92ZVRvKDEsIGNjLnAoMjAwLCAxMzcpKS5lYXNpbmcoY2MuZWFzZUN1YmljQWN0aW9uT3V0KDEpKSk7XHJcbiAgICAgICAgLy8gICAgICAgICBiYWNrZ3JvdW5kLmNvbG9yID0gbmV3IGNjLkNvbG9yKDAsIDAsIDApO1xyXG4gICAgICAgIC8vICAgICAgICAgLy/lr7nlupTmioDog73liqjnlLtcclxuICAgICAgICAvLyAgICAgICAgIC8v5LqU6Zu36L2w6aG2XHJcblxyXG4gICAgICAgIC8vICAgICAgICAgc3RhdHVzID0gMTtcclxuICAgICAgICAvLyAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgIC8vICAgICBiYWNrZ3JvdW5kLnJ1bkFjdGlvbihzZXEpO1xyXG4gICAgICAgIC8vICAgamluZW5nTG9hZCgnd2FuamlhbicsYmFja2dyb3VuZCk7XHJcblxyXG5cclxuXHJcbiAgICB9LFxyXG4gICAgSm5BbmltYXRpb246IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICB2YXIgYmFja2dyb3VuZCA9IGNjLmZpbmQoXCJDYW52YXMvYmFja2dyb3VuZFwiKTtcclxuICAgICAgICB2YXIgc2VxO1xyXG4gICAgICAgIHZhciB4ID0gMDtcclxuICAgICAgICBpZiAoJ2xlZnQnID09IG1zZy5tc2cuYXR0YWNrVHlwZS5kaXJlY3Rpb24pIHtcclxuICAgICAgICAgICAgeCA9IDIwMDtcclxuICAgICAgICAgICAgYmFja2dyb3VuZC5jb2xvciA9IG5ldyBjYy5Db2xvcigwLCAwLCAwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB4ID0gLTIwMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VxID0gY2Muc2VxdWVuY2UoY2MubW92ZVRvKDEsIGNjLnAoeCwgMTM3KSkuZWFzaW5nKGNjLmVhc2VDdWJpY0FjdGlvbk91dCgxKSkpO1xyXG5cclxuXHJcblxyXG5cclxuICAgICAgICAvLyBzZXEgPSBjYy5zZXF1ZW5jZShjYy5tb3ZlVG8oMSwgY2MucCh4LCAxMzcpKS5lYXNpbmcoY2MuZWFzZUN1YmljQWN0aW9uT3V0KDEpKSk7XHJcbiAgICAgICAgLy8gYmFja2dyb3VuZC5jb2xvciA9IG5ldyBjYy5Db2xvcigwLCAwLCAwKTtcclxuICAgICAgICBiYWNrZ3JvdW5kLnJ1bkFjdGlvbihzZXEpO1xyXG4gICAgICAgIGppbmVuZ0xvYWQobXNnLCBiYWNrZ3JvdW5kLCBudWxsKTtcclxuXHJcblxyXG5cclxuICAgIH0sXHJcbiAgICBhbmltYXRpb25EYW5DbG9zZTogZnVuY3Rpb24gKGV2ZW50KSB7XHJcblxyXG4gICAgICAgIHZhciBiYWNrZ3JvdW5kID0gY2MuZmluZChcIkNhbnZhcy9iYWNrZ3JvdW5kXCIpO1xyXG4gICAgICAgIGJhY2tncm91bmQuZ2V0Q2hpbGRCeU5hbWUoXCJkYW5cIikuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5hbmltYXRpb25UZXN0KCk7XHJcblxyXG4gICAgfSxcclxuICAgIGFsZXJ0SW1nOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgIGxvYWRpbmdTY2VuZShIeHNnU2NlbmVzLmluZGV4LEh4c2dTY2VuZXMuaW5kZXgpXHJcblxyXG4gICAgfVxyXG59KTtcclxuIiwiXHJcbnZhciBzZWxmO1xyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIGNvbnRlbnRzOiBjYy5Ob2RlLFxyXG4gICAgICAgIC8vIGZvbzoge1xyXG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub2RlIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcclxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICB2aXNpYmxlOiB0cnVlLCAgICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXHJcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gLi4uXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIHNlbGYgPSB0aGlzO1xyXG4gICAgfSxcclxuICAgIGJhY2tFdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmZpbmQoXCJDYW52YXMvemhpbGluZ1wiKS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIGNjLmxvZyhcIuWIneWni+WMluaKgOiDveWIl+ihqFwiKVxyXG4gICAgICAgIGNjLmZpbmQoXCJDYW52YXMvamluZW5nXCIpLmFjdGl2ZSA9IGZhbHNlO1xyXG5cclxuXHJcbiAgICB9LFxyXG4gICAgb25sb2FkaW5nOiBmdW5jdGlvbiAoZSwgaWQpIHtcclxuICAgICAgICBjYy5sb2FkZXIubG9hZFJlcygncGsveWFvJywgY2MuUHJlZmFiLCBmdW5jdGlvbiAoZXJyLCBwcmVmYWIpIHtcclxuICAgICAgICAgICAgaWYgKCFlcnIpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuY29udGVudHMucmVtb3ZlQWxsQ2hpbGRyZW4oKTtcclxuICAgICAgICAgICAgICAgIGFqYXhVdGlscyhIeHNnVXJsLnF1ZXJ5Um9sZVlhbywgbnVsbCwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbnRlbnRzLmhlaWdodD0gZGF0YS5sZW5ndGgvMio4MCs4MDtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5vZGUgPSBjYy5pbnN0YW50aWF0ZShwcmVmYWIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaW1nTmFtZSA9IGRhdGFbaV0ueWFvaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXRoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW1nTmFtZSA8PSAxMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aCA9IFwicXgvXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXRoID0gXCJqbC9cIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgam5KcyA9IG5vZGUuZ2V0Q29tcG9uZW50KFwieWFvXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3ByaXRlID0gbm9kZS5nZXRDb21wb25lbnQoJ2NjLlNwcml0ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzcHJpdGUuc3ByaXRlRnJhbWUgPSBuZXcgY2MuU3ByaXRlRnJhbWUoY2MudXJsLnJhdyhcInJlc291cmNlcy95YW8vXCIgK3BhdGgrIGltZ05hbWUgKyBcIi5wbmdcIikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NjLmxvZyhzcHJpdGUuc3ByaXRlRnJhbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpuSnMuc2V0TnVtKGRhdGFbaV0uc3VtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5vbignY2xpY2snLCBzZWxmLmNsaWNrRXZlbnQsIHNlbGYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLmlkID0gZGF0YVtpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jb250ZW50cy5hZGRDaGlsZChub2RlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICB9LFxyXG4gICAgY2xpY2tFdmVudDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgbGV0IG5vZGUgPSBldmVudC50YXJnZXQ7XHJcbiAgICAgICAgbGV0IGpuID0gbm9kZS5pZDtcclxuICAgICAgICBjYy5sb2coJ+S9v+eUqOiNr+WTgeWQjeensDonICsgbm9kZS5pZC5za2lsbG5hbWUpO1xyXG4gICAgICAgIGNjLmZpbmQoXCJDYW52YXMvd3VwaW5cIikuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IGRhdGEgPSBudWxsO1xyXG4gICAgICAgIC8v6YGT5YW355qE5L2/55So77yM5ZCO5pyf6ZyA6KaB5aKe5Yqg77yM57uP5Yab5LukXHJcbiAgICAgICAgcGsuc2VsZWN0U3RhdHVzID0gMjAwMDtcclxuICAgICAgICBkYXRhID0gcGsuY2xpY2tBcnJheVJpZ2h0WzBdXHJcbiAgICAgICAgb25sb2FkSm5aaGlsaW5nKGZhbHNlKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIumAieaLqeaMh+S7pOWujOaIkFwiKVxyXG4gICAgICAgIC8v5qih5ouf54K55Ye756ys5LiA5Liq5Lq654mp5oyJ6ZKu5pWI5p6cXHJcbiAgICAgICAgY2xpY2tSb2xlVG9vbChkYXRhLCBub2RlLmlkLnlhb25hbWUpO1xyXG5cclxuICAgIH1cclxufSk7XHJcbiIsIlxyXG5cclxuXHJcbnZhciBzZWxmO1xyXG52YXIgcGxheVN0YXR1cyA9IDA7XHJcbnZhciBtc2cgPSBway5tc2c7XHJcbnZhciBtc2dKc29uO1xyXG52YXIgVHdlZW5MaXRlID0gcmVxdWlyZSgnVHdlZW5MaXRlJyk7XHJcbi8qKlxyXG4gKiBQS+WKqOeUu+aSreaUvuaciemZkOeKtuaAgeaculxyXG4gKi9cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRwa1N0YXRlTWFjaGluZSgpIHtcclxuXHJcblxyXG4gICAgdGhpcy5wa1N0YXRlTWFjaGluZSA9IG5ldyBTdGF0ZU1hY2hpbmUoe1xyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgYmF0dGxlOiBudWxsLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdHJhbnNpdGlvbnM6IFtcclxuICAgICAgICAgICAgeyBuYW1lOiAndG9TdGFydCcsIGZyb206ICdub25lJywgdG86ICdzdGFydCcgfSxcclxuICAgICAgICAgICAgeyBuYW1lOiAndG9TaGlmYScsIGZyb206ICdzdGFydCcsIHRvOiAnc2hpZmEnIH0sXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ3RvTW92ZUJhY2tHcm91bmQnLCBmcm9tOiAnc2hpZmEnLCB0bzogJ2JhY2tnb3J1bmQnIH0sXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ3RvU2tpbGwnLCBmcm9tOiAnYmFja2dvcnVuZCcsIHRvOiAnc2tpbGwnIH0sXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ3RvS291WHVlJywgZnJvbTogJ3NraWxsJywgdG86ICdrb3V4dWUnIH0sXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ3RvUmV0dXJuQmFja0dyb3VuZCcsIGZyb206ICdrb3V4dWUnLCB0bzogJ21vdmVCYWNrJyB9LFxyXG4gICAgICAgICAgICB7IG5hbWU6ICdmaW5zaGVkJywgZnJvbTogJ21vdmVCYWNrJywgdG86ICdlbmQnIH0sXHJcbiAgICAgICAgICAgIHsgbmFtZTogJ2VuZCcsIGZyb206ICdlbmQnLCB0bzogJ3N0YXJ0JyB9XHJcblxyXG4gICAgICAgIF0sXHJcbiAgICAgICAgbWV0aG9kczoge1xyXG4gICAgICAgICAgICBvblN0YXJ0KCkge1xyXG4gICAgICAgICAgICAgICAgbXNnID0gcGsubXNnO1xyXG4gICAgICAgICAgICAgICAgbXNnSnNvbiA9IG1zZ1twbGF5U3RhdHVzXTtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MubG9nKG1zZ0pzb24ucGxheWVyMSArIFwi5L2/55So5LqG44CQXCIgKyBtc2dKc29uLmF0dGFja1R5cGUubmFtZSArIFwi44CR6YCg5oiQXCIgKyBtc2dKc29uLnBsYXllcjJbMF0gKyBcIu+8mlwiICsgbXNnSnNvbi5iYXR0bGVEYXRhW21zZ0pzb24ucGxheWVyMlswXV0uUXggKyBcIuiiq+aUu+WHu+iAheWJqeS9me+8mlwiICsgbXNnSnNvbi5iYXR0bGVEYXRhW21zZ0pzb24ucGxheWVyMlswXV0uUXgyKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJvblN0YXJ0XCIpXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uVG9TaGlmYSgpO1xyXG4gICAgICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25Ub1NoaWZhKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBsYXlTdGF0dXMgPj0gcGsubXNnLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYXlTdGF0dXM9MDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGsucGtzdGF0dXMgIT0gXCI2MDAwXCIgJiYgcGsucGtzdGF0dXMgIT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYy5sb2coXCLmiJjmlpfnu5PmnZ9cIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2MuZmluZChcIkNhbnZhcy9lbmRcIikuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGsubXNnID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBrLnBrc3RhdHVzID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIC8v6YeN572uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBrLmluaXRUeXBlPVwiaW5pdFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBway5wbGF5ZXIxID0ge31cclxuICAgICAgICAgICAgICAgICAgICAgICAgcGsucGxheWVyMiA9IHt9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBrLmluaXRUeXBlICE9IFwiaW5pdFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v6YeN572uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBrLmluaXRUeXBlPVwiaW5pdFwiO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqc29uRGF0YSA9IHBrLnRlbXBNc2c7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v6YeN5paw5Yqg6L295Li755WM6Z2i5pWw5o2uLS0tLTIwMTgtMS0yMeS/ruWkjemHjeWkjeWKoOi9vXJpZ2h0UGxheemXrumimFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbmxvYWRQa01zZyhqc29uRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBrLnNlbGVjdFN0YXR1cyA9IDIwMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBrLnRpbWVTdGF0dXMgPSAwOy8v5byA5ZCv5YCS6K6h5pe2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBrLm1zZyA9IFtdOy8v5Yid5aeL5YyW5pWw5o2uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXlTdGF0dXMgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYy5sb2cocGspXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5wa09ubG9hZC5pbml0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFBrU29ja2V0RXZlbnRzLm9ubG9hZFBsYXkoLTE2MCwgLTE2NSwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFBrU29ja2V0RXZlbnRzLm9ubG9hZFBsYXkoMjUzLCAyMDUsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbmxvYWRKbih0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjYy5maW5kKFwiQ2FudmFzL25hbWUvYXR0YWNrVHlwZVwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IG1zZ0pzb24uYXR0YWNrVHlwZS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5pa95rOV44CC44CC44CCXCIgKyBtc2dKc29uLnBsYXllcjEpXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJvZHkgPSBjYy5maW5kKFwiQ2FudmFzL2JhY2tncm91bmQvXCIgKyBtc2dKc29uLnBsYXllcjEgKyBcIi9wbGF5L3JvbGUvYm9keVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2hpZkFuaW0gPSBib2R5LmdldENoaWxkQnlOYW1lKFwic2hpZmFcIikuZ2V0Q29tcG9uZW50KGNjLkFuaW1hdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8v5YWz6Zet6KGA5p2h5pi+56S6XHJcbiAgICAgICAgICAgICAgICAgICAgcGxheWJsb29kQ2xvc2UoMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/lhbPpl63miYDmnInkurrnialidWZm5pi+56S6XHJcbiAgICAgICAgICAgICAgICAgICAgYnVmZkNsb3NlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8v5a+56Ieq6Lqr6Zif5Y+L6YeK5pS+5oqA6IO977yM5Zy65pmv5LiN56e75YqoXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGF5QW5pbShzaGlmQW5pbSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vblRvTW92ZUJhY2tHcm91bmQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvblRvTW92ZUJhY2tHcm91bmQoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuiDjOaZr+enu+WKqOW8gOWni1wiKVxyXG4gICAgICAgICAgICAgICAgdmFyIGpuTmFtZSA9IG1zZ0pzb24uYXR0YWNrVHlwZS50eXBlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGpuTmFtZSA9PSBcImpuemhhbnB1Z29uZ1wiIHx8IGpuTmFtZSA9PSBcInVzcnlhb1wiIHx8IGpuTmFtZSA9PSBcImpsYnpcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4geyB0aGlzLm9uVG9Ta2lsbCgpOyB9LCAxMDApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJhY2tncm91bmQgPSBjYy5maW5kKFwiQ2FudmFzL2JhY2tncm91bmRcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IG1zZ0pzb24uYXR0YWNrVHlwZS5yb2xlUG9zaXRpb24gPT0gJ2xlZnQnID8gLTIwMCA6IDIwMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1zZ0pzb24uYXR0YWNrVHlwZS5yb2xlUG9zaXRpb24gPT0gXCJzZWxmXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHggPSAtMjAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZVRvKGJhY2tncm91bmQsIHgsIDEzNywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vblRvU2tpbGwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIG9uVG9Ta2lsbCgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBiYWNrZ3JvdW5kID0gY2MuZmluZChcIkNhbnZhcy9qblwiKTtcclxuICAgICAgICAgICAgICAgIHZhciBqbkFuaW0gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgLy/lgZzmraLnq5nnq4tcclxuICAgICAgICAgICAgICAgIHN0YW5kQW5pbShtc2dKc29uLnBsYXllcjIsIGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgdmFyIGpuTmFtZSA9IG1zZ0pzb24uYXR0YWNrVHlwZS50eXBlO1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIHN3aXRjaCAoam5OYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImpuemhhbnB1Z29uZ1wiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwbGF5R29uZ0lkID0gbXNnSnNvbi5wbGF5ZXIxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGxheVNob3VJZCA9IG1zZ0pzb24ucGxheWVyMlswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBsYXlHb25nID0gY2MuZmluZChcIkNhbnZhcy9iYWNrZ3JvdW5kL1wiICsgcGxheUdvbmdJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwbGF5U2hvdSA9IGNjLmZpbmQoXCJDYW52YXMvYmFja2dyb3VuZC9cIiArIHBsYXlTaG91SWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGxheUdvbmdYID0gcGxheUdvbmcueDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBsYXlHb25nWSA9IHBsYXlHb25nLnk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW92ZVRvKHBsYXlHb25nLCBwbGF5U2hvdS54LCBwbGF5U2hvdS55LCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm9uVG9Lb3VYdWUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdmVUbyhwbGF5R29uZywgcGxheUdvbmdYLCBwbGF5R29uZ1ksIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vbkZpbnNoZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwid3VndWppZHVcIjoge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2MuZmluZChcIkNhbnZhcy9iYWNrZ3JvdW5kXCIpLmNvbG9yID0gbmV3IGNjLkNvbG9yKDI1NSwgMjU1LCAyNTUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqbkFuaW0gPSBiYWNrZ3JvdW5kLmdldENvbXBvbmVudChjYy5BbmltYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImpsYnpcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYub25GaW5zaGVkKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ3ZWlcIjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibHVhblwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJmZW5nXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInVzcnlhb1wiOlxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJxaWNob25nXCI6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBsYXlTaG91SWQgPSBtc2dKc29uLnBsYXllcjI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBudW0gPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGxheVNob3VJZC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGpuRGFuID0gY2MuZmluZChcIkNhbnZhcy9iYWNrZ3JvdW5kL1wiICsgcGxheVNob3VJZFtpXSArIFwiL2puRGFuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcIkNhbnZhcy9iYWNrZ3JvdW5kL1wiICsgcGxheVNob3VJZFtpXSArIFwiL2puRGFuXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgam5BbmltID0gam5EYW4uZ2V0Q29tcG9uZW50KGNjLkFuaW1hdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYXlBbmltQXJyKGpuQW5pbSwgam5OYW1lLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1zZyA9IHBrLm1zZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudW0gPT0gcGxheVNob3VJZC5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm9uVG9SZXR1cm5CYWNrR3JvdW5kKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vblRvUmV0dXJuQmFja0dyb3VuZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhqbk5hbWUgKyBcIuaKgOiDvemHiuaUvuWujOavlVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vblRvS291WHVlKGpuTmFtZSk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDApO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgIHBrU3RhdGVNYWNoaW5lLm9uVG9SZXR1cm5CYWNrR3JvdW5kKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH0sIDEwMCAqIChwbGF5U2hvdUlkLmxlbmd0aCsxKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibGVpXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImxpcGlcIjpcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwic2hlbWluZ1wiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYy5maW5kKFwiQ2FudmFzL2JhY2tncm91bmRcIikuY29sb3IgPSBuZXcgY2MuQ29sb3IoMCwgMCwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGxheVNob3VJZCA9IG1zZ0pzb24ucGxheWVyMlswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqbkRhbiA9IGNjLmZpbmQoXCJDYW52YXMvYmFja2dyb3VuZC9cIiArIHBsYXlTaG91SWQgKyBcIi9qbkRhblwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpuQW5pbSA9IGpuRGFuLmdldENvbXBvbmVudChjYy5BbmltYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2MuZmluZChcIkNhbnZhcy9iYWNrZ3JvdW5kXCIpLmNvbG9yID0gbmV3IGNjLkNvbG9yKDAsIDAsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqbkFuaW0gPSBiYWNrZ3JvdW5kLmdldENvbXBvbmVudChjYy5BbmltYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXlBbmltQXJyKGpuQW5pbSwgam5OYW1lLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwa1N0YXRlTWFjaGluZS5vblRvS291WHVlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuaKgOiDvemHiuaUvuWujOavlVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vblRvUmV0dXJuQmFja0dyb3VuZCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vblRvS291WHVlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uVG9Lb3VYdWUoam5OYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAvL+iiq+aUu+WHu+edgFxyXG4gICAgICAgICAgICAgICAgbGV0IHBsYXkgPSBtc2dKc29uLnBsYXllcjI7XHJcbiAgICAgICAgICAgICAgICBsZXQgYmF0dGxlRGF0YSA9IG1zZ0pzb24uYmF0dGxlRGF0YTtcclxuICAgICAgICAgICAgICAgIGxldCBhdHRhY2tUeXBlID0gbXNnSnNvbi5hdHRhY2tUeXBlO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGxheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHZhciByZSA9IGtvdXh1ZShway5wbGF5ZXIxLCBwbGF5W2ldLCBiYXR0bGVEYXRhW3BsYXlbaV1dLGF0dGFja1R5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIChyZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICAgICBrb3V4dWUocGsucGxheWVyMiwgcGxheVtpXSwgYmF0dGxlRGF0YVtwbGF5W2ldXSxhdHRhY2tUeXBlKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBxeCA9IGJhdHRsZURhdGFbcGxheVtpXV0uUXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v5pKt5pS+5omj6KGA77yM5oiW6ICF56eN5LqGQlVGRuWKqOeUu++8jGJ1ZmbliqjnlLvmoLnmja7mioDog73lkI3np7DpgInmi6lcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHNob3VqaSA9IGNjLmZpbmQoXCJDYW52YXMvYmFja2dyb3VuZC9cIiArIHBsYXlbaV0pLmdldENvbXBvbmVudChjYy5BbmltYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQga291eHVlID0gY2MuZmluZChcIkNhbnZhcy9iYWNrZ3JvdW5kL1wiICsgcGxheVtpXSArIFwiL3BsYXkva291eHVlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrb3V4dWUuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBxeDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRlYWQgPSBjYy5maW5kKFwiQ2FudmFzL2JhY2tncm91bmQvXCIgKyBwbGF5W2ldICsgXCIvZGVhZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gIGxldCBrb3V4dWUgPSBjYy5maW5kKFwiQ2FudmFzL2JhY2tncm91bmQvXCIgKyBwbGF5W2ldICsgXCIvcGxheS9rb3V4dWVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqbk5hbWUgPT0gXCJ1c3J5YW9cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MuZmluZChcIkNhbnZhcy9iYWNrZ3JvdW5kL1wiICsgcGxheVtpXSArIFwiL3BsYXlcIikuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICBrb3V4dWUuY29sb3IgPSBuZXcgY2MuQ29sb3IoXCIjMTZGMTBEXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVhZC5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICBrb3V4dWUuY29sb3IgPSBuZXcgY2MuQ29sb3IoXCIjMDAwMDAwXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChxeCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrb3V4dWUuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKS5zdHJpbmcgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHd6ID0gY2MuZmluZChcIkNhbnZhcy9iYWNrZ3JvdW5kL1wiICsgcGxheVtpXSArIFwiL3BsYXkvd3pcIikuZ2V0Q29tcG9uZW50KGNjLkFuaW1hdGlvbik7O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxheUFuaW0od3opO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBsYXlBbmltKHNob3VqaSwgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBxeDIgPSBiYXR0bGVEYXRhW3BsYXlbaV1dLlF4MjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNjLmZpbmQoXCJDYW52YXMvYmFja2dyb3VuZC9cIiArIHBsYXlbaV0gKyBcIi9wbGF5L2tvdXh1ZVwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocXgyID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+aSreaUvuatu+S6oeWKqOeUu1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlYWQuc2NhbGVYID0gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MuZmluZChcIkNhbnZhcy9iYWNrZ3JvdW5kL1wiICsgcGxheVtpXSArIFwiL3BsYXlcIikuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRlYWRBbmltID0gZGVhZC5nZXRDb21wb25lbnQoY2MuQW5pbWF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGF5QW5pbShkZWFkQW5pbSwgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMjAwKTtcclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvblRvUmV0dXJuQmFja0dyb3VuZCgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwib25Nb3ZlQmFjay0tLS1cIik7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmFja2dyb3VuZCA9IGNjLmZpbmQoXCJDYW52YXMvYmFja2dyb3VuZFwiKVxyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC5jb2xvciA9IG5ldyBjYy5Db2xvcigyNDAsIDI0MCwgMjQwKTtcclxuICAgICAgICAgICAgICAgIGxldCBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vdmVUbyhiYWNrZ3JvdW5kLCAtMjAsIDEzNywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm9uRmluc2hlZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAgICAgfSwgMTAwKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uRmluc2hlZCgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwib25GaW5zaGVkLS0tLVwiKTtcclxuICAgICAgICAgICAgICAgIGNjLmZpbmQoXCJDYW52YXMvbmFtZS9hdHRhY2tUeXBlXCIpLmdldENvbXBvbmVudChjYy5MYWJlbCkuc3RyaW5nID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIHRoaXMub25FbmQoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25FbmQoKSB7XHJcbiAgICAgICAgICAgICAgICBwbGF5U3RhdHVzKys7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uU3RhcnQoKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZW5kLS0tLVwiKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIC8vcmV0dXJuIHBrU3RhdGVNYWNoaW5lO1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24ga291eHVlKGFyciwgaWQsIGJhdHRsZURhdGEsIGF0dGFja1R5cGUpIHtcclxuICAgIHZhciBxeCA9IGJhdHRsZURhdGEuUXg7XHJcbiAgICB2YXIgcmUgPSB0cnVlO1xyXG4gICAgY2MubG9nKGlkKVxyXG4gICAgZm9yIChsZXQgbSA9IDA7IG0gPCBhcnIubGVuZ3RoOyBtKyspIHtcclxuICAgICAgICBjYy5sb2coXCItLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cIik7XHJcbiAgICAgICAgY2MubG9nKGFyclttXS5pZClcclxuICAgICAgICBpZiAoYXJyW21dLmlkID09IGlkKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBxeCA9IHBhcnNlSW50KHF4KTtcclxuICAgICAgICAgICAgICAgIGFyclttXS5xaXh1ZSA9IGJhdHRsZURhdGEuUXgyO1xyXG4gICAgICAgICAgICAgICAgcmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGNjLmxvZyhhcnIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGJ1ZmZUeXBlID0gYmF0dGxlRGF0YS5idWZmO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJ1ZmZUeXBlICE9IG51bGwgJiYgdHlwZW9mIChidWZmVHlwZSkgIT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBhcnJbbV1bJ2JhdHRsZURhdGEnXSA9IGJhdHRsZURhdGE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGNjLmxvZyhcImJ1ZmbliqDovb3lvILluLg6XCIgKyBlKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbiAgICBjYy5sb2cocGspXHJcbiAgICByZXR1cm4gcmU7XHJcblxyXG59XHJcbmZ1bmN0aW9uIHBsYXlBbmltKGFuaW0sIGNhbGxiYWNrKSB7XHJcbiAgICBhbmltLnBsYXkoKTtcclxuICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgIGFuaW0ub24oJ2ZpbmlzaGVkJywgY2FsbGJhY2spO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHBsYXlBbmltQXJyKGFuaW0sIG5hbWUsIGNhbGxiYWNrKSB7XHJcbiAgICBhbmltLnBsYXkobmFtZSk7XHJcbiAgICBpZiAoY2FsbGJhY2spIHtcclxuICAgICAgICBhbmltLm9uKCdmaW5pc2hlZCcsIGNhbGxiYWNrKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBtb3ZlVG8ocG9zaXRpb24sIHgsIHksIGNhbGxiYWNrKSB7XHJcblxyXG5cclxuICAgIFR3ZWVuTGl0ZS50byhwb3NpdGlvbiwgMC41LCB7XHJcbiAgICAgICAgeDogeCxcclxuICAgICAgICB5OiB5LFxyXG4gICAgICAgIGVhc2U6IFBvd2VyMi5lYXNlT3V0LFxyXG4gICAgICAgIG9uQ29tcGxldGU6IGNhbGxiYWNrXHJcbiAgICB9KTtcclxuXHJcbn1cclxuLyoqXHJcbiAqIOeOqeWutuihgOadoeaYvuekuuW8gOWFs1xyXG4gKi9cclxuZnVuY3Rpb24gcGxheWJsb29kQ2xvc2UobnVtKSB7XHJcbiAgICB2YXIgbGVmdCA9IHBrLmxlZnRQbGF5O1xyXG4gICAgdmFyIHJpZ2h0ID0gcGsucmlnaHRQbGF5O1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZWZ0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY2MuZmluZChcIkNhbnZhcy9iYWNrZ3JvdW5kL1wiICsgbGVmdFtpXSArIFwiL3BsYXkvc3RhdHVzXCIpLm9wYWNpdHkgPSBudW07XHJcblxyXG5cclxuICAgIH1cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmlnaHQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjYy5maW5kKFwiQ2FudmFzL2JhY2tncm91bmQvXCIgKyByaWdodFtpXSArIFwiL3BsYXkvc3RhdHVzXCIpLm9wYWNpdHkgPSBudW07XHJcblxyXG4gICAgfVxyXG5cclxufVxyXG4vKipcclxuICog5YWz6Zet546p5a62YnVmZlxyXG4gKi9cclxuZnVuY3Rpb24gYnVmZkNsb3NlKCkge1xyXG4gICAgdmFyIGJhY2tncm91bmQgPSBjYy5maW5kKFwiQ2FudmFzL2JhY2tncm91bmRcIik7XHJcbiAgICB2YXIgY2hpbGRyZW4gPSBiYWNrZ3JvdW5kLmNoaWxkcmVuO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxldCBidWZmID0gY2hpbGRyZW5baV0uZ2V0Q2hpbGRCeU5hbWUoXCJidWZmXCIpO1xyXG4gICAgICAgICAgICBidWZmLnJlbW92ZUFsbENoaWxkcmVuKCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjYy5sb2coZSlcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbn1cclxuLyoqXHJcbiAqIOermeeri+WKqOeUu+aOp+WItuW8gOWFs1xyXG4gKi9cclxuZnVuY3Rpb24gc3RhbmRBbmltKGFyciwga2V5KSB7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgcm9sZSA9IGNjLmZpbmQoXCJDYW52YXMvYmFja2dyb3VuZC9cIiArIGFycltpXSArIFwiL3BsYXkvcm9sZVwiKTtcclxuICAgICAgICBpZiAoa2V5KSB7XHJcbiAgICAgICAgICAgIHJvbGUuZ2V0Q29tcG9uZW50KGNjLkFuaW1hdGlvbikucGxheSgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJvbGUuZ2V0Q29tcG9uZW50KGNjLkFuaW1hdGlvbikuc3RvcCgpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgfVxyXG5cclxufVxyXG52YXIgcGxheUpzID0gY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBoZWFkOiBjYy5TcHJpdGUsXHJcbiAgICAgICAgYm9keTogY2MuU3ByaXRlLFxyXG4gICAgICAgIGZvb3Q6IGNjLlNwcml0ZSxcclxuICAgICAgICBhdHRhY2s6IGNjLk5vZGUsXHJcbiAgICAgICAgYnV0dG9uOiBjYy5CdXR0b24sXHJcbiAgICAgICAgcm9sZURlYXRoOiBjYy5Ob2RlLFxyXG4gICAgICAgIGxhYmVsOiBjYy5Ob2RlLFxyXG4gICAgfSxcclxuICAgIGRlYXRoOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5yb2xlRGVhdGguYWN0aXZlID0gdHJ1ZTtcclxuXHJcblxyXG5cclxuICAgIH0sXHJcbiAgICBzaGlmYTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBwbGF5SnMgPSByZXF1aXJlKFwicGxheWVySXRlbVwiKTtcclxuICAgICAgICB2YXIgcHkgPSBuZXcgcGxheUpzKCk7XHJcbiAgICAgICAgdmFyIHN0YXRlTWFjaGluZSA9IHB5LnBrU3RhdGVNYWNoaW5lO1xyXG4gICAgICAgIHN0YXRlTWFjaGluZS50b1N0YXJ0KCk7XHJcblxyXG4gICAgfSxcclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZiA9IHRoaXM7XHJcblxyXG5cclxuICAgICAgICAvLyB2YXIgZmxpcFlBY3Rpb24gPSBjYy5mbGlwWCh0cnVlKTtcclxuICAgICAgICAvLyB2YXIgYWN0aW9uQnkgPSBjYy5tb3ZlVG8oMC41LCBjYy5wKDEzMCw2OTgpKTtcclxuICAgICAgICAvLyAgICB0aGlzLm5vZGUucnVuQWN0aW9uKGZsaXBZQWN0aW9uKTtcclxuXHJcbiAgICAgICAgLy8gIHRoaXMubm9kZS5ydW5BY3Rpb24oYWN0aW9uQnkpO1xyXG5cclxuICAgICAgICAvLyAgICB2YXIgeT0gdGhpcy5ub2RlLmdldFBvc2l0aW9uWSgpO1xyXG4gICAgICAgIC8vICAgICAgIHZhciB4PSB0aGlzLm5vZGUuZ2V0UG9zaXRpb25YKCk7XHJcbiAgICAgICAgLy8gICAgICAgdmFyIGhlaWdodD15KzEwO1xyXG4gICAgICAgIC8vICAgICB2YXIgc2VxID0gY2MucmVwZWF0Rm9yZXZlcihjYy5tb3ZlVG8oeCwgY2MucCgwLHkrMTApKS5lYXNpbmcoY2MuZWFzZUN1YmljQWN0aW9uT3V0KDEpKSk7XHJcbiAgICAgICAgLy8gICAgIGlmKGhlaWdodD09dGhpcy5ub2RlLmdldFBvc2l0aW9uWSgpKVxyXG4gICAgICAgIC8vICAgICAgIHZhciBzZXEgPSBjYy5yZXBlYXRGb3JldmVyKGNjLm1vdmVUbyh4LCBjYy5wKDAseS0xMCkpLmVhc2luZyhjYy5lYXNlQ3ViaWNBY3Rpb25PdXQoMSkpKTtcclxuICAgICAgICAvLyAgICAgdGhpcy5ib2R5Lm5vZGUucnVuQWN0aW9uKHNlcSk7XHJcblxyXG4gICAgICAgIC8vICAgICAgICAgY2MubG9nKFwiLS0taGVpZ2h0OlwiK3RoaXMubm9kZS5nZXRQb3NpdGlvblkoKSlcclxuXHJcblxyXG4gICAgfSxcclxuICAgIGF0dGFja0hpZGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmF0dGFjay5hY3RpdmUgPSBmYWxzZTtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIGF0dGFja1Nob3c6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmF0dGFjay5hY3RpdmUgPSB0cnVlO1xyXG5cclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIOmBjeWOhuaVsOe7hOi/lOWbnuinkuiJsuS/oeaBry0tLS1cclxuICAgICAqL1xyXG4gICAgZ2V0Um9sZU1zZzogZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmFyIHAgPSBway5wbGF5MTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaWQgPT0gcFtpXS5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwW2ldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG5cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgIH0sXHJcbiAgICBwbGF5ZXJDbGlja0V2ZW50OiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBjYy5sb2coJ+S6uueJqeeCueWHu+aXtumXtOinpuWPkScpXHJcbiAgICAgICAgdmFyIHBhcmVudDtcclxuICAgICAgICB2YXIgbXNnO1xyXG4gICAgICAgIHZhciBsZWZ0O1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChway5jbGlja1N0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBldmVudC50YXJnZXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAobm9kZSkgPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYy5sb2coJy0tLS0tLS0tLS0tLS0tLS0tLScpXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50ID0gZXZlbnQ7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudCA9IG5vZGUucGFyZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZygnLS0tLS0tLSsrKysrLS0tLS0tLS0tLS0nKVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcm9sZURldGFpbCA9IGNjLmZpbmQoXCJDYW52YXMvcm9sZURldGFpbFwiKTtcclxuICAgICAgICAgICAgICAgIHZhciByb2xlRGV0YWlsSnMgPSByb2xlRGV0YWlsLmdldENvbXBvbmVudChcInJvbGVkZXRhaWxcIik7XHJcbiAgICAgICAgICAgICAgICBtc2cgPSBnZXRQa1JvbGVNc2cocGFyZW50Lm5hbWUsIDEpO1xyXG4gICAgICAgICAgICAgICAgbGVmdCA9IHBrLmxlZnRQbGF5O1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAobXNnKSA9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgICAgICAgICAgICAgIG1zZyA9IGdldFBrUm9sZU1zZyhwYXJlbnQubmFtZSwgMik7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHBrLnJpZ2h0UGxheTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByb2xlRGV0YWlsSnMuc2V0QXR0YWNrTmFtZShway5qbik7XHJcbiAgICAgICAgICAgICAgICByb2xlRGV0YWlsSnMuc2V0VHlwZShtc2cubmFtZSk7XHJcbiAgICAgICAgICAgICAgICByb2xlRGV0YWlsSnMuc2V0WHVlKFwi6KGAOlwiICsgbXNnLnFpeHVlKTtcclxuICAgICAgICAgICAgICAgIHJvbGVEZXRhaWxKcy5zZXRKaW5nKFwi57K+OlwiICsgbXNnLmppbmdsaSk7XHJcbiAgICAgICAgICAgICAgICByb2xlRGV0YWlsSnMuc2V0c3UoXCLpgJ/luqbnrKzlhatcIik7XHJcbiAgICAgICAgICAgICAgICBjYy5sb2cocGsuc3RhdHVzKVxyXG4gICAgICAgICAgICAgICAgaWYgKHBrLnN0YXR1cyA9PSBwYXJlbnQubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcIuaUu+WHu+aMh+S7pOWujOaIkDpcIiArIHBrLnJpZ2h0UGxheVswXSArIFwi5L2/55So44CQXCIgKyBway5qbiArIFwi44CR5pS75Ye75LqGXCIgKyBwYXJlbnQubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/mjIfku6TmlbDnu4RcclxuICAgICAgICAgICAgICAgICAgICBway5hdHRhY2tlZC5wdXNoKHsgJ2F0dGFjayc6IHBrLnJpZ2h0UGxheVswXSwgJ2F0dGFja2VkJzogcGFyZW50Lm5hbWUsICdhdHRhY2tUeXBlJzogcGsuam4gfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHBrLnJpZ2h0UGxheS5zaGlmdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChway5yaWdodFBsYXkubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/lj7PmlrnmlLvlh7vmjIfku6Tlhajpg6jlrozmiJBcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2MubG9nKFwi5Y+R6YCB5pS75Ye75oyH5Luk57uZ5pyN5Yqh5ZmoOlwiICsgcGsuYXR0YWNrZWQubGVuZ3RoKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iYWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LmdldENvbXBvbmVudChcInBsYXllckl0ZW1cIikuYXR0YWNrSGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBrLmNsaWNrU3RhdHVzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcGsuc3RhdHVzID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBway5qbiA9ICfmma7pgJrmlLvlh7snXHJcblxyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGsuc3RhdHVzID0gcGFyZW50Lm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LmdldENvbXBvbmVudChcInBsYXllckl0ZW1cIikuYXR0YWNrU2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzY2NlbiA9IGNjLmRpcmVjdG9yLmdldFNjZW5lKClcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpIGluIGxlZnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxlZnRbaV0gIT0gcGFyZW50Lm5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IHNjY2VuLmdldENoaWxkQnlOYW1lKGxlZnRbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQuZ2V0Q29tcG9uZW50KFwicGxheWVySXRlbVwiKS5hdHRhY2tIaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuXHJcbiAgICAgICAgICAgIGNjLmxvZyhlKVxyXG5cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgIH0sXHJcblxyXG4gICAgYmFjazogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciByaWdodCA9IHBrLnJpZ2h0UGxheTtcclxuICAgICAgICBpZiAodHlwZW9mIChyaWdodFswXSkgPT0gJ3VuZGVmaW5lZCcgfHwgcmlnaHRbMF0gPT0gbnVsbCB8fCByaWdodFswXSA9PSAnJykge1xyXG4gICAgICAgICAgICBjYy5maW5kKFwiQ2FudmFzL3poaWxpbmdcIikuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGNjLmZpbmQoXCJDYW52YXMvcm9sZURldGFpbFwiKS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjYy5maW5kKFwiQ2FudmFzL3poaWxpbmdcIikuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgY2MuZmluZChcIkNhbnZhcy9yb2xlRGV0YWlsXCIpLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBtIGluIHJpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGQgPSBjYy5kaXJlY3Rvci5nZXRTY2VuZSgpLmdldENoaWxkQnlOYW1lKHJpZ2h0W21dKTtcclxuICAgICAgICAgICAgICAgIGlmIChtID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGlsZC5nZXRDb21wb25lbnQoXCJwbGF5ZXJJdGVtXCIpLmF0dGFja1Nob3coKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hpbGQuZ2V0Q29tcG9uZW50KFwicGxheWVySXRlbVwiKS5hdHRhY2tIaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG5cclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcblxyXG59KTtcclxuXHJcbiIsImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgLy8gZm9vOiB7XHJcbiAgICAgICAgLy8gICAgZGVmYXVsdDogbnVsbCwgICAgICAvLyBUaGUgZGVmYXVsdCB2YWx1ZSB3aWxsIGJlIHVzZWQgb25seSB3aGVuIHRoZSBjb21wb25lbnQgYXR0YWNoaW5nXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICB0byBhIG5vZGUgZm9yIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgLy8gICAgdXJsOiBjYy5UZXh0dXJlMkQsICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxyXG4gICAgICAgIC8vICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSwgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIHZpc2libGU6IHRydWUsICAgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIGRpc3BsYXlOYW1lOiAnRm9vJywgLy8gb3B0aW9uYWxcclxuICAgICAgICAvLyAgICByZWFkb25seTogZmFsc2UsICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIGZhbHNlXHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICAvLyAuLi5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG4gICBiYWNrRXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL+iwg+eUqOmAmueUqOeahOi/lOWbnuS4iuS4gOWcuuaZr+aWueazlVxyXG4gICAgICAgdmFyIHNjZW5lID0gY2MuZGlyZWN0b3IuZ2V0U2NlbmUoKS5uYW1lO1xyXG4gICAgICAgIHJldHVybkxhc3RTY2VuZShzY2VuZSk7XHJcbiAgICB9LFxyXG4gICAgIGJhY2tVc2VyTGlzdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoJ3VzZXJMaXN0Jyk7XHJcbiAgICB9LFxyXG4gICAgLy8gSHhzZ1NjZW5lc1xyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsInZhciBzZWxmO1xyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIHJvbGVOYW1lOmNjLkxhYmVsLFxyXG4gICAgICAgIGJhdHRsZTpjYy5TcHJpdGUsXHJcbiAgICAgICAgYmF0dGxlTGlzdDp7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IFtdLFxyXG4gICAgICAgICAgICB0eXBlOiBjYy5TcHJpdGVGcmFtZSAgIFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaW1nOmNjLlNwcml0ZSxcclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgfSxcclxuICAgICAgICBvbkxvYWQoKXtcclxuICAgICAgICAgICAgc2VsZj10aGlzO1xyXG4gICAgfSxcclxuICAgIGluaXQ6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICB0aGlzLnJvbGVOYW1lLnN0cmluZyA9IG1zZy5yb2xlTmFtZTtcclxuICAgICAgICB0aGlzLmJhdHRsZS5zcHJpdGVGcmFtZSA9IHRoaXMuYmF0dGxlTGlzdFttc2cubnVtXTtcclxuICAgICAgICB0aGlzLmlkID0gbXNnO1xyXG4gICAgICAgICBcclxuICAgICAgICB0aGlzLmJhdHRsZS5ub2RlLm9uKGNjLk5vZGUuRXZlbnRUeXBlLlRPVUNIX1NUQVJULCB0aGlzLmFsZXJ0LCB0aGlzKTtcclxuXHJcblxyXG4gICAgfSxcclxuICAgIGFsZXJ0OiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICBpZiAodGhpcy5pZC5udW0gPT0gMCkge1xyXG4gICAgICAgICAgICBway55ZWd1YWk9dGhpcy5pZDtcclxuICAgICAgICAgICAgbG9hZGluZ1NjZW5lKEh4c2dTY2VuZXMucGtXYWl0LEh4c2dTY2VuZXMuaW5kZXgpO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pZC5yb2xlTmFtZSA9PSAn5YaF5rWL5L2/6ICFJykge1xyXG4gICAgICAgICAgICAgICAgc2hvd0FsZXJ0KCfkvaDmg7Ppooblj5bmr4/lpKnnmoTol4/lrp3lm77lpKfnpLzljIXlkJfvvJ8nLHRoaXMuc3VjY2VzKTtcclxuICAgICAgICAgICAgICAgIHVzZXJXdVBpbi5vYmpldHM9dGhpcy5pZC5yb2xlTmFtZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNob3dBbGVydCgn5Y+v5Lul5om+5YaF5rWL5L2/6ICF6aKG5Y+W56S85YyF5ZOmJylcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICB9LFxyXG5zdWNjZXM6ZnVuY3Rpb24oKXtcclxuICAgIGFqYXhEYXRhKEh4c2dVcmwuZ2lmdFBhY2thZ2UseyduYW1lJzp1c2VyV3VQaW4ub2JqZXRzfSxzZWxmLnN1Y2Nlc0FsZXJ0KTtcclxuXHJcblxyXG59LFxyXG5zdWNjZXNBbGVydDpmdW5jdGlvbihtc2cpe1xyXG4gIHNob3dBbGVydChtc2cubXNnKTtcclxufSxcclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgYXR0YWNrTmFtZTogY2MuTGFiZWwsXHJcbiAgICAgICAgdHlwZTogY2MuTGFiZWwsXHJcbiAgICAgICAgeHVlOiBjYy5MYWJlbCxcclxuICAgICAgICBqaW5nOiBjYy5MYWJlbCxcclxuICAgICAgICBzdTogY2MuTGFiZWwsXHJcblxyXG4gICAgICAgIC8vIGZvbzoge1xyXG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub2RlIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcclxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICB2aXNpYmxlOiB0cnVlLCAgICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXHJcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gLi4uXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuICAgIHNldEF0dGFja05hbWU6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5hdHRhY2tOYW1lLnN0cmluZyA9IG5hbWU7XHJcbiAgICB9LFxyXG4gICAgc2V0VHlwZTogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICB0aGlzLnR5cGUuc3RyaW5nID0gbmFtZTtcclxuICAgIH0sXHJcbiAgICBzZXRYdWU6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgdGhpcy54dWUuc3RyaW5nID0gbmFtZTtcclxuICAgIH0sXHJcbiAgICBzZXRKaW5nOiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgIHRoaXMuamluZy5zdHJpbmcgPSBuYW1lO1xyXG4gICAgfSxcclxuICAgIHNldHN1OiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgIHRoaXMuc3Uuc3RyaW5nID0gbmFtZTtcclxuICAgIH0sXHJcbiAgICByZXR1cm46IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsZXQgcm9sZURldGFpbCA9IGNjLmZpbmQoXCJDYW52YXMvcm9sZURldGFpbFwiKTtcclxuICAgICAgICByb2xlRGV0YWlsLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIGxldCB6aGlMaW5nID0gY2MuZmluZChcIkNhbnZhcy96aGlsaW5nXCIpO1xyXG4gICAgICAgIHpoaUxpbmcuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICBvbmxvYWRKblpoaWxpbmcodHJ1ZSk7XHJcbiAgICAgICAgc2VsZWN0RW5lbXkobnVsbCxway5jbGlja0FycmF5TGVmdCk7XHJcbiAgICAgICAgcGsuc3VyZUNsaWNrPVwiXCI7XHJcbiAgICAgICAgaWYocGsucGt5YW9zdGF0dXMgIT1cIjBcIil7XHJcbiAgICAgICAgICBway5wa3lhb3N0YXR1cyA9IFwiMFwiO1xyXG4gICAgICAgICAgIHNlbGVjdEVuZW15KCBway5jbGlja0FycmF5UmlnaHRbMF0scGsucmlnaHRQbGF5KTtcclxuICAgICAgICB9XHJcbiAgICAgICBcclxuXHJcbiAgICB9XHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsInZhciBzZWxmO1xyXG52YXIgc3RhdHVzO1xyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIHh1ZTogY2MuUHJvZ3Jlc3NCYXIsXHJcbiAgICAgICAgamluZzogY2MuUHJvZ3Jlc3NCYXIsXHJcbiAgICAgICAgZGVhZDogY2MuTm9kZSxcclxuICAgICAgICBwbGF5OiBjYy5Ob2RlLFxyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmID0gdGhpcztcclxuXHJcbiAgICB9LFxyXG4gICAgY2xpY2tSb2xlOiBmdW5jdGlvbiAoZXZlbnQsIG51bSkge1xyXG4gICAgICAgIHZhciBub2RlID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgICAgIHZhciBuYW1lID0gbm9kZS5wYXJlbnQubmFtZTtcclxuICAgICAgICB2YXIgcCA9IG5vZGUucGFyZW50O1xyXG4gICAgICAgIHZhciByb2xlID0gcC5nZXRDb21wb25lbnQoXCJyb2xlXCIpO1xyXG4gICAgICAgIHZhciBwcm9ncmVzcyA9IHJvbGUueHVlLmdldENvbXBvbmVudChjYy5Qcm9ncmVzc0JhcikucHJvZ3Jlc3M7XHJcbiAgICAgICAgLy/pgInmi6npmJ/lj4tcclxuICAgICAgICBpZiAocGsucGt5YW9zdGF0dXMgPT0gXCIxXCIpIHtcclxuICAgICAgICAgICAgLy/kuLvop5LkuI3nrqHmmK/lkKbmrbvkuqHpg73lj6/ku6XpgInmi6lcclxuICAgICAgICAgICAgaWYgKG5hbWUgPT0gcGsucmlnaHRPbmUpIHtcclxuICAgICAgICAgICAgICAgIGNsaWNrUm9sZVRvb2wobmFtZSwgcGsuam5OYW1lKTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvL+WJr+Wwhuatu+S6oeS4jeWPr+S7pemAieaLqe+8jOW5tuS4lOWPquiDvemAieaLqeWPs+i+ueWJr+WwhlxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBway5yaWdodFBsYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobmFtZSA9PSBway5yaWdodFBsYXlbaV0gJiYgcHJvZ3Jlc3MgPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrUm9sZVRvb2wobmFtZSwgcGsuam5OYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYy5sb2coXCLlvZPliY3nirbmgIHkuI3nrKblkIjvvIznpoHmraLngrnlh7vmk43kvZxcIilcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy/pgInmi6nmlYzkurpcclxuICAgICAgICAgICAgaWYgKChudW0gPT0gcGsuc2VsZWN0U3RhdHVzICYmIHByb2dyZXNzID4gMCkpIHtcclxuICAgICAgICAgICAgICAgIGNsaWNrUm9sZVRvb2wobmFtZSwgcGsuam5OYW1lKTtcclxuICAgICAgICAgICAgICAgIC8v5bey5q275Ymv5bCG5LiN6IO954K55Ye7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjYy5sb2coXCLlvZPliY3nirbmgIHkuI3nrKblkIjvvIznpoHmraLngrnlh7vmk43kvZxcIilcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICB9LFxyXG4gICAgc2V0WHVlQW5kSmluZzogZnVuY3Rpb24gKHh1ZSwgamluZykge1xyXG4gICAgICAgIHRoaXMueHVlLmdldENvbXBvbmVudChjYy5Qcm9ncmVzc0JhcikucHJvZ3Jlc3MgPSB4dWU7XHJcbiAgICAgICAgdGhpcy5qaW5nLmdldENvbXBvbmVudChjYy5Qcm9ncmVzc0JhcikucHJvZ3Jlc3MgPSBqaW5nO1xyXG5cclxuICAgIH0sXHJcbiAgICBzZXREZWFkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5kZWFkLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5kZWFkLm9wYWNpdHkgPSAyNTU7XHJcblxyXG4gICAgICAgIHRoaXMucGxheS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgIC8v5q275Lqh5YGc5q2iYnVmZuWKqOeUu+aSreaUvlxyXG4gICAgICAgbGV0IGJ1ZmY9c2VsZi5ub2RlLmdldENoaWxkQnlOYW1lKFwiYnVmZlwiKTtcclxuICAgICAgICAgICBidWZmLnJlbW92ZUFsbENoaWxkcmVuKCk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJ2YXIgIHRpbWVzPTMwMDA7XHJcbnZhciBzZWxmO1xyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIHR5cGU6IDMsXHJcbiAgICAgICAgZ29sZDogdHJ1ZSxcclxuICAgICAgICBpc3NlbmQ6IDAsXHJcbiAgICAgICAgbXNnOiBjYy5SaWNoVGV4dCxcclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgfSxcclxuICAgIHN1cmU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsb2FkaW5nU2NlbmUoSHhzZ1NjZW5lcy5ndWFuZ0NoYW5nLCBIeHNnU2NlbmVzLmluZGV4KTtcclxuXHJcbiAgICB9LFxyXG4gICAgdGltZXM6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgIHRpbWVzPW1zZy50aW1lcztcclxuICAgICAgICBzZWxmLnNjaGVkdWxlKHNlbGYuc2NoZWR1bGVUaW1lLCAxKTtcclxuXHJcbiAgICB9LFxyXG4gICBzY2hlZHVsZVRpbWU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBEdUNoYW5nVm8ubnVtPXRpbWVzO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICBpZiAodGltZXMgPT0gJzAnIHx8IHR5cGVvZiAodGltZXMpID09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnVuc2NoZWR1bGUoc2VsZi5zY2hlZHVsZVRpbWUpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5pbml0KCk7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBqaWVzdWFuPWNjLmZpbmQoXCJDYW52YXMvamllc3VhblwiKTtcclxuICAgICAgICAgICAgICAgIGppZXN1YW4uYWN0aXZlPXRydWU7XHJcbiAgICAgICAgICAgICAgIGppZXN1YW4uZ2V0Q29tcG9uZW50KFwiamllc3VhblwiKS5zZXRNc2coXCLnjJznjJznjJznu5PnrpfkuK3vvIzor7fnqI3lkI7lho3mnaVcIik7ICAgICBcclxuICAgICAgICAgICAgICAgIC8vc2hvd0FsZXJ0KFwi6LWM5Zy657uT566X5Lit77yM6K+356iN5ZCO5YaN5p2lXCIsIHNlbGYuc3VyZSwgc2VsZi5zdXJlKTtcclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIG1pbnV0ZXMgPSBNYXRoLmZsb29yKHRpbWVzIC8gMTAwMCAvIDYwICUgNjApOyAvL+aJgOS9meWIhumSn+aVsCAgXHJcbiAgICAgICAgICAgICAgICB2YXIgc2Vjb25kID0gTWF0aC5mbG9vcih0aW1lcyAvIDEwMDAgJSA2MCk7IC8v5omA5L2Z56eS5pWwICBcclxuICAgICAgICAgICAgICAgIC8vMeWIhjU456eS5ZCO5byA55uF77yM5Lmw5a6a56a75omLXHJcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gY2MuZmluZChcIkNhbnZhcy9zYWl6aS9tYWluL2xhYmVsMlwiKTtcclxuICAgICAgICAgICAgICAgIHZhciBtc3RyID0gbWludXRlcy50b1N0cmluZygpICsgXCLliIZcIiArIHNlY29uZC50b1N0cmluZygpICsgXCLnp5LlkI7lvIDom4pcIjtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5nZXRDb21wb25lbnQoXCJjYy5MYWJlbFwiKS5zdHJpbmcgPSBtc3RyO1xyXG5cclxuICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgXHJcbiAgICAgICAgIHRpbWVzPXRpbWVzLTEwMDA7XHJcbiAgICBcclxuXHJcbiAgICAgICAgfSxcclxuICAgIGluaXRNc2c6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICB2YXIgbG9hZEpzb24gPSBtc2cubXNnO1xyXG4gICAgICAgIGNjLmxvZygnaW5pdE1zZzotLS0tLS0tJylcclxuXHJcbiAgICAgICAgdmFyIGJhb3ppamluID0gbG9hZEpzb24uYmFvWmlKaW47XHJcbiAgICAgICAgdmFyIGJhb3ppeWluID0gbG9hZEpzb24uYmFvWmlZaW47XHJcblxyXG4gICAgICAgIHZhciBkYWppbiA9IGxvYWRKc29uLmRhSmluO1xyXG4gICAgICAgIHZhciBkYXlpbiA9IGxvYWRKc29uLmRhWWluO1xyXG5cclxuICAgICAgICB2YXIgZGFuamluID0gbG9hZEpzb24uZGFuSmluO1xyXG4gICAgICAgIHZhciBkYW55aW4gPSBsb2FkSnNvbi5kYW5ZaW47XHJcblxyXG4gICAgICAgIHZhciB4aWFvamluID0gbG9hZEpzb24ueGlhb0ppbjtcclxuICAgICAgICB2YXIgeGlhb3lpbiA9IGxvYWRKc29uLnhpYW9ZaW47XHJcblxyXG4gICAgICAgIHZhciBzaHVhbmdqaW4gPSBsb2FkSnNvbi5zaHVhbmdKaW47XHJcbiAgICAgICAgdmFyIHNodWFuZ3lpbiA9IGxvYWRKc29uLnNodWFuZ1lpbjtcclxuXHJcbiAgICAgICAgdmFyIGxhc3RJZCA9IGxvYWRKc29uLnlsZGF4aWFvLmlkO1xyXG4gICAgICAgIHZhciBsYXN0TnVtMSA9IGxvYWRKc29uLnlsZGF4aWFvLm51bTE7XHJcbiAgICAgICAgdmFyIGxhc3ROdW0yID0gbG9hZEpzb24ueWxkYXhpYW8ubnVtMjtcclxuICAgICAgICB2YXIgbGFzdE51bTMgPSBsb2FkSnNvbi55bGRheGlhby5udW0zO1xyXG4gICAgICAgIHZhciBsYXN0UmVzdWx0ID0gbG9hZEpzb24ueWxkYXhpYW8ucmVzdWx0O1xyXG4gICAgICAgIHZhciBsYXN0U3RhdHVzID0gbG9hZEpzb24ueWxkYXhpYW8uc3RhdHVzO1xyXG5cclxuICAgICAgICB2YXIgc3VtSmluID0gbG9hZEpzb24udG90YWxTdW1KaW47XHJcbiAgICAgICAgdmFyIHN1bVlpbiA9IGxvYWRKc29uLnRvdGFsU3VtWWluO1xyXG4gICAgICAgIHZhciBjdXJzdHI7XHJcbiAgICAgICAgdmFyIGN1cnRhcmdldDtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjdXJzdHIgPSBcIuS4iuacn1wiICsgbGFzdElkLnRvU3RyaW5nKCkgKyBcIuW8gFwiICsgbGFzdE51bTEudG9TdHJpbmcoKSArIFwiIFwiICtcclxuICAgICAgICAgICAgICAgIGxhc3ROdW0yLnRvU3RyaW5nKCkgKyBcIiBcIiArIGxhc3ROdW0zLnRvU3RyaW5nKCkgKyBcIiBcIiArIGxhc3RSZXN1bHQ7XHJcbiAgICAgICAgICAgIGN1cnRhcmdldCA9IGNjLmZpbmQoXCJDYW52YXMvc2FpemkvbWFpbi9sYWJlbDFcIik7XHJcbiAgICAgICAgICAgIGN1cnRhcmdldC5nZXRDb21wb25lbnQoXCJjYy5MYWJlbFwiKS5zdHJpbmcgPSBjdXJzdHI7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjdXJzdHIgPSBcIuebruWJjeS5sOWwj1wiICsgeGlhb2ppbi50b1N0cmluZygpICsgXCLph5FcIiArIHhpYW95aW4udG9TdHJpbmcoKSArIFwi6ZO2XCI7XHJcbiAgICAgICAgICAgIGN1cnRhcmdldCA9IGNjLmZpbmQoXCJDYW52YXMvc2FpemkvbWFpbi9sYWJlbDNcIik7XHJcbiAgICAgICAgICAgIGN1cnRhcmdldC5nZXRDb21wb25lbnQoXCJjYy5MYWJlbFwiKS5zdHJpbmcgPSBjdXJzdHI7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjdXJzdHIgPSBcIuebruWJjeS5sOWkp1wiICsgZGFqaW4udG9TdHJpbmcoKSArIFwi6YeRXCIgKyBkYXlpbi50b1N0cmluZygpICsgXCLpk7ZcIjtcclxuICAgICAgICAgICAgY3VydGFyZ2V0ID0gY2MuZmluZChcIkNhbnZhcy9zYWl6aS9tYWluL2xhYmVsNFwiKTtcclxuICAgICAgICAgICAgY3VydGFyZ2V0LmdldENvbXBvbmVudChcImNjLkxhYmVsXCIpLnN0cmluZyA9IGN1cnN0cjtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGN1cnN0ciA9IFwi55uu5YmN5Lmw5Y2VXCIgKyBkYW5qaW4udG9TdHJpbmcoKSArIFwi6YeRXCIgKyBkYW55aW4udG9TdHJpbmcoKSArIFwi6ZO2XCI7XHJcbiAgICAgICAgICAgIGN1cnRhcmdldCA9IGNjLmZpbmQoXCJDYW52YXMvc2FpemkvbWFpbi9sYWJlbDVcIik7XHJcbiAgICAgICAgICAgIGN1cnRhcmdldC5nZXRDb21wb25lbnQoXCJjYy5MYWJlbFwiKS5zdHJpbmcgPSBjdXJzdHI7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjdXJzdHIgPSBcIuebruWJjeS5sOWPjFwiICsgc2h1YW5namluLnRvU3RyaW5nKCkgKyBcIumHkVwiICsgc2h1YW5neWluLnRvU3RyaW5nKCkgKyBcIumTtlwiO1xyXG4gICAgICAgICAgICBjdXJ0YXJnZXQgPSBjYy5maW5kKFwiQ2FudmFzL3NhaXppL21haW4vbGFiZWw2XCIpO1xyXG4gICAgICAgICAgICBjdXJ0YXJnZXQuZ2V0Q29tcG9uZW50KFwiY2MuTGFiZWxcIikuc3RyaW5nID0gY3Vyc3RyO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY3Vyc3RyID0gXCLnm67liY3kubDosbnlrZBcIiArIGJhb3ppamluLnRvU3RyaW5nKCkgKyBcIumHkVwiICsgYmFveml5aW4udG9TdHJpbmcoKSArIFwi6ZO2XCI7XHJcbiAgICAgICAgICAgIGN1cnRhcmdldCA9IGNjLmZpbmQoXCJDYW52YXMvc2FpemkvbWFpbi9sYWJlbDdcIik7XHJcbiAgICAgICAgICAgIGN1cnRhcmdldC5nZXRDb21wb25lbnQoXCJjYy5MYWJlbFwiKS5zdHJpbmcgPSBjdXJzdHI7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjdXJzdHIgPSAnPG9uIGNsaWNrPVwiaGFuZGxlclwiPicgKyBzdW1KaW4udG9TdHJpbmcoKSArICfph5EnICsgc3VtWWluLnRvU3RyaW5nKCkgKyAn6ZO2PC9vbj4nO1xyXG4gICAgICAgICAgICBjdXJ0YXJnZXQgPSBjYy5maW5kKFwiQ2FudmFzL3NhaXppL21zZ1wiKTtcclxuICAgICAgICAgICAgLy8gICBjYy5sb2coY3VydGFyZ2V0KVxyXG4gICAgICAgICAgICAvLyAgIHRoaXMubXNnLnN0cmluZz1jdXJzdHI7XHJcbiAgICAgICAgICAgIGN1cnRhcmdldC5nZXRDb21wb25lbnQoXCJjYy5SaWNoVGV4dFwiKS5zdHJpbmcgPSBjdXJzdHI7XHJcblxyXG5cclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0sXHJcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MubG9nKCdpbml0LS0tLS0tLS0tLScpXHJcbiAgICAgICAgYWpheERhdGEoSHhzZ1VybC5xdWVyeUNhc2lub01zZywgbnVsbCwgc2VsZi5pbml0TXNnKTtcclxuICAgIH0sXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIC8vYWxlcnQoZ2xvYmFsSW5mby51cmwoKSk7XHJcbiAgICAgICAgICAgICBpZiggRHVDaGFuZ1ZvLm51bT09PScxMDAwJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICBjYy5maW5kKFwiQ2FudmFzL2ppZXN1YW5cIikuYWN0aXZlPXRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBjYy5maW5kKFwiQ2FudmFzL2ppZXN1YW5cIikuYWN0aXZlPWZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICB0aGlzLmNhbmNlbGRpYWxvZyhudWxsKTtcclxuICAgICAgICAgU29ja2V0RXZlbnRzLmR6TXNnPWZ1bmN0aW9uKCl7XHJcbiAgICAgICAgIHNlbGYuaW5pdCgpO1xyXG4gICAgICAgIGFqYXhEYXRhKEh4c2dVcmwuYXBwc3h0aW1lLCBudWxsLCBzZWxmLnRpbWVzKVxyXG4gICAgICAgIC8vIOi/memHjOeahCB0aGlzIOaMh+WQkSBjb21wb25lbnRcclxuICAgICAgICAgfVxyXG4gICAgICAgICAgdGhpcy5pbml0KCk7XHJcbiAgICAgICAgYWpheERhdGEoSHhzZ1VybC5hcHBzeHRpbWUsIG51bGwsIHRoaXMudGltZXMpXHJcblxyXG5cclxuICAgIH0sXHJcbiAgICBidXR0b25DaGFuZ2VOb3JtYWw6IGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgbm9kZS5jb2xvciA9IG5ldyBjYy5Db2xvcigyMzYsIDEzLCAxMyk7XHJcbiAgICB9LFxyXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICBjYy5sb2coJ+i1ouWuticpXHJcbiAgICAgICAgbG9hZGluZ1NjZW5lKEh4c2dTY2VuZXMueWluZ0ppYSwgSHhzZ1NjZW5lcy5zYWl6aSlcclxuICAgIH0sXHJcbiAgICBidXR0b25DaGFuZ2VMaWdodDogZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICBub2RlLmNvbG9yID0gbmV3IGNjLkNvbG9yKDIzNiwgODYsIDApO1xyXG4gICAgfSxcclxuICAgIGRpc3BsYXlkaWFsb2c6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5maW5kKFwiQ2FudmFzL3NhaXppL2RpYWxvZy9kaWFsb2cvbXNnXCIpLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIGNjLmZpbmQoXCJDYW52YXMvc2FpemkvZGlhbG9nL2RpYWxvZy9jb3VudFwiKS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIGNjLmZpbmQoXCJDYW52YXMvc2FpemkvZGlhbG9nL2RpYWxvZy90b3BcIikuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICBjYy5maW5kKFwiQ2FudmFzL3NhaXppL2RpYWxvZy9kaWFsb2cvcmlnaHRcIikuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB2YXIgdG9wU3RyaW5nID0gXCLmgqjpgInmi6nnmoTmmK8gXCI7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAxOiB0b3BTdHJpbmcgKz0gXCLlpKdcIjsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgMjogdG9wU3RyaW5nICs9IFwi5bCPXCI7IGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDM6IHRvcFN0cmluZyArPSBcIuixueWtkFwiOyBicmVhaztcclxuICAgICAgICAgICAgY2FzZSA0OiB0b3BTdHJpbmcgKz0gXCLljZVcIjsgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgNTogdG9wU3RyaW5nICs9IFwi5Y+MXCI7IGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcmlnaHRTdHJpbmcgPSBcIlwiO1xyXG4gICAgICAgIGlmICh0aGlzLmdvbGQgPT09IHRydWUpXHJcbiAgICAgICAgICAgIHJpZ2h0U3RyaW5nICs9IFwi6YeRXCI7XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICByaWdodFN0cmluZyArPSBcIumTtlwiO1xyXG4gICAgICAgIHZhciBkaWFsb2cgPSBjYy5maW5kKFwiQ2FudmFzL3NhaXppL2RpYWxvZ1wiKTtcclxuICAgICAgICB2YXIgdG9wID0gY2MuZmluZChcIkNhbnZhcy9zYWl6aS9kaWFsb2cvZGlhbG9nL3RvcFwiKTtcclxuICAgICAgICB2YXIgcmlnaHQgPSBjYy5maW5kKFwiQ2FudmFzL3NhaXppL2RpYWxvZy9kaWFsb2cvcmlnaHRcIik7XHJcbiAgICAgICAgdG9wLmdldENvbXBvbmVudChcImNjLkxhYmVsXCIpLnN0cmluZyA9IHRvcFN0cmluZztcclxuICAgICAgICByaWdodC5nZXRDb21wb25lbnQoXCJjYy5MYWJlbFwiKS5zdHJpbmcgPSByaWdodFN0cmluZztcclxuICAgICAgICBkaWFsb2cuYWN0aXZlID0gdHJ1ZTtcclxuXHJcbiAgICB9LFxyXG4gICAgZ29sZHR5cGU6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHZhciBub2RlID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgICAgIHZhciB0eXBlbm9kZSA9IG5vZGUucGFyZW50O1xyXG5cclxuICAgICAgICBzd2l0Y2ggKHR5cGVub2RlLm5hbWUpIHtcclxuICAgICAgICAgICAgY2FzZSBcImRhXCI6IHRoaXMudHlwZSA9IDE7IGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwieGlhb1wiOiB0aGlzLnR5cGUgPSAyOyBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImJhb3ppXCI6IHRoaXMudHlwZSA9IDM7IGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiZGFuXCI6IHRoaXMudHlwZSA9IDQ7IGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwic2h1YW5nXCI6IHRoaXMudHlwZSA9IDU7IGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobm9kZS5uYW1lID09IFwieWluZ1wiKVxyXG4gICAgICAgICAgICB0aGlzLmdvbGQgPSBmYWxzZTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRoaXMuZ29sZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5ZGlhbG9nKCk7XHJcbiAgICB9LFxyXG5cclxuICAgIG9rZGlhbG9nOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICB2YXIgbXNnbm9kZSA9IGNjLmZpbmQoXCJDYW52YXMvc2FpemkvZGlhbG9nL2RpYWxvZy9tc2dcIik7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNzZW5kID09IDApIHtcclxuICAgICAgICAgICAgbXNnbm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICBjYy5maW5kKFwiQ2FudmFzL3NhaXppL2RpYWxvZy9kaWFsb2cvY291bnRcIikuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGNjLmZpbmQoXCJDYW52YXMvc2FpemkvZGlhbG9nL2RpYWxvZy90b3BcIikuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGNjLmZpbmQoXCJDYW52YXMvc2FpemkvZGlhbG9nL2RpYWxvZy9yaWdodFwiKS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIGNvdW50ID0gcGFyc2VJbnQoY2MuZmluZChcIkNhbnZhcy9zYWl6aS9kaWFsb2cvZGlhbG9nL2NvdW50XCIpLmdldENvbXBvbmVudChcImNjLkVkaXRCb3hcIikuc3RyaW5nKTtcclxuICAgICAgICAgICAgaWYgKGNvdW50IDw9IDAgfHwgaXNOYU4oY291bnQpKSB7XHJcbiAgICAgICAgICAgICAgICBtc2dub2RlLmdldENvbXBvbmVudChcImNjLkxhYmVsXCIpLnN0cmluZyA9IFwi6K+36L6T5YWl5q2j56Gu55qE6YeR6aKdXCI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzc2VuZCA9IC0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy9tc2dub2RlLmdldENvbXBvbmVudChcImNjLkxhYmVsXCIpLnN0cmluZz1jb3VudC50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICAgICAgc3dpdGNoICh0aGlzLnR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IHJlc3VsdCA9IFwi5aSnXCI7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjogcmVzdWx0ID0gXCLlsI9cIjsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOiByZXN1bHQgPSBcIuixueWtkFwiOyBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IHJlc3VsdCA9IFwi5Y2VXCI7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTogcmVzdWx0ID0gXCLlj4xcIjsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgc2RhdGE7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5nb2xkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2RhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdqaW4nOiBjb3VudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3Jlc3VsdCc6IHJlc3VsdFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3lpbic6IGNvdW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAncmVzdWx0JzogcmVzdWx0XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGFqYXhEYXRhKEh4c2dVcmwucm9sZVN0YWtlUmVzdWx0LHNkYXRhLGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbXNnbm9kZS5nZXRDb21wb25lbnQoXCJjYy5MYWJlbFwiKS5zdHJpbmcgPSBtc2cubXNnLy/ov5Tlm57mtojmga9cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pc3NlbmQgPSAxO1xyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLmlzc2VuZCA9PSAxKSB7XHJcbiAgICAgICAgICAgIG1zZ25vZGUuZ2V0Q29tcG9uZW50KFwiY2MuTGFiZWxcIikuc3RyaW5nID0gXCLmraPlnKjov57mjqVcIjtcclxuICAgICAgICAgICAgdGhpcy5jYW5jZWxkaWFsb2coZXZlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbXNnbm9kZS5nZXRDb21wb25lbnQoXCJjYy5MYWJlbFwiKS5zdHJpbmcgPSBcIuato+WcqOi/nuaOpVwiO1xyXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlkaWFsb2coKTtcclxuICAgICAgICAgICAgdGhpcy5pc3NlbmQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBjYW5jZWxkaWFsb2c6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGNjLmZpbmQoXCJDYW52YXMvc2FpemkvZGlhbG9nXCIpLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaXNzZW5kID0gMDtcclxuICAgIH0sXHJcbiAgICBib3R0b21NZW51OiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICB2YXIgbm9kZSA9IGV2ZW50LnRhcmdldDtcclxuICAgICAgICBzd2l0Y2ggKG5vZGUubmFtZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwidG91emh1amlsdVwiOiBsb2FkaW5nU2NlbmUoSHhzZ1NjZW5lcy50b3V6aHVqaWx1LCBIeHNnU2NlbmVzLnNhaXppKVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJ6aHVhbnFpYW5wYWloYW5nXCI6IGxvYWRpbmdTY2VuZShIeHNnU2NlbmVzLnpodWFucWlhbnBhaWhhbmcsIEh4c2dTY2VuZXMuc2FpemkpXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBcImxpc2hpY2hheHVuXCI6IGxvYWRpbmdTY2VuZShIeHNnU2NlbmVzLmxpc2hpY2hheHVuLCBIeHNnU2NlbmVzLnNhaXppKVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICog54K55Ye75LqL5Lu2LS0+6L+U5ZueXHJcbiAgICAqL1xyXG4gICAgYmFja0V2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy/osIPnlKjpgJrnlKjnmoTov5Tlm57kuIrkuIDlnLrmma/mlrnms5VcclxuICAgICByZXR1cm5MYXN0KCk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIG1zZzpjYy5MYWJlbCxcclxuICAgICAgICBpZDpjYy5MYWJlbCxcclxuICAgICAgICB6aGl5ZTpjYy5MYWJlbCxcclxuICAgICAgICBpbWc6Y2MuU3ByaXRlLFxyXG4gICAgICAgIC8vIGZvbzoge1xyXG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub2RlIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcclxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICB2aXNpYmxlOiB0cnVlLCAgICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXHJcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gLi4uXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuICAgXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgIGxvYWRDb21tb21TY2VuY2UoKTtcclxuXHJcbiAgICB9LFxyXG4gICAgIHpocDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgc2hvd0FsZXJ0KFwi5pqC5pyq5byA5pS+XCIpXHJcblxyXG4gICAgfSxcclxuICAgIHRqcDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgIHNob3dBbGVydChcIuaaguacquW8gOaUvlwiKVxyXG5cclxuICAgIH0sXHJcbiAgICB3cWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgbG9hZGluZ1NjZW5lKEh4c2dTY2VuZXMud3VxaSxIeHNnU2NlbmVzLmluZGV4KVxyXG4gICAgICAgICAgICBcclxuXHJcbiAgICB9LFxyXG4gICAgIHR6c2M6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc2hvd0FsZXJ0KFwi5pqC5pyq5byA5pS+XCIpXHJcblxyXG4gICAgfSxcclxuICAgIGRwOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgc2hvd0FsZXJ0KFwi5pqC5pyq5byA5pS+XCIpXHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBpZDpjYy5MYWJlbCxcclxuICAgICAgICBmcmllbmROYW1lOmNjLkxhYmVsXHJcbiAgICAgICAgLy8gZm9vOiB7XHJcbiAgICAgICAgLy8gICAgZGVmYXVsdDogbnVsbCwgICAgICAvLyBUaGUgZGVmYXVsdCB2YWx1ZSB3aWxsIGJlIHVzZWQgb25seSB3aGVuIHRoZSBjb21wb25lbnQgYXR0YWNoaW5nXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICB0byBhIG5vZGUgZm9yIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgLy8gICAgdXJsOiBjYy5UZXh0dXJlMkQsICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxyXG4gICAgICAgIC8vICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSwgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIHZpc2libGU6IHRydWUsICAgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIGRpc3BsYXlOYW1lOiAnRm9vJywgLy8gb3B0aW9uYWxcclxuICAgICAgICAvLyAgICByZWFkb25seTogZmFsc2UsICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIGZhbHNlXHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICAvLyAuLi5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJcclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgfSxcclxuICAgIG1zZzpudWxsLFxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIFxyXG5cclxuICAgIH0sXHJcbiAgICBzaG93QWxlcnQ6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGxldCBlID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgICAgIHNob3dBbGVydCggdGhpc1snbXNnJ10pO1xyXG4gICAgICAgIGUuZGVzdHJveSgpO1xyXG5cclxuICAgIH0sXHJcbiAgICBpbml0OiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgdGhpc1snbXNnJ10gPSBtc2c7XHJcbiAgICB9XHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBtc2c6Y2MuUmljaFRleHQsXHJcbiAgICAgICAgYnV0dG9uTXNnOmNjLkJ1dHRvblxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgfSxcclxuXHJcbiAgICBzZXRNc2c6IGZ1bmN0aW9uKG1zZ1N0cil7XHJcbiAgICAgICAgdGhpcy5tc2cuc3RyaW5nID0gbXNnU3RyO1xyXG4gICAgfVxyXG5cclxufSk7XHJcbiIsImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgaXRlbVByZWZhYjogY2MuUHJlZmFiLFxyXG4gICAgICAgIGNvbnRlbnQ6IGNjLk5vZGUsXHJcbiAgICAgICAgbGVmdENvbnRlbnQ6IGNjLk5vZGUsXHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICBhamF4KHtcclxuICAgICAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgICAgIHVybDogXCJcIiArIGxvY2FsaG9zdCArIFwiY29jb3MyZE5vdGlzL3F1ZXJ5U3lzdGVtTm90aXNcIixcclxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29ucCcsXHJcblxyXG4gICAgICAgICAgICBqc29ucDogXCJqc29ucENhbGxiYWNrXCIsLy/mnI3liqHnq6/nlKjkuo7mjqXmlLZjYWxsYmFja+iwg+eUqOeahGZ1bmN0aW9u5ZCN55qE5Y+C5pWwXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwID0gbXNnLm1zZztcclxuICAgICAgICAgICAgICAgIC8vYWxlcnQocCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAvL3MgKz0gXCIgPHAgY2xhc3M9XFxcInlhb3BpbmdcXFwiIHN0eWxlPSdjb2xvcjojRkZGM0FFJz7nrKxcIiArIHBbaV0uaWQgKyBcIuacn++8jOW8gOWHulwiICsgcFtpXS5udW0xICsgXCIsXCIgKyBwW2ldLm51bTIgKyBcIixcIiArIHBbaV0ubnVtMyArIFwiJm5ic3A7Jm5ic3A7XCIgKyBwW2ldLnJlc3VsdCArIFwiPC9wPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gY2MuaW5zdGFudGlhdGUoc2VsZi5pdGVtUHJlZmFiKTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxlZnRDb250ZW50LmFkZENoaWxkKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0ueCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS55ID0gLTEgKiBpICogaXRlbS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5uYW1lID0gJ2hpc3RvcnknICsgaTtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmNvbnRlbnQuaGVpZ2h0ID0gKGkgKyAxKSAqIGl0ZW0uaGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpdGVtID0gaXRlbS5nZXRDb21wb25lbnQoJ3N5c3RlbU5vdGljZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsYWJlbFN0ciA9IFwiPGNvbG9yPSNmZjAwMDA+5pawIDwvYz48Y29sb3I9I2ZmZmZmZj5cIitwW2ldLmN1c3RvbTErXCI8L2NvbG9yPlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZyhsYWJlbFN0cilcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLnNldE1zZyhsYWJlbFN0cik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG59KTtcclxuIiwid2luZG93LmN1ckl0ZW1EYXRhID0gbnVsbDtcclxud2luZG93LmN1cnJlbnRXdXBpbiA9IDA7XHJcbnZhciBzZWxmO1xyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIGNoYXRNc2c6IGNjLlByZWZhYixcclxuICAgICAgICBjb250ZW50OiBjYy5Ob2RlLFxyXG4gICAgICAgIHRpdGxlOiBjYy5SaWNoVGV4dCxcclxuICAgICAgICAgbXNnOmNjLkVkaXRCb3gsXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICBcclxuICAgICAgICAgICBzZWxmID0gdGhpcztcclxuICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8MjA7IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgaXRlbSA9IGNjLmluc3RhbnRpYXRlKHNlbGYuY2hhdE1zZyk7XHJcbiAgICAgICAgICAgIHNlbGYuY29udGVudC5hZGRDaGlsZChpdGVtKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2Mudmlldy5zZXREZXNpZ25SZXNvbHV0aW9uU2l6ZSg3MjAsMTA4MCwyKTtcclxuICAgICAgICAgU29ja2V0RXZlbnRzLnVwZGF0YUZyaWVuZHNNc2c9dGhpcy5pbml0RnJpZW5kc01zZztcclxuICAgICAgICAvL2NjLmxvZyhteUZyaWVuZHMpXHJcbiAgICAgICAgYWpheERhdGEoSHhzZ1VybC5jaGF0UmVjb3JkLG15RnJpZW5kcyx0aGlzLmluaXRDaGF0TXNnKTtcclxuXHJcbiAgICB9LFxyXG4gLyoqXHJcbiAgICAgKiDngrnlh7vkuovku7YtLT7lv6vpgJ/mgaLlpI1cclxuICAgICAqL1xyXG4gICAgc2VuZE1zZzogZnVuY3Rpb24gKCkge1xyXG4gICAgICBcclxuICAgICAgICBcclxuICAgICAgICAgdmFyIG1zZXNzYWdlPXRoaXMubXNnLmdldENvbXBvbmVudChjYy5FZGl0Qm94KS5zdHJpbmc7XHJcbiAgICAgICAgIG15RnJpZW5kcy5tZXNzYWdlPW1zZXNzYWdlO1xyXG4gICAgICAgICBhamF4RGF0YShIeHNnVXJsLnNlbmRNc2dGb3JGcmllbmRzLG15RnJpZW5kcyx0aGlzLmluaXRTZW5kTXNnKTtcclxuICAgICAgICAgXHJcbiAgICAgICAgICAvL2NjLmxvZyhtc2Vzc2FnZSk7XHJcbiAgICB9LFxyXG4gICBpbml0U2VuZE1zZzogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgXHJcbiAgICAgICAgdmFyIG1zZyA9IGRhdGEubXNnO1xyXG4gICAgICAgIC8vY2MubG9nKG1zZylcclxuICAgICAgICAgICAgdmFyIGl0ZW1Nc2cgPSBtc2c7XHJcbiAgICAgICAgICAgIGlmKGl0ZW1Nc2c9PT0nJ3x8dHlwZW9mKGl0ZW1Nc2cpPT09J3VuZGVmaW5lZCcpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZyhcIui/lOWbnm51bGxcIilcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICB2YXIgaXRlbSA9IGNjLmluc3RhbnRpYXRlKHNlbGYuY2hhdE1zZyk7XHJcbiAgICAgXHJcbiAgICAgICAgICAgIC8vIGZyaXN0LnpJbmRleD0wO1xyXG4gICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAvL3NlbGYuY29udGVudC5jaGlsZHJlblswXS56SW5kZXg9MDtcclxuICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vICB2YXIgbGk9c2VsZi5jb250ZW50LmNoaWxkcmVuO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgc2VsZi5jb250ZW50LmFkZENoaWxkKGl0ZW0pO1xyXG4gICAgICAgICAgICAvLyAgZm9yKHZhciBpPTA7aTxsaS5sZW5ndGg7aSsrKXtcclxuICAgICAgICAgICAgLy8gICAgICAgY2MubG9nKCdpbmRleCcraSsnOicrbGlbaV0uekluZGV4KVxyXG4gICAgICAgICAgICAvLyAgfVxyXG4gICAgICAgICBjYy5sb2coIHNlbGYuY29udGVudClcclxuICAgICAgICAgICAgICAgIHZhciBjb21wID0gaXRlbS5nZXRDb21wb25lbnQoJ2NoYXRNc2dJdGVtJyk7XHJcbiAgICAgICAgICAgIGNvbXAuaW5pdENoYXRNc2dJdGVtKHNlbGYuY29udGVudC5oZWlnaHQsICdmcmllbmRzJywgaXRlbU1zZyk7XHJcbiAgICAgICAgc2VsZi5jb250ZW50LmhlaWdodCs9NTA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAgLy9jYy5sb2coaXRlbSlcclxuICAgIH0sXHJcbiAgICBpbml0RnJpZW5kc01zZzogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW1Nc2cgPSBkYXRhO1xyXG4gICAgICAgICAgICAgLy8gY2MubG9nKGl0ZW1Nc2cpXHJcbiAgICAgICAgICAgIHZhciBpdGVtID0gY2MuaW5zdGFudGlhdGUoc2VsZi5jaGF0TXNnKTtcclxuICAgICAgICAgICAgc2VsZi5jb250ZW50LmFkZENoaWxkKGl0ZW0pO1xyXG4gICAgICAgIC8vIGNjLmxvZyggc2VsZi5jb250ZW50KVxyXG4gICAgICAgICAgICAgICAgdmFyIGNvbXAgPSBpdGVtLmdldENvbXBvbmVudCgnY2hhdE1zZ0l0ZW0nKTtcclxuICAgICAgICAgICAgY29tcC5pbml0Q2hhdE1zZ0l0ZW0oc2VsZi5jb250ZW50LmhlaWdodCwgJ2ZyaWVuZHMnLCBpdGVtTXNnKTtcclxuICAgICAgICBzZWxmLmNvbnRlbnQuaGVpZ2h0Kz01MDtcclxuICAgICAgICAvLyBjYy5sb2coaXRlbSlcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDngrnlh7vkuovku7YtLT7ov5Tlm55cclxuICAgICAqL1xyXG4gICAgYmFja0V2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy/osIPnlKjpgJrnlKjnmoTov5Tlm57kuIrkuIDlnLrmma/mlrnms5VcclxuICAgICAgICByZXR1cm5MYXN0U2NlbmUoKTtcclxuXHJcbiAgICB9LFxyXG5cclxuXHJcbiAgICBpbml0Q2hhdE1zZzogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAvL3NlbGYuY29udGVudC5yZW1vdmVBbGxDaGlsZHJlbigpO1xyXG4gICAgICAgIHZhciBtc2cgPSBkYXRhLm1zZ1xyXG4gICAgICAgIHZhciBsZW49bXNnLmxlbmd0aC0xO1xyXG4gICAgICAgLy8gY2MubG9nKG1zZylcclxuICAgICAgICB2YXIgaXRlbXMgPSBzZWxmLmNvbnRlbnQuY2hpbGRyZW47XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDE5OyBpID49MDsgaS0tKSB7XHJcbiAgICAgICAgICAgIHZhciBpdGVtID1pdGVtc1tpXTtcclxuICAgICAgICAgICAgdmFyIGNvbXAgPSBpdGVtLmdldENvbXBvbmVudCgnY2hhdE1zZ0l0ZW0nKTtcclxuICAgICAgICAgICAgIHZhciBpdGVtTXNnID0gbXNnW2xlbl07XHJcbiAgICAgICAgICAgICBsZW4tLTtcclxuICAgICAgICAgICAgY29tcC5pbml0Q2hhdE1zZ0l0ZW0oaSwgJ2ZyaWVuZHMnLCBpdGVtTXNnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZi50aXRsZS5zdHJpbmc9Jzxjb2xvcj0jMDBmZjAwPuS4juOAkCcrbXlGcmllbmRzLmZyaWVuZG5hbWUrJ+OAkeiBiuWkqTwvYz4nO1xyXG4gICAgICAgIHNlbGYuY29udGVudC5oZWlnaHQgPSBtc2cubGVuZ3RoICogNTA7XHJcbiAgICB9LFxyXG5cclxuICAgXHJcblxyXG4gICAgemF3dUl0ZW1FdmVudDogZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgLy9UT0RPOlxyXG4gICAgfSxcclxuXHJcbiAgICBjbGVhclNjcm9sbHZpZXc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLmNvbnRlbnQucmVtb3ZlQWxsQ2hpbGRyZW4oKTtcclxuICAgIH0sXHJcblxyXG59KTtcclxuIiwiY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgIGNjLmdhbWUuYWRkUGVyc2lzdFJvb3ROb2RlKHRoaXMubm9kZSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIC8vIGZvbzoge1xyXG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub2RlIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcclxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICB2aXNpYmxlOiB0cnVlLCAgICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXHJcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gLi4uXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICBjYy5nYW1lLmFkZFBlcnNpc3RSb290Tm9kZSh0aGlzLm5vZGUpO1xyXG4gICAgICAgIC8vIHZhciBhbmltYXRpb24gPSB0aGlzLm5vZGUuZ2V0Q29tcG9uZW50KGNjLkFuaW1hdGlvbik7XHJcbiAgICAgICAgLy8gLy8gZnJhbWVzIOi/meaYr+S4gOS4qiBTcHJpdGVGcmFtZSDnmoTmlbDnu4QuXHJcbiAgICAgICAgLy8gIGNjLnVybC5yYXcoc2VsZi5pbmZvLnR4VXJsICsgJ3lpc2hpbnYzLmpwZycpO1xyXG4gICAgICAgIC8vIHZhciBzcHJpdGVGcmFtZUFycj1uZXdcclxuICAgICAgICAvLyB2YXIgY2xpcCA9IGNjLkFuaW1hdGlvbkNsaXAuY3JlYXRlV2l0aFNwcml0ZUZyYW1lcyhmcmFtZXMsIDE3KTtcclxuICAgICAgICAvLyBjbGlwLm5hbWUgPSBcImFuaW1fcnVuXCI7XHJcbiAgICAgICAgLy8gY2xpcC53cmFwTW9kZSA9IGNjLldyYXBNb2RlLkxvb3A7XHJcblxyXG5cclxuXHJcbiAgICB9LFxyXG4gICAgZW5kRXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coXCLmioDog73ph4rmlL7nu5PmnZ9zXCIpXHJcbiAgICB9XHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gbG9hZENvbW1vbVNjZW5jZSgpO1xyXG4gICAgfSxcclxuICAgIGR6emI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoJ2R6emInKTtcclxuXHJcbiAgICB9LFxyXG4gICAgaHNiczogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcbiAgICBoY2JzOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuICAgIGhja3M6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG4gICAgZ21rczogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcbiAgICAgd3BoczogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcblxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIGlkOmNjLkxhYmVsLFxyXG4gICAgICAgIC8vIGZvbzoge1xyXG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub2RlIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcclxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICB2aXNpYmxlOiB0cnVlLCAgICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXHJcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gLi4uXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuICAgIHNldElkOmZ1bmN0aW9uKG1zZyl7XHJcbiAgICAgICAgdGhpcy5pZD1tc2c7XHJcbiAgICB9LFxyXG4gICAgZ2V0SWQ6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgbXNnOmNjLlJpY2hUZXh0LFxyXG4gICAgICAgIC8vIGZvbzoge1xyXG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub2RlIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcclxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICB2aXNpYmxlOiB0cnVlLCAgICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXHJcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gLi4uXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHNlbGY9dGhpcztcclxuICAgICAgICAgc2VsZi5tc2cuc3RyaW5nPVwiXCI7XHJcbiAgICAgICAgICAgYWpheERhdGEoSHhzZ1VybC51c2VyV3VQaW4se1wid3VwaW5JZFwiOnVzZXJXdVBpbi53dXBpbklkLFwibnVtXCI6MX0sIGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICAgICAgc2VsZi5tc2cuc3RyaW5nPW1zZy5tc2c7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICk7XHJcbiAgICB9LFxyXG4gLyoqXHJcbiAgICAgKiDngrnlh7vkuovku7YtLT7ov5Tlm55cclxuICAgICAqL1xyXG4gICAgYmFja0V2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy/osIPnlKjpgJrnlKjnmoTov5Tlm57kuIrkuIDlnLrmma/mlrnms5VcclxuICAgICAgIC8v6LCD55So6YCa55So55qE6L+U5Zue5LiK5LiA5Zy65pmv5pa55rOVXHJcbiAgICAgICAgICBsb2FkU2NlbmUoSHhzZ1NjZW5lcy53dXBpbiwgSHhzZ1NjZW5lcy5pbmRleCk7XHJcbiAgICB9LFxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgdGFyZ2V0OiB7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgICAgICAgIHR5cGU6IGNjLlByZWZhYixcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxlZnRDb250ZW50OiBjYy5Ob2RlLFxyXG4gICAgICAgIGNvbnRlbnQ6IGNjLk5vZGUsXHJcbiAgICAgICAgLy8gZm9vOiB7XHJcbiAgICAgICAgLy8gICAgZGVmYXVsdDogbnVsbCwgICAgICAvLyBUaGUgZGVmYXVsdCB2YWx1ZSB3aWxsIGJlIHVzZWQgb25seSB3aGVuIHRoZSBjb21wb25lbnQgYXR0YWNoaW5nXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICB0byBhIG5vZGUgZm9yIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgLy8gICAgdXJsOiBjYy5UZXh0dXJlMkQsICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxyXG4gICAgICAgIC8vICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSwgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIHZpc2libGU6IHRydWUsICAgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIGRpc3BsYXlOYW1lOiAnRm9vJywgLy8gb3B0aW9uYWxcclxuICAgICAgICAvLyAgICByZWFkb25seTogZmFsc2UsICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIGZhbHNlXHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICAvLyAuLi5cclxuICAgIH0sXHJcbiAgICBiYWNrRXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvL+iwg+eUqOmAmueUqOeahOi/lOWbnuS4iuS4gOWcuuaZr+aWueazlVxyXG4gICAgICAgIGxvYWRTY2VuZShIeHNnU2NlbmVzLnd1cGluLCBIeHNnU2NlbmVzLmluZGV4KTtcclxuICAgICAgICBjdXJJdGVtRGF0YSA9IG51bGw7XHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MubG9nKHVzZXJXdVBpbi5vYmplY3RzKVxyXG4gICAgICAgIHZhciBvYmogPSB1c2VyV3VQaW4ub2JqZWN0cztcclxuICAgICAgICBjYy5sb2cob2JqKVxyXG4gICAgICAgIHZhciB0aXRsZSA9IGNjLmZpbmQoXCJDYW52YXMvdGl0bGVcIik7XHJcbiAgICAgICAgdmFyIHVzZXJUaXRsZSA9IGNjLmZpbmQoXCJDYW52YXMvYm9vay91c2VyVGl0bGVcIik7XHJcbiAgICAgICAgdmFyIHhpYW9HdW8gPSBjYy5maW5kKFwiQ2FudmFzL3Jlc3VsdC94aWFvR3VvXCIpO1xyXG4gICAgICAgIHRpdGxlLmdldENvbXBvbmVudCgnY2MuTGFiZWwnKS5zdHJpbmcgPSBvYmoubmFtZVxyXG4gICAgICAgIHVzZXJUaXRsZS5nZXRDb21wb25lbnQoJ2NjLkxhYmVsJykuc3RyaW5nID0gJ+S9v+eUqCcgKyBvYmoubmFtZTtcclxuICAgICAgICB2YXIgdXJscztcclxuICAgICAgICBzd2l0Y2ggKG9iai50eXBlMSkge1xyXG4gICAgICAgICAgICBjYXNlICfmioDog70nOlxyXG4gICAgICAgICAgICAgICAgeGlhb0d1by5nZXRDb21wb25lbnQoJ2NjLkxhYmVsJykuc3RyaW5nID0gJ+aViOaenDrlj6/kvb/njqnlrrbmiJbogIXlia/lsIblrabkuaDmioDog73jgJAnICsgb2JqLm5hbWUgKyAn44CRJztcclxuICAgICAgICAgICAgICAgIHVybHMgPSBIeHNnVXJsLnF1ZXJ5RnVKaWFuZ0ppTmVuZ0Jvb2s7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAn5oqA6IO95LmmJzpcclxuICAgICAgICAgICAgICAgIHhpYW9HdW8uZ2V0Q29tcG9uZW50KCdjYy5MYWJlbCcpLnN0cmluZyA9ICfmlYjmnpw65Y+v5L2/546p5a625oiW6ICF5Ymv5bCG55qEJyArIG9iai5uYW1lICsgJ+eahOeGn+e7g+W6puWinuWKoDEwMCc7XHJcbiAgICAgICAgICAgICAgICB1cmxzID0gSHhzZ1VybC5qaU5lbmdTaHU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICBhamF4RGF0YSh1cmxzLCB7IFwiaWRcIjogdXNlcld1UGluLnd1cGluSWQgfSwgZnVuY3Rpb24gKG1zZykge1xyXG4gICAgICAgICAgICB2YXIgcCA9IG1zZy5tc2c7XHJcbiAgICAgICAgICAgIGlmIChwLmxlbmd0aCA9PT0gMCB8fCBwLmxlbmd0aCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIHNob3dBbGVydCgn5rKh5pyJ5Y+v5Lul5L2/55So55qE5a+56LGhJylcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvL2FsZXJ0KHApO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBpdGVtID0gY2MuaW5zdGFudGlhdGUoc2VsZi50YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5jb250ZW50LmFkZENoaWxkKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgaXRlbS54ID0gMTtcclxuICAgICAgICAgICAgICAgIGl0ZW0ueSA9IC0xICogaSAqIGl0ZW0uaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgaXRlbS5uYW1lID0gJ3VzZXJMaXN0JyArIGk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmxlZnRDb250ZW50LmhlaWdodCA9IChpICsgMSkgKiBpdGVtLmhlaWdodCArIDIwO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBsYWIgPSBpdGVtLmdldENvbXBvbmVudChcInd1UGluTGlzdFwiKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gbGFiLmlkLnN0cmluZz1wW2ldLnJmaWQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSAlIDIgIT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLmNvbG9yID0gbmV3IGNjLkNvbG9yKDAsIDAsIDQ5KTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpdGVtLmNvbG9yKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vbGFiLk5vZGUuQ29sb3I9XCJXSElURVwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGFiLnNlbGVjdEJuLm5hbWUgPSAnYnV0dG9uJyArIGk7XHJcbiAgICAgICAgICAgICAgICAvLyB2YXIgY2xpY2tFdmVudEhhbmRsZXIgPSBuZXcgY2MuQ29tcG9uZW50LkV2ZW50SGFuZGxlcigpO1xyXG4gICAgICAgICAgICAgICAgLy8gY2xpY2tFdmVudEhhbmRsZXIudGFyZ2V0ID0gbGFiLnNlbGVjdEJuLm5vZGU7IC8v6L+Z5LiqIG5vZGUg6IqC54K55piv5L2g55qE5LqL5Lu25aSE55CG5Luj56CB57uE5Lu25omA5bGe55qE6IqC54K5XHJcbiAgICAgICAgICAgICAgICAvLyBjbGlja0V2ZW50SGFuZGxlci5jb21wb25lbnQgPSdidXR0b24wJztcclxuICAgICAgICAgICAgICAgIC8vIGNsaWNrRXZlbnRIYW5kbGVyLmhhbmRsZXIgPSBcInNraWxsTGlzdFwiO1xyXG4gICAgICAgICAgICAgICAgLy8gY2xpY2tFdmVudEhhbmRsZXIuY3VzdG9tRXZlbnREYXRhID1wW2ldLmlkO1xyXG4gICAgICAgICAgICAgICAgLy93dVBpbi5qaW5lbmdMaXN0PVwiMTAzMTFcIlxyXG4gICAgICAgICAgICAgICAgLy9sYWIuc2VsZWN0Qm4uaWQuc3RyaW5nPXBbaV0ucmZpZFxyXG4gICAgICAgICAgICAgICAgdmFyIGJuID0gbGFiLnNlbGVjdEJuO1xyXG4gICAgICAgICAgICAgICAgY2MubG9nKHBbaV0ucm9sZW5hbWUpXHJcbiAgICAgICAgICAgICAgICBjYy5sb2cocFtpXS5uYW1lKVxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAocFtpXS5yb2xlbmFtZSkgPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBibi5pZCA9IHBbaV0ucm9sZUlkO1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYi5tc2cuc3RyaW5nID0gcFtpXS5uYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJXdVBpbi5mdUlkID0gcFtpXS5yb2xlSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiLnNlbGVjdEJuLm5vZGUub24oJ2NsaWNrJywgc2VsZi5zaG93VXNlckJvb2ssIHNlbGYpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIChwW2ldLm5hbWUpID09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm4uaWQgPSBwW2ldLnJmaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcld1UGluLmZ1SWQgPSBwW2ldLnJmaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFiLm1zZy5zdHJpbmcgPSBwW2ldLnJvbGVuYW1lICsgXCIoXCIgKyBwW2ldLnJvbGVMZXZlbCArIFwi57qnKVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYi5zZWxlY3RCbi5ub2RlLm9uKCdjbGljaycsIHNlbGYuc2tpbGxMaXN0LCBzZWxmKVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIGxhYi5zZWxlY3RCbi5zZXRJZChuZXcgY2MuTGFiZWwoKSlcclxuXHJcbiAgICAgICAgICAgICAgICAvL2xhYi5zZWxlY3RCbi5jbGlja0V2ZW50cy5wdXNoKGNsaWNrRXZlbnRIYW5kbGVyKTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nIChibi5pZClcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHBbaV0uaWQpXHJcbiAgICAgICAgICAgICAgICAvL3MgKz0gXCIgPHAgY2xhc3M9XFxcInlhb3BpbmdcXFwiIHN0eWxlPSdjb2xvcjojRkZGM0FFJz7nrKxcIiArIHBbaV0uaWQgKyBcIuacn++8jOW8gOWHulwiICsgcFtpXS5udW0xICsgXCIsXCIgKyBwW2ldLm51bTIgKyBcIixcIiArIHBbaV0ubnVtMyArIFwiJm5ic3A7Jm5ic3A7XCIgKyBwW2ldLnJlc3VsdCArIFwiPC9wPlwiO1xyXG4gICAgICAgICAgICAgICAgLy8gdmFyIGl0ZW0gPSBjYy5pbnN0YW50aWF0ZShzZWxmLml0ZW1QcmVmYWIpO1xyXG4gICAgICAgICAgICAgICAgLy8gc2VsZi5sZWZ0Q29udGVudC5hZGRDaGlsZChpdGVtKTtcclxuICAgICAgICAgICAgICAgIC8vIGl0ZW0ueCA9IDA7XHJcbiAgICAgICAgICAgICAgICAvLyBpdGVtLnkgPSAtMSAqIGkgKiBpdGVtLmhlaWdodDtcclxuICAgICAgICAgICAgICAgIC8vIGl0ZW0ubmFtZSA9ICdoaXN0b3J5JyArIGk7XHJcbiAgICAgICAgICAgICAgICAvLyBzZWxmLmNvbnRlbnQuaGVpZ2h0ID0gKGkgKyAxKSAqIGl0ZW0uaGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGl0ZW0gPSBpdGVtLmdldENvbXBvbmVudCgnSGlzdG9yeUl0ZW0nKTtcclxuICAgICAgICAgICAgICAgIC8vIHZhciBsYWJlbFN0ciA9IFwi56ysXCIgKyBwW2ldLmlkICsgXCLmnJ/vvIzlvIDlh7pcIiArIHBbaV0ubnVtMSArIFwiLFwiICsgcFtpXS5udW0yICsgXCIsXCIgKyBwW2ldLm51bTMgKyBcIlxcdFxcdFwiICsgcFtpXS5yZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAvLyBpdGVtLnNldE1zZyhsYWJlbFN0cik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgcmV0dXJuV3VQaW46IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5sb2coXCJjY2NjY2NjY2NcIilcclxuICAgICAgICBsb2FkU2NlbmUoSHhzZ1NjZW5lcy53dXBpbiwgSHhzZ1NjZW5lcy5pbmRleClcclxuXHJcbiAgICB9LFxyXG4gICAgc2hvd1VzZXJCb29rOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgbGV0IG5vZGU9IGV2ZW50LnRhcmdldFxyXG4gICAgICAgICAgdmFyIGJ1dHRvbiA9IG5vZGUuZ2V0Q29tcG9uZW50KGNjLkJ1dHRvbik7XHJcbiAgICAgICAgdXNlcld1UGluLm51bSA9IDE7XHJcbiAgICAgICAgdXNlcld1UGluLmlkPWJ1dHRvbi5pZDtcclxuICAgICAgICBhamF4RGF0YShIeHNnVXJsLnVzZXJXdVBpbiwgdXNlcld1UGluLCB0aGlzLnRpc2hpKTtcclxuXHJcbiAgICB9LFxyXG4gICAgdGlzaGk6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBzaG93QWxlcnQobXNnLm1zZywgc2VsZi5yZXR1cm5XdVBpbiwgc2VsZi5yZXR1cm5XdVBpbik7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICBza2lsbExpc3Q6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIC8v6L+Z6YeMIGV2ZW50IOaYr+S4gOS4qiBUb3VjaCBFdmVudCDlr7nosaHvvIzkvaDlj6/ku6XpgJrov4cgZXZlbnQudGFyZ2V0IOWPluWIsOS6i+S7tueahOWPkemAgeiKgueCuVxyXG5cclxuXHJcbiAgICAgICAgLy90aGlzLm5vZGUuU2Nyb2xsdmlldy5jbGVhclNjcm9sbHZpZXcoKTtcclxuICAgICAgICAvLyAgIHRoaXMuY2Fubm9ucyA9IFtdO1xyXG4gICAgICAgIC8vICAgICB0aGlzLmNhbm5vbnMgPSB0aGlzLm5vZGUuZ2V0Q2hpbGRyZW4oKTtcclxuICAgICAgICAvLyB0aGlzLm5vZGUuZ2V0Q2hpbGRyZW4oKVszXS5jbGVhclNjcm9sbHZpZXcoKVxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCB0aGlzLm5vZGUuZ2V0Q2hpbGRyZW4oKVszXSkgXHJcbiAgICAgICBsZXQgbm9kZT0gZXZlbnQudGFyZ2V0XHJcbiAgICAgICAgICB2YXIgYnV0dG9uID0gbm9kZS5nZXRDb21wb25lbnQoY2MuQnV0dG9uKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhidXR0b24uaWQpXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIGFqYXhEYXRhKEh4c2dVcmwudXNlckppTmVuZ1NodSwgeyBcImlkXCI6IHVzZXJXdVBpbi53dXBpbklkLCBcInN0YXR1c1wiOiBidXR0b24uaWR9LCBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgICAgIHNlbGYuY29udGVudC5yZW1vdmVBbGxDaGlsZHJlbigpO1xyXG4gICAgICAgICAgICB2YXIgcCA9IG1zZy5tc2c7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBjYy5pbnN0YW50aWF0ZShzZWxmLnRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmNvbnRlbnQuYWRkQ2hpbGQoaXRlbSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaXRlbS54ID0gMTtcclxuICAgICAgICAgICAgICAgIGl0ZW0ueSA9IC0xICogaSAqIGl0ZW0uaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgaXRlbS5uYW1lID0gJ3VzZXJMaXN0JyArIGk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLmxlZnRDb250ZW50LmhlaWdodCA9IChpICsgMSkgKiBpdGVtLmhlaWdodCArIDIwO1xyXG4gICAgICAgICAgICAgICAgdmFyIGxhYiA9IGl0ZW0uZ2V0Q29tcG9uZW50KFwid3VQaW5MaXN0XCIpO1xyXG4gICAgICAgICAgICAgICAgbGFiLm1zZy5zdHJpbmcgPSBwW2ldLnNraWxsbmFtZTtcclxuICAgICAgICAgICAgICAgIHZhciBibiA9IGxhYi5zZWxlY3RCbjtcclxuICAgICAgICAgICAgICAgIGJuLmlkID0gcFtpXS5pZDtcclxuICAgICAgICAgICAgICAgIC8vdXNlcld1UGluLmpuSWQ9cFtpXS5pZDtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5oqA6IO9SURcIiArIGJuLmlkKTtcclxuICAgICAgICAgICAgICAgIGlmIChpICUgMiAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uY29sb3IgPSBuZXcgY2MuQ29sb3IoMCwgMCwgNDkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGl0ZW0uY29sb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgLy9sYWIuTm9kZS5Db2xvcj1cIldISVRFXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsYWIuc2VsZWN0Qm4ubmFtZSA9ICdidXR0b24nICsgaTtcclxuICAgICAgICAgICAgICAgIGxhYi5zZWxlY3RCbi5ub2RlLm9uKCdjbGljaycsIHNlbGYuaW1wdXROdW0sIHNlbGYpXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coYm4uaWQpXHJcbiAgICB9LFxyXG5cclxuICAgIGltcHV0TnVtOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICB2YXIgbm9kZSA9IGV2ZW50LnRhcmdldDtcclxuXHJcbiAgICAgICAgdmFyIGJ1dHRvbiA9IG5vZGUuZ2V0Q29tcG9uZW50KGNjLkJ1dHRvbik7XHJcblxyXG4gICAgICAgIHVzZXJXdVBpbi5qbklkID0gYnV0dG9uLmlkO1xyXG4gICAgICAgIGNjLmxvZyhidXR0b24uaWQpXHJcbiAgICAgICAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKCdpbnB1dE51bScpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgdGFyZ2V0OiB7XHJcbiAgICAgIGRlZmF1bHQ6IG51bGwsXHJcbiAgICAgIHR5cGU6IGNjLlByZWZhYixcclxuICAgICAgIH0sXHJcbiAgICBsZWZ0Q29udGVudDpjYy5Ob2RlLFxyXG4gICAgICAgIGNvbnRlbnQ6IGNjLk5vZGUsXHJcbiAgICAgICAgLy8gZm9vOiB7XHJcbiAgICAgICAgLy8gICAgZGVmYXVsdDogbnVsbCwgICAgICAvLyBUaGUgZGVmYXVsdCB2YWx1ZSB3aWxsIGJlIHVzZWQgb25seSB3aGVuIHRoZSBjb21wb25lbnQgYXR0YWNoaW5nXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICB0byBhIG5vZGUgZm9yIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgLy8gICAgdXJsOiBjYy5UZXh0dXJlMkQsICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxyXG4gICAgICAgIC8vICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSwgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIHZpc2libGU6IHRydWUsICAgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIGRpc3BsYXlOYW1lOiAnRm9vJywgLy8gb3B0aW9uYWxcclxuICAgICAgICAvLyAgICByZWFkb25seTogZmFsc2UsICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIGZhbHNlXHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICAvLyAuLi5cclxuICAgIH0sXHJcbiAgIGJhY2tFdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8v6LCD55So6YCa55So55qE6L+U5Zue5LiK5LiA5Zy65pmv5pa55rOVXHJcbiAgICAgICAgICBsb2FkU2NlbmUoSHhzZ1NjZW5lcy53dXBpbiwgSHhzZ1NjZW5lcy5pbmRleCk7XHJcbiAgICAgICAgY3VySXRlbURhdGEgPSBudWxsO1xyXG4gICAgfSxcclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgYWpheERhdGEoSHhzZ1VybC5nZXRYaW5GYUZ1SmlhbmcsdXNlcld1UGluLGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwID0gbXNnLm1zZztcclxuICAgICAgICAgICAgICAgIGlmKHA9PW51bGx8fHA9PSd1bmRlZmluZWQnfHxwLmxlbmd0aD09MCl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd0FsZXJ0KCfmsqHmnInlj6/ku6Xkvb/nlKjor6Xlv4Pms5XkuabnmoTlia/lsIYnKTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBjYy5pbnN0YW50aWF0ZShzZWxmLnRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgIHNlbGYuY29udGVudC5hZGRDaGlsZChpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLnggPTE7XHJcbiAgICAgICAgICAgICAgICAgICAgIGl0ZW0ueT0gLTEgKiBpICogaXRlbS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5uYW1lID0gJ3VzZXJMaXN0JyArIGk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5sZWZ0Q29udGVudC5oZWlnaHQgPSAoaSArIDEpICogaXRlbS5oZWlnaHQrMjA7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxhYiA9IGl0ZW0uZ2V0Q29tcG9uZW50KFwid3VQaW5MaXN0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgbGFiLm1zZy5zdHJpbmc9cFtpXS5mdWppYW5nbmFtZStcIihcIitwW2ldLmxldmUrXCLnuqcpXCI7XHJcbiAgICAgICAgICAgICAgICAgICAvLyBsYWIuaWQuc3RyaW5nPXBbaV0ucmZpZDtcclxuICAgICAgICAgICAgICAgICAgICBpZihpJTIhPT0wKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5jb2xvcj1uZXcgY2MuQ29sb3IoMCwwLDQ5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGl0ZW0uY29sb3IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vbGFiLk5vZGUuQ29sb3I9XCJXSElURVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgbGFiLnNlbGVjdEJuLm5hbWU9J2J1dHRvbicraTtcclxuICAgICAgICAgICAgICAgICAgICAgLy9sYWIuc2VsZWN0Qm4uaWQuc3RyaW5nPXBbaV0ucmZpZFxyXG4gICAgICAgICAgICAgICAgICAgICAgdmFyIGJuPWxhYi5zZWxlY3RCbjtcclxuICAgICAgICAgICAgICAgICAgICAgIGJuLmlkPXBbaV0uaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAvL3VzZXJXdVBpbi5mdUlkPXBbaV0uaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbGFiLnNlbGVjdEJuLnNldElkKG5ldyBjYy5MYWJlbCgpKVxyXG4gICAgICAgICAgICAgICAgICAgIGxhYi5zZWxlY3RCbi5ub2RlLm9uKCdjbGljaycsc2VsZi5pbXB1dE51bSwgc2VsZilcclxuICAgICAgICAgICAgICAgIH0gIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIHNraWxsTGlzdDpmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgIC8v6L+Z6YeMIGV2ZW50IOaYr+S4gOS4qiBUb3VjaCBFdmVudCDlr7nosaHvvIzkvaDlj6/ku6XpgJrov4cgZXZlbnQudGFyZ2V0IOWPluWIsOS6i+S7tueahOWPkemAgeiKgueCuVxyXG4gICAgICAgXHJcbiAgICAgIGNjLmRpcmVjdG9yLmxvYWRTY2VuZSgnaW5wdXROdW0nKTtcclxuICAgICAgLy90aGlzLm5vZGUuU2Nyb2xsdmlldy5jbGVhclNjcm9sbHZpZXcoKTtcclxuICAgIC8vICAgdGhpcy5jYW5ub25zID0gW107XHJcbiAgICAvLyAgICAgdGhpcy5jYW5ub25zID0gdGhpcy5ub2RlLmdldENoaWxkcmVuKCk7XHJcbiAgIC8vIHRoaXMubm9kZS5nZXRDaGlsZHJlbigpWzNdLmNsZWFyU2Nyb2xsdmlldygpXHJcbiAgICAgICAgICAgLy8gY29uc29sZS5sb2coIHRoaXMubm9kZS5nZXRDaGlsZHJlbigpWzNdKSBcclxuICAgICAgY29uc29sZS5sb2codXNlcld1UGluLmZ1SWQpXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coYm4uaWQpXHJcbiAgICB9LFxyXG4gICAgIGltcHV0TnVtOmZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgdmFyIG5vZGUgPSBldmVudC50YXJnZXQ7XHJcbiAgICAgIFxyXG4gICAgICAgIHZhciBidXR0b24gPSBub2RlLmdldENvbXBvbmVudChjYy5CdXR0b24pO1xyXG4gICAgICAgICAgIHVzZXJXdVBpbi5mdUlkPWJ1dHRvbi5pZDtcclxuICAgICAgICAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKCdpbnB1dE51bScpO1xyXG4gICAgIH0sXHJcbiAgICBcclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIGlkOjAsXHJcbiAgICAgICAgcmljaFRleHQ6Y2MuUmljaFRleHRcclxuICAgIH0sXHJcbiAgICBcclxuXHJcblxyXG4gICAgaW5pdDogZnVuY3Rpb24oZGF0YSxpZCl7XHJcbiAgICAgICAgICAgIHZhciBzdHI9XCI8Y29sb3I9IzA4RTdCQT5cIisgZ2V0RGF0ZShkYXRhLmRhdGUpK1wiPC9jPjxjb2xvcj0jZmY5ZTAwPiAgIFwiK2RhdGEucm9sZW5hbWUrXCI8L2M+XCI7XHJcbiAgICAgICAgICAgIHN0cis9XCI8Y29sb3I9I0Y4RUVFQj7mjJbliLDkuoY8L2M+XCI7XHJcbiAgICAgICAgICAgIHN0cis9XCI8Y29sb3I9I0YzNDkxMz4gIFwiK2RhdGEuYmFvbmFtZStcIjwvY29sb3I+XCI7XHJcbiAgICAgICAgICAgIHRoaXMucmljaFRleHQuc3RyaW5nPXN0cjtcclxuICAgICAgICAgICAgdGhpcy5pZD1pZDtcclxuICAgIFxyXG4gICAgICAgaWYoaWQlMj09PTApe1xyXG4gICAgICAgICAgICAgICB0aGlzLm5vZGUuY29sb3I9bmV3IGNjLkNvbG9yKDAsIDAsMzgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgIHRoaXMubm9kZS5jb2xvcj1uZXcgY2MuQ29sb3IoOTksNjUsOTkpO1xyXG4gICAgICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJ2YXIgc2VsZjtcclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgaXRlbVByZWZhYjogY2MuUHJlZmFiLFxyXG4gICAgICBtc2dDb3VudDowXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZj10aGlzO1xyXG4gICAgICAgICAgIHZhciBwcmVmYWI9dGhpcy5pdGVtUHJlZmFiO1xyXG4gICAgICAgICAgIHZhciBub2RlPXRoaXMubm9kZTtcclxuICAgICAgICAgICB2YXIgdGhpc2NsYXNzPXRoaXM7XHJcbiAgICAgICAgICAgdmFyIGFqYXhVcmw9SHhzZ1VybC53YWJhb01zZztcclxuICAgICAgICAgICAgICBjYy5sb2cocHJlZmFiLm5hbWUpO1xyXG4gICAgICAgICAgYWpheERhdGEoYWpheFVybCxudWxsLCBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbSA9IG1zZy5tc2c7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IG0ubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzY2xhc3MuYWRkTXNnKG1zZy5tc2dbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICBTb2NrZXRFdmVudHMud2FiYW9Nc2c9dGhpcy5hZGRNc2c7XHJcbiAgICAgICAgXHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiDngrnlh7vkuovku7YtLT7ov5Tlm55cclxuICAgICAqL1xyXG4gICAgYmFja0V2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy/osIPnlKjpgJrnlKjnmoTov5Tlm57kuIrkuIDlnLrmma/mlrnms5VcclxuICAgICAgICAgIGxvYWRTY2VuZShIeHNnU2NlbmVzLnNhaXppLCBIeHNnU2NlbmVzLmluZGV4KTtcclxuICAgIH0sXHJcblxyXG4gICAgYWRkTXNnOmZ1bmN0aW9uKG1zZyl7XHJcbiAgICAgICAgIHZhciBub2RlPWNjLmZpbmQoXCJDYW52YXMvc2Nyb2xsVmlldy92aWV3L2NvbnRlbnQvbGlzdFwiKTtcclxuICAgICAgICAgdHJ5e1xyXG4gICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBjYy5pbnN0YW50aWF0ZShzZWxmLml0ZW1QcmVmYWIpO1xyXG4gICAgICAgICAgICAgICAgbm9kZS5hZGRDaGlsZChpdGVtKTtcclxuICAgICAgICAgICAgICAgIGl0ZW0uZ2V0Q29tcG9uZW50KCd3YWJhb01zZ0l0ZW0nKS5pbml0KG1zZyxzZWxmLm1zZ0NvdW50KTtcclxuICAgICAgICAgICAgICAgIG5vZGUuaGVpZ2h0Kz1pdGVtLmhlaWdodDtcclxuICAgICAgICAgICAgICAgIHNlbGZ0aGlzLm1zZ0NvdW50Kys7XHJcblx0XHRcdH1cclxuXHRcdGNhdGNoKGUpe1xyXG5cdFx0XHRcdCAgICAgICAgICAgICAgICAgIFxyXG5cdFx0XHR9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsInZhciB0aGlzY2xhc3M7XHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgaWQ6IDAsXHJcbiAgICAgICAgbnVtOiAwLFxyXG4gICAgICAgIGdldENoYW5jZTogZmFsc2UsXHJcbiAgICAgICAgd2Fjb3VudDogMCxcclxuICAgICAgICAvLyAuLi5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5maW5kKFwiQ2FudmFzL21haW4vdG9wem9uZTEvaml4dXdhYmFvXCIpLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIHZhciBub2RldG9wMSA9IGNjLmZpbmQoXCJDYW52YXMvbWFpbi90b3B6b25lMVwiKTtcclxuICAgICAgICB2YXIgbm9kZXRvcDIgPSBjYy5maW5kKFwiQ2FudmFzL21haW4vdG9wem9uZTJcIik7XHJcbiAgICAgICAgbm9kZXRvcDEuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgbm9kZXRvcDIuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdmFyIGRpYWxvZyA9IGNjLmZpbmQoXCJDYW52YXMvbWFpbi90b3B6b25lMi9kaWFsb2dcIik7XHJcbiAgICAgICAgZGlhbG9nLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICB0aGlzY2xhc3MgPSB0aGlzO1xyXG4gICAgICAgIGFqYXhEYXRhKCBIeHNnVXJsLmxvYWRXYUJhbyxudWxsLGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbXNnID0gZGF0YS5tc2c7XHJcbiAgICAgICAgICAgICAgICB0aGlzY2xhc3MuaWQgPSBtc2cuaWQ7XHJcbiAgICAgICAgICAgICAgICAgcm9sZU1zZy5pZD1tc2cuaWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzY2xhc3MubnVtID1tc2cubnVtO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1zZy5udW0gPT0gMCAmIChtc2cudzEgPT0gMCAmJiBtc2cudzIgPT0gMCAmJlxyXG4gICAgICAgICAgICAgICAgICAgIG1zZy53MyA9PSAwICYmIG1zZy53NCA9PSAwICYmIG1zZy53NSA9PSAwICYmIG1zZy53NiA9PSAwICYmXHJcbiAgICAgICAgICAgICAgICAgICAgbXNnLnc3ID09IDAgJiYgbXNnLnc4ID09IDAgJiYgbXNnLnc5ID09IDApKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc2NsYXNzLnN3aXRjaFNjZW5lKDMsIDIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc2NsYXNzLnN3aXRjaFNjZW5lKDMsIDEsIG1zZyk7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgfSxcclxuLyoqXHJcbiAgICAgKiDngrnlh7vkuovku7YtLT7ov5Tlm55cclxuICAgICAqL1xyXG4gICAgYmFja0V2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy/osIPnlKjpgJrnlKjnmoTov5Tlm57kuIrkuIDlnLrmma/mlrnms5VcclxuICAgICAgICByZXR1cm5MYXN0KCk7XHJcblxyXG4gICAgfSxcclxuICAgIHN3aXRjaFNjZW5lOiBmdW5jdGlvbiAoYmVmb3JlLCBhZnRlciwgbXNnKSB7XHJcbiAgICAgICAgdmFyIGJlZm9yZW47XHJcbiAgICAgICAgc3dpdGNoIChiZWZvcmUpIHtcclxuICAgICAgICAgICAgY2FzZSAxOiBiZWZvcmVuID0gY2MuZmluZChcIkNhbnZhcy9tYWluL3RvcHpvbmUxXCIpOyBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAyOiBiZWZvcmVuID0gY2MuZmluZChcIkNhbnZhcy9tYWluL3RvcHpvbmUyXCIpOyBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAzOiBiZWZvcmVuID0gY2MuZmluZChcIkNhbnZhcy9tYWluL3RvcHpvbmUzXCIpOyBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiAoYmVmb3JlbikgIT0gXCJ1bmRlZmluZWRcIilcclxuICAgICAgICAgICAgYmVmb3Jlbi5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB2YXIgYWZ0ZXJuO1xyXG4gICAgICAgIHN3aXRjaCAoYWZ0ZXIpIHtcclxuICAgICAgICAgICAgY2FzZSAxOiBhZnRlcm4gPSBjYy5maW5kKFwiQ2FudmFzL21haW4vdG9wem9uZTFcIik7XHJcbiAgICAgICAgICAgICAgICBjYy5maW5kKFwiQ2FudmFzL21haW4vdG9wem9uZTEvbnVtbGFiZWxcIikuZ2V0Q29tcG9uZW50KFwiY2MuTGFiZWxcIikuc3RyaW5nID0gXCLliankvZnmjJblrp3mrKHmlbA6XCIgKyB0aGlzLm51bS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy53YWNvdW50ID0gMDtcclxuICAgICAgICAgICAgICAgIHZhciB3YWJhb25vZGUgPSBjYy5maW5kKFwiQ2FudmFzL21haW4vdG9wem9uZTEvd2FiYW9cIik7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8PSA5OyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IFwid1wiICsgaTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IGNjLmZpbmQobmFtZSArIFwiL2J1dHRvblwiLCB3YWJhb25vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmxvZygnbXNnLm5hbWU6JyArIG1zZ1tuYW1lXSlcclxuICAgICAgICAgICAgICAgICAgICBpZiAobXNnW25hbWVdID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53YWNvdW50Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGNjLmxvZyhuYW1lK1wiLS0tZmFsc2VcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2MubG9nKFwiIHRoaXMud2Fjb3VudDpcIisgdGhpcy53YWNvdW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLmdldENvbXBvbmVudChcImNjLkJ1dHRvblwiKS5pbnRlcmFjdGFibGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5jb2xvciA9IG5ldyBjYy5Db2xvcigwLCAwLCA0OSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuZ2V0Q29tcG9uZW50KGNjLkJ1dHRvbikuZW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuZ2V0Q2hpbGRCeU5hbWUoXCJMYWJlbFwiKS5nZXRDb21wb25lbnQoXCJjYy5MYWJlbFwiKS5zdHJpbmcgPSBcIuW3suaMllwiO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYy5sb2cobmFtZStcIi0tLXRydWVcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5nZXRDb21wb25lbnQoXCJjYy5CdXR0b25cIikuaW50ZXJhY3RhYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5jb2xvciA9IG5ldyBjYy5Db2xvcigyMzEsIDE0LCAxMDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLmdldENvbXBvbmVudChjYy5CdXR0b24pLmVuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLmdldENoaWxkQnlOYW1lKFwiTGFiZWxcIikuZ2V0Q29tcG9uZW50KFwiY2MuTGFiZWxcIikuc3RyaW5nID0gXCLmjJblrp1cIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgIHRoaXMua2V5U3dpdGNoKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAyOiBhZnRlcm4gPSBjYy5maW5kKFwiQ2FudmFzL21haW4vdG9wem9uZTJcIik7IGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIDM6IGFmdGVybiA9IGNjLmZpbmQoXCJDYW52YXMvbWFpbi90b3B6b25lM1wiKTsgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFmdGVybi5hY3RpdmUgPSB0cnVlO1xyXG4gICAgfSxcclxuXHJcbiAgICB3YWJhbzogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIG5vZGUgPSBldmVudC50YXJnZXQ7XHJcbiAgICAgICAgbm9kZS5jb2xvciA9IG5ldyBjYy5Db2xvcigwLCAwLCA0OSk7XHJcbiAgICAgICAgbm9kZS5nZXRDb21wb25lbnQoY2MuQnV0dG9uKS5lbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgbm9kZS5nZXRDaGlsZEJ5TmFtZShcIkxhYmVsXCIpLmdldENvbXBvbmVudChcImNjLkxhYmVsXCIpLnN0cmluZyA9IFwi5bey5oyWXCI7XHJcbiAgICAgICAgdmFyIG5hbWUgPSBub2RlLnBhcmVudC5uYW1lO1xyXG4gICAgICAgIHRoaXMud2Fjb3VudCsrO1xyXG4gICAgICAgIHZhciBqc29uRGF0YSA9IHt9O1xyXG4gICAgICAgIGpzb25EYXRhW1wiaWRcIl0gPSB0aGlzLmlkO1xyXG4gICAgICAgIGpzb25EYXRhW25hbWVdID0gJzAnO1xyXG4gICAgICAgIGNjLmxvZyhqc29uRGF0YSlcclxuICAgICAgICBhamF4RGF0YShIeHNnVXJsLnN0YXJ0V2FCYW8sanNvbkRhdGEsZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHZhciBub2RlID0gY2MuZmluZChcIkNhbnZhcy9tYWluL3RvcHpvbmUxL3RpcGxhYmVsXCIpO1xyXG4gICAgICAgICAgICAgICAgbm9kZS5nZXRDb21wb25lbnQoXCJjYy5MYWJlbFwiKS5zdHJpbmcgPSBkYXRhLm1zZztcclxuXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMua2V5U3dpdGNoKCk7XHJcbiAgICAgICAgXHJcbiAgICB9LFxyXG4ga2V5U3dpdGNoOmZ1bmN0aW9uKCl7XHJcbiAgICBpZiAodGhpcy53YWNvdW50ID49IDkpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubnVtIDw9IDApXHJcbiAgICAgICAgICAgICAgICB0aGlzLnN3aXRjaFNjZW5lKDEsIDIpO1xyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNjLmZpbmQoXCJDYW52YXMvbWFpbi9kb3dubGluZVwiKS55IC09IDUwO1xyXG4gICAgICAgICAgICAgICAgY2MuZmluZChcIkNhbnZhcy9zY3JvbGxWaWV3XCIpLnkgLT0gNTA7XHJcbiAgICAgICAgICAgICAgICBjYy5maW5kKFwiQ2FudmFzL21haW4vdG9wem9uZTEvaml4dXdhYmFvXCIpLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiB9LFxyXG5cclxuICAgIGVudGVyOiBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAvLyB2YXIgZGlhbG9nPWNjLmZpbmQoXCJDYW52YXMvbWFpbi90b3B6b25lMi9kaWFsb2dcIik7XHJcbiAgICAgICAgLy8gZGlhbG9nLmFjdGl2ZT10cnVlO1xyXG4gICAgICAgIC8vIHZhciBteW1zZz1kaWFsb2cuZ2V0Q2hpbGRCeU5hbWUoXCJtc2dcIikuZ2V0Q29tcG9uZW50KFwiY2MuTGFiZWxcIik7XHJcbiAgICAgICAgdmFyIHRoaXNjbGFzcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gbXltc2cuc3RyaW5nPVwi6L+e5o6l5Lit44CC44CC44CCXCI7XHJcbiAgICAgICAgYWpheERhdGEoSHhzZ1VybC5pbml0LG51bGwsZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIC8vIG15bXNnLnN0cmluZz1kYXRhLm1zZztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5tc2cgPT0gJ2ZhbHNlJyB8fCBkYXRhLm1zZyA9PSAnMDAwMDAzJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXNjbGFzcy5nZXRDaGFuY2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHNob3dBbGVydCgn5L2g5rKh5pyJ6JeP5a6d5Zu+77yM5peg5rOV6L+b5YWlJylcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd0FsZXJ0KCfmtojogJfol4/lrp3lm77kuIDkuKrvvIzngrnlh7vov5vlhaXlrp3mtJ4nLCB0aGlzY2xhc3Mub2tkaWFsb2cpXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuXHJcbiAgICBqaXh1d2FiYW86IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIGNjLmZpbmQoXCJDYW52YXMvbWFpbi9kb3dubGluZVwiKS55ICs9IDUwO1xyXG4gICAgICAgIGNjLmZpbmQoXCJDYW52YXMvc2Nyb2xsVmlld1wiKS55ICs9IDUwO1xyXG4gICAgICAgIGNjLmZpbmQoXCJDYW52YXMvbWFpbi90b3B6b25lMS9qaXh1d2FiYW9cIikuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICBhamF4RGF0YShIeHNnVXJsLm5leHRXYUJhbywgcm9sZU1zZywgdGhpc2NsYXNzLnN4KTtcclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgXHJcbiAgICAgICBcclxuICAgICAgICAvL3RoaXMuc3dpdGNoU2NlbmUoMCwgMSk7XHJcbiAgICB9LFxyXG4gICAgc3g6ZnVuY3Rpb24oKXtcclxuICAgICAgICBjYy5sb2coXCItLS0tLee7p+e7reaMluWunVwiKVxyXG4gYWpheERhdGEoIEh4c2dVcmwubG9hZFdhQmFvLG51bGwsZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtc2cgPSBkYXRhLm1zZztcclxuICAgICAgICAgICAgICAgIHRoaXNjbGFzcy5pZCA9IG1zZy5pZDtcclxuICAgICAgICAgICAgICAgICByb2xlTXNnLmlkPW1zZy5pZDtcclxuICAgICAgICAgICAgICAgIHRoaXNjbGFzcy5udW0gPW1zZy5udW07XHJcbiAgICAgICAgICAgICAgICBpZiAobXNnLm51bSA9PSAwICYgKG1zZy53MSA9PSAwICYmIG1zZy53MiA9PSAwICYmXHJcbiAgICAgICAgICAgICAgICAgICAgbXNnLnczID09IDAgJiYgbXNnLnc0ID09IDAgJiYgbXNnLnc1ID09IDAgJiYgbXNnLnc2ID09IDAgJiZcclxuICAgICAgICAgICAgICAgICAgICBtc2cudzcgPT0gMCAmJiBtc2cudzggPT0gMCAmJiBtc2cudzkgPT0gMCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzY2xhc3Muc3dpdGNoU2NlbmUoMywgMik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzY2xhc3Muc3dpdGNoU2NlbmUoMywgMSwgbXNnKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBva2RpYWxvZzogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgIFxyXG4gICAgICAgIGxvYWRpbmdTY2VuZShIeHNnU2NlbmVzLndhYmFvLEh4c2dTY2VuZXMuaW5kZXgpXHJcbiAgICAgICAgXHJcbiAgICB9LFxyXG5cclxuICAgIHRlc3Q6IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgIHRoaXMuc3dpdGNoU2NlbmUoMSwgMik7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIHdhaXQ6Y2MuU3ByaXRlLFxyXG4gICAgICAgIC8vIGZvbzoge1xyXG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub2RlIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcclxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICB2aXNpYmxlOiB0cnVlLCAgICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXHJcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gLi4uXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgdmFyIGFjdGlvbj0gY2MucmVwZWF0Rm9yZXZlcihjYy5yb3RhdGVCeSgzLjAsIDM2MCkpO1xyXG4gIHRoaXMud2FpdC5ub2RlLnJ1bkFjdGlvbihhY3Rpb24pO1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgLy8gZm9vOiB7XHJcbiAgICAgICAgLy8gICAgZGVmYXVsdDogbnVsbCwgICAgICAvLyBUaGUgZGVmYXVsdCB2YWx1ZSB3aWxsIGJlIHVzZWQgb25seSB3aGVuIHRoZSBjb21wb25lbnQgYXR0YWNoaW5nXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICB0byBhIG5vZGUgZm9yIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgLy8gICAgdXJsOiBjYy5UZXh0dXJlMkQsICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxyXG4gICAgICAgIC8vICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSwgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIHZpc2libGU6IHRydWUsICAgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIGRpc3BsYXlOYW1lOiAnRm9vJywgLy8gb3B0aW9uYWxcclxuICAgICAgICAvLyAgICByZWFkb25seTogZmFsc2UsICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIGZhbHNlXHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICAvLyAuLi5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG4gICAgZW5kRXZlbnQ6ZnVuY3Rpb24oZXZlbnQpe1xyXG4gICAgICAgICAgICBjYy5sb2coXCLliqjnlLvmkq3mlL7lrozmr5VcIilcclxuICAgICAgICB2YXIgbm9kZT1ldmVudC50YXJnZXI7XHJcbiAgICAgICAgbm9kZS5hY3RpdmU9ZmFsc2U7XHJcbiAgICBcclxuICAgICAgICAgdmFyIGJhY2tncm91bmQ9Y2MuZmluZCgnQ2FudmFzL2JhY2tncm91bmQnKTtcclxuICAgICAgICAgICAgdmFyIHNlcSA9IGNjLnNlcXVlbmNlKGNjLm1vdmVUbygxLCBjYy5wKDAsIDEzNykpLmVhc2luZyhjYy5lYXNlQ3ViaWNBY3Rpb25PdXQoMSkpKTtcclxuICAgICAgICAgICAgICAgYmFja2dyb3VuZC5jb2xvciA9IG5ldyBjYy5Db2xvcigyNDUsIDI0NSwgMjQ1KTtcclxuICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQucnVuQWN0aW9uKHNlcSk7XHJcbiAgICAgICBcclxuXHJcbiAgICB9XHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBtc2c6Y2MuTGFiZWwsXHJcbiAgICAgICAgaWQ6Y2MuTGFiZWwsXHJcbiAgICAgICAgc2VsZWN0Qm46Y2MuQnV0dG9uXHJcbiAgICAgICAgLy8gZm9vOiB7XHJcbiAgICAgICAgLy8gICAgZGVmYXVsdDogbnVsbCwgICAgICAvLyBUaGUgZGVmYXVsdCB2YWx1ZSB3aWxsIGJlIHVzZWQgb25seSB3aGVuIHRoZSBjb21wb25lbnQgYXR0YWNoaW5nXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICB0byBhIG5vZGUgZm9yIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgLy8gICAgdXJsOiBjYy5UZXh0dXJlMkQsICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxyXG4gICAgICAgIC8vICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSwgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIHZpc2libGU6IHRydWUsICAgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIGRpc3BsYXlOYW1lOiAnRm9vJywgLy8gb3B0aW9uYWxcclxuICAgICAgICAvLyAgICByZWFkb25seTogZmFsc2UsICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIGZhbHNlXHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICAvLyAuLi5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG4gICAgc2V0TXNnOmZ1bmN0aW9uKGRhdGFNc2cpe1xyXG4gICAgICAgIHRoaXMubXNnPWRhdGFNc2c7XHJcbiAgICB9LFxyXG4gICAgXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgLy8gZm9vOiB7XHJcbiAgICAgICAgLy8gICAgZGVmYXVsdDogbnVsbCwgICAgICAvLyBUaGUgZGVmYXVsdCB2YWx1ZSB3aWxsIGJlIHVzZWQgb25seSB3aGVuIHRoZSBjb21wb25lbnQgYXR0YWNoaW5nXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICB0byBhIG5vZGUgZm9yIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgLy8gICAgdXJsOiBjYy5UZXh0dXJlMkQsICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxyXG4gICAgICAgIC8vICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSwgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIHZpc2libGU6IHRydWUsICAgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIGRpc3BsYXlOYW1lOiAnRm9vJywgLy8gb3B0aW9uYWxcclxuICAgICAgICAvLyAgICByZWFkb25seTogZmFsc2UsICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIGZhbHNlXHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICAvLyAuLi5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB9LFxyXG4gICAgYmFja0V2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgY2MuZmluZChcIkNhbnZhcy96aGlsaW5nXCIpLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgY2MubG9nKFwi54mp5ZOBXCIpXHJcbiAgICAgICAgY2MuZmluZChcIkNhbnZhcy93dXBpblwiKS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgcGsucGt5YW9zdGF0dXM9XCIwXCI7XHJcblxyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsInZhciBzZWxmO1xyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIG51bTogY2MuRWRpdEJveCxcclxuICAgICAgICBtc2c6IGNjLlJpY2hUZXh0LFxyXG4gICAgICAgIC8vIGZvbzoge1xyXG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub2RlIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcclxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICB2aXNpYmxlOiB0cnVlLCAgICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXHJcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gLi4uXHJcbiAgICB9LFxyXG4gICAgc2V0TXNnOiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgdGhpcy5tc2cuc3RyaW5nID0gbXNnO1xyXG5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmID0gdGhpcztcclxuICAgICAgICAvL3RoaXMubWVudUJ1dHRvbih0aGlzLDApO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICog54K55Ye75LqL5Lu2LS0+6L+U5ZueXHJcbiAgICAgKi9cclxuICAgIGJhY2tFdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybkxhc3QoKTtcclxuICAgIH0sXHJcbiAgICBidXR0b25FdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBudW0gPSB0aGlzLm51bS5zdHJpbmc7XHJcbiAgICAgICAgYWpheERhdGEoSHhzZ1VybC5zdGFydFRyYWluaW5nLCB7ICdudW0nOiBudW0gfSwgdGhpcy5hbGVydFN1Y2Nlcyk7XHJcbiAgICB9LFxyXG4gICAgYWxlcnRTdWNjZXM6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBzaG93QWxlcnQobXNnLm1zZyk7XHJcbiAgICB9LFxyXG5cclxuICAgIG1lbnVCdXR0b246IGZ1bmN0aW9uIChldmVudCwgZGF0YU51bSkge1xyXG4gICAgICAgIHZhciBjb250ZW50ID0gY2MuZmluZChcIkNhbnZhcy9zY3JvbGxWaWV3L3ZpZXcvY29udGVudFwiKTtcclxuICAgICAgICBjb250ZW50LnJlbW92ZUFsbENoaWxkcmVuKCk7XHJcbiAgICAgICAgdmFyIGJ1dHRvbkxpc3QgPSBjYy5maW5kKFwiQ2FudmFzL2J1dHRvbkxpc3RcIik7XHJcbiAgICAgICAgdmFyIGxpc3QgPSBidXR0b25MaXN0LmNoaWxkcmVuO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoaSA9PSBkYXRhTnVtKSB7XHJcbiAgICAgICAgICAgICAgICBsaXN0W2ldLmNvbG9yID0gbmV3IGNjLkNvbG9yKDYzLCAyMywgNjYpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGlzdFtpXS5jb2xvciA9IG5ldyBjYy5Db2xvcigyMjQsIDI3LCAxOTMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN3aXRjaCAoZGF0YU51bSkge1xyXG4gICAgICAgICAgICBjYXNlICcwJzpcclxuICAgICAgICAgICAgICAgIGNjLmxvYWRlci5sb2FkUmVzKCdwcmVmYWJzL3h1bkxpYW4nLCBjYy5QcmVmYWIsIGZ1bmN0aW9uIChlcnIsIHByZWZhYikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqc3hsID0gY2MuaW5zdGFudGlhdGUocHJlZmFiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGpzeGxKcyA9IGpzeGwuZ2V0Q29tcG9uZW50KCd4dW5MaWFuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzeGxKcy5qaWVzaG91RXZlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudC5hZGRDaGlsZChqc3hsKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcxJzpcclxuICAgICAgICAgICAgICAgIGFqYXhEYXRhKEh4c2dVcmwudHJhaW5pbmcsIHsgJ3N0YXR1cyc6ICcwJyB9LCB0aGlzLnpoZW5nWmFpRXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJzInOlxyXG4gICAgICAgICAgICAgICAgYWpheERhdGEoSHhzZ1VybC50cmFpbmluZywgeyAnc3RhdHVzJzogJzEnIH0sIHRoaXMud2FuQ2hlbmdFdmVudCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnMyc6XHJcbiAgICAgICAgICAgIGNjLmxvYWRlci5sb2FkUmVzKCdwcmVmYWJzL0luZGV4R29uZ05lbmdYdW5MaWFuL3NodW9NaW5nJywgY2MuUHJlZmFiLCBmdW5jdGlvbiAoZXJyLCBwcmVmYWIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIganN4bCA9IGNjLmluc3RhbnRpYXRlKHByZWZhYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuYWRkQ2hpbGQoanN4bCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjYy5sb2coJ+ivtOaYjicpXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnNCc6XHJcbiAgICAgICAgICAgICAgICBhamF4RGF0YShIeHNnVXJsLnF1ZXJ5SmluZ1lhbiwgbnVsbCwgc2VsZi5saW5nUXVKaW5nWWFuKTtcclxuICAgICAgICAgICAgICAgIGNjLmxvZygn6aKG5Y+W57uP6aqMJylcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0sXHJcbiAgICBqaWVzaG91RXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgamluID0gNjA7XHJcbiAgICAgICAgdmFyIGp5ID0gMTAwO1xyXG4gICAgICAgIGNjLmxvZyhyb2xlTXNnLnJvbGVJZClcclxuICAgICAgICBpZiAocm9sZU1zZy5yb2xlSWQgPj0gMTIwKSB7XHJcbiAgICAgICAgICAgIGppbiA9IDE0MDtcclxuICAgICAgICAgICAgankgPSA0NTA7XHJcbiAgICAgICAgfSBlbHNlIGlmIChyb2xlTXNnLnJvbGVJZCA+PSAxMDApIHtcclxuICAgICAgICAgICAgamluID0gMTIwO1xyXG4gICAgICAgICAgICBqeSA9IDMwMDtcclxuICAgICAgICB9IGVsc2UgaWYgKHJvbGVNc2cucm9sZUlkID49IDcxKSB7XHJcbiAgICAgICAgICAgIGppbiA9IDEwMDtcclxuICAgICAgICAgICAgankgPSAyMDA7XHJcbiAgICAgICAgfSBlbHNlIGlmIChyb2xlTXNnLnJvbGVJZCA+PSA0MCkge1xyXG4gICAgICAgICAgICBqaW4gPSA4MDtcclxuICAgICAgICAgICAgankgPSAxNTA7XHJcbiAgICAgICAgfSBlbHNlIGlmIChyb2xlTXNnLnJvbGVJZCA+PSAxKSB7XHJcbiAgICAgICAgICAgIGppbiA9IDYwO1xyXG4gICAgICAgICAgICBqeSA9IDEwMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG1zZyA9ICforq3nu4Por7TmmI46546p5a625Y+v5bCG6KeS6Imy5aeU5omY57uZ5pWZ5Yab5Zy66K6t57uD77yI5q+P5pel5Y+v6K6t57uD5LiA5qyh77yM5pyA6ZW/MTDlsI/ml7Ys5q+P6K6t57uDMeWwj+aXtumcgOimgea2iOiAlzIw54K55L2T5Yqb5YC8JyArXHJcbiAgICAgICAgICAgICfmgqjlvZPliY0nICsgcm9sZU1zZy5yb2xlSWQgKyAn57qn77yM6K6t57uD6LS555So5q+P5bCP5pe2JyArIGppbiArICfph5HnoJbvvIzmr4/lsI/ml7borq3nu4Plj6/ku6XojrflvpflvZPliY0nICsgankgKyAn5qyh5oiY5paX57uP6aqM5YC877yM5q+P5qyh5Yab6K6tMeWwj+aXtuWPr+WinuWKoOmineWklueahDEl55qE57uP6aqM5YC8JztcclxuICAgICAgICB0aGlzLnNldE1zZyhtc2cpO1xyXG5cclxuICAgIH0sXHJcbiAgICB6aGVuZ1phaUV2ZW50OiBmdW5jdGlvbiAobXNnKSB7XHJcbiAgICAgICAgY2MubG9hZGVyLmxvYWRSZXMoJ3ByZWZhYnMveHVubGlhbkRldGFpbCcsIGNjLlByZWZhYiwgZnVuY3Rpb24gKGVyciwgcHJlZmFiKSB7XHJcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gY2MuZmluZChcIkNhbnZhcy9zY3JvbGxWaWV3L3ZpZXcvY29udGVudFwiKTtcclxuICAgICAgICAgICAgY29udGVudC5yZW1vdmVBbGxDaGlsZHJlbigpO1xyXG4gICAgICAgICAgICBpZiAoIWVycikge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIG1zZy5tc2cpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgemF4bCA9IGNjLmluc3RhbnRpYXRlKHByZWZhYik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleSAlIDIgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB6YXhsLmNvbG9yID0gbmV3IGNjLkNvbG9yKDIwNywgMTA1LCAyMjEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHpheGwuY29sb3IgPSBuZXcgY2MuQ29sb3IoMCwgMCwgNDkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgemF4bC5nZXRDaGlsZEJ5TmFtZShcIm1zZ1wiKS5nZXRDb21wb25lbnQoXCJjYy5SaWNoVGV4dFwiKS5zdHJpbmcgPSAnPGNvbG9yPSNGOERENTAgY2xpY2s9XCJ0aGlzLmNsaWNrRXZlbnRcIj4nICsgbXNnLm1zZ1trZXldLnJvbGVuYW1lICsgJzwvYz4nO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuYWRkQ2hpbGQoemF4bCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSxcclxuICAgIHdhbkNoZW5nRXZlbnQ6IGZ1bmN0aW9uIChtc2cpIHtcclxuICAgICAgICBjYy5sb2FkZXIubG9hZFJlcygncHJlZmFicy94dW5saWFuRGV0YWlsJywgY2MuUHJlZmFiLCBmdW5jdGlvbiAoZXJyLCBwcmVmYWIpIHtcclxuICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSBjYy5maW5kKFwiQ2FudmFzL3Njcm9sbFZpZXcvdmlldy9jb250ZW50XCIpO1xyXG4gICAgICAgICAgICBjb250ZW50LnJlbW92ZUFsbENoaWxkcmVuKCk7XHJcbiAgICAgICAgICAgIGlmICghZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gbXNnLm1zZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB6YXhsID0gY2MuaW5zdGFudGlhdGUocHJlZmFiKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ICUgMiA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHpheGwuY29sb3IgPSBuZXcgY2MuQ29sb3IoMjA3LCAxMDUsIDIyMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgemF4bC5jb2xvciA9IG5ldyBjYy5Db2xvcigwLCAwLCA0OSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHpheGwuZ2V0Q2hpbGRCeU5hbWUoXCJtc2dcIikuZ2V0Q29tcG9uZW50KFwiY2MuUmljaFRleHRcIikuc3RyaW5nID0gJzxjb2xvcj0jRjhERDUwIGNsaWNrPVwidGhpcy5jbGlja0V2ZW50XCI+JyArIG1zZy5tc2dba2V5XS5yb2xlbmFtZSArICc8L2M+PGNvbG9yPSNGQ0ZDRkM+5a6M5oiQ6K6t57uD77yM6I635b6X57uP6aqMJyArIG1zZy5tc2dba2V5XS5qaW5neWFuICsgJzwvYz4nO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuYWRkQ2hpbGQoemF4bCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSxcclxuICAgIGxpbmdRdUppbmdZYW46IGZ1bmN0aW9uIChtc2cpIHtcclxuXHJcbiAgICAgICAgY2MubG9hZGVyLmxvYWRSZXMoJ3ByZWZhYnMvSW5kZXhHb25nTmVuZ1h1bkxpYW4vbGluZ1F1SmluZ1lhbicsIGNjLlByZWZhYiwgZnVuY3Rpb24gKGVyciwgcHJlZmFiKSB7XHJcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gY2MuZmluZChcIkNhbnZhcy9zY3JvbGxWaWV3L3ZpZXcvY29udGVudFwiKTtcclxuICAgICAgICAgICAgY29udGVudC5yZW1vdmVBbGxDaGlsZHJlbigpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFlcnIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBwID0gbXNnLm1zZztcclxuICAgICAgICAgICAgICAgIC8vaWYgKHAgPSAhJycgJiYgdHlwZW9mIChwKSAhPSAndW5kZWZpbmVkJyAmJiBwICE9IG51bGwpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcFRpbWUgPSBwLnN0YXR1cztcclxuICAgICAgICAgICAgICAgIGNjLmxvZyhcIi0tLS0tLS0tLS0tLS1cIiArIHR5cGVvZiAocC5kYXRlKSlcclxuICAgICAgICAgICAgICAgIHZhciB6YXhsID0gY2MuaW5zdGFudGlhdGUocHJlZmFiKTtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQuYWRkQ2hpbGQoemF4bCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbm93VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRpbWUgPSBwVGltZSAtIG5vd1RpbWU7XHJcbiAgICAgICAgICAgICAgICBjYy5sb2coXCItLS0tLS0tLS0tLS0tXCIgKyB0aW1lKVxyXG4gICAgICAgICAgICAgICAgaWYgKHRpbWUgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgemF4bC5nZXRDaGlsZEJ5TmFtZShcInRpbWVcIikuZ2V0Q29tcG9uZW50KFwiY2MuUmljaFRleHRcIikuc3RyaW5nID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/orqHml7blmahcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnNjaGVkdWxlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g6L+Z6YeM55qEIHRoaXMg5oyH5ZCRIGNvbXBvbmVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lID0gdGltZSAtIDEwMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYudGltZSh0aW1lLCB6YXhsLmdldENoaWxkQnlOYW1lKFwidGltZVwiKS5nZXRDb21wb25lbnQoXCJjYy5SaWNoVGV4dFwiKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIGp5ID0gcC5qaW5neWFuO1xyXG5cclxuICAgICAgICAgICAgICAgIHpheGwuZ2V0Q2hpbGRCeU5hbWUoXCJqaW5neWFuXCIpLmdldENvbXBvbmVudChcImNjLkxhYmVsXCIpLnN0cmluZyA9ICfmnKzmrKHlj6/pooblj5bnu4/pqow6JyArIGp5O1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIH1cclxuXHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgIH0sXHJcbiAgICBjbGlja0V2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbG9hZGluZ1NjZW5lKEh4c2dTY2VuZXMuZnJpZW5kSW5mbyk7XHJcbiAgICB9LFxyXG4gICAgdGltZTogZnVuY3Rpb24gKHRpbWUsIHApIHtcclxuICAgICAgICBjYy5sb2codGltZSk7XHJcbiAgICAgICAgdGltZSA9IHRpbWUgLSAxMDAwO1xyXG5cclxuICAgICAgICBpZiAodGltZSA+PSAwKSB7XHJcbiAgICAgICAgICAgIHZhciB0ID0gZ2V0VGltZSh0aW1lKTtcclxuICAgICAgICAgICAgcC5zdHJpbmcgPSBcIumihuWPluWAkuiuoeaXtiBcIit0O1xyXG4gICAgICAgICAgICBjYy5sb2codCk7XHJcbiAgICAgICAgICAgIC8vICBjYy5maW5kKFwiQ2FudmFzL3Njcm9sbFZpZXcvdmlldy9jb250ZW50L2xpbmdRdUppbmdZYW5cIikuZ2V0Q2hpbGRCeU5hbWUoXCJqaW5neWFuXCIpLmdldENvbXBvbmVudChcImNjLlJpY2hUZXh0XCIpLnN0cmluZyA9XCLpooblj5blgJLorqHml7ZcIit0O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudW5zY2hlZHVsZSh0aGlzLnRpbWUpO1xyXG4gICAgICAgICAgICAgcC5zdHJpbmc9Jyc7XHJcbiAgICAgICAgICAgIC8vY2MuZmluZChcIkNhbnZhcy9zY3JvbGxWaWV3L3ZpZXcvY29udGVudC9saW5nUXVKaW5nWWFuXCIpLmdldENoaWxkQnlOYW1lKFwiamluZ3lhblwiKS5nZXRDb21wb25lbnQoXCJjYy5SaWNoVGV4dFwiKS5zdHJpbmcgPVwiXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0sXHJcbiAgICAgZ2V0SmluZ1lhbkJ1dHRvbjpmdW5jdGlvbigpe1xyXG4gICAgICAgICBhamF4RGF0YShIeHNnVXJsLmdldEppbmdZYW4sbnVsbCxzZWxmLmdldEppbmdZYW5CdXR0b25TdWNjZXMpXHJcblxyXG4gICAgIH0sXHJcbiAgICAgZ2V0SmluZ1lhbkJ1dHRvblN1Y2NlczpmdW5jdGlvbihtc2cpe1xyXG4gICAgICAgICBzaG93QWxlcnQobXNnLm1zZylcclxuXHJcbiAgICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwibGV0IHNlbGY7XHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgbnVtOiBjYy5MYWJlbCxcclxuICAgICAgICBpbWc6IGNjLlNwcml0ZSxcclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYgPSB0aGlzO1xyXG4gICAgfSxcclxuICAgIHNldE51bTogZnVuY3Rpb24gKG51bSkge1xyXG4gICAgICAgIHRoaXMubnVtLnN0cmluZyA9IG51bTtcclxuXHJcbiAgICB9LFxyXG4gICAgc2V0SW1nOiBmdW5jdGlvbiAodXJsKSB7XHJcbiAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJcclxudmFyIHNlbGY7XHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgeWFvbmFtZTogY2MuTGFiZWwsXHJcbiAgICAgICAgbGV2ZWw6IGNjLkxhYmVsLFxyXG4gICAgICAgIG1zOiBjYy5MYWJlbCxcclxuICAgICAgICBwcmljZTogY2MuTGFiZWwsXHJcbiAgICAgICAgbnVtOiBjYy5FZGl0Qm94LFxyXG4gICAgICAgIC8vIGZvbzoge1xyXG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub2RlIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcclxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICB2aXNpYmxlOiB0cnVlLCAgICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXHJcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gLi4uXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgbG9hZENvbW1vbVNjZW5jZSgpO1xyXG5cclxuICAgIH0sXHJcbiAgICB5YW9DbGljazogZnVuY3Rpb24gKGV2ZW50LCBudW0pIHtcclxuICAgICAgICBhamF4RGF0YShIeHNnVXJsLnF1ZXJ5WWFvUGluRGV0YWlsLCB7XHJcbiAgICAgICAgICAgICdpZCc6IG51bVxyXG4gICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGlmIChkYXRhLmNvZGUgPSBcIjAwMFwiKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcmUgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnlhb25hbWUuc3RyaW5nID0gcmUueWFvbmFtZTtcclxuICAgICAgICAgICAgICAgIHNlbGYubGV2ZWwuc3RyaW5nID0gcmUueWFvaWQ7XHJcbiAgICAgICAgICAgICAgICBzZWxmLm1zLnN0cmluZyA9IHJlLm1zO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5wcmljZS5zdHJpbmcgPSByZS55YW9wcmljZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNob3dBbGVydChcIuacjeWKoeWZqOWHuumUme+8gVwiKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSxcclxuICAgIGdvdW1haTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNjLmxvZyhcIui0reS5sOiNr+WTge+8mlwiICsgc2VsZi5sZXZlbC5zdHJpbmcpO1xyXG4gICAgICAgIGNjLmxvZyhcIui0reS5sOiNr+WTge+8mlwiICsgc2VsZi5udW0uc3RyaW5nKTtcclxuICAgICAgICBpZiAoc2VsZi5udW0uc3RyaW5nID09IFwiXCIpIHtcclxuICAgICAgICAgICAgc2hvd0FsZXJ0KFwi6K+36L6T5YWl6LSt5Lmw5pWw6YePXCIpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY2MubG9nKFwi5o+Q5Lqk6LSt5Lmw6I2v5ZOBXCIpO1xyXG4gICAgICAgICAgICBhamF4RGF0YShIeHNnVXJsLmJ1eVlhbywgeyAnaWQnOiBzZWxmLmxldmVsLnN0cmluZywnbnVtJzogc2VsZi5udW0uc3RyaW5nIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5jb2RlID09IFwiMDAwXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBzaG93QWxlcnQoZGF0YS5kYXRhLm1lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNob3dBbGVydChcIuacjeWKoeWZqOmUmeivr1wiKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG5cclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgLy8gZm9vOiB7XHJcbiAgICAgICAgLy8gICAgZGVmYXVsdDogbnVsbCwgICAgICAvLyBUaGUgZGVmYXVsdCB2YWx1ZSB3aWxsIGJlIHVzZWQgb25seSB3aGVuIHRoZSBjb21wb25lbnQgYXR0YWNoaW5nXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICB0byBhIG5vZGUgZm9yIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgLy8gICAgdXJsOiBjYy5UZXh0dXJlMkQsICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxyXG4gICAgICAgIC8vICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSwgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIHZpc2libGU6IHRydWUsICAgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIGRpc3BsYXlOYW1lOiAnRm9vJywgLy8gb3B0aW9uYWxcclxuICAgICAgICAvLyAgICByZWFkb25seTogZmFsc2UsICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIGZhbHNlXHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICAvLyAuLi5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBzaG93U3lzdGVtTXNnQWxlcnQoMSwnMTExMTEnKTtcclxuICAgICAgICAvLyAgc2hvd1N5c3RlbU1zZ0FsZXJ0KDIsJzIyMjIyJyk7XHJcbiAgICAgICAgLy8gICBzaG93U3lzdGVtTXNnQWxlcnQoMywnMzMzMzMnKTtcclxuICAgXHJcbiAgICB9LFxyXG4gICAgeWxjOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbG9hZGluZ1NjZW5lKEh4c2dTY2VuZXMuc2FpemksIEh4c2dTY2VuZXMuaW5kZXgpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICog54K55Ye75LqL5Lu2LS0+6L+U5ZueXHJcbiAgICAgKi9cclxuICAgIGJhY2tFdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8v6LCD55So6YCa55So55qE6L+U5Zue5LiK5LiA5Zy65pmv5pa55rOVXHJcbiAgICAgICAgcmV0dXJuTGFzdCgpO1xyXG4gICAgfSxcclxufSk7XHJcbiIsInZhciBzZWxmO1xyXG52YXIgYnNpZDtcclxudmFyIHpiaWQ7XHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgYnNuYW1lOiBjYy5MYWJlbCxcclxuICAgICAgICBsZXZlbDogY2MuTGFiZWwsXHJcbiAgICAgICAgeGlhb2d1bzogY2MuTGFiZWwsXHJcbiAgICAgICAgamllc2hhbzogY2MuUmljaFRleHQsXHJcbiAgICAgICAgaW1nOiBjYy5TcHJpdGUsXHJcbiAgICAgICAgLy8gZm9vOiB7XHJcbiAgICAgICAgLy8gICAgZGVmYXVsdDogbnVsbCwgICAgICAvLyBUaGUgZGVmYXVsdCB2YWx1ZSB3aWxsIGJlIHVzZWQgb25seSB3aGVuIHRoZSBjb21wb25lbnQgYXR0YWNoaW5nXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICB0byBhIG5vZGUgZm9yIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgLy8gICAgdXJsOiBjYy5UZXh0dXJlMkQsICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxyXG4gICAgICAgIC8vICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSwgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIHZpc2libGU6IHRydWUsICAgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIGRpc3BsYXlOYW1lOiAnRm9vJywgLy8gb3B0aW9uYWxcclxuICAgICAgICAvLyAgICByZWFkb25seTogZmFsc2UsICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIGZhbHNlXHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICAvLyAuLi5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzZWxmID0gdGhpcztcclxuICAgIH0sXHJcbiAgICBjbGljazogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHNlbGYubm9kZS5kZXN0cm95KCk7XHJcbiAgICB9LFxyXG4gICAgaW5pdDogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICBzZWxmLmJzbmFtZS5zdHJpbmcgPSBkYXRhLnp3TmFtZTtcclxuICAgICAgICBzZWxmLmxldmVsLnN0cmluZyA9IGRhdGEuendMZXZlbDtcclxuICAgICAgICBzZWxmLnhpYW9ndW8uc3RyaW5nID0gZGF0YS56d1hpYW9HdW87XHJcbiAgICAgICAgc2VsZi5qaWVzaGFvLnN0cmluZyA9IGRhdGEuendNaWFvU2h1O1xyXG4gICAgICAgIGJzaWQgPSBkYXRhLmlkO1xyXG4gICAgfSxcclxuICAgIHhxQ2xpY2s6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgbGV0IHBhcmFtID0geyAnYnNJZCc6IGJzaWQsICd6YklkJzogemhhdW5nQmVpRGV0YWlsc1piaWQuaWQgfTtcclxuICAgICAgICBhamF4RGF0YShIeHNnVXJsLm1vc2FpY0dlbXRvWmh1YW5nQmVpLCBwYXJhbSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgY2MubG9nKGRhdGEpXHJcbiAgICAgICAgICAgIGlmIChkYXRhLmNvZGUgPSBcIjAwMFwiKSB7XHJcbiAgICAgICAgICAgICAgICBzaG93QWxlcnQoZGF0YS5kYXRhLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MuZGlyZWN0b3IubG9hZFNjZW5lKEh4c2dTY2VuZXMuemh1YW5nYmVpKTtcclxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoSHhzZ1NjZW5lcy56aHVhbmdiZWkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNob3dBbGVydChcIuacjeWKoeWZqOW0qea6g+S6hjpcIiArIGRhdGEubWVzc2FnZSwgZnVuY3Rpb24gKCkgeyBjYy5kaXJlY3Rvci5sb2FkU2NlbmUoSHhzZ1NjZW5lcy56aHVhbmdiZWkpOyB9LCBmdW5jdGlvbiAoKSB7IGNjLmRpcmVjdG9yLmxvYWRTY2VuZShIeHNnU2NlbmVzLnpodWFuZ2JlaSk7IH0pO1xyXG5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuXHJcblxyXG5cclxuICAgIH1cclxuICAgIC8vIGNhbGxlZCBldmVyeSBmcmFtZSwgdW5jb21tZW50IHRoaXMgZnVuY3Rpb24gdG8gYWN0aXZhdGUgdXBkYXRlIGNhbGxiYWNrXHJcbiAgICAvLyB1cGRhdGU6IGZ1bmN0aW9uIChkdCkge1xyXG5cclxuICAgIC8vIH0sXHJcbn0pO1xyXG4iLCJjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIC8vIGZvbzoge1xyXG4gICAgICAgIC8vICAgIGRlZmF1bHQ6IG51bGwsICAgICAgLy8gVGhlIGRlZmF1bHQgdmFsdWUgd2lsbCBiZSB1c2VkIG9ubHkgd2hlbiB0aGUgY29tcG9uZW50IGF0dGFjaGluZ1xyXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgICAgdG8gYSBub2RlIGZvciB0aGUgZmlyc3QgdGltZVxyXG4gICAgICAgIC8vICAgIHVybDogY2MuVGV4dHVyZTJELCAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHlwZW9mIGRlZmF1bHRcclxuICAgICAgICAvLyAgICBzZXJpYWxpemFibGU6IHRydWUsIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICB2aXNpYmxlOiB0cnVlLCAgICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHRydWVcclxuICAgICAgICAvLyAgICBkaXNwbGF5TmFtZTogJ0ZvbycsIC8vIG9wdGlvbmFsXHJcbiAgICAgICAgLy8gICAgcmVhZG9ubHk6IGZhbHNlLCAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyBmYWxzZVxyXG4gICAgICAgIC8vIH0sXHJcbiAgICAgICAgLy8gLi4uXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVzZSB0aGlzIGZvciBpbml0aWFsaXphdGlvblxyXG4gICAgb25Mb2FkOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwiY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICAvLyBmb286IHtcclxuICAgICAgICAvLyAgICBkZWZhdWx0OiBudWxsLCAgICAgIC8vIFRoZSBkZWZhdWx0IHZhbHVlIHdpbGwgYmUgdXNlZCBvbmx5IHdoZW4gdGhlIGNvbXBvbmVudCBhdHRhY2hpbmdcclxuICAgICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvIGEgbm9kZSBmb3IgdGhlIGZpcnN0IHRpbWVcclxuICAgICAgICAvLyAgICB1cmw6IGNjLlRleHR1cmUyRCwgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIHR5cGVvZiBkZWZhdWx0XHJcbiAgICAgICAgLy8gICAgc2VyaWFsaXphYmxlOiB0cnVlLCAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgdmlzaWJsZTogdHJ1ZSwgICAgICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0cnVlXHJcbiAgICAgICAgLy8gICAgZGlzcGxheU5hbWU6ICdGb28nLCAvLyBvcHRpb25hbFxyXG4gICAgICAgIC8vICAgIHJlYWRvbmx5OiBmYWxzZSwgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgZmFsc2VcclxuICAgICAgICAvLyB9LFxyXG4gICAgICAgIC8vIC4uLlxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcbiAgICBiYWNrRXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjYy5maW5kKFwiQ2FudmFzL3poaWxpbmdcIikuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICBjYy5sb2coXCLnianlk4FcIilcclxuICAgICAgICBjYy5maW5kKFwiQ2FudmFzL3poYW9qaWFuZ1wiKS5hY3RpdmUgPSBmYWxzZTtcclxuXHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIiwidmFyIHNlbGY7XHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIHRpdGxlTGFiZWw6IGNjLkxhYmVsLFxyXG4gICAgICAgIG5hbWVMYWJlbDogY2MuTGFiZWwsXHJcbiAgICAgICAgTHZMYWJlbDogY2MuTGFiZWwsXHJcbiAgICAgICAgZWZmZWN0TGFiZWw6IGNjLlJpY2hUZXh0LFxyXG4gICAgICAgIHByZXNlbnRMYWJlbDogY2MuUmljaFRleHQsXHJcbiAgICAgICAgaG9sZUxhYmVsOiBjYy5TcHJpdGUsXHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICBzZWxmID0gdGhpcztcclxuICAgICAgIFxyXG4gICAgICAgIHZhciBkYXRhID0geyAnaWQnOiB6aGF1bmdCZWlEZXRhaWxzWmJpZC5pZCB9O1xyXG5cclxuICAgICAgICBhamF4RGF0YShIeHNnVXJsLnpiRGV0YWlsVXJsLCBkYXRhLCBzZWxmLmluaXRaaHVhbmdiZWkpO1xyXG4gICAgICAgIGxvYWRDb21tb21TY2VuY2UoKTtcclxuICAgIH0sXHJcblxyXG4gICAgaW5pdFpodWFuZ2JlaTogZnVuY3Rpb24gKHJlcykge1xyXG4gICAgICAgIGlmIChjYy5maW5kKCdDYW52YXMvemJCYW9zaGkyJykgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjYy5maW5kKCdDYW52YXMvemJCYW9zaGkyJykuZGVzdHJveSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2MuZmluZCgnQ2FudmFzL2JzJykgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjYy5maW5kKCdDYW52YXMvYnMnKS5kZXN0cm95KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBtc2cgPSByZXMubXNnO1xyXG4gICAgICAgIGNjLmxvZyhzZWxmLnRpdGxlTGFiZWwpXHJcbiAgICAgICAgc2VsZi50aXRsZUxhYmVsLnN0cmluZyA9IG1zZy56Yk5hbWU7XHJcbiAgICAgICAgc2VsZi5uYW1lTGFiZWwuc3RyaW5nID0gbXNnLnpiTmFtZTtcclxuICAgICAgICAvLyBzZWxmLkx2TGFiZWwuc3RyaW5nID0gbXNnLlxyXG4gICAgICAgIHNlbGYuZWZmZWN0TGFiZWwuc3RyaW5nID0gbXNnLnpiWGlhb0d1bztcclxuICAgICAgICBzZWxmLnByZXNlbnRMYWJlbC5zdHJpbmcgPSBtc2cuemJNaWFvU2h1ICsgXCI8Y29sb3I9I2ZmMDAwMD5cIiArIG1zZy56YlRpYW9KaWFuICsgXCI8L2NvbG9yPlwiO1xyXG4gICAgICAgIHNlbGYuTHZMYWJlbC5zdHJpbmcgPSBtc2cubGV2ZWw7XHJcblxyXG4gICAgICAgICBsZXQgaWNvbiA9IGNjLmZpbmQoJ0NhbnZhcy9zcHJpdGUvaWNvbicpO1xyXG4gICAgICAgIGxldCBzcHJpdGUyID0gaWNvbi5nZXRDb21wb25lbnQoJ2NjLlNwcml0ZScpO1xyXG4gICAgICAgICAgICAvL+e9kee7nOWKoOi9veWbvueJh1xyXG4gICAgICAgICAgICBjYy5sb2FkZXIubG9hZChpbWdVcmwgKyBtc2cuaW1nVXJsLCBmdW5jdGlvbiAoZXJyb3IsIHRleHR1cmUpIHtcclxuICAgICAgICAgICAgICAgIHNwcml0ZTIuc3ByaXRlRnJhbWUgPSBuZXcgY2MuU3ByaXRlRnJhbWUodGV4dHVyZSk7XHJcblxyXG4gICAgICAgICAgICB9KTsgXHJcbiAgICAgICAgLy/lrZTlgq5cclxuICAgICAgICB2YXIgYnNBcnIgPSBtc2cuYmFvc2hpSWQ7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBic0Fyci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBic0FycltpXSkge1xyXG4gICAgICAgICAgICAgICAgY2MubG9hZGVyLmxvYWRSZXMoJ3ByZWZhYnMva29uZzInLCBjYy5QcmVmYWIsIGZ1bmN0aW9uIChlcnIsIHByZWZhYikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjLmxvZyhic0FycltpXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGtvbmcgPSBjYy5pbnN0YW50aWF0ZShwcmVmYWIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmhvbGVMYWJlbC5ub2RlLmFkZENoaWxkKGtvbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAga29uZy5vbignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYy5maW5kKCdDYW52YXMvYnMnKSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MuZmluZCgnQ2FudmFzL2JzJykuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MubG9nKFwi56m65qe9XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYy5sb2FkZXIubG9hZFJlcygncHJlZmFicy9icycsIGNjLlByZWZhYiwgZnVuY3Rpb24gKGVyciwgcHJlZmFiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJzID0gY2MuaW5zdGFudGlhdGUocHJlZmFiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MuZmluZCgnQ2FudmFzJykuYWRkQ2hpbGQoYnMsIDcwKTtcclxuXHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjYy5sb2FkZXIubG9hZFJlcygncHJlZmFicy9rb25nJywgY2MuUHJlZmFiLCBmdW5jdGlvbiAoZXJyLCBwcmVmYWIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIga29uZyA9IGNjLmluc3RhbnRpYXRlKHByZWZhYik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtvbmcub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IGV2ZW50LnRhcmdldDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBidXR0b24gPSBub2RlLmdldENvbXBvbmVudChjYy5CdXR0b24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNjLmZpbmQoJ0NhbnZhcy96YkJhb3NoaScpICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYy5maW5kKCdDYW52YXMvemJCYW9zaGknKS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYy5sb2FkZXIubG9hZFJlcygncHJlZmFicy96YkJhb3NoaScsIGNjLlByZWZhYiwgZnVuY3Rpb24gKGVyciwgcHJlZmFiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHpiQmFvc2hpID0gY2MuaW5zdGFudGlhdGUocHJlZmFiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MuZmluZCgnQ2FudmFzJykuYWRkQ2hpbGQoemJCYW9zaGksIDkwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgemJCYW9zaGkuc2V0UG9zaXRpb25YKDMwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgemJCYW9zaGkuc2V0UG9zaXRpb25ZKC0xMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5Yqg6LyJemJCYW9zaGnohbPmnKws5Yid5aeL5YyW55WM6Z2iXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFqYXhEYXRhKEh4c2dVcmwuYmFvc2hpSXRlbVVybCwgeyAnaWQnOiBic0FycltpXSB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MubG9nKGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgemJCYW9zaGlKcyA9IHpiQmFvc2hpLmdldENvbXBvbmVudCgnemJCYW9zaGlEZXRhaWwnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpiQmFvc2hpSnMuaW5pdChkYXRhLm1zZyk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmhvbGVMYWJlbC5ub2RlLmFkZENoaWxkKGtvbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2MubG9hZGVyLmxvYWRSZXMobXNnLmltZ1VybCwgY2MuU3ByaXRlRnJhbWUsIGZ1bmN0aW9uIChlcnIsIHRleCkge1xyXG4gICAgICAgICAgICBpZiAoIWVycikge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5zcHJpdGUuc3ByaXRlRnJhbWUgPSB0ZXg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSxcclxuXHJcbiAgICB1c2VyQnRuRXZlbnQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgYWpheERhdGEoSHhzZ1VybC56Yld1UWksIHsgJ2lkJzogemhhdW5nQmVpRGV0YWlsc1piaWQuaWQsICd0eXBlJzogJ3JvbGUnIH0sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGNjLmxvZyhkYXRhKVxyXG4gICAgICAgICAgICBpZiAoZGF0YS5jb2RlID09IFwiMDAwXCIpIHtcclxuICAgICAgICAgICAgICAgIHNob3dBbGVydChkYXRhLmRhdGEpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2hvd0FsZXJ0KFwi57O757uf6ZSZ6K+vXCIpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIGRyb3BCdG5FdmVudDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgIGFqYXhEYXRhKEh4c2dVcmwueGllemFpLCB7ICdpZCc6IHpoYXVuZ0JlaURldGFpbHNaYmlkLmlkLCAndHlwZSc6ICdyb2xlJyB9LCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICBjYy5sb2coZGF0YSlcclxuICAgICAgICAgICAgaWYgKGRhdGEuY29kZSA9PSBcIjAwMFwiKSB7XHJcbiAgICAgICAgICAgICAgICBzaG93QWxlcnQoZGF0YS5kYXRhKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNob3dBbGVydChcIuezu+e7n+mUmeivr1wiKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICB9LFxyXG5cclxuICAgIGJhY2tFdmVudDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxvYWRTY2VuZShIeHNnU2NlbmVzLnd1cGluLCBIeHNnU2NlbmVzLnpodWFuZ2JlaSk7XHJcbiAgICB9LFxyXG5cclxuXHJcblxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsInZhciBzZWxmO1xyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIHlhb25hbWU6IGNjLkxhYmVsLFxyXG4gICAgICAgIGxldmVsOiBjYy5MYWJlbCxcclxuICAgICAgICBtczogY2MuUmljaFRleHQsXHJcbiAgICAgICAgcHJpY2U6IGNjLkxhYmVsLFxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1c2UgdGhpcyBmb3IgaW5pdGlhbGl6YXRpb25cclxuICAgIG9uTG9hZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxvYWRDb21tb21TY2VuY2UoKTtcclxuICAgICAgICBzZWxmID0gdGhpcztcclxuICAgICAgICBzZWxmLmluaXQoeyd0eXBlJzon5q2mJ30pO1xyXG4gICAgfSxcclxuICAgIHNlbGVjdFR5cGU6ZnVuY3Rpb24oZXZlbnQsbnVtKXtcclxuICAgICAgICBsZXQgcGFyYW09XCJcIjtcclxuICAgICAgICBzd2l0Y2gobnVtKXtcclxuICAgICAgICAgICAgY2FzZSBcIjFcIjp7XHJcbiAgICAgICAgICAgICAgICBwYXJhbT17J3R5cGUnOifmraYnfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcIjJcIjp7XHJcbiAgICAgICAgICAgICAgICAgICAgIHBhcmFtPXsndHlwZSc6J+eblCd9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFwiM1wiOntcclxuICAgICAgICAgICAgICAgICAgcGFyYW09eyd0eXBlJzon55SyJ31cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgXCI0XCI6e1xyXG4gICAgICAgICAgICAgICAgICAgICAgcGFyYW09eyd0eXBlJzon6IWVJ31cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgXCI1XCI6e1xyXG4gICAgICAgICAgICAgICAgICAgICBwYXJhbT17J3R5cGUnOifpk74nfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBcIjZcIjp7XHJcbiAgICAgICAgICAgICAgICAgICBwYXJhbT17J3R5cGUnOifpnbQnfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICBzZWxmLmluaXQocGFyYW0pO1xyXG5cclxuICAgIH0sXHJcbiAgICBpbml0OiBmdW5jdGlvbiAoZGF0YUpzb24pIHtcclxuICAgICAgICBzZWxmLm5vZGUucmVtb3ZlQWxsQ2hpbGRyZW4oKTtcclxuXHJcbiAgICAgICAgYWpheFV0aWxzKEh4c2dVcmwucXVlcnlaaHVhbmdCZWksZGF0YUpzb24sIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgIGNjLmxvYWRlci5sb2FkUmVzKCdwcmVmYWJzL3piU2hvcEljb24nLCBjYy5QcmVmYWIsIGZ1bmN0aW9uIChlcnIsIHByZWZhYikge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFlcnIpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB6YlNob3BJY29uID0gY2MuaW5zdGFudGlhdGUocHJlZmFiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHlhbyA9IHpiU2hvcEljb24uZ2V0Q2hpbGRCeU5hbWUoXCJ5YW9cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB4eiA9IHpiU2hvcEljb24uZ2V0Q2hpbGRCeU5hbWUoXCJ4elwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeWFvLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/liqDovb3pgInkuK3nibnmlYgu5YWz6Zet5YW25LuW5Yqo55S777yM5Yqg6L295b2T5YmN5Yqo55S7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2hpbGQ9c2VsZi5ub2RlLmNoaWxkcmVuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpPTA7aTxjaGlsZC5sZW5ndGg7aSsrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgeHpDaGlsZD1jaGlsZFtpXS5nZXRDaGlsZEJ5TmFtZShcInh6XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHh6Q2hpbGQuZ2V0Q29tcG9uZW50KGNjLkFuaW1hdGlvbikuc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIHh6Q2hpbGQub3BhY2l0eT0wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeHoub3BhY2l0eT0yNTU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4ei5nZXRDb21wb25lbnQoY2MuQW5pbWF0aW9uKS5wbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnpiRGV0YWlsKGRhdGFbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBzZWxmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy/nvZHnu5zliqDovb3lm77niYdcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2MubG9hZGVyLmxvYWQoaW1nVXJsICsgZGF0YVtpXS5pbWdVcmwsIGZ1bmN0aW9uIChlcnJvciwgdGV4dHVyZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2MubG9nKGltZ1VybCArIGRhdGFbaV0uaW1nVXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHlhby5nZXRDb21wb25lbnQoJ2NjLlNwcml0ZScpLnNwcml0ZUZyYW1lID0gbmV3IGNjLlNwcml0ZUZyYW1lKHRleHR1cmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5ub2RlLmFkZENoaWxkKHpiU2hvcEljb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0pXHJcblxyXG5cclxuICAgIH0sXHJcbiAgICB6YkRldGFpbDogZnVuY3Rpb24gKGRhdGEpIHtcclxuXHJcblxyXG5cclxuXHJcbiAgICAgICAgLy/mrablmajngrnlh7vml7bvvIzlsIbor6Xlj5jph4/kv53lrZjmj5Dkvpvnu5notK3kubDmjInpkq5cclxuICAgICAgICB3dXFpU2hvcC5zaG9wID0gZGF0YTtcclxuICAgICAgICBjYy5sb2coZGF0YSlcclxuICAgICAgICBzZWxmLnlhb25hbWUuc3RyaW5nID0gZGF0YS53dVFpTmFtZTtcclxuICAgICAgICBzZWxmLmxldmVsLnN0cmluZyA9IGRhdGEubGV2ZWw7XHJcbiAgICAgICAgc2VsZi5tcy5zdHJpbmcgPSBkYXRhLm1pYW9TaHUgKyBcIjxjb2xvcj0jQUUwQkVFPlwiICsgZGF0YS5rYW5nWGluZyArIFwiK1wiICsgZGF0YS54aWFvR3VvICsgXCI8L2NvbG9yPlwiO1xyXG4gICAgICAgIHNlbGYucHJpY2Uuc3RyaW5nID0gZGF0YS5wcmljZSArIFwi6ZO2XCI7XHJcbiAgICB9LFxyXG4gICAgYnV5OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2hvd0FsZXJ0KFwi5oKo56Gu5a6a6Iqx6LS5XCIrIHd1cWlTaG9wLnNob3AucHJpY2UrXCLpk7bkuKTvvIzotK3kubBcIisgd3VxaVNob3Auc2hvcC53dVFpTmFtZStcIuWQl++8n1wiLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGFqYXhVdGlscyhIeHNnVXJsLmJ1eVpodWFuZ0JlaSx7aWQ6IHd1cWlTaG9wLnNob3AuaWR9LGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgc2hvd0FsZXJ0KGRhdGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG4gICAgLy8gY2FsbGVkIGV2ZXJ5IGZyYW1lLCB1bmNvbW1lbnQgdGhpcyBmdW5jdGlvbiB0byBhY3RpdmF0ZSB1cGRhdGUgY2FsbGJhY2tcclxuICAgIC8vIHVwZGF0ZTogZnVuY3Rpb24gKGR0KSB7XHJcblxyXG4gICAgLy8gfSxcclxufSk7XHJcbiIsImNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgLy8gZm9vOiB7XHJcbiAgICAgICAgLy8gICAgZGVmYXVsdDogbnVsbCwgICAgICAvLyBUaGUgZGVmYXVsdCB2YWx1ZSB3aWxsIGJlIHVzZWQgb25seSB3aGVuIHRoZSBjb21wb25lbnQgYXR0YWNoaW5nXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgICB0byBhIG5vZGUgZm9yIHRoZSBmaXJzdCB0aW1lXHJcbiAgICAgICAgLy8gICAgdXJsOiBjYy5UZXh0dXJlMkQsICAvLyBvcHRpb25hbCwgZGVmYXVsdCBpcyB0eXBlb2YgZGVmYXVsdFxyXG4gICAgICAgIC8vICAgIHNlcmlhbGl6YWJsZTogdHJ1ZSwgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIHZpc2libGU6IHRydWUsICAgICAgLy8gb3B0aW9uYWwsIGRlZmF1bHQgaXMgdHJ1ZVxyXG4gICAgICAgIC8vICAgIGRpc3BsYXlOYW1lOiAnRm9vJywgLy8gb3B0aW9uYWxcclxuICAgICAgICAvLyAgICByZWFkb25seTogZmFsc2UsICAgIC8vIG9wdGlvbmFsLCBkZWZhdWx0IGlzIGZhbHNlXHJcbiAgICAgICAgLy8gfSxcclxuICAgICAgICAvLyAuLi5cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXNlIHRoaXMgZm9yIGluaXRpYWxpemF0aW9uXHJcbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICBsb2FkQ29tbW9tU2NlbmNlKCk7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBjYWxsZWQgZXZlcnkgZnJhbWUsIHVuY29tbWVudCB0aGlzIGZ1bmN0aW9uIHRvIGFjdGl2YXRlIHVwZGF0ZSBjYWxsYmFja1xyXG4gICAgLy8gdXBkYXRlOiBmdW5jdGlvbiAoZHQpIHtcclxuXHJcbiAgICAvLyB9LFxyXG59KTtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==