{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "self",
    "cc",
    "Class",
    "extends",
    "Component",
    "properties",
    "num",
    "EditBox",
    "msg",
    "RichText",
    "setMsg",
    "string",
    "onLoad",
    "backEvent",
    "returnLast",
    "buttonEvent",
    "ajaxData",
    "HxsgUrl",
    "startTraining",
    "alertSucces",
    "showAlert",
    "menuButton",
    "event",
    "dataNum",
    "content",
    "find",
    "removeAllChildren",
    "buttonList",
    "list",
    "children",
    "i",
    "length",
    "color",
    "Color",
    "loader",
    "loadRes",
    "Prefab",
    "err",
    "prefab",
    "jsxl",
    "instantiate",
    "jsxlJs",
    "getComponent",
    "jieshouEvent",
    "addChild",
    "training",
    "zhengZaiEvent",
    "wanChengEvent",
    "log",
    "queryJingYan",
    "lingQuJingYan",
    "jin",
    "jy",
    "roleMsg",
    "roleId",
    "key",
    "zaxl",
    "getChildByName",
    "rolename",
    "jingyan",
    "p",
    "pTime",
    "status",
    "date",
    "nowTime",
    "Date",
    "getTime",
    "time",
    "schedule",
    "clickEvent",
    "loadingScene",
    "HxsgScenes",
    "friendInfo",
    "t",
    "unschedule",
    "getJingYanButton",
    "getJingYan",
    "getJingYanButtonSucces"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "var self;\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        num: cc.EditBox,\r\n        msg: cc.RichText,\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n    setMsg: function (msg) {\r\n        this.msg.string = msg;\r\n\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        self = this;\r\n        //this.menuButton(this,0);\r\n    },\r\n    /**\r\n     * 点击事件-->返回\r\n     */\r\n    backEvent: function () {\r\n        returnLast();\r\n    },\r\n    buttonEvent: function () {\r\n        var num = this.num.string;\r\n        ajaxData(HxsgUrl.startTraining, { 'num': num }, this.alertSucces);\r\n    },\r\n    alertSucces: function (msg) {\r\n        showAlert(msg.msg);\r\n    },\r\n\r\n    menuButton: function (event, dataNum) {\r\n        var content = cc.find(\"Canvas/scrollView/view/content\");\r\n        content.removeAllChildren();\r\n        var buttonList = cc.find(\"Canvas/buttonList\");\r\n        var list = buttonList.children;\r\n        for (var i = 0; i < list.length; i++) {\r\n            if (i == dataNum) {\r\n                list[i].color = new cc.Color(63, 23, 66);\r\n            } else {\r\n                list[i].color = new cc.Color(224, 27, 193);\r\n            }\r\n        }\r\n        switch (dataNum) {\r\n            case '0':\r\n                cc.loader.loadRes('prefabs/xunLian', cc.Prefab, function (err, prefab) {\r\n                    if (!err) {\r\n                        var jsxl = cc.instantiate(prefab);\r\n                        var jsxlJs = jsxl.getComponent('xunLian');\r\n                        jsxlJs.jieshouEvent();\r\n                        content.addChild(jsxl);\r\n                    }\r\n                });\r\n                break;\r\n            case '1':\r\n                ajaxData(HxsgUrl.training, { 'status': '0' }, this.zhengZaiEvent);\r\n                break;\r\n            case '2':\r\n                ajaxData(HxsgUrl.training, { 'status': '1' }, this.wanChengEvent);\r\n                break;\r\n            case '3':\r\n            cc.loader.loadRes('prefabs/IndexGongNengXunLian/shuoMing', cc.Prefab, function (err, prefab) {\r\n                    if (!err) {\r\n                        var jsxl = cc.instantiate(prefab);\r\n                        content.addChild(jsxl);\r\n                    }\r\n                });\r\n                cc.log('说明')\r\n                break;\r\n            case '4':\r\n                ajaxData(HxsgUrl.queryJingYan, null, self.lingQuJingYan);\r\n                cc.log('领取经验')\r\n                break;\r\n\r\n\r\n        }\r\n\r\n    },\r\n    jieshouEvent: function () {\r\n        var jin = 60;\r\n        var jy = 100;\r\n        cc.log(roleMsg.roleId)\r\n        if (roleMsg.roleId >= 120) {\r\n            jin = 140;\r\n            jy = 450;\r\n        } else if (roleMsg.roleId >= 100) {\r\n            jin = 120;\r\n            jy = 300;\r\n        } else if (roleMsg.roleId >= 71) {\r\n            jin = 100;\r\n            jy = 200;\r\n        } else if (roleMsg.roleId >= 40) {\r\n            jin = 80;\r\n            jy = 150;\r\n        } else if (roleMsg.roleId >= 1) {\r\n            jin = 60;\r\n            jy = 100;\r\n        }\r\n        var msg = '训练说明:玩家可将角色委托给教军场训练（每日可训练一次，最长10小时,每训练1小时需要消耗20点体力值' +\r\n            '您当前' + roleMsg.roleId + '级，训练费用每小时' + jin + '金砖，每小时训练可以获得当前' + jy + '次战斗经验值，每次军训1小时可增加额外的1%的经验值';\r\n        this.setMsg(msg);\r\n\r\n    },\r\n    zhengZaiEvent: function (msg) {\r\n        cc.loader.loadRes('prefabs/xunlianDetail', cc.Prefab, function (err, prefab) {\r\n            var content = cc.find(\"Canvas/scrollView/view/content\");\r\n            content.removeAllChildren();\r\n            if (!err) {\r\n                for (var key in msg.msg) {\r\n                    var zaxl = cc.instantiate(prefab);\r\n                    if (key % 2 == 0) {\r\n                        zaxl.color = new cc.Color(207, 105, 221);\r\n                    } else {\r\n                        zaxl.color = new cc.Color(0, 0, 49);\r\n                    }\r\n\r\n                    zaxl.getChildByName(\"msg\").getComponent(\"cc.RichText\").string = '<color=#F8DD50 click=\"this.clickEvent\">' + msg.msg[key].rolename + '</c>';\r\n                    content.addChild(zaxl);\r\n                }\r\n\r\n            }\r\n        });\r\n\r\n    },\r\n    wanChengEvent: function (msg) {\r\n        cc.loader.loadRes('prefabs/xunlianDetail', cc.Prefab, function (err, prefab) {\r\n            var content = cc.find(\"Canvas/scrollView/view/content\");\r\n            content.removeAllChildren();\r\n            if (!err) {\r\n                for (var key in msg.msg) {\r\n                    var zaxl = cc.instantiate(prefab);\r\n                    if (key % 2 == 0) {\r\n                        zaxl.color = new cc.Color(207, 105, 221);\r\n                    } else {\r\n                        zaxl.color = new cc.Color(0, 0, 49);\r\n                    }\r\n                    zaxl.getChildByName(\"msg\").getComponent(\"cc.RichText\").string = '<color=#F8DD50 click=\"this.clickEvent\">' + msg.msg[key].rolename + '</c><color=#FCFCFC>完成训练，获得经验' + msg.msg[key].jingyan + '</c>';\r\n                    content.addChild(zaxl);\r\n                }\r\n\r\n            }\r\n        });\r\n\r\n    },\r\n    lingQuJingYan: function (msg) {\r\n\r\n        cc.loader.loadRes('prefabs/IndexGongNengXunLian/lingQuJingYan', cc.Prefab, function (err, prefab) {\r\n            var content = cc.find(\"Canvas/scrollView/view/content\");\r\n            content.removeAllChildren();\r\n\r\n            if (!err) {\r\n                var p = msg.msg;\r\n                //if (p = !'' && typeof (p) != 'undefined' && p != null) {\r\n\r\n                var pTime = p.status;\r\n                cc.log(\"-------------\" + typeof (p.date))\r\n                var zaxl = cc.instantiate(prefab);\r\n                content.addChild(zaxl);\r\n                var nowTime = new Date().getTime();\r\n                var time = pTime - nowTime;\r\n                cc.log(\"-------------\" + time)\r\n                if (time < 0) {\r\n                    zaxl.getChildByName(\"time\").getComponent(\"cc.RichText\").string = \"\";\r\n                } else {\r\n                    //计时器\r\n                    self.schedule(function () {\r\n                        // 这里的 this 指向 component\r\n                        time = time - 1000;\r\n                        self.time(time, zaxl.getChildByName(\"time\").getComponent(\"cc.RichText\"));\r\n\r\n                    }, 1);\r\n                }\r\n                var jy = p.jingyan;\r\n\r\n                zaxl.getChildByName(\"jingyan\").getComponent(\"cc.Label\").string = '本次可领取经验:' + jy;\r\n\r\n                // }\r\n\r\n\r\n            }\r\n        });\r\n\r\n\r\n    },\r\n    clickEvent: function () {\r\n        loadingScene(HxsgScenes.friendInfo);\r\n    },\r\n    time: function (time, p) {\r\n        cc.log(time);\r\n        time = time - 1000;\r\n\r\n        if (time >= 0) {\r\n            var t = getTime(time);\r\n            p.string = \"领取倒计时 \"+t;\r\n            cc.log(t);\r\n            //  cc.find(\"Canvas/scrollView/view/content/lingQuJingYan\").getChildByName(\"jingyan\").getComponent(\"cc.RichText\").string =\"领取倒计时\"+t;\r\n        } else {\r\n            this.unschedule(this.time);\r\n             p.string='';\r\n            //cc.find(\"Canvas/scrollView/view/content/lingQuJingYan\").getChildByName(\"jingyan\").getComponent(\"cc.RichText\").string =\"\";\r\n        }\r\n\r\n    },\r\n     getJingYanButton:function(){\r\n         ajaxData(HxsgUrl.getJingYan,null,self.getJingYanButtonSucces)\r\n\r\n     },\r\n     getJingYanButtonSucces:function(msg){\r\n         showAlert(msg.msg)\r\n\r\n     },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"
  ]
}