{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "self",
    "times",
    "cc",
    "Class",
    "extends",
    "Component",
    "properties",
    "num",
    "Label",
    "gameTime",
    "battleMsg",
    "wu",
    "shu",
    "wei",
    "gameResult",
    "onLoad",
    "yaZhu",
    "find",
    "active",
    "SocketEvents",
    "cbMsg",
    "load",
    "ajaxData",
    "HxsgUrl",
    "chiBiTime",
    "sure",
    "loadingScene",
    "HxsgScenes",
    "guangChang",
    "index",
    "msg",
    "Date",
    "now",
    "schedule",
    "scheduleTime",
    "ChiBiVo",
    "unschedule",
    "jiesuan",
    "getComponent",
    "setMsg",
    "minutes",
    "Math",
    "floor",
    "second",
    "target",
    "mstr",
    "toString",
    "string",
    "rand",
    "random",
    "loadChiBi",
    "ld",
    "result",
    "yaMsg",
    "cbLi",
    "length",
    "key",
    "jin",
    "yin",
    "e",
    "log",
    "zyjz",
    "topMsg",
    "type",
    "zyyl",
    "zlpph",
    "title",
    "url",
    "chiBiWinRecord",
    "bang",
    "saizi",
    "lscx",
    "chiBiHistory",
    "syjl",
    "chiBiYaZhuRecord",
    "jlph",
    "chiBiBang",
    "yxsm"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "\r\n\r\n/**\r\n * 赤壁游戏基类\r\n */\r\nvar self;\r\nvar times = 3000;\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        num: cc.Label,\r\n        gameTime: cc.Label,\r\n        battleMsg: cc.Label,\r\n        wu: cc.Label,\r\n        shu: cc.Label,\r\n        wei: cc.Label,\r\n        gameResult: cc.Label,\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        var yaZhu = cc.find(\"Canvas/chiBiYaZhu\");\r\n        yaZhu.active = false;\r\n        self = this;\r\n        SocketEvents.cbMsg = function () {\r\n            self.load();\r\n        }\r\n        ajaxData(HxsgUrl.chiBiTime, null, self.times)\r\n        this.load();\r\n\r\n\r\n\r\n\r\n\r\n    },\r\n    sure: function () {\r\n        loadingScene(HxsgScenes.guangChang, HxsgScenes.index);\r\n\r\n    },\r\n    times: function (msg) {\r\n        times = msg.times;\r\n        times = Date.now() + times;\r\n        self.schedule(self.scheduleTime, 1);\r\n\r\n    },\r\n    scheduleTime: function () {\r\n        ChiBiVo.num = (times - Date.now());\r\n        if (times - Date.now() <= 0 || typeof (times) == 'undefined') {\r\n            self.unschedule(self.scheduleTime);\r\n            var jiesuan = cc.find(\"Canvas/jiesuan\");\r\n            jiesuan.active = true;\r\n            jiesuan.getComponent(\"jiesuan\").setMsg(\"赤壁结算中，请稍后再来\");\r\n\r\n        }\r\n        var minutes = Math.floor((times - Date.now()) / 1000 / 60 % 60); //所余分钟数  \r\n        var second = Math.floor((times - Date.now()) / 1000 % 60); //所余秒数  \r\n        //1分58秒后开盅，买定离手\r\n        var target = cc.find(\"Canvas/saizi/main/label2\");\r\n        var mstr = minutes.toString() + \"分\" + second.toString() + \"秒后决出胜负，请求增援\";\r\n        self.gameTime.string = mstr;\r\n\r\n        //times=times-1000;\r\n\r\n\r\n    },\r\n    load: function () {\r\n        var rand = Math.floor(Math.random() * 3);\r\n        var battleMsg = \"\";\r\n        switch (rand) {\r\n            case 0: {\r\n                battleMsg = \"吴军节节败退，魏军旗开得胜\";\r\n                break;\r\n            }\r\n            case 1: {\r\n                battleMsg = \"蜀军新得名将，魏军士气低落\";\r\n                break;\r\n            }\r\n            case 2: {\r\n                battleMsg = \"魏军被困山谷，蜀军趁虚而入\";\r\n                break;\r\n            }\r\n\r\n        }\r\n        self.battleMsg.string = battleMsg;\r\n        ajaxData(HxsgUrl.loadChiBi, null, function (msg) {\r\n            try {\r\n\r\n                var ld = msg.msg.result;\r\n                var yaMsg = msg.msg.cbLi;\r\n                self.num.string = \"第\" + msg.msg.num + \"期赤壁斗进行中\"\r\n                if (yaMsg == null || typeof (yaMsg) == 'undefined' || yaMsg.length == 0) {\r\n                    self.wei.string = \"魏军目前军资0金0银\";\r\n                    self.shu.string = \"蜀军目前军资0金0银\";\r\n                    self.wu.string = \"吴军目前军资0金0银\";\r\n                } else {\r\n                    for (var key in yaMsg) {\r\n                        if (yaMsg[key].result == \"魏\") {\r\n                            self.wei.string = \"魏军目前军资\" + yaMsg[key].jin + \"金\" + yaMsg[key].yin + \"银\";\r\n\r\n                        }\r\n                        if (yaMsg[key].result == \"蜀\") {\r\n                            self.shu.string = \"蜀军目前军资\" + yaMsg[key].jin + \"金\" + yaMsg[key].yin + \"银\";\r\n                        }\r\n                        if (yaMsg[key].result == \"吴\") {\r\n                            self.wu.string = \"吴军目前军资\" + yaMsg[key].jin + \"金\" + yaMsg[key].yin + \"银\";\r\n\r\n                        }\r\n                    }\r\n                }\r\n\r\n                self.gameResult.string = \"上次战事\" + ld + \"军胜利\";\r\n            } catch (e) {\r\n                cc.log(e)\r\n            }\r\n\r\n\r\n\r\n\r\n        })\r\n\r\n    },\r\n    zyjz: function () {\r\n        cc.log(\"增援金砖\")\r\n        ChiBiVo.topMsg = \"增援金砖\";\r\n        ChiBiVo.type = \"jin\";\r\n        var yaZhu = cc.find(\"Canvas/chiBiYaZhu\");\r\n        yaZhu.active = true;\r\n\r\n    },\r\n    zyyl: function () {\r\n        ChiBiVo.topMsg = \"增援银两\";\r\n        ChiBiVo.type = \"yin\";\r\n        var yaZhu = cc.find(\"Canvas/chiBiYaZhu\");\r\n        yaZhu.active = true;\r\n        cc.log(\"增援银两\")\r\n\r\n    },\r\n    zlpph: function () {\r\n        cc.log(\"战利品排行\")\r\n\r\n        ChiBiVo.title = \"战利品排行\";\r\n        ChiBiVo.url = HxsgUrl.chiBiWinRecord\r\n        loadingScene(HxsgScenes.bang, HxsgScenes.saizi);\r\n\r\n    },\r\n    lscx: function () {\r\n        cc.log(\"历史查询\")\r\n        ChiBiVo.title = \"历史查询\";\r\n        ChiBiVo.url = HxsgUrl.chiBiHistory;\r\n        loadingScene(HxsgScenes.bang, HxsgScenes.saizi);\r\n\r\n    },\r\n    syjl: function () {\r\n        cc.log(\"声援记录\")\r\n        ChiBiVo.title = \"声援记录\";\r\n        ChiBiVo.url = HxsgUrl.chiBiYaZhuRecord;\r\n        loadingScene(HxsgScenes.bang, HxsgScenes.saizi);\r\n    },\r\n    jlph: function () {\r\n        cc.log(\"奖励排行\")\r\n        ChiBiVo.title = \"奖励排行\";\r\n        ChiBiVo.url = HxsgUrl.chiBiBang;\r\n        loadingScene(HxsgScenes.bang, HxsgScenes.saizi);\r\n\r\n    },\r\n    yxsm: function () {\r\n        cc.log(\"游戏说明\")\r\n        ChiBiVo.title = \"游戏说明\";\r\n        loadingScene(HxsgScenes.bang, HxsgScenes.saizi);\r\n\r\n\r\n    },\r\n    // called every frame, uncomment this function to activate update callback\r\n    // update: function (dt) {\r\n\r\n    // },\r\n});\r\n"
  ]
}