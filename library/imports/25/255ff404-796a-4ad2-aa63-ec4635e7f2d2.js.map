{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "PropertyType",
    "cc",
    "Enum",
    "TiZhi",
    "ZhiLi",
    "LiLiang",
    "MinJie",
    "Class",
    "extends",
    "Component",
    "properties",
    "propMng",
    "Node",
    "propType",
    "default",
    "None",
    "type",
    "propValueLabel",
    "Label",
    "propPointLabel",
    "dealAllBtn",
    "Button",
    "add1Btn",
    "add3Btn",
    "cut1Btn",
    "cut3Btn",
    "onLoad",
    "getComponent",
    "initData",
    "propValueInit",
    "propPoint",
    "propInit",
    "propAdded",
    "propTotal",
    "propValue",
    "string",
    "buttonInteraction",
    "resetProp",
    "remainPoints",
    "interactable",
    "canDo",
    "count",
    "Math",
    "abs",
    "dealAll",
    "propValueCalculate",
    "add1Point",
    "add3Point",
    "cut1Point",
    "cut3Point",
    "changeRemainPoints",
    "getPropValue",
    "onButtonEvent"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "var PropertyType = cc.Enum({\r\n    TiZhi: 1,       //体质\r\n    ZhiLi: 2,       //智力\r\n    LiLiang: 3,     //力量\r\n    MinJie: 4       //敏捷\r\n    // 体质: 1,       //体质\r\n    // 智力: 2,       //智力\r\n    // 力量: 3,     //力量\r\n    // 敏捷: 4       //敏捷\r\n});\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        propMng: cc.Node,\r\n        propType: {\r\n            default: PropertyType.None,\r\n            type: PropertyType\r\n        },\r\n        propValueLabel: cc.Label,\r\n        propPointLabel: cc.Label,\r\n        dealAllBtn: cc.Button,\r\n        add1Btn: cc.Button,\r\n        add3Btn: cc.Button,\r\n        cut1Btn: cc.Button,\r\n        cut3Btn: cc.Button\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function () {\r\n        this.propMng = this.propMng.getComponent('PorpertyManager');\r\n    },\r\n\r\n    /**\r\n     * 初始化\r\n     * @param propValueInit     属性值\r\n     * @param propPoint     属性点\r\n     */\r\n    initData: function(propValueInit, propPoint){\r\n        this.propInit = propPoint;                      //初始属性点\r\n        this.propAdded = 0;                             //新分配的属性点\r\n        this.propTotal = this.propInit + this.propAdded;     //该属性总属性点 = propInit + propAdded\r\n        this.propValueInit = propValueInit;             //初始属性值\r\n\r\n        this.propValue = propValueInit;\r\n        this.propValueLabel.string = propValueInit;\r\n        this.propPointLabel.string = propPoint;\r\n\r\n        this.buttonInteraction();\r\n    },\r\n\r\n    /**\r\n     * 重置自身，响应父级重新分配按钮\r\n     */\r\n    resetProp: function(){\r\n        this.initData(this.propValueInit, this.propInit);\r\n        this.buttonInteraction();\r\n    },\r\n\r\n    /**\r\n     * 监听操作结果，预判断设置按钮交互状态\r\n     */\r\n    buttonInteraction: function(){\r\n        //加\r\n        if(this.propMng.remainPoints < 0) this.propMng.remainPoints = 0;\r\n        switch (this.propMng.remainPoints){\r\n            case 0:\r\n                this.dealAllBtn.interactable = false;\r\n                this.add1Btn.interactable = false;\r\n                this.add3Btn.interactable = false;\r\n                break;\r\n            case 1:\r\n            case 2:\r\n                this.dealAllBtn.interactable = true;\r\n                this.add1Btn.interactable = true;\r\n                this.add3Btn.interactable = false;\r\n                break;\r\n            default:\r\n                this.dealAllBtn.interactable = true;\r\n                this.add1Btn.interactable = true;\r\n                this.add3Btn.interactable = true;\r\n                break;\r\n        }\r\n        //减\r\n        if(this.propAdded < 0) this.propAdded = 0;\r\n        switch(this.propAdded){\r\n            case 0:\r\n                this.cut1Btn.interactable = false;\r\n                this.cut3Btn.interactable = false;\r\n                break;\r\n            case 1:\r\n            case 2:\r\n                this.cut1Btn.interactable = true;\r\n                this.cut3Btn.interactable = false;\r\n                break;\r\n            default:\r\n                this.cut1Btn.interactable = true;\r\n                this.cut3Btn.interactable = true;\r\n                break;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 是否可以进行操作\r\n     * @param count\r\n     * @returns {boolean}\r\n     */\r\n    canDo: function(count){\r\n        if(count > 0) return this.propMng.remainPoints >= count ;\r\n        else if(count < 0) {\r\n            count = Math.abs(count);\r\n            return this.propAdded >= count;\r\n        }\r\n    },\r\n\r\n    dealAll: function(){\r\n        this.propValueCalculate(this.propMng.remainPoints);\r\n    },\r\n\r\n    add1Point: function(){\r\n        this.propValueCalculate(1);\r\n    },\r\n\r\n    add3Point: function(){\r\n        this.propValueCalculate(3);\r\n    },\r\n\r\n    cut1Point: function(){\r\n        this.propValueCalculate(-1);\r\n    },\r\n\r\n    cut3Point: function(){\r\n        this.propValueCalculate(-3);\r\n    },\r\n\r\n    propValueCalculate: function(count){\r\n        if(this.canDo(count)){\r\n            //计算属性点\r\n            this.propAdded += count;\r\n            this.propTotal = this.propInit + this.propAdded;\r\n            this.propMng.changeRemainPoints(count);\r\n            //计算属性点改变后的属性值\r\n            this.propValue = this.propMng.getPropValue(this.propType, this.propTotal);\r\n            //Label刷新\r\n            this.propValueLabel.string = this.propValue;\r\n            this.propPointLabel.string = this.propTotal;\r\n\r\n            this.propMng.onButtonEvent();\r\n        }\r\n    }\r\n});\r\n"
  ]
}